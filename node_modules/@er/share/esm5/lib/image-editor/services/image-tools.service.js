/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { forwardRef, Inject, Injectable } from '@angular/core';
import { Ng2ImgMaxService } from 'ng2-img-max';
import { Subject } from 'rxjs';
import { ImgCropService } from './img-crop.service';
import { ImgResizeExactService } from './img-resize-exact.service';
import * as i0 from "@angular/core";
import * as i1 from "./img-resize-exact.service";
import * as i2 from "ng2-img-max/dist/src/ng2-img-max.service";
import * as i3 from "./img-crop.service";
var ImageToolsService = /** @class */ (function () {
    function ImageToolsService(imgResizeExactService, ng2ImgMaxService, imgCropService) {
        this.imgResizeExactService = imgResizeExactService;
        this.ng2ImgMaxService = ng2ImgMaxService;
        this.imgCropService = imgCropService;
    }
    /**
     * @param {?} files
     * @param {?} maxSizeInMB
     * @param {?=} ignoreAlpha
     * @param {?=} logExecutionTime
     * @return {?}
     */
    ImageToolsService.prototype.compress = /**
     * @param {?} files
     * @param {?} maxSizeInMB
     * @param {?=} ignoreAlpha
     * @param {?=} logExecutionTime
     * @return {?}
     */
    function (files, maxSizeInMB, ignoreAlpha, logExecutionTime) {
        if (ignoreAlpha === void 0) { ignoreAlpha = false; }
        if (logExecutionTime === void 0) { logExecutionTime = false; }
        return this.ng2ImgMaxService.compress(files, maxSizeInMB, ignoreAlpha, logExecutionTime);
    };
    /**
     * @param {?} files
     * @param {?} maxWidth
     * @param {?} maxHeight
     * @param {?=} logExecutionTime
     * @return {?}
     */
    ImageToolsService.prototype.resize = /**
     * @param {?} files
     * @param {?} maxWidth
     * @param {?} maxHeight
     * @param {?=} logExecutionTime
     * @return {?}
     */
    function (files, maxWidth, maxHeight, logExecutionTime) {
        if (logExecutionTime === void 0) { logExecutionTime = false; }
        return this.ng2ImgMaxService.resize(files, maxWidth, maxHeight, logExecutionTime);
    };
    /**
     * @param {?} files
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} startX
     * @param {?=} startY
     * @return {?}
     */
    ImageToolsService.prototype.crop = /**
     * @param {?} files
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} startX
     * @param {?=} startY
     * @return {?}
     */
    function (files, toWidth, toHeight, startX, startY) {
        var _this = this;
        if (startX === void 0) { startX = 0; }
        if (startY === void 0) { startY = 0; }
        /** @type {?} */
        var croppedFileSubject = new Subject();
        files.forEach(function (file) {
            _this.cropImage(file, toWidth, toHeight, startX, startY).subscribe(function (value) {
                croppedFileSubject.next(value);
            }, function (error) {
                croppedFileSubject.error(error);
            });
        });
        return croppedFileSubject.asObservable();
    };
    /**
     * @param {?} files
     * @param {?} toWidth
     * @param {?} toHeight
     * @return {?}
     */
    ImageToolsService.prototype.resizeExactCrop = /**
     * @param {?} files
     * @param {?} toWidth
     * @param {?} toHeight
     * @return {?}
     */
    function (files, toWidth, toHeight) {
        var _this = this;
        /** @type {?} */
        var resizedFileSubject = new Subject();
        files.forEach(function (file) {
            _this.resizeExactCropImage(file, toWidth, toHeight).subscribe(function (value) {
                resizedFileSubject.next(value);
            }, function (error) {
                resizedFileSubject.error(error);
            });
        });
        return resizedFileSubject.asObservable();
    };
    /**
     * @param {?} files
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} fillColor
     * @return {?}
     */
    ImageToolsService.prototype.resizeExactFill = /**
     * @param {?} files
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} fillColor
     * @return {?}
     */
    function (files, toWidth, toHeight, fillColor) {
        var _this = this;
        /** @type {?} */
        var resizedFileSubject = new Subject();
        files.forEach(function (file) {
            _this.resizeExactFillImage(file, toWidth, toHeight, fillColor).subscribe(function (value) {
                resizedFileSubject.next(value);
            }, function (error) {
                resizedFileSubject.error(error);
            });
        });
        return resizedFileSubject.asObservable();
    };
    /**
     * @param {?} file
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} fillColor
     * @return {?}
     */
    ImageToolsService.prototype.resizeExactFillImage = /**
     * @param {?} file
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} fillColor
     * @return {?}
     */
    function (file, toWidth, toHeight, fillColor) {
        return this.imgResizeExactService.resizeExactFill(file, toWidth, toHeight, fillColor);
    };
    /**
     * @param {?} file
     * @param {?} toWidth
     * @param {?} toHeight
     * @return {?}
     */
    ImageToolsService.prototype.resizeExactCropImage = /**
     * @param {?} file
     * @param {?} toWidth
     * @param {?} toHeight
     * @return {?}
     */
    function (file, toWidth, toHeight) {
        return this.imgResizeExactService.resizeExactCrop(file, toWidth, toHeight);
    };
    /**
     * @param {?} file
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} startX
     * @param {?=} startY
     * @return {?}
     */
    ImageToolsService.prototype.cropImage = /**
     * @param {?} file
     * @param {?} toWidth
     * @param {?} toHeight
     * @param {?=} startX
     * @param {?=} startY
     * @return {?}
     */
    function (file, toWidth, toHeight, startX, startY) {
        if (startX === void 0) { startX = 0; }
        if (startY === void 0) { startY = 0; }
        return this.imgCropService.cropImage(file, toWidth, toHeight, startX, startY);
    };
    /**
     * @param {?} file
     * @param {?} maxSizeInMB
     * @param {?=} ignoreAlpha
     * @param {?=} logExecutionTime
     * @return {?}
     */
    ImageToolsService.prototype.compressImage = /**
     * @param {?} file
     * @param {?} maxSizeInMB
     * @param {?=} ignoreAlpha
     * @param {?=} logExecutionTime
     * @return {?}
     */
    function (file, maxSizeInMB, ignoreAlpha, logExecutionTime) {
        if (ignoreAlpha === void 0) { ignoreAlpha = false; }
        if (logExecutionTime === void 0) { logExecutionTime = false; }
        return this.ng2ImgMaxService.compressImage(file, maxSizeInMB, ignoreAlpha, logExecutionTime);
    };
    /**
     * @param {?} file
     * @param {?} maxWidth
     * @param {?} maxHeight
     * @param {?=} logExecutionTime
     * @return {?}
     */
    ImageToolsService.prototype.resizeImage = /**
     * @param {?} file
     * @param {?} maxWidth
     * @param {?} maxHeight
     * @param {?=} logExecutionTime
     * @return {?}
     */
    function (file, maxWidth, maxHeight, logExecutionTime) {
        if (logExecutionTime === void 0) { logExecutionTime = false; }
        return this.ng2ImgMaxService.resizeImage(file, maxWidth, maxHeight, logExecutionTime);
    };
    /**
     * @param {?} image
     * @return {?}
     */
    ImageToolsService.prototype.getEXIFOrientedImage = /**
     * @param {?} image
     * @return {?}
     */
    function (image) {
        return this.ng2ImgMaxService.getEXIFOrientedImage(image);
    };
    ImageToolsService.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] }
    ];
    /** @nocollapse */
    ImageToolsService.ctorParameters = function () { return [
        { type: ImgResizeExactService, decorators: [{ type: Inject, args: [forwardRef(function () { return ImgResizeExactService; }),] }] },
        { type: Ng2ImgMaxService, decorators: [{ type: Inject, args: [forwardRef(function () { return Ng2ImgMaxService; }),] }] },
        { type: ImgCropService, decorators: [{ type: Inject, args: [forwardRef(function () { return ImgCropService; }),] }] }
    ]; };
    /** @nocollapse */ ImageToolsService.ngInjectableDef = i0.defineInjectable({ factory: function ImageToolsService_Factory() { return new ImageToolsService(i0.inject(i1.ImgResizeExactService), i0.inject(i2.Ng2ImgMaxService), i0.inject(i3.ImgCropService)); }, token: ImageToolsService, providedIn: "root" });
    return ImageToolsService;
}());
export { ImageToolsService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ImageToolsService.prototype.imgResizeExactService;
    /**
     * @type {?}
     * @private
     */
    ImageToolsService.prototype.ng2ImgMaxService;
    /**
     * @type {?}
     * @private
     */
    ImageToolsService.prototype.imgCropService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1hZ2UtdG9vbHMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Blci9zaGFyZS8iLCJzb3VyY2VzIjpbImxpYi9pbWFnZS1lZGl0b3Ivc2VydmljZXMvaW1hZ2UtdG9vbHMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUM3QyxPQUFPLEVBQWEsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQ3pDLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUNsRCxPQUFPLEVBQUMscUJBQXFCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQzs7Ozs7QUFFakU7SUFJRSwyQkFBcUUscUJBQTRDLEVBQ2pELGdCQUFrQyxFQUNwQyxjQUE4QjtRQUZ2QiwwQkFBcUIsR0FBckIscUJBQXFCLENBQXVCO1FBQ2pELHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFDcEMsbUJBQWMsR0FBZCxjQUFjLENBQWdCO0lBQzVGLENBQUM7Ozs7Ozs7O0lBRU0sb0NBQVE7Ozs7Ozs7SUFBZixVQUFnQixLQUFhLEVBQUUsV0FBbUIsRUFBRSxXQUE0QixFQUFFLGdCQUFpQztRQUEvRCw0QkFBQSxFQUFBLG1CQUE0QjtRQUFFLGlDQUFBLEVBQUEsd0JBQWlDO1FBQ2pILE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzNGLENBQUM7Ozs7Ozs7O0lBRU0sa0NBQU07Ozs7Ozs7SUFBYixVQUFjLEtBQWEsRUFBRSxRQUFnQixFQUFFLFNBQWlCLEVBQUUsZ0JBQWlDO1FBQWpDLGlDQUFBLEVBQUEsd0JBQWlDO1FBQ2pHLE9BQU8sSUFBSSxDQUFDLGdCQUFn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QU0sU0FBQyxVQUFVLENBQUMsY0FBTSxPQUFBLGdCQUFnQixFQUFoQixDQUFnQixDQUFDO2dCQVJoRCxjQUFjLHVCQVNQLE1BQU0sU0FBQyxVQUFVLENBQUMsY0FBTSxPQUFBLGNBQWMsRUFBZCxDQUFjLENBQUM7Ozs0QkFadEQ7Q0FrRkMsQUE1RUQsSUE0RUM7U0F6RVksaUJBQWlCOzs7Ozs7SUFDaEIsa0RBQXFHOzs7OztJQUNyRyw2Q0FBc0Y7Ozs7O0lBQ3RGLDJDQUFnRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Zm9yd2FyZFJlZiwgSW5qZWN0LCBJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7TmcySW1nTWF4U2VydmljZX0gZnJvbSAnbmcyLWltZy1tYXgnO1xuaW1wb3J0IHtPYnNlcnZhYmxlLCBTdWJqZWN0fSBmcm9tICdyeGpzJztcbmltcG9ydCB7SW1nQ3JvcFNlcnZpY2V9IGZyb20gJy4vaW1nLWNyb3Auc2VydmljZSc7XG5pbXBvcnQge0ltZ1Jlc2l6ZUV4YWN0U2VydmljZX0gZnJvbSAnLi9pbWctcmVzaXplLWV4YWN0LnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZShcbiAge3Byb3ZpZGVkSW46ICdyb290J31cbilcbmV4cG9ydCBjbGFzcyBJbWFnZVRvb2xzU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoZm9yd2FyZFJlZigoKSA9PiBJbWdSZXNpemVFeGFjdFNlcnZpY2UpKSBwcml2YXRlIGltZ1Jlc2l6ZUV4YWN0U2VydmljZTogSW1nUmVzaXplRXhhY3RTZXJ2aWNlLFxuICAgICAgICAgICAgICBASW5qZWN0KGZvcndhcmRSZWYoKCkgPT4gTmcySW1nTWF4U2VydmljZSkpIHByaXZhdGUgbmcySW1nTWF4U2VydmljZTogTmcySW1nTWF4U2VydmljZSxcbiAgICAgICAgICAgICAgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IEltZ0Nyb3BTZXJ2aWNlKSkgcHJpdmF0ZSBpbWdDcm9wU2VydmljZTogSW1nQ3JvcFNlcnZpY2UpIHtcbiAgfVxuXG4gIHB1YmxpYyBjb21wcmVzcyhmaWxlczogRmlsZVtdLCBtYXhTaXplSW5NQjogbnVtYmVyLCBpZ25vcmVBbHBoYTogYm9vbGVhbiA9IGZhbHNlLCBsb2dFeGVjdXRpb25UaW1lOiBib29sZWFuID0gZmFsc2UpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm5nMkltZ01heFNlcnZpY2UuY29tcHJlc3MoZmlsZXMsIG1heFNpemVJbk1CLCBpZ25vcmVBbHBoYSwgbG9nRXhlY3V0aW9uVGltZSk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGZpbGVzOiBGaWxlW10sIG1heFdpZHRoOiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyLCBsb2dFeGVjdXRpb25UaW1lOiBib29sZWFuID0gZmFsc2UpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm5nMkltZ01heFNlcnZpY2UucmVzaXplKGZpbGVzLCBtYXhXaWR0aCwgbWF4SGVpZ2h0LCBsb2dFeGVjdXRpb25UaW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBjcm9wKGZpbGVzOiBGaWxlW10sIHRvV2lkdGg6IG51bWJlciwgdG9IZWlnaHQ6IG51bWJlciwgc3RhcnRYOiBudW1iZXIgPSAwLCBzdGFydFk6IG51bWJlciA9IDApOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IGNyb3BwZWRGaWxlU3ViamVjdDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICAgIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIHRoaXMuY3JvcEltYWdlKGZpbGUsIHRvV2lkdGgsIHRvSGVpZ2h0LCBzdGFydFgsIHN0YXJ0WSkuc3Vic2NyaWJlKCh2YWx1ZSkgPT4ge1xuICAgICAgICBjcm9wcGVkRmlsZVN1YmplY3QubmV4dCh2YWx1ZSk7XG4gICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgIGNyb3BwZWRGaWxlU3ViamVjdC5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gY3JvcHBlZEZpbGVTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZUV4YWN0Q3JvcChmaWxlczogRmlsZVtdLCB0b1dpZHRoOiBudW1iZXIsIHRvSGVpZ2h0OiBudW1iZXIpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IHJlc2l6ZWRGaWxlU3ViamVjdDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICAgIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIHRoaXMucmVzaXplRXhhY3RDcm9wSW1hZ2UoZmlsZSwgdG9XaWR0aCwgdG9IZWlnaHQpLnN1YnNjcmliZSgodmFsdWUpID0+IHtcbiAgICAgICAgcmVzaXplZEZpbGVTdWJqZWN0Lm5leHQodmFsdWUpO1xuICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICByZXNpemVkRmlsZVN1YmplY3QuZXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc2l6ZWRGaWxlU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemVFeGFjdEZpbGwoZmlsZXM6IEZpbGVbXSwgdG9XaWR0aDogbnVtYmVyLCB0b0hlaWdodDogbnVtYmVyLCBmaWxsQ29sb3I/OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IHJlc2l6ZWRGaWxlU3ViamVjdDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICAgIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIHRoaXMucmVzaXplRXhhY3RGaWxsSW1hZ2UoZmlsZSwgdG9XaWR0aCwgdG9IZWlnaHQsIGZpbGxDb2xvcikuc3Vic2NyaWJlKCh2YWx1ZSkgPT4ge1xuICAgICAgICByZXNpemVkRmlsZVN1YmplY3QubmV4dCh2YWx1ZSk7XG4gICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgIHJlc2l6ZWRGaWxlU3ViamVjdC5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzaXplZEZpbGVTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZUV4YWN0RmlsbEltYWdlKGZpbGU6IEZpbGUsIHRvV2lkdGg6IG51bWJlciwgdG9IZWlnaHQ6IG51bWJlciwgZmlsbENvbG9yPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5pbWdSZXNpemVFeGFjdFNlcnZpY2UucmVzaXplRXhhY3RGaWxsKGZpbGUsIHRvV2lkdGgsIHRvSGVpZ2h0LCBmaWxsQ29sb3IpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZUV4YWN0Q3JvcEltYWdlKGZpbGU6IEZpbGUsIHRvV2lkdGg6IG51bWJlciwgdG9IZWlnaHQ6IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaW1nUmVzaXplRXhhY3RTZXJ2aWNlLnJlc2l6ZUV4YWN0Q3JvcChmaWxlLCB0b1dpZHRoLCB0b0hlaWdodCk7XG4gIH1cblxuICBwdWJsaWMgY3JvcEltYWdlKGZpbGU6IEZpbGUsIHRvV2lkdGg6IG51bWJlciwgdG9IZWlnaHQ6IG51bWJlciwgc3RhcnRYOiBudW1iZXIgPSAwLCBzdGFydFk6IG51bWJlciA9IDApOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmltZ0Nyb3BTZXJ2aWNlLmNyb3BJbWFnZShmaWxlLCB0b1dpZHRoLCB0b0hlaWdodCwgc3RhcnRYLCBzdGFydFkpO1xuICB9XG5cbiAgcHVibGljIGNvbXByZXNzSW1hZ2UoZmlsZTogRmlsZSwgbWF4U2l6ZUluTUI6IG51bWJlciwgaWdub3JlQWxwaGE6IGJvb2xlYW4gPSBmYWxzZSwgbG9nRXhlY3V0aW9uVGltZTogYm9vbGVhbiA9IGZhbHNlKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5uZzJJbWdNYXhTZXJ2aWNlLmNvbXByZXNzSW1hZ2UoZmlsZSwgbWF4U2l6ZUluTUIsIGlnbm9yZUFscGhhLCBsb2dFeGVjdXRpb25UaW1lKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemVJbWFnZShmaWxlOiBGaWxlLCBtYXhXaWR0aDogbnVtYmVyLCBtYXhIZWlnaHQ6IG51bWJlciwgbG9nRXhlY3V0aW9uVGltZTogYm9vbGVhbiA9IGZhbHNlKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5uZzJJbWdNYXhTZXJ2aWNlLnJlc2l6ZUltYWdlKGZpbGUsIG1heFdpZHRoLCBtYXhIZWlnaHQsIGxvZ0V4ZWN1dGlvblRpbWUpO1xuICB9XG5cbiAgcHVibGljIGdldEVYSUZPcmllbnRlZEltYWdlKGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiB7XG4gICAgcmV0dXJuIHRoaXMubmcySW1nTWF4U2VydmljZS5nZXRFWElGT3JpZW50ZWRJbWFnZShpbWFnZSk7XG4gIH1cbn1cbiJdfQ==