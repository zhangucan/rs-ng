!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@er/utils"),require("elastic-builder"),require("@angular/animations"),require("ng-animate"),require("@er/types")):"function"==typeof define&&define.amd?define("@er/presets",["exports","@er/utils","elastic-builder","@angular/animations","ng-animate","@er/types"],t):t((e.er=e.er||{},e.er.presets={}),e.utils,e.esb,e.ng.animations,e.ngAnimate,e.types)}(this,function(e,i,o,t,n,c){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e){return e?(e instanceof Array&&1===e.length&&(e=e[0]),{success:!0,content:e}):{success:!1}},u=function(e){if(e&&e.hasOwnProperty("_id")){var t=e._id;return delete e._id,{success:!0,content:r({id:t},e)}}return{failure:!0,message:e}},a=function(e){return e&&"deleted"===e.result?{success:!0,content:e}:{failure:!0,message:e}},l=function(e){var t={};return t.success=e.hasOwnProperty("hits")||e.hasOwnProperty("aggregations"),t.success?(t.content={total:e.hits.total,items:e.hits.hits.map(function(e){return r({id:e._id},e._source)})},e.aggregations&&(t.content.aggs=e.aggregations),e.highlight&&(t.content.highlight=e.highlight)):t.error=e.error&&e.error.reason,t},d=function(e){return-1===e.indexOf("/")&&(e+="/type"),e},g={serverType:c.ApiServerType.ES,paramsKeys:{sort:"sort",from:"from",size:"size",order:"order",page:"page",to:"to",q:"q",query:"query",filter:"filter",globalFiler:"globalFiler",fields:"_source"},actions:{login:{uriResolver:"user",method:c.HttpMethod.GET,onResponse:s,notifySuccess:!0,successMessage:"登录成功"},logout:{uriResolver:"logout",notifySuccess:!1,onResponse:s,successMessage:"退出登录成功"},register:{uriResolver:"user",method:c.HttpMethod.POST,notifySuccess:!0,successMessage:"注册成功"},getById:{method:c.HttpMethod.POST,uriResolver:function(e){return e+"/_search"},payloadResolver:function(e,t){var n=o.requestBodySearch().query(o.boolQuery().must(o.termQuery("_id",t.id)));return t.fields&&n.source(t.fields),n.toJSON()},onResponse:function(e){return{success:!0,content:l(e).content.items[0]}}},getByIds:{method:c.HttpMethod.POST,uriResolver:function(e){return e+"/_search"},payloadResolver:function(e,t){var n=o.requestBodySearch().query(o.boolQuery().must(o.termsQuery("_id",t.id)));return t.fields&&n.source(t.fields),n.toJSON()},onResponse:function(e){return{success:!0,content:l(e).content.items}}},getByQuery:{method:c.HttpMethod.POST,payloadType:c.HttpRequestPayloadType.BODY,uriResolver:function(e){return e&&-1===e.toLowerCase().indexOf("_msearch")?e+"/_search":e},payloadResolver:function(e,t,n){var o=i.EsUtils.resolveRequestBody(t,n);return o.sort,o},onResponse:function(e){return e.responses?{success:!0,content:{items:e.responses.map(function(e){return l(e)})}}:l(e)}},create:{method:c.HttpMethod.POST,uriResolver:function(e){return d(e)+"?refresh"},payloadResolver:function(e,t){return delete t.id,delete t._index,delete t._type,t._createdTime=i.DateUtils.getFormattedDateTime(),t},onResponse:u,notifySuccess:!1,alertSuccess:!0,successMessage:"数据保存成功"},updateById:{method:c.HttpMethod.POST,payloadType:c.HttpRequestPayloadType.BODY,uriResolver:function(e,t){return d(e)+"/"+t.id+"/_update?refresh"},payloadResolver:function(e,t){return{script:{source:t.script,lang:"painless",params:t.params}}},onResponse:u,notifySuccess:!1,alertSuccess:!0,successMessage:"数据更新成功"},patchById:{method:c.HttpMethod.POST,payloadType:c.HttpRequestPayloadType.BODY,uriResolver:function(e,t){return d(e)+"/"+t.id+"/_update?refresh"},payloadResolver:function(e,t,n){return delete t.id,delete t._index,delete t._type,t._modifiedTime=i.DateUtils.getFormattedDateTime(),{doc:t}},onResponse:u,notifySuccess:!1,alertSuccess:!0,successMessage:"数据更新成功"},deleteById:{method:c.HttpMethod.DELETE,uriResolver:function(e,t){return d(e)+"/"+t+"?refresh"},payloadResolver:function(){return undefined},onResponse:a,notifySuccess:!1,alertSuccess:!1,successMessage:"数据删除成功"},deleteByQuery:{method:c.HttpMethod.POST,uriResolver:function(e){return e+"/_delete_by_query?refresh"},payloadResolver:function(e,t,n){return i.EsUtils.resolveRequestBody(t,n)},onResponse:a,notifySuccess:!1,alertSuccess:!0,successMessage:"批量数据删除成功"},batch:{method:c.HttpMethod.POST,uriResolver:function(){return"_bulk?refresh"},onResponse:function(e){return r({},e,{success:!e.hasOwnProperty("errors")})},notifySuccess:!1,alertSuccess:!0,successMessage:"批量操作成功"}}},p=function(e){return e},f=function(e){return e&&e.hasOwnProperty("id")?{success:!0,result:e.id}:{failure:!0,message:e}},O={serverType:c.ApiServerType.ER,paramsKeys:{sort:"_sort",order:"_order",from:"from",size:"size",page:"_page",to:"_end"},actions:{login:{uriResolver:function(){return"login"},method:c.HttpMethod.POST,notifySuccess:!0,successMessage:"登录成功",notifyFailure:!0,onResponse:p,onSuccess:function(e){return e.content||{}}},logout:{uriResolver:function(){return"logout"},notifySuccess:!1,onResponse:p},changePwd:{uriResolver:function(){return"user/updatePwd"},notifySuccess:!1,onResponse:p},register:{uriResolver:function(){return"user/reg"},method:c.HttpMethod.POST,notifySuccess:!0,successMessage:"注册成功"},getById:{uriResolver:function(e,t){return e+"/"+t},onResponse:function(e){return r({id:e._id},e._source)}},getByIds:{method:c.HttpMethod.GET,payloadType:c.HttpRequestPayloadType.PARAMS,payloadResolver:function(e,t,n){var o,i=t;if(0===i.length)throw new Error("id值为空");var r=n.paramsKeys;return(o={})[r.ids]=i,o[r.fields]=t.fields,o}},getByQuery:{method:c.HttpMethod.GET,payloadType:c.HttpRequestPayloadType.PARAMS,payloadResolver:function(e,t,n){var o="",i=t||{},r=(i.query,i.size),s=i.page;(r||s)&&(o.endsWith("&")||(o+="&"),o+=n.paramsKeys.size+"="+(r||10)+"&"+n.paramsKeys.page+"="+(s||1));var u=i.sort;if(u){o.endsWith("&")||(o+="&");var a="",l="";"string"==typeof u?o+=n.paramsKeys.sort+"="+u+"&"+n.paramsKeys.order+"="+c.Order.ASC:(Object.keys(u).map(function(e){a+=e+",",l+=u[e]+","}),o+=n.paramsKeys.sort+"="+a+"&"+n.paramsKeys.order+"="+l)}return o},onResponse:function(e){return e}},create:{method:c.HttpMethod.POST,onResponse:f,notifySuccess:!1,alertSuccess:!0,successMessage:"数据保存成功"},updateById:{method:c.HttpMethod.PUT,payloadType:c.HttpRequestPayloadType.BODY,uriResolver:function(e,t){return e+"/"+t.id},payloadResolver:function(e,t){return t.data},onResponse:f,notifySuccess:!1,alertSuccess:!0,successMessage:"数据更新成功"},patchById:{method:c.HttpMethod.PATCH,payloadType:c.HttpRequestPayloadType.BODY,uriResolver:function(e,t){return e+"/"+t.id},payloadResolver:function(e,t){return t},onResponse:f,notifySuccess:!0,successMessage:"数据更新成功"},deleteById:{method:c.HttpMethod.DELETE,uriResolver:function(e,t){return e+"/"+t},onResponse:function(e){return e&&0===Object.keys(e).length?{success:!0,result:{}}:{failure:!0,message:e}},notifySuccess:!0,successMessage:"数据删除成功"}}},h={bounce:n.bounce,flash:n.flash,pulse:n.pulse,rubberBand:n.rubberBand,shake:n.shake,swing:n.swing,tada:n.tada,wobble:n.wobble,jello:n.jello,bounceInDown:n.bounceInDown,bounceInLeft:n.bounceInLeft,bounceInRight:n.bounceInRight,bounceInUp:n.bounceInUp,bounceOutDown:n.bounceOutDown,bounceOutLeft:n.bounceOutLeft,bounceOutRight:n.bounceOutRight,bounceOutUp:n.bounceOutUp,fadeIn:n.fadeIn,fadeInDown:n.fadeInDown,fadeInLeft:n.fadeInLeft,fadeInRight:n.fadeInRight,fadeInUp:n.fadeInUp,fadeOut:n.fadeOut,fadeOutDown:n.fadeOutDown,fadeOutLeft:n.fadeOutLeft,fadeOutRight:n.fadeOutRight,fadeOutUp:n.fadeOutUp,slideInDown:n.slideInDown,slideInLeft:n.slideInLeft,slideInRight:n.slideInRight,slideInUp:n.slideInUp,slideOutDown:n.slideOutDown,slideOutLeft:n.slideOutLeft,slideOutRight:n.slideOutRight,slideOutUp:n.slideOutUp,flip:n.flip,flipInX:n.flipInX,flipInY:n.flipInY,flipOutX:n.flipOutX,flipOutY:n.flipOutY,lightSpeedIn:n.lightSpeedIn,lightSpeedOut:n.lightSpeedOut,rotateIn:n.rotateIn,rotateInDownLeft:n.rotateInDownLeft,rotateInDownRight:n.rotateInDownRight,rotateInUpLeft:n.rotateInUpLeft,rotateInUpRight:n.rotateInUpRight,rotateOut:n.rotateOut,rotateOutDownLeft:n.rotateOutDownLeft,rotateOutDownRight:n.rotateOutDownRight,rotateOutUpLeft:n.rotateOutUpLeft,rotateOutUpRight:n.rotateOutUpRight,jackInTheBox:n.jackInTheBox,hinge:n.hinge,rollIn:n.rollIn,rollOut:n.rollOut,zoomIn:n.zoomIn,zoomOut:n.zoomOut,zoomInDown:n.zoomInDown,zoomInLeft:n.zoomInLeft,zoomInRight:n.zoomInRight,zoomInUp:n.zoomInUp,zoomOutDown:n.zoomOutDown,zoomOutLeft:n.zoomOutLeft,zoomOutRight:n.zoomOutRight,zoomOutUp:n.zoomOutUp},m={bounce:t.trigger("bounce",[t.transition("* => *",t.useAnimation(n.bounce))]),flash:t.trigger("flash",[t.transition("* => *",t.useAnimation(n.flash))]),pulse:t.trigger("pulse",[t.transition("* => *",t.useAnimation(n.pulse))]),rubberBand:t.trigger("rubberBand",[t.transition("* => *",t.useAnimation(n.rubberBand))]),shake:t.trigger("shake",[t.transition("* => *",t.useAnimation(n.shake))]),swing:t.trigger("swing",[t.transition("* => *",t.useAnimation(n.swing))]),tada:t.trigger("tada",[t.transition("* => *",t.useAnimation(n.tada))]),wobble:t.trigger("wobble",[t.transition("* => *",t.useAnimation(n.wobble))]),jello:t.trigger("jello",[t.transition("* => *",t.useAnimation(n.jello))]),bounceIn:t.trigger("bounceIn",[t.transition("* => *",t.useAnimation(n.bounceIn))]),bounceInDown:t.trigger("bounceInDown",[t.transition("* => *",t.useAnimation(n.bounceInDown))]),bounceInLeft:t.trigger("bounceInLeft",[t.transition("* => *",t.useAnimation(n.bounceInLeft))]),bounceOut:t.trigger("bounceOut",[t.transition("* => *",t.useAnimation(n.bounceOut))]),bounceOutRight:t.trigger("bounceOutRight",[t.transition("* => *",t.useAnimation(n.bounceOutRight))]),bounceOutUp:t.trigger("bounceOutUp",[t.transition("* => *",t.useAnimation(n.bounceOutUp))]),fadeIn:t.trigger("fadeIn",[t.transition("* => *",t.useAnimation(n.fadeIn))]),fadeInDown:t.trigger("fadeInDown",[t.transition("* => *",t.useAnimation(n.fadeInDown))]),fadeInLeft:t.trigger("fadeInLeft",[t.transition("* => *",t.useAnimation(n.fadeInLeft))]),fadeOut:t.trigger("fadeOut",[t.transition("* => *",t.useAnimation(n.fadeOut))]),fadeOutUp:t.trigger("fadeOutUp",[t.transition("* => *",t.useAnimation(n.fadeOutUp))]),fadeOutRight:t.trigger("fadeOutRight",[t.transition("* => *",t.useAnimation(n.fadeOutRight))]),slideInDown:t.trigger("slideInDown",[t.transition("* => *",t.useAnimation(n.slideInDown))]),slideInLeft:t.trigger("slideInLeft",[t.transition("* => *",t.useAnimation(n.slideInLeft))]),slideOutUp:t.trigger("slideOutUp",[t.transition("* => *",t.useAnimation(n.slideOutUp))]),slideOutRight:t.trigger("slideOutRight",[t.transition("* => *",t.useAnimation(n.slideOutRight))]),flip:t.trigger("flip",[t.transition("* => *",t.useAnimation(n.flip))]),flipInX:t.trigger("flipInX",[t.transition("* => *",t.useAnimation(n.flipInX))]),flipInY:t.trigger("flipInY",[t.transition("* => *",t.useAnimation(n.flipInY))]),flipOutX:t.trigger("flipOutX",[t.transition("* => *",t.useAnimation(n.flipOutX))]),flipOutY:t.trigger("flipOutY",[t.transition("* => *",t.useAnimation(n.flipOutY))]),lightSpeedIn:t.trigger("lightSpeedIn",[t.transition("* => *",t.useAnimation(n.lightSpeedIn))]),lightSpeedOut:t.trigger("lightSpeedOut",[t.transition("* => *",t.useAnimation(n.lightSpeedOut))]),rotateIn:t.trigger("rotateIn",[t.transition("* => *",t.useAnimation(n.rotateIn))]),rotateInDownLeft:t.trigger("rotateInDownLeft",[t.transition("* => *",t.useAnimation(n.rotateInDownLeft))]),rotateInUpRight:t.trigger("rotateInUpRight",[t.transition("* => *",t.useAnimation(n.rotateInUpRight))]),rotateOut:t.trigger("rotateOut",[t.transition("* => *",t.useAnimation(n.rotateOut))]),rotateOutUpLeft:t.trigger("rotateOutUpLeft",[t.transition("* => *",t.useAnimation(n.rotateOutUpLeft))]),rotateOutDownRight:t.trigger("rotateOutDownRight",[t.transition("* => *",t.useAnimation(n.rotateOutDownRight))]),hinge:t.trigger("hinge",[t.transition("* => *",t.useAnimation(n.hinge))]),jackInTheBox:t.trigger("jackInTheBox",[t.transition("* => *",t.useAnimation(n.jackInTheBox))]),rollIn:t.trigger("rollIn",[t.transition("* => *",t.useAnimation(n.rollIn))]),rollOut:t.trigger("rollOut",[t.transition("* => *",t.useAnimation(n.rollOut))]),zoomIn:t.trigger("zoomIn",[t.transition("* => *",t.useAnimation(n.zoomIn))]),zoomInLeft:t.trigger("zoomInLeft",[t.transition("* => *",t.useAnimation(n.zoomInLeft))]),zoomInDown:t.trigger("zoomInDown",[t.transition("* => *",t.useAnimation(n.zoomInDown))]),zoomOut:t.trigger("zoomOut",[t.transition("* => *",t.useAnimation(n.zoomOut))]),zoomOutUp:t.trigger("zoomOutUp",[t.transition("* => *",t.useAnimation(n.zoomOutUp))]),zoomOutRight:t.trigger("zoomOutRight",[t.transition("* => *",t.useAnimation(n.zoomOutRight))])},I={dataType:c.DataType.STRING,maxLength:20};e.MockServerApiRequestOptions={},e.EsServerApiRequestOptions=g,e.ErServerApiRequestOptions=O,e.ANIMATION_NAMES=h,e.ANIMATIONS=m,e.DEFAULT_API_REQUEST_OPTIONS={notifyFailure:!0},e.DEFAULT_BUTTON_PROPS={iconPos:"left",type:"button"},e.DEFAULT_FIELD_PROPS=I,e.DEFAULT_HTTP_REQUEST_OPTIONS={notifySuccess:!1,successMessage:""},e.DEFAULT_INIT_HTTP_STATE={label:"加载中...",icon:"fa-cog fa-spin"},e.DEFAULT_NAV_EXTRAS={queryParamsHandling:"merge",preserveFragment:!0},e.DEFAULT_ROOT_ROUTER_OPTIONS={useHash:!0,onSameUrlNavigation:"reload",enableTracing:!1},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=er-presets.umd.min.js.map