/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output, Renderer2, ViewChild } from '@angular/core';
import { BaseComponent } from '@er/core';
import { StateNames } from '@er/types';
import { ConfigUtils, StatesUtils } from '@er/utils';
import { ScrollPanel } from 'primeng/primeng';
import { filter } from 'rxjs/operators';
/** @enum {number} */
const MenuOrientation = {
    STATIC: 0,
    OVERLAY: 1,
    SLIM: 2,
    HORIZONTAL: 3,
};
MenuOrientation[MenuOrientation.STATIC] = 'STATIC';
MenuOrientation[MenuOrientation.OVERLAY] = 'OVERLAY';
MenuOrientation[MenuOrientation.SLIM] = 'SLIM';
MenuOrientation[MenuOrientation.HORIZONTAL] = 'HORIZONTAL';
export class PngAdminWorkSpaceComponent extends BaseComponent {
    /**
     * @param {?} renderer
     * @param {?} cd
     */
    constructor(renderer, cd) {
        super();
        this.renderer = renderer;
        this.cd = cd;
        this.menuOrientation = MenuOrientation.STATIC;
        this.darkMenu = true;
        this.onInitMenu = new EventEmitter();
        this.profileMode = 'inline';
        this.rootMenuToggleStateName = '$rootMenuToggler';
        this.templateNames = {
            topbar: 'topbar',
            header: 'header',
            main: 'main',
            footer: 'footer',
            profile: 'profile',
            settings: 'settings',
            messages: 'messages',
            notifications: 'notifications',
            search: 'search'
        };
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.onInitMenu.emit();
        this.$subscriptions = StatesUtils.observe(StateNames.menu, this.rootMenuToggleStateName)
            .pipe(filter(state => state !== undefined))
            .subscribe(() => this._toggleMainMenu());
        this.appTitle = this.appTitle || ConfigUtils.getConfig().appTitle;
        this.appName = this.appName || ConfigUtils.getConfig().appName;
        this.appLogo = this.appLogo || ConfigUtils.getConfig().appLogo;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout(() => {
            this.layoutMenuScrollerViewChild.moveBar();
        }, 100);
    }
    /**
     * @return {?}
     */
    onLayoutClick() {
        if (!this.topbarItemClick) {
            this.activeTopbarItem = null;
            this.topbarMenuActive = false;
        }
        if (!this.menuClick) {
            if (this.isHorizontal() || this.isSlim()) {
                this.resetMenu = true;
            }
            if (this.overlayMenuActive || this.staticMenuMobileActive) {
                this.hideOverlayMenu();
            }
            this.menuHoverActive = false;
        }
        this.topbarItemClick = false;
        this.menuClick = false;
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMenuClick($event) {
        this.menuClick = true;
        this.resetMenu = false;
        if (!this.isHorizontal()) {
            setTimeout(() => {
                this.layoutMenuScrollerViewChild.moveBar();
            }, 450);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onTopbarMenuButtonClick(event) {
        this.topbarItemClick = true;
        this.topbarMenuActive = !this.topbarMenuActive;
        this.hideOverlayMenu();
        event.preventDefault();
    }
    /**
     * @param {?} event
     * @param {?} item
     * @return {?}
     */
    onTopbarItemClick(event, item) {
        this.topbarItemClick = true;
        if (this.activeTopbarItem === item) {
            this.activeTopbarItem = null;
        }
        else {
            this.activeTopbarItem = item;
        }
        event.preventDefault();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onTopbarSubItemClick(event) {
        event.preventDefault();
    }
    /**
     * @return {?}
     */
    hideOverlayMenu() {
        this.rotateMenuButton = false;
        this.overlayMenuActive = false;
        this.staticMenuMobileActive = false;
    }
    /**
     * @return {?}
     */
    isTablet() {
        /** @type {?} */
        const width = window.innerWidth;
        return width <= 1024 && width > 640;
    }
    /**
     * @return {?}
     */
    isDesktop() {
        return window.innerWidth > 1024;
    }
    /**
     * @return {?}
     */
    isMobile() {
        return window.innerWidth <= 640;
    }
    /**
     * @return {?}
     */
    isOverlay() {
        return this.menuOrientation === MenuOrientation.OVERLAY;
    }
    /**
     * @return {?}
     */
    isHorizontal() {
        return this.menuOrientation === MenuOrientation.HORIZONTAL;
    }
    /**
     * @return {?}
     */
    isSlim() {
        return this.menuOrientation === MenuOrientation.SLIM;
    }
    /**
     * @return {?}
     */
    changeToStaticMenu() {
        this.menuOrientation = MenuOrientation.STATIC;
    }
    /**
     * @return {?}
     */
    changeToOverlayMenu() {
        this.menuOrientation = MenuOrientation.OVERLAY;
    }
    /**
     * @return {?}
     */
    changeToHorizontalMenu() {
        this.menuOrientation = MenuOrientation.HORIZONTAL;
    }
    /**
     * @return {?}
     */
    changeToSlimMenu() {
        this.menuOrientation = MenuOrientation.SLIM;
    }
    /**
     * @private
     * @return {?}
     */
    _toggleMainMenu() {
        /** @type {?} */
        const menu = StatesUtils.getValue(StateNames.rootMenu);
        this.menuOrientation = menu && menu.orientation;
        this.darkMenu = menu && menu.dark;
        this.menuClick = true;
        this.rotateMenuButton = !this.rotateMenuButton;
        this.topbarMenuActive = false;
        if (this.menuOrientation === MenuOrientation.OVERLAY) {
            this.overlayMenuActive = !this.overlayMenuActive;
        }
        else {
            if (this.isDesktop()) {
                this.staticMenuDesktopInactive = !this.staticMenuDesktopInactive;
            }
            else {
                this.staticMenuMobileActive = !this.staticMenuMobileActive;
            }
        }
        this.cd.detectChanges();
    }
}
PngAdminWorkSpaceComponent.decorators = [
    { type: Component, args: [{
                selector: 'png-admin-work-space',
                template: "<div class=\"layout-wrapper\" (click)=\"onLayoutClick()\"\n     [ngClass]=\"{'menu-layout-static': !isOverlay(),\n                'menu-layout-overlay': isOverlay(),\n                'layout-menu-overlay-active': overlayMenuActive,\n                'menu-layout-horizontal': isHorizontal(),\n                'menu-layout-slim': isSlim(),\n                'layout-menu-static-inactive': staticMenuDesktopInactive,\n                'layout-menu-static-active': staticMenuMobileActive}\">\n\n  <png-ws-topbar></png-ws-topbar>\n\n  <div class=\"layout-menu-container\" [ngClass]=\"{'layout-menu-dark':darkMenu}\" (click)=\"onMenuClick($event)\">\n    <p-scrollPanel #layoutMenuScroller [style]=\"{height: '100%' }\">\n      <div class=\"menu-scroll-content\">\n        <png-ws-profile *ngIf=\"profileMode=='inline'&&!isHorizontal()\"></png-ws-profile>\n        <png-ws-main-menu [reset]=\"resetMenu\" [httpMenuTag]=\"httpMenuTag\"></png-ws-main-menu>\n      </div>\n    </p-scrollPanel>\n  </div>\n\n  <div class=\"layout-main\">\n    <ng-container *ngTemplateOutlet=\"template(templateNames.main)\"></ng-container>\n    <router-outlet></router-outlet>\n  </div>\n\n  <div class=\"layout-mask\"></div>\n\n  <png-ws-footer></png-ws-footer>\n\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush
            }] }
];
/** @nocollapse */
PngAdminWorkSpaceComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ChangeDetectorRef }
];
PngAdminWorkSpaceComponent.propDecorators = {
    menuOrientation: [{ type: Input }],
    darkMenu: [{ type: Input }],
    appName: [{ type: Input }],
    appTitle: [{ type: Input }],
    appLogo: [{ type: Input }],
    httpMenuTag: [{ type: Input }],
    onInitMenu: [{ type: Output }],
    layoutMenuScrollerViewChild: [{ type: ViewChild, args: ['layoutMenuScroller',] }]
};
if (false) {
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.menuOrientation;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.darkMenu;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.appName;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.appTitle;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.appLogo;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.httpMenuTag;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.onInitMenu;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.profileMode;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.rotateMenuButton;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.topbarMenuActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.overlayMenuActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.staticMenuDesktopInactive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.staticMenuMobileActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.layoutMenuScroller;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.menuClick;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.topbarItemClick;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.activeTopbarItem;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.resetMenu;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.menuHoverActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.rootMenuToggleStateName;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.layoutMenuScrollerViewChild;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.templateNames;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    PngAdminWorkSpaceComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL3ByaW1lbmcvIiwic291cmNlcyI6WyJsaWIvd29yay1zcGFjZS9jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFFTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUVMLE1BQU0sRUFDTixTQUFTLEVBQ1QsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFDdkMsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNyQyxPQUFPLEVBQUMsV0FBVyxFQUFFLFdBQVcsRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNuRCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDNUMsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLGdCQUFnQixDQUFDOzs7SUFHcEMsU0FBTTtJQUNOLFVBQU87SUFDUCxPQUFJO0lBQ0osYUFBVTs7Ozs7O0FBUVosTUFBTSxPQUFPLDBCQUEyQixTQUFRLGFBQWE7Ozs7O0lBd0QzRCxZQUFtQixRQUFtQixFQUFVLEVBQXFCO1FBQ25FLEtBQUssRUFBRSxDQUFDO1FBRFMsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUFVLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBdEQ1RCxvQkFBZSxHQUFvQixlQUFlLENBQUMsTUFBTSxDQUFDO1FBRTFELGFBQVEsR0FBRyxJQUFJLENBQUM7UUFVZixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUUxQyxnQkFBVyxHQUFxQixRQUFRLENBQUM7UUF3QnpDLDRCQUF1QixHQUFHLGtCQUFrQixDQUFDO1FBSTdDLGtCQUFhLEdBQUc7WUFDZCxNQUFNLEVBQUUsUUFBUTtZQUNoQixNQUFNLEVBQUUsUUFBUTtZQUNoQixJQUFJLEVBQUUsTUFBTTtZQUNa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QjtnQkFDaEMsMHVDQUF1QjtnQkFDdkIsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07YUFDaEQ7Ozs7WUFwQkMsU0FBUztZQU5ULGlCQUFpQjs7OzhCQTZCaEIsS0FBSzt1QkFFTCxLQUFLO3NCQUVMLEtBQUs7dUJBRUwsS0FBSztzQkFFTCxLQUFLOzBCQUVMLEtBQUs7eUJBRUwsTUFBTTswQ0E0Qk4sU0FBUyxTQUFDLG9CQUFvQjs7OztJQXhDL0IscURBQW1FOztJQUVuRSw4Q0FBeUI7O0lBRXpCLDZDQUF5Qjs7SUFFekIsOENBQTBCOztJQUUxQiw2Q0FBeUI7O0lBRXpCLGlEQUE2Qjs7SUFFN0IsZ0RBQTBDOztJQUUxQyxpREFBeUM7O0lBRXpDLHNEQUEwQjs7SUFFMUIsc0RBQTBCOztJQUUxQix1REFBMkI7O0lBRTNCLCtEQUFtQzs7SUFFbkMsNERBQWdDOztJQUVoQyx3REFBbUM7O0lBRW5DLCtDQUFtQjs7SUFFbkIscURBQXlCOztJQUV6QixzREFBc0I7O0lBRXRCLCtDQUFtQjs7SUFFbkIscURBQXlCOztJQUV6Qiw2REFBNkM7O0lBRTdDLGlFQUEwRTs7SUFFMUUsbURBVUU7O0lBRVUsOENBQTBCOzs7OztJQUFFLHdDQUE2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgUmVuZGVyZXIyLFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0Jhc2VDb21wb25lbnR9IGZyb20gJ0Blci9jb3JlJztcbmltcG9ydCB7U3RhdGVOYW1lc30gZnJvbSAnQGVyL3R5cGVzJztcbmltcG9ydCB7Q29uZmlnVXRpbHMsIFN0YXRlc1V0aWxzfSBmcm9tICdAZXIvdXRpbHMnO1xuaW1wb3J0IHtTY3JvbGxQYW5lbH0gZnJvbSAncHJpbWVuZy9wcmltZW5nJztcbmltcG9ydCB7ZmlsdGVyfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmVudW0gTWVudU9yaWVudGF0aW9uIHtcbiAgU1RBVElDLFxuICBPVkVSTEFZLFxuICBTTElNLFxuICBIT1JJWk9OVEFMXG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BuZy1hZG1pbi13b3JrLXNwYWNlJyxcbiAgdGVtcGxhdGVVcmw6ICd0cGwuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFBuZ0FkbWluV29ya1NwYWNlQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XG5cbiAgQElucHV0KCkgbWVudU9yaWVudGF0aW9uOiBNZW51T3JpZW50YXRpb24gPSBNZW51T3JpZW50YXRpb24uU1RBVElDO1xuXG4gIEBJbnB1dCgpIGRhcmtNZW51ID0gdHJ1ZTtcblxuICBASW5wdXQoKSBhcHBOYW1lOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgYXBwVGl0bGU6IHN0cmluZztcblxuICBASW5wdXQoKSBhcHBMb2dvOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgaHR0cE1lbnVUYWc6IHN0cmluZztcblxuICBAT3V0cHV0KCkgb25Jbml0TWVudSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBwcm9maWxlTW9kZTogJ3RvcCcgfCAnaW5saW5lJyA9ICdpbmxpbmUnO1xuXG4gIHJvdGF0ZU1lbnVCdXR0b246IGJvb2xlYW47XG5cbiAgdG9wYmFyTWVudUFjdGl2ZTogYm9vbGVhbjtcblxuICBvdmVybGF5TWVudUFjdGl2ZTogYm9vbGVhbjtcblxuICBzdGF0aWNNZW51RGVza3RvcEluYWN0aXZlOiBib29sZWFuO1xuXG4gIHN0YXRpY01lbnVNb2JpbGVBY3RpdmU6IGJvb2xlYW47XG5cbiAgbGF5b3V0TWVudVNjcm9sbGVyOiBIVE1MRGl2RWxlbWVudDtcblxuICBtZW51Q2xpY2s6IGJvb2xlYW47XG5cbiAgdG9wYmFySXRlbUNsaWNrOiBib29sZWFuO1xuXG4gIGFjdGl2ZVRvcGJhckl0ZW06IGFueTtcblxuICByZXNldE1lbnU6IGJvb2xlYW47XG5cbiAgbWVudUhvdmVyQWN0aXZlOiBib29sZWFuO1xuXG4gIHJvb3RNZW51VG9nZ2xlU3RhdGVOYW1lID0gJyRyb290TWVudVRvZ2dsZXInO1xuXG4gIEBWaWV3Q2hpbGQoJ2xheW91dE1lbnVTY3JvbGxlcicpIGxheW91dE1lbnVTY3JvbGxlclZpZXdDaGlsZDogU2Nyb2xsUGFuZWw7XG5cbiAgdGVtcGxhdGVOYW1lcyA9IHtcbiAgICB0b3BiYXI6ICd0b3BiYXInLFxuICAgIGhlYWRlcjogJ2hlYWRlcicsXG4gICAgbWFpbjogJ21haW4nLFxuICAgIGZvb3RlcjogJ2Zvb3RlcicsXG4gICAgcHJvZmlsZTogJ3Byb2ZpbGUnLFxuICAgIHNldHRpbmdzOiAnc2V0dGluZ3MnLFxuICAgIG1lc3NhZ2VzOiAnbWVzc2FnZXMnLFxuICAgIG5vdGlmaWNhdGlvbnM6ICdub3RpZmljYXRpb25zJyxcbiAgICBzZWFyY2g6ICdzZWFyY2gnXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHVibGljIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMub25Jbml0TWVudS5lbWl0KCk7XG4gICAgdGhpcy4kc3Vic2NyaXB0aW9ucyA9IFN0YXRlc1V0aWxzLm9ic2VydmUoU3RhdGVOYW1lcy5tZW51LCB0aGlzLnJvb3RNZW51VG9nZ2xlU3RhdGVOYW1lKVxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcihzdGF0ZSA9PiBzdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLl90b2dnbGVNYWluTWVudSgpKTtcbiAgICB0aGlzLmFwcFRpdGxlID0gdGhpcy5hcHBUaXRsZSB8fCBDb25maWdVdGlscy5nZXRDb25maWcoKS5hcHBUaXRsZTtcbiAgICB0aGlzLmFwcE5hbWUgPSB0aGlzLmFwcE5hbWUgfHwgQ29uZmlnVXRpbHMuZ2V0Q29uZmlnKCkuYXBwTmFtZTtcbiAgICB0aGlzLmFwcExvZ28gPSB0aGlzLmFwcExvZ28gfHwgQ29uZmlnVXRpbHMuZ2V0Q29uZmlnKCkuYXBwTG9nbztcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubGF5b3V0TWVudVNjcm9sbGVyVmlld0NoaWxkLm1vdmVCYXIoKTtcbiAgICB9LCAxMDApO1xuICB9XG5cbiAgb25MYXlvdXRDbGljaygpIHtcbiAgICBpZiAoIXRoaXMudG9wYmFySXRlbUNsaWNrKSB7XG4gICAgICB0aGlzLmFjdGl2ZVRvcGJhckl0ZW0gPSBudWxsO1xuICAgICAgdGhpcy50b3BiYXJNZW51QWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lbnVDbGljaykge1xuICAgICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkgfHwgdGhpcy5pc1NsaW0oKSkge1xuICAgICAgICB0aGlzLnJlc2V0TWVudSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm92ZXJsYXlNZW51QWN0aXZlIHx8IHRoaXMuc3RhdGljTWVudU1vYmlsZUFjdGl2ZSkge1xuICAgICAgICB0aGlzLmhpZGVPdmVybGF5TWVudSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1lbnVIb3ZlckFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMudG9wYmFySXRlbUNsaWNrID0gZmFsc2U7XG4gICAgdGhpcy5tZW51Q2xpY2sgPSBmYWxzZTtcbiAgfVxuXG4gIG9uTWVudUNsaWNrKCRldmVudCkge1xuICAgIHRoaXMubWVudUNsaWNrID0gdHJ1ZTtcbiAgICB0aGlzLnJlc2V0TWVudSA9IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5sYXlvdXRNZW51U2Nyb2xsZXJWaWV3Q2hpbGQubW92ZUJhcigpO1xuICAgICAgfSwgNDUwKTtcbiAgICB9XG4gIH1cblxuICBvblRvcGJhck1lbnVCdXR0b25DbGljayhldmVudCkge1xuICAgIHRoaXMudG9wYmFySXRlbUNsaWNrID0gdHJ1ZTtcbiAgICB0aGlzLnRvcGJhck1lbnVBY3RpdmUgPSAhdGhpcy50b3BiYXJNZW51QWN0aXZlO1xuXG4gICAgdGhpcy5oaWRlT3ZlcmxheU1lbnUoKTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBvblRvcGJhckl0ZW1DbGljayhldmVudCwgaXRlbSkge1xuICAgIHRoaXMudG9wYmFySXRlbUNsaWNrID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmFjdGl2ZVRvcGJhckl0ZW0gPT09IGl0ZW0pIHtcbiAgICAgIHRoaXMuYWN0aXZlVG9wYmFySXRlbSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWN0aXZlVG9wYmFySXRlbSA9IGl0ZW07XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIG9uVG9wYmFyU3ViSXRlbUNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIGhpZGVPdmVybGF5TWVudSgpIHtcbiAgICB0aGlzLnJvdGF0ZU1lbnVCdXR0b24gPSBmYWxzZTtcbiAgICB0aGlzLm92ZXJsYXlNZW51QWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5zdGF0aWNNZW51TW9iaWxlQWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBpc1RhYmxldCgpIHtcbiAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHJldHVybiB3aWR0aCA8PSAxMDI0ICYmIHdpZHRoID4gNjQwO1xuICB9XG5cbiAgaXNEZXNrdG9wKCkge1xuICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA+IDEwMjQ7XG4gIH1cblxuICBpc01vYmlsZSgpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPD0gNjQwO1xuICB9XG5cbiAgaXNPdmVybGF5KCkge1xuICAgIHJldHVybiB0aGlzLm1lbnVPcmllbnRhdGlvbiA9PT0gTWVudU9yaWVudGF0aW9uLk9WRVJMQVk7XG4gIH1cblxuICBpc0hvcml6b250YWwoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVudU9yaWVudGF0aW9uID09PSBNZW51T3JpZW50YXRpb24uSE9SSVpPTlRBTDtcbiAgfVxuXG4gIGlzU2xpbSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZW51T3JpZW50YXRpb24gPT09IE1lbnVPcmllbnRhdGlvbi5TTElNO1xuICB9XG5cbiAgY2hhbmdlVG9TdGF0aWNNZW51KCkge1xuICAgIHRoaXMubWVudU9yaWVudGF0aW9uID0gTWVudU9yaWVudGF0aW9uLlNUQVRJQztcbiAgfVxuXG4gIGNoYW5nZVRvT3ZlcmxheU1lbnUoKSB7XG4gICAgdGhpcy5tZW51T3JpZW50YXRpb24gPSBNZW51T3JpZW50YXRpb24uT1ZFUkxBWTtcbiAgfVxuXG4gIGNoYW5nZVRvSG9yaXpvbnRhbE1lbnUoKSB7XG4gICAgdGhpcy5tZW51T3JpZW50YXRpb24gPSBNZW51T3JpZW50YXRpb24uSE9SSVpPTlRBTDtcbiAgfVxuXG4gIGNoYW5nZVRvU2xpbU1lbnUoKSB7XG4gICAgdGhpcy5tZW51T3JpZW50YXRpb24gPSBNZW51T3JpZW50YXRpb24uU0xJTTtcbiAgfVxuXG4gIHByaXZhdGUgX3RvZ2dsZU1haW5NZW51KCkge1xuICAgIGNvbnN0IG1lbnUgPSBTdGF0ZXNVdGlscy5nZXRWYWx1ZShTdGF0ZU5hbWVzLnJvb3RNZW51KTtcbiAgICB0aGlzLm1lbnVPcmllbnRhdGlvbiA9IG1lbnUgJiYgbWVudS5vcmllbnRhdGlvbjtcbiAgICB0aGlzLmRhcmtNZW51ID0gbWVudSAmJiBtZW51LmRhcms7XG4gICAgdGhpcy5tZW51Q2xpY2sgPSB0cnVlO1xuICAgIHRoaXMucm90YXRlTWVudUJ1dHRvbiA9ICF0aGlzLnJvdGF0ZU1lbnVCdXR0b247XG4gICAgdGhpcy50b3BiYXJNZW51QWN0aXZlID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5tZW51T3JpZW50YXRpb24gPT09IE1lbnVPcmllbnRhdGlvbi5PVkVSTEFZKSB7XG4gICAgICB0aGlzLm92ZXJsYXlNZW51QWN0aXZlID0gIXRoaXMub3ZlcmxheU1lbnVBY3RpdmU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmlzRGVza3RvcCgpKSB7XG4gICAgICAgIHRoaXMuc3RhdGljTWVudURlc2t0b3BJbmFjdGl2ZSA9ICF0aGlzLnN0YXRpY01lbnVEZXNrdG9wSW5hY3RpdmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRpY01lbnVNb2JpbGVBY3RpdmUgPSAhdGhpcy5zdGF0aWNNZW51TW9iaWxlQWN0aXZlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxufVxuIl19