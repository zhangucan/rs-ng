/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';
import { BaseComponent } from '@er/core';
import { StateNames } from '@er/types';
import { StatesUtils } from '@er/utils';
import { ConfirmationService } from 'primeng/api';
import { filter } from 'rxjs/operators';
import { DEFAULT_CONFIRM_DIALOG_PROPS } from './defaults';
export class PngConfirmDialogComponent extends BaseComponent {
    /**
     * @param {?} confirmationService
     * @param {?} cd
     */
    constructor(confirmationService, cd) {
        super();
        this.confirmationService = confirmationService;
        this.cd = cd;
        this.options = {};
        this.onAccept = new EventEmitter();
        this.onReject = new EventEmitter();
        this.dlgOptions = {};
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.dlgOptions = Object.assign({}, DEFAULT_CONFIRM_DIALOG_PROPS, { header: this.header, content: this.content, acceptEvent: this.onAccept, rejectEvent: this.onReject }, this.options);
        this.$subscriptions = StatesUtils.observe(StateNames.confirm)
            .pipe(filter(state => state && state.open))
            .subscribe(state => {
            this.open(state);
        });
    }
    /**
     * @param {?=} options
     * @return {?}
     */
    open(options) {
        if (options) {
            this.dlgOptions = Object.assign({}, DEFAULT_CONFIRM_DIALOG_PROPS, options);
        }
        this.confirmationService.confirm(this.getConfirmation(this.dlgOptions));
        this.cd.detectChanges();
    }
    /**
     * @param {?} modal
     * @return {?}
     */
    getConfirmation(modal) {
        return {
            message: modal.content,
            icon: modal.icon,
            header: modal.header,
            acceptVisible: modal.acceptVisible,
            rejectVisible: modal.rejectVisible,
            acceptLabel: modal.acceptLabel,
            rejectLabel: modal.rejectLabel,
            accept: this.accept.bind(this),
            reject: this.reject.bind(this)
        };
    }
    /**
     * @return {?}
     */
    accept() {
        this.onAccept.emit();
        if (this.dlgOptions.onAccept) {
            this.dlgOptions.onAccept.call(this.dlgOptions.context, true);
        }
        StatesUtils.create(StateNames.confirm, {
            open: false,
            accept: true,
            reject: false
        });
    }
    /**
     * @return {?}
     */
    reject() {
        this.onReject.emit();
        if (this.options.onReject) {
            this.options.onReject.call(this.options.context, false);
        }
        StatesUtils.create(StateNames.confirm, {
            open: false,
            accept: false,
            reject: true
        });
    }
}
PngConfirmDialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'png-confirm-dialog',
                template: `
    <p-confirmDialog #dlg>
      <p-footer>
        <button type="button" class="ui-button-rounded ui-button-success" *ngIf="dlgOptions.acceptVisible" pButton icon="pi pi-check"
                [label]="dlgOptions.acceptLabel"
                (click)="dlg.accept()"></button>
        <button type="button" class="ui-button-rounded ui-button-danger" *ngIf="dlgOptions.rejectVisible" pButton icon="pi pi-times"
                [label]="dlgOptions.rejectLabel"
                (click)="dlg.reject()"></button>
      </p-footer>
    </p-confirmDialog>`,
                providers: [ConfirmationService],
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [""]
            }] }
];
/** @nocollapse */
PngConfirmDialogComponent.ctorParameters = () => [
    { type: ConfirmationService },
    { type: ChangeDetectorRef }
];
PngConfirmDialogComponent.propDecorators = {
    header: [{ type: Input }],
    content: [{ type: Input }],
    options: [{ type: Input }],
    onAccept: [{ type: Output }],
    onReject: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    PngConfirmDialogComponent.prototype.header;
    /** @type {?} */
    PngConfirmDialogComponent.prototype.content;
    /** @type {?} */
    PngConfirmDialogComponent.prototype.options;
    /** @type {?} */
    PngConfirmDialogComponent.prototype.onAccept;
    /** @type {?} */
    PngConfirmDialogComponent.prototype.onReject;
    /** @type {?} */
    PngConfirmDialogComponent.prototype.dlgOptions;
    /**
     * @type {?}
     * @private
     */
    PngConfirmDialogComponent.prototype.confirmationService;
    /**
     * @type {?}
     * @private
     */
    PngConfirmDialogComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL3ByaW1lbmcvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9jb25maXJtL2NvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLHVCQUF1QixFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN6SCxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ3ZDLE9BQU8sRUFBb0IsVUFBVSxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQ3hELE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDdEMsT0FBTyxFQUFlLG1CQUFtQixFQUFDLE1BQU0sYUFBYSxDQUFDO0FBQzlELE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUN0QyxPQUFPLEVBQUMsNEJBQTRCLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFvQnhELE1BQU0sT0FBTyx5QkFBMEIsU0FBUSxhQUFhOzs7OztJQVcxRCxZQUFvQixtQkFBd0MsRUFBVSxFQUFxQjtRQUN6RixLQUFLLEVBQUUsQ0FBQztRQURVLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFBVSxPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQVBsRixZQUFPLEdBQXNCLEVBQUUsQ0FBQztRQUUvQixhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNuQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUU3QyxlQUFVLEdBQXNCLEVBQUUsQ0FBQztJQUluQyxDQUFDOzs7O0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxVQUFVLHFCQUNWLDRCQUE0QixJQUMvQixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFDbkIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQ3JCLFdBQVcsRUFBRSxJ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c0JBQ0wsS0FBSzt1QkFFTCxNQUFNO3VCQUNOLE1BQU07Ozs7SUFMUCwyQ0FBd0I7O0lBQ3hCLDRDQUF5Qjs7SUFDekIsNENBQXlDOztJQUV6Qyw2Q0FBNkM7O0lBQzdDLDZDQUE2Qzs7SUFFN0MsK0NBQW1DOzs7OztJQUV2Qix3REFBZ0Q7Ozs7O0lBQUUsdUNBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtCYXNlQ29tcG9uZW50fSBmcm9tICdAZXIvY29yZSc7XG5pbXBvcnQge0NvbmZpcm1EaWFsb2dQcm9wLCBTdGF0ZU5hbWVzfSBmcm9tICdAZXIvdHlwZXMnO1xuaW1wb3J0IHtTdGF0ZXNVdGlsc30gZnJvbSAnQGVyL3V0aWxzJztcbmltcG9ydCB7Q29uZmlybWF0aW9uLCBDb25maXJtYXRpb25TZXJ2aWNlfSBmcm9tICdwcmltZW5nL2FwaSc7XG5pbXBvcnQge2ZpbHRlcn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtERUZBVUxUX0NPTkZJUk1fRElBTE9HX1BST1BTfSBmcm9tICcuL2RlZmF1bHRzJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwbmctY29uZmlybS1kaWFsb2cnLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxwLWNvbmZpcm1EaWFsb2cgI2RsZz5cbiAgICAgIDxwLWZvb3Rlcj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ1aS1idXR0b24tcm91bmRlZCB1aS1idXR0b24tc3VjY2Vzc1wiICpuZ0lmPVwiZGxnT3B0aW9ucy5hY2NlcHRWaXNpYmxlXCIgcEJ1dHRvbiBpY29uPVwicGkgcGktY2hlY2tcIlxuICAgICAgICAgICAgICAgIFtsYWJlbF09XCJkbGdPcHRpb25zLmFjY2VwdExhYmVsXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiZGxnLmFjY2VwdCgpXCI+PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidWktYnV0dG9uLXJvdW5kZWQgdWktYnV0dG9uLWRhbmdlclwiICpuZ0lmPVwiZGxnT3B0aW9ucy5yZWplY3RWaXNpYmxlXCIgcEJ1dHRvbiBpY29uPVwicGkgcGktdGltZXNcIlxuICAgICAgICAgICAgICAgIFtsYWJlbF09XCJkbGdPcHRpb25zLnJlamVjdExhYmVsXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiZGxnLnJlamVjdCgpXCI+PC9idXR0b24+XG4gICAgICA8L3AtZm9vdGVyPlxuICAgIDwvcC1jb25maXJtRGlhbG9nPmAsXG4gIHByb3ZpZGVyczogW0NvbmZpcm1hdGlvblNlcnZpY2VdLFxuICBzdHlsZVVybHM6IFsnc3R5bGVzLnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgUG5nQ29uZmlybURpYWxvZ0NvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIEBJbnB1dCgpIGhlYWRlcjogc3RyaW5nO1xuICBASW5wdXQoKSBjb250ZW50OiBzdHJpbmc7XG4gIEBJbnB1dCgpIG9wdGlvbnM6IENvbmZpcm1EaWFsb2dQcm9wID0ge307XG5cbiAgQE91dHB1dCgpIG9uQWNjZXB0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBvblJlamVjdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIGRsZ09wdGlvbnM6IENvbmZpcm1EaWFsb2dQcm9wID0ge307XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maXJtYXRpb25TZXJ2aWNlOiBDb25maXJtYXRpb25TZXJ2aWNlLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmRsZ09wdGlvbnMgPSB7XG4gICAgICAuLi5ERUZBVUxUX0NPTkZJUk1fRElBTE9HX1BST1BTLFxuICAgICAgaGVhZGVyOiB0aGlzLmhlYWRlcixcbiAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCxcbiAgICAgIGFjY2VwdEV2ZW50OiB0aGlzLm9uQWNjZXB0LFxuICAgICAgcmVqZWN0RXZlbnQ6IHRoaXMub25SZWplY3QsXG4gICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy4kc3Vic2NyaXB0aW9ucyA9IFN0YXRlc1V0aWxzLm9ic2VydmUoU3RhdGVOYW1lcy5jb25maXJtKVxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcihzdGF0ZSA9PiBzdGF0ZSAmJiBzdGF0ZS5vcGVuKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShzdGF0ZSA9PiB7XG4gICAgICAgIHRoaXMub3BlbihzdGF0ZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIG9wZW4ob3B0aW9ucz8pIHtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgdGhpcy5kbGdPcHRpb25zID0ge1xuICAgICAgICAuLi5ERUZBVUxUX0NPTkZJUk1fRElBTE9HX1BST1BTLFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLmNvbmZpcm1hdGlvblNlcnZpY2UuY29uZmlybSh0aGlzLmdldENvbmZpcm1hdGlvbih0aGlzLmRsZ09wdGlvbnMpKTtcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIGdldENvbmZpcm1hdGlvbihtb2RhbDogQ29uZmlybURpYWxvZ1Byb3ApOiBDb25maXJtYXRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICBtZXNzYWdlOiBtb2RhbC5jb250ZW50LFxuICAgICAgaWNvbjogbW9kYWwuaWNvbixcbiAgICAgIGhlYWRlcjogbW9kYWwuaGVhZGVyLFxuICAgICAgYWNjZXB0VmlzaWJsZTogbW9kYWwuYWNjZXB0VmlzaWJsZSxcbiAgICAgIHJlamVjdFZpc2libGU6IG1vZGFsLnJlamVjdFZpc2libGUsXG4gICAgICBhY2NlcHRMYWJlbDogbW9kYWwuYWNjZXB0TGFiZWwsXG4gICAgICByZWplY3RMYWJlbDogbW9kYWwucmVqZWN0TGFiZWwsXG4gICAgICBhY2NlcHQ6IHRoaXMuYWNjZXB0LmJpbmQodGhpcyksXG4gICAgICByZWplY3Q6IHRoaXMucmVqZWN0LmJpbmQodGhpcylcbiAgICB9O1xuICB9XG5cbiAgYWNjZXB0KCkge1xuICAgIHRoaXMub25BY2NlcHQuZW1pdCgpO1xuICAgIGlmICh0aGlzLmRsZ09wdGlvbnMub25BY2NlcHQpIHtcbiAgICAgIHRoaXMuZGxnT3B0aW9ucy5vbkFjY2VwdC5jYWxsKHRoaXMuZGxnT3B0aW9ucy5jb250ZXh0LCB0cnVlKTtcbiAgICB9XG4gICAgU3RhdGVzVXRpbHMuY3JlYXRlKFN0YXRlTmFtZXMuY29uZmlybSwge1xuICAgICAgb3BlbjogZmFsc2UsXG4gICAgICBhY2NlcHQ6IHRydWUsXG4gICAgICByZWplY3Q6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxuICByZWplY3QoKSB7XG4gICAgdGhpcy5vblJlamVjdC5lbWl0KCk7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5vblJlamVjdCkge1xuICAgICAgdGhpcy5vcHRpb25zLm9uUmVqZWN0LmNhbGwodGhpcy5vcHRpb25zLmNvbnRleHQsIGZhbHNlKTtcbiAgICB9XG4gICAgU3RhdGVzVXRpbHMuY3JlYXRlKFN0YXRlTmFtZXMuY29uZmlybSwge1xuICAgICAgb3BlbjogZmFsc2UsXG4gICAgICBhY2NlcHQ6IGZhbHNlLFxuICAgICAgcmVqZWN0OiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cblxuIl19