/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { BaseComponent } from '@er/core';
import { StateNames } from '@er/types';
import { StatesUtils } from '@er/utils';
import { OverlayPanel } from 'primeng/primeng';
import { PngTableComponent } from '../table/component';
export class PngTableCaptionComponent extends BaseComponent {
    /**
     * @param {?} pngTable
     */
    constructor(pngTable) {
        super();
        this.pngTable = pngTable;
        this.onSimpleSearch = new EventEmitter();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    search(event) {
        this.onSimpleSearch.emit(event);
    }
    /**
     * @return {?}
     */
    openPanel() {
        StatesUtils.update(StateNames.popup, (/** @type {?} */ ((/** @type {?} */ ({
            header: '查询条件定义',
            content: this.searchBuilderPanel,
            visible: true,
            minWidth: 700,
            contentMaxHeight: 400
        })))));
    }
    /**
     * @return {?}
     */
    refresh() {
        this.pngTable.load();
    }
}
PngTableCaptionComponent.decorators = [
    { type: Component, args: [{
                selector: 'png-table-caption',
                template: `
    <ng-container *ngIf="customerTpl;else default">
      <ng-container *ngTemplateOutlet="customerTpl;context:{$implicit:pngTable}"></ng-container>
    </ng-container>
    <ng-template #default>
      <div>
        <span class="pull-left table-caption" [innerHTML]="caption|erSafeHtml"></span>
        <span class="pull-right d-inline"><i class="fa fa-refresh text-primary" title="刷新表格" (click)="refresh()"></i></span>
      </div>
      <div class="clearfix"></div>
      <div *ngIf="hasSearchBox || hasAddAction || hasSearchInput">
        <div class="d-flex align-items-start">
          <div class="pl-3 py-3" *ngIf="hasAddAction">
            <png-button erPropsBind [props]="addButton" [outputContext]="{pngTable: pngTable}"></png-button>
          </div>
          <div class="ml-auto py-3" *ngIf="hasSearchInput && !hasSearchBox">
            <png-search-box title="综合搜索，输入回车键执行" (onSearch)="search($event)"></png-search-box>
          </div>
          <div class="ml-auto" *ngIf="hasSearchBox">
            <button pButton icon="fa fa-search" label="高级查询" (click)="openPanel()"></button>
            <ng-template #searchBuilderPanel>
              <png-table-query-builder></png-table-query-builder>
            </ng-template>
          </div>
        </div>
      </div>
    </ng-template>
  `,
                changeDetection: ChangeDetectionStrategy.OnPush
            }] }
];
/** @nocollapse */
PngTableCaptionComponent.ctorParameters = () => [
    { type: PngTableComponent }
];
PngTableCaptionComponent.propDecorators = {
    caption: [{ type: Input }],
    hasAddAction: [{ type: Input }],
    hasSearchInput: [{ type: Input }],
    hasSearchBox: [{ type: Input }],
    addButton: [{ type: Input }],
    onSimpleSearch: [{ type: Output }],
    searchBuilderPanel: [{ type: ViewChild, args: ['searchBuilderPanel',] }]
};
if (false) {
    /** @type {?} */
    PngTableCaptionComponent.prototype.caption;
    /** @type {?} */
    PngTableCaptionComponent.prototype.hasAddAction;
    /** @type {?} */
    PngTableCaptionComponent.prototype.hasSearchInput;
    /** @type {?} */
    PngTableCaptionComponent.prototype.hasSearchBox;
    /** @type {?} */
    PngTableCaptionComponent.prototype.addButton;
    /** @type {?} */
    PngTableCaptionComponent.prototype.onSimpleSearch;
    /** @type {?} */
    PngTableCaptionComponent.prototype.searchBuilderPanel;
    /** @type {?} */
    PngTableCaptionComponent.prototype.pngTable;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL3ByaW1lbmcvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90YWJsZS9jb21wb25lbnQvY2FwdGlvbi9jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBQyx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3pHLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFDdkMsT0FBTyxFQUErQixVQUFVLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDN0MsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFtQ3JELE1BQU0sT0FBTyx3QkFBeUIsU0FBUSxhQUFhOzs7O0lBZ0J6RCxZQUFtQixRQUEyQjtRQUM1QyxLQUFLLEVBQUUsQ0FBQztRQURTLGFBQVEsR0FBUixRQUFRLENBQW1CO1FBSnBDLG1CQUFjLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQU05QyxDQUFDOzs7OztJQUVELE1BQU0sQ0FBQyxLQUFLO1FBQ1YsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEMsQ0FBQzs7OztJQUVELFNBQVM7UUFDUCxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsbUJBQUEsbUJBQWlCO1lBQ3BELE1BQU0sRUFBRSxRQUFRO1lBQ2hCLE9BQU8sRUFBRSxJQUFJLENBQUMsa0JBQWtCO1lBQ2hDLE9BQU8sRUFBRSxJQUFJO1lBQ2IsUUFBUSxFQUFFLEdBQUc7WUFDYixnQkFBZ0IsRUFBRSxHQUFHO1NBQ3RCLEVBQUEsRUFBTSxDQUFDLENBQUM7SUFDWCxDQUFDOzs7O0lBRUQsT0FBTztRQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdkIsQ0FBQzs7O1lBckVGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsbUJBQW1CO2dCQUM3QixRQUFRLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTJCVDtnQkFDRCxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTthQUNoRDs7OztZQWpDTyxpQkFBaUI7OztzQkFxQ3RCLEtBQUs7MkJBRUwsS0FBSzs2QkFFTCxLQUFLOzJCQUVMLEtBQUs7d0JBRUwsS0FBSzs2QkFFTCxNQUFNO2lDQUVOLFNBQVMsU0FBQyxvQkFBb0I7Ozs7SUFaL0IsMkNBQXlCOztJQUV6QixnREFBK0I7O0lBRS9CLGtEQUFpQzs7SUFFakMsZ0RBQStCOztJQUUvQiw2Q0FBZ0M7O0lBRWhDLGtEQUE4Qzs7SUFFOUMsc0RBQWtFOztJQUV0RCw0Q0FBa0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgVmlld0NoaWxkfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7QmFzZUNvbXBvbmVudH0gZnJvbSAnQGVyL2NvcmUnO1xuaW1wb3J0IHtCdXR0b25Qcm9wcywgUG9wdXBEaWFsb2dQcm9wLCBTdGF0ZU5hbWVzfSBmcm9tICdAZXIvdHlwZXMnO1xuaW1wb3J0IHtTdGF0ZXNVdGlsc30gZnJvbSAnQGVyL3V0aWxzJztcbmltcG9ydCB7T3ZlcmxheVBhbmVsfSBmcm9tICdwcmltZW5nL3ByaW1lbmcnO1xuaW1wb3J0IHtQbmdUYWJsZUNvbXBvbmVudH0gZnJvbSAnLi4vdGFibGUvY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncG5nLXRhYmxlLWNhcHRpb24nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjdXN0b21lclRwbDtlbHNlIGRlZmF1bHRcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJjdXN0b21lclRwbDtjb250ZXh0OnskaW1wbGljaXQ6cG5nVGFibGV9XCI+PC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPG5nLXRlbXBsYXRlICNkZWZhdWx0PlxuICAgICAgPGRpdj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJwdWxsLWxlZnQgdGFibGUtY2FwdGlvblwiIFtpbm5lckhUTUxdPVwiY2FwdGlvbnxlclNhZmVIdG1sXCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInB1bGwtcmlnaHQgZC1pbmxpbmVcIj48aSBjbGFzcz1cImZhIGZhLXJlZnJlc2ggdGV4dC1wcmltYXJ5XCIgdGl0bGU9XCLliLfmlrDooajmoLxcIiAoY2xpY2spPVwicmVmcmVzaCgpXCI+PC9pPjwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+XG4gICAgICA8ZGl2ICpuZ0lmPVwiaGFzU2VhcmNoQm94IHx8IGhhc0FkZEFjdGlvbiB8fCBoYXNTZWFyY2hJbnB1dFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLXN0YXJ0XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBsLTMgcHktM1wiICpuZ0lmPVwiaGFzQWRkQWN0aW9uXCI+XG4gICAgICAgICAgICA8cG5nLWJ1dHRvbiBlclByb3BzQmluZCBbcHJvcHNdPVwiYWRkQnV0dG9uXCIgW291dHB1dENvbnRleHRdPVwie3BuZ1RhYmxlOiBwbmdUYWJsZX1cIj48L3BuZy1idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1sLWF1dG8gcHktM1wiICpuZ0lmPVwiaGFzU2VhcmNoSW5wdXQgJiYgIWhhc1NlYXJjaEJveFwiPlxuICAgICAgICAgICAgPHBuZy1zZWFyY2gtYm94IHRpdGxlPVwi57u85ZCI5pCc57Si77yM6L6T5YWl5Zue6L2m6ZSu5omn6KGMXCIgKG9uU2VhcmNoKT1cInNlYXJjaCgkZXZlbnQpXCI+PC9wbmctc2VhcmNoLWJveD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWwtYXV0b1wiICpuZ0lmPVwiaGFzU2VhcmNoQm94XCI+XG4gICAgICAgICAgICA8YnV0dG9uIHBCdXR0b24gaWNvbj1cImZhIGZhLXNlYXJjaFwiIGxhYmVsPVwi6auY57qn5p+l6K+iXCIgKGNsaWNrKT1cIm9wZW5QYW5lbCgpXCI+PC9idXR0b24+XG4gICAgICAgICAgICA8bmctdGVtcGxhdGUgI3NlYXJjaEJ1aWxkZXJQYW5lbD5cbiAgICAgICAgICAgICAgPHBuZy10YWJsZS1xdWVyeS1idWlsZGVyPjwvcG5nLXRhYmxlLXF1ZXJ5LWJ1aWxkZXI+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIGAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuXG5leHBvcnQgY2xhc3MgUG5nVGFibGVDYXB0aW9uQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG5cbiAgQElucHV0KCkgY2FwdGlvbjogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIGhhc0FkZEFjdGlvbjogYm9vbGVhbjtcblxuICBASW5wdXQoKSBoYXNTZWFyY2hJbnB1dDogYm9vbGVhbjtcblxuICBASW5wdXQoKSBoYXNTZWFyY2hCb3g6IGJvb2xlYW47XG5cbiAgQElucHV0KCkgYWRkQnV0dG9uOiBCdXR0b25Qcm9wcztcblxuICBAT3V0cHV0KCkgb25TaW1wbGVTZWFyY2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgQFZpZXdDaGlsZCgnc2VhcmNoQnVpbGRlclBhbmVsJykgc2VhcmNoQnVpbGRlclBhbmVsOiBPdmVybGF5UGFuZWw7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHBuZ1RhYmxlOiBQbmdUYWJsZUNvbXBvbmVudCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBzZWFyY2goZXZlbnQpIHtcbiAgICB0aGlzLm9uU2ltcGxlU2VhcmNoLmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgb3BlblBhbmVsKCkge1xuICAgIFN0YXRlc1V0aWxzLnVwZGF0ZShTdGF0ZU5hbWVzLnBvcHVwLCA8UG9wdXBEaWFsb2dQcm9wPntcbiAgICAgIGhlYWRlcjogJ+afpeivouadoeS7tuWumuS5iScsXG4gICAgICBjb250ZW50OiB0aGlzLnNlYXJjaEJ1aWxkZXJQYW5lbCxcbiAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICBtaW5XaWR0aDogNzAwLFxuICAgICAgY29udGVudE1heEhlaWdodDogNDAwXG4gICAgfSBhcyB7fSk7XG4gIH1cblxuICByZWZyZXNoKCkge1xuICAgIHRoaXMucG5nVGFibGUubG9hZCgpO1xuICB9XG59XG4iXX0=