/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output, Renderer2, ViewChild } from '@angular/core';
import { BaseComponent } from '@er/core';
import { StateNames } from '@er/types';
import { ConfigUtils, StatesUtils } from '@er/utils';
import { ScrollPanel } from 'primeng/primeng';
import { filter } from 'rxjs/operators';
/** @enum {number} */
var MenuOrientation = {
    STATIC: 0,
    OVERLAY: 1,
    SLIM: 2,
    HORIZONTAL: 3,
};
MenuOrientation[MenuOrientation.STATIC] = 'STATIC';
MenuOrientation[MenuOrientation.OVERLAY] = 'OVERLAY';
MenuOrientation[MenuOrientation.SLIM] = 'SLIM';
MenuOrientation[MenuOrientation.HORIZONTAL] = 'HORIZONTAL';
var PngAdminWorkSpaceComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PngAdminWorkSpaceComponent, _super);
    function PngAdminWorkSpaceComponent(renderer, cd) {
        var _this = _super.call(this) || this;
        _this.renderer = renderer;
        _this.cd = cd;
        _this.menuOrientation = MenuOrientation.STATIC;
        _this.darkMenu = true;
        _this.onInitMenu = new EventEmitter();
        _this.profileMode = 'inline';
        _this.rootMenuToggleStateName = '$rootMenuToggler';
        _this.templateNames = {
            topbar: 'topbar',
            header: 'header',
            main: 'main',
            footer: 'footer',
            profile: 'profile',
            settings: 'settings',
            messages: 'messages',
            notifications: 'notifications',
            search: 'search'
        };
        return _this;
    }
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.onInitMenu.emit();
        this.$subscriptions = StatesUtils.observe(StateNames.menu, this.rootMenuToggleStateName)
            .pipe(filter(function (state) { return state !== undefined; }))
            .subscribe(function () { return _this._toggleMainMenu(); });
        this.appTitle = this.appTitle || ConfigUtils.getConfig().appTitle;
        this.appName = this.appName || ConfigUtils.getConfig().appName;
        this.appLogo = this.appLogo || ConfigUtils.getConfig().appLogo;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout(function () {
            _this.layoutMenuScrollerViewChild.moveBar();
        }, 100);
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.onLayoutClick = /**
     * @return {?}
     */
    function () {
        if (!this.topbarItemClick) {
            this.activeTopbarItem = null;
            this.topbarMenuActive = false;
        }
        if (!this.menuClick) {
            if (this.isHorizontal() || this.isSlim()) {
                this.resetMenu = true;
            }
            if (this.overlayMenuActive || this.staticMenuMobileActive) {
                this.hideOverlayMenu();
            }
            this.menuHoverActive = false;
        }
        this.topbarItemClick = false;
        this.menuClick = false;
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.onMenuClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        this.menuClick = true;
        this.resetMenu = false;
        if (!this.isHorizontal()) {
            setTimeout(function () {
                _this.layoutMenuScrollerViewChild.moveBar();
            }, 450);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.onTopbarMenuButtonClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.topbarItemClick = true;
        this.topbarMenuActive = !this.topbarMenuActive;
        this.hideOverlayMenu();
        event.preventDefault();
    };
    /**
     * @param {?} event
     * @param {?} item
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.onTopbarItemClick = /**
     * @param {?} event
     * @param {?} item
     * @return {?}
     */
    function (event, item) {
        this.topbarItemClick = true;
        if (this.activeTopbarItem === item) {
            this.activeTopbarItem = null;
        }
        else {
            this.activeTopbarItem = item;
        }
        event.preventDefault();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.onTopbarSubItemClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.preventDefault();
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.hideOverlayMenu = /**
     * @return {?}
     */
    function () {
        this.rotateMenuButton = false;
        this.overlayMenuActive = false;
        this.staticMenuMobileActive = false;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.isTablet = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var width = window.innerWidth;
        return width <= 1024 && width > 640;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.isDesktop = /**
     * @return {?}
     */
    function () {
        return window.innerWidth > 1024;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.isMobile = /**
     * @return {?}
     */
    function () {
        return window.innerWidth <= 640;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.isOverlay = /**
     * @return {?}
     */
    function () {
        return this.menuOrientation === MenuOrientation.OVERLAY;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.isHorizontal = /**
     * @return {?}
     */
    function () {
        return this.menuOrientation === MenuOrientation.HORIZONTAL;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.isSlim = /**
     * @return {?}
     */
    function () {
        return this.menuOrientation === MenuOrientation.SLIM;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.changeToStaticMenu = /**
     * @return {?}
     */
    function () {
        this.menuOrientation = MenuOrientation.STATIC;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.changeToOverlayMenu = /**
     * @return {?}
     */
    function () {
        this.menuOrientation = MenuOrientation.OVERLAY;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.changeToHorizontalMenu = /**
     * @return {?}
     */
    function () {
        this.menuOrientation = MenuOrientation.HORIZONTAL;
    };
    /**
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype.changeToSlimMenu = /**
     * @return {?}
     */
    function () {
        this.menuOrientation = MenuOrientation.SLIM;
    };
    /**
     * @private
     * @return {?}
     */
    PngAdminWorkSpaceComponent.prototype._toggleMainMenu = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var menu = StatesUtils.getValue(StateNames.rootMenu);
        this.menuOrientation = menu && menu.orientation;
        this.darkMenu = menu && menu.dark;
        this.menuClick = true;
        this.rotateMenuButton = !this.rotateMenuButton;
        this.topbarMenuActive = false;
        if (this.menuOrientation === MenuOrientation.OVERLAY) {
            this.overlayMenuActive = !this.overlayMenuActive;
        }
        else {
            if (this.isDesktop()) {
                this.staticMenuDesktopInactive = !this.staticMenuDesktopInactive;
            }
            else {
                this.staticMenuMobileActive = !this.staticMenuMobileActive;
            }
        }
        this.cd.detectChanges();
    };
    PngAdminWorkSpaceComponent.decorators = [
        { type: Component, args: [{
                    selector: 'png-admin-work-space',
                    template: "<div class=\"layout-wrapper\" (click)=\"onLayoutClick()\"\n     [ngClass]=\"{'menu-layout-static': !isOverlay(),\n                'menu-layout-overlay': isOverlay(),\n                'layout-menu-overlay-active': overlayMenuActive,\n                'menu-layout-horizontal': isHorizontal(),\n                'menu-layout-slim': isSlim(),\n                'layout-menu-static-inactive': staticMenuDesktopInactive,\n                'layout-menu-static-active': staticMenuMobileActive}\">\n\n  <png-ws-topbar></png-ws-topbar>\n\n  <div class=\"layout-menu-container\" [ngClass]=\"{'layout-menu-dark':darkMenu}\" (click)=\"onMenuClick($event)\">\n    <p-scrollPanel #layoutMenuScroller [style]=\"{height: '100%' }\">\n      <div class=\"menu-scroll-content\">\n        <png-ws-profile *ngIf=\"profileMode=='inline'&&!isHorizontal()\"></png-ws-profile>\n        <png-ws-main-menu [reset]=\"resetMenu\" [httpMenuTag]=\"httpMenuTag\"></png-ws-main-menu>\n      </div>\n    </p-scrollPanel>\n  </div>\n\n  <div class=\"layout-main\">\n    <ng-container *ngTemplateOutlet=\"template(templateNames.main)\"></ng-container>\n    <router-outlet></router-outlet>\n  </div>\n\n  <div class=\"layout-mask\"></div>\n\n  <png-ws-footer></png-ws-footer>\n\n</div>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    /** @nocollapse */
    PngAdminWorkSpaceComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef }
    ]; };
    PngAdminWorkSpaceComponent.propDecorators = {
        menuOrientation: [{ type: Input }],
        darkMenu: [{ type: Input }],
        appName: [{ type: Input }],
        appTitle: [{ type: Input }],
        appLogo: [{ type: Input }],
        httpMenuTag: [{ type: Input }],
        onInitMenu: [{ type: Output }],
        layoutMenuScrollerViewChild: [{ type: ViewChild, args: ['layoutMenuScroller',] }]
    };
    return PngAdminWorkSpaceComponent;
}(BaseComponent));
export { PngAdminWorkSpaceComponent };
if (false) {
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.menuOrientation;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.darkMenu;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.appName;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.appTitle;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.appLogo;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.httpMenuTag;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.onInitMenu;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.profileMode;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.rotateMenuButton;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.topbarMenuActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.overlayMenuActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.staticMenuDesktopInactive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.staticMenuMobileActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.layoutMenuScroller;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.menuClick;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.topbarItemClick;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.activeTopbarItem;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.resetMenu;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.menuHoverActive;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.rootMenuToggleStateName;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.layoutMenuScrollerViewChild;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.templateNames;
    /** @type {?} */
    PngAdminWorkSpaceComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    PngAdminWorkSpaceComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL3ByaW1lbmcvIiwic291cmNlcyI6WyJsaWIvd29yay1zcGFjZS9jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBRUwsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBQ04sU0FBUyxFQUNULFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ3ZDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDckMsT0FBTyxFQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbkQsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQzVDLE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQzs7O0lBR3BDLFNBQU07SUFDTixVQUFPO0lBQ1AsT0FBSTtJQUNKLGFBQVU7Ozs7OztBQUdaO0lBS2dELHNEQUFhO0lBd0QzRCxvQ0FBbUIsUUFBbUIsRUFBVSxFQUFxQjtRQUFyRSxZQUNFLGlCQUFPLFNBQ1I7UUFGa0IsY0FBUSxHQUFSLFFBQVEsQ0FBVztRQUFVLFFBQUUsR0FBRixFQUFFLENBQW1CO1FBdEQ1RCxxQkFBZSxHQUFvQixlQUFlLENBQUMsTUFBTSxDQUFDO1FBRTFELGNBQVEsR0FBRyxJQUFJLENBQUM7UUFVZixnQkFBVSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFMUMsaUJBQVcsR0FBcUIsUUFBUSxDQUFDO1FBd0J6Qyw2QkFBdUIsR0FBRyxrQkFBa0IsQ0FBQztRQUk3QyxtQkFBYSxHQUFHO1lBQ2QsTUFBTSxFQUFFLFFBQVE7WUFDaEIsTUFBTSxFQUFFLFFBQVE7WUFDaEIsSUFBSSxFQUFFLE1BQU07WUFDWixNQUFNLEVBQUUsUUFB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QUF5QixDQUFDO2FBQ2xFO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQzthQUM1RDtTQUNGO1FBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUMxQixDQUFDOztnQkE5TUYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxzQkFBc0I7b0JBQ2hDLDB1Q0FBdUI7b0JBQ3ZCLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2lCQUNoRDs7OztnQkFwQkMsU0FBUztnQkFOVCxpQkFBaUI7OztrQ0E2QmhCLEtBQUs7MkJBRUwsS0FBSzswQkFFTCxLQUFLOzJCQUVMLEtBQUs7MEJBRUwsS0FBSzs4QkFFTCxLQUFLOzZCQUVMLE1BQU07OENBNEJOLFNBQVMsU0FBQyxvQkFBb0I7O0lBZ0tqQyxpQ0FBQztDQUFBLEFBL01ELENBS2dELGFBQWEsR0EwTTVEO1NBMU1ZLDBCQUEwQjs7O0lBRXJDLHFEQUFtRTs7SUFFbkUsOENBQXlCOztJQUV6Qiw2Q0FBeUI7O0lBRXpCLDhDQUEwQjs7SUFFMUIsNkNBQXlCOztJQUV6QixpREFBNkI7O0lBRTdCLGdEQUEwQzs7SUFFMUMsaURBQXlDOztJQUV6QyxzREFBMEI7O0lBRTFCLHNEQUEwQjs7SUFFMUIsdURBQTJCOztJQUUzQiwrREFBbUM7O0lBRW5DLDREQUFnQzs7SUFFaEMsd0RBQW1DOztJQUVuQywrQ0FBbUI7O0lBRW5CLHFEQUF5Qjs7SUFFekIsc0RBQXNCOztJQUV0QiwrQ0FBbUI7O0lBRW5CLHFEQUF5Qjs7SUFFekIsNkRBQTZDOztJQUU3QyxpRUFBMEU7O0lBRTFFLG1EQVVFOztJQUVVLDhDQUEwQjs7Ozs7SUFBRSx3Q0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFJlbmRlcmVyMixcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtCYXNlQ29tcG9uZW50fSBmcm9tICdAZXIvY29yZSc7XG5pbXBvcnQge1N0YXRlTmFtZXN9IGZyb20gJ0Blci90eXBlcyc7XG5pbXBvcnQge0NvbmZpZ1V0aWxzLCBTdGF0ZXNVdGlsc30gZnJvbSAnQGVyL3V0aWxzJztcbmltcG9ydCB7U2Nyb2xsUGFuZWx9IGZyb20gJ3ByaW1lbmcvcHJpbWVuZyc7XG5pbXBvcnQge2ZpbHRlcn0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5lbnVtIE1lbnVPcmllbnRhdGlvbiB7XG4gIFNUQVRJQyxcbiAgT1ZFUkxBWSxcbiAgU0xJTSxcbiAgSE9SSVpPTlRBTFxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwbmctYWRtaW4td29yay1zcGFjZScsXG4gIHRlbXBsYXRlVXJsOiAndHBsLmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBQbmdBZG1pbldvcmtTcGFjZUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuXG4gIEBJbnB1dCgpIG1lbnVPcmllbnRhdGlvbjogTWVudU9yaWVudGF0aW9uID0gTWVudU9yaWVudGF0aW9uLlNUQVRJQztcblxuICBASW5wdXQoKSBkYXJrTWVudSA9IHRydWU7XG5cbiAgQElucHV0KCkgYXBwTmFtZTogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIGFwcFRpdGxlOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgYXBwTG9nbzogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIGh0dHBNZW51VGFnOiBzdHJpbmc7XG5cbiAgQE91dHB1dCgpIG9uSW5pdE1lbnUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHJvZmlsZU1vZGU6ICd0b3AnIHwgJ2lubGluZScgPSAnaW5saW5lJztcblxuICByb3RhdGVNZW51QnV0dG9uOiBib29sZWFuO1xuXG4gIHRvcGJhck1lbnVBY3RpdmU6IGJvb2xlYW47XG5cbiAgb3ZlcmxheU1lbnVBY3RpdmU6IGJvb2xlYW47XG5cbiAgc3RhdGljTWVudURlc2t0b3BJbmFjdGl2ZTogYm9vbGVhbjtcblxuICBzdGF0aWNNZW51TW9iaWxlQWN0aXZlOiBib29sZWFuO1xuXG4gIGxheW91dE1lbnVTY3JvbGxlcjogSFRNTERpdkVsZW1lbnQ7XG5cbiAgbWVudUNsaWNrOiBib29sZWFuO1xuXG4gIHRvcGJhckl0ZW1DbGljazogYm9vbGVhbjtcblxuICBhY3RpdmVUb3BiYXJJdGVtOiBhbnk7XG5cbiAgcmVzZXRNZW51OiBib29sZWFuO1xuXG4gIG1lbnVIb3ZlckFjdGl2ZTogYm9vbGVhbjtcblxuICByb290TWVudVRvZ2dsZVN0YXRlTmFtZSA9ICckcm9vdE1lbnVUb2dnbGVyJztcblxuICBAVmlld0NoaWxkKCdsYXlvdXRNZW51U2Nyb2xsZXInKSBsYXlvdXRNZW51U2Nyb2xsZXJWaWV3Q2hpbGQ6IFNjcm9sbFBhbmVsO1xuXG4gIHRlbXBsYXRlTmFtZXMgPSB7XG4gICAgdG9wYmFyOiAndG9wYmFyJyxcbiAgICBoZWFkZXI6ICdoZWFkZXInLFxuICAgIG1haW46ICdtYWluJyxcbiAgICBmb290ZXI6ICdmb290ZXInLFxuICAgIHByb2ZpbGU6ICdwcm9maWxlJyxcbiAgICBzZXR0aW5nczogJ3NldHRpbmdzJyxcbiAgICBtZXNzYWdlczogJ21lc3NhZ2VzJyxcbiAgICBub3RpZmljYXRpb25zOiAnbm90aWZpY2F0aW9ucycsXG4gICAgc2VhcmNoOiAnc2VhcmNoJ1xuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZW5kZXJlcjogUmVuZGVyZXIyLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLm9uSW5pdE1lbnUuZW1pdCgpO1xuICAgIHRoaXMuJHN1YnNjcmlwdGlvbnMgPSBTdGF0ZXNVdGlscy5vYnNlcnZlKFN0YXRlTmFtZXMubWVudSwgdGhpcy5yb290TWVudVRvZ2dsZVN0YXRlTmFtZSlcbiAgICAgIC5waXBlKFxuICAgICAgICBmaWx0ZXIoc3RhdGUgPT4gc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5fdG9nZ2xlTWFpbk1lbnUoKSk7XG4gICAgdGhpcy5hcHBUaXRsZSA9IHRoaXMuYXBwVGl0bGUgfHwgQ29uZmlnVXRpbHMuZ2V0Q29uZmlnKCkuYXBwVGl0bGU7XG4gICAgdGhpcy5hcHBOYW1lID0gdGhpcy5hcHBOYW1lIHx8IENvbmZpZ1V0aWxzLmdldENvbmZpZygpLmFwcE5hbWU7XG4gICAgdGhpcy5hcHBMb2dvID0gdGhpcy5hcHBMb2dvIHx8IENvbmZpZ1V0aWxzLmdldENvbmZpZygpLmFwcExvZ287XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmxheW91dE1lbnVTY3JvbGxlclZpZXdDaGlsZC5tb3ZlQmFyKCk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIG9uTGF5b3V0Q2xpY2soKSB7XG4gICAgaWYgKCF0aGlzLnRvcGJhckl0ZW1DbGljaykge1xuICAgICAgdGhpcy5hY3RpdmVUb3BiYXJJdGVtID0gbnVsbDtcbiAgICAgIHRoaXMudG9wYmFyTWVudUFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5tZW51Q2xpY2spIHtcbiAgICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpIHx8IHRoaXMuaXNTbGltKCkpIHtcbiAgICAgICAgdGhpcy5yZXNldE1lbnUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vdmVybGF5TWVudUFjdGl2ZSB8fCB0aGlzLnN0YXRpY01lbnVNb2JpbGVBY3RpdmUpIHtcbiAgICAgICAgdGhpcy5oaWRlT3ZlcmxheU1lbnUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tZW51SG92ZXJBY3RpdmUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLnRvcGJhckl0ZW1DbGljayA9IGZhbHNlO1xuICAgIHRoaXMubWVudUNsaWNrID0gZmFsc2U7XG4gIH1cblxuICBvbk1lbnVDbGljaygkZXZlbnQpIHtcbiAgICB0aGlzLm1lbnVDbGljayA9IHRydWU7XG4gICAgdGhpcy5yZXNldE1lbnUgPSBmYWxzZTtcblxuICAgIGlmICghdGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMubGF5b3V0TWVudVNjcm9sbGVyVmlld0NoaWxkLm1vdmVCYXIoKTtcbiAgICAgIH0sIDQ1MCk7XG4gICAgfVxuICB9XG5cbiAgb25Ub3BiYXJNZW51QnV0dG9uQ2xpY2soZXZlbnQpIHtcbiAgICB0aGlzLnRvcGJhckl0ZW1DbGljayA9IHRydWU7XG4gICAgdGhpcy50b3BiYXJNZW51QWN0aXZlID0gIXRoaXMudG9wYmFyTWVudUFjdGl2ZTtcblxuICAgIHRoaXMuaGlkZU92ZXJsYXlNZW51KCk7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgb25Ub3BiYXJJdGVtQ2xpY2soZXZlbnQsIGl0ZW0pIHtcbiAgICB0aGlzLnRvcGJhckl0ZW1DbGljayA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5hY3RpdmVUb3BiYXJJdGVtID09PSBpdGVtKSB7XG4gICAgICB0aGlzLmFjdGl2ZVRvcGJhckl0ZW0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2ZVRvcGJhckl0ZW0gPSBpdGVtO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBvblRvcGJhclN1Ykl0ZW1DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBoaWRlT3ZlcmxheU1lbnUoKSB7XG4gICAgdGhpcy5yb3RhdGVNZW51QnV0dG9uID0gZmFsc2U7XG4gICAgdGhpcy5vdmVybGF5TWVudUFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuc3RhdGljTWVudU1vYmlsZUFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgaXNUYWJsZXQoKSB7XG4gICAgY29uc3Qgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICByZXR1cm4gd2lkdGggPD0gMTAyNCAmJiB3aWR0aCA+IDY0MDtcbiAgfVxuXG4gIGlzRGVza3RvcCgpIHtcbiAgICByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPiAxMDI0O1xuICB9XG5cbiAgaXNNb2JpbGUoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDw9IDY0MDtcbiAgfVxuXG4gIGlzT3ZlcmxheSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZW51T3JpZW50YXRpb24gPT09IE1lbnVPcmllbnRhdGlvbi5PVkVSTEFZO1xuICB9XG5cbiAgaXNIb3Jpem9udGFsKCkge1xuICAgIHJldHVybiB0aGlzLm1lbnVPcmllbnRhdGlvbiA9PT0gTWVudU9yaWVudGF0aW9uLkhPUklaT05UQUw7XG4gIH1cblxuICBpc1NsaW0oKSB7XG4gICAgcmV0dXJuIHRoaXMubWVudU9yaWVudGF0aW9uID09PSBNZW51T3JpZW50YXRpb24uU0xJTTtcbiAgfVxuXG4gIGNoYW5nZVRvU3RhdGljTWVudSgpIHtcbiAgICB0aGlzLm1lbnVPcmllbnRhdGlvbiA9IE1lbnVPcmllbnRhdGlvbi5TVEFUSUM7XG4gIH1cblxuICBjaGFuZ2VUb092ZXJsYXlNZW51KCkge1xuICAgIHRoaXMubWVudU9yaWVudGF0aW9uID0gTWVudU9yaWVudGF0aW9uLk9WRVJMQVk7XG4gIH1cblxuICBjaGFuZ2VUb0hvcml6b250YWxNZW51KCkge1xuICAgIHRoaXMubWVudU9yaWVudGF0aW9uID0gTWVudU9yaWVudGF0aW9uLkhPUklaT05UQUw7XG4gIH1cblxuICBjaGFuZ2VUb1NsaW1NZW51KCkge1xuICAgIHRoaXMubWVudU9yaWVudGF0aW9uID0gTWVudU9yaWVudGF0aW9uLlNMSU07XG4gIH1cblxuICBwcml2YXRlIF90b2dnbGVNYWluTWVudSgpIHtcbiAgICBjb25zdCBtZW51ID0gU3RhdGVzVXRpbHMuZ2V0VmFsdWUoU3RhdGVOYW1lcy5yb290TWVudSk7XG4gICAgdGhpcy5tZW51T3JpZW50YXRpb24gPSBtZW51ICYmIG1lbnUub3JpZW50YXRpb247XG4gICAgdGhpcy5kYXJrTWVudSA9IG1lbnUgJiYgbWVudS5kYXJrO1xuICAgIHRoaXMubWVudUNsaWNrID0gdHJ1ZTtcbiAgICB0aGlzLnJvdGF0ZU1lbnVCdXR0b24gPSAhdGhpcy5yb3RhdGVNZW51QnV0dG9uO1xuICAgIHRoaXMudG9wYmFyTWVudUFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMubWVudU9yaWVudGF0aW9uID09PSBNZW51T3JpZW50YXRpb24uT1ZFUkxBWSkge1xuICAgICAgdGhpcy5vdmVybGF5TWVudUFjdGl2ZSA9ICF0aGlzLm92ZXJsYXlNZW51QWN0aXZlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5pc0Rlc2t0b3AoKSkge1xuICAgICAgICB0aGlzLnN0YXRpY01lbnVEZXNrdG9wSW5hY3RpdmUgPSAhdGhpcy5zdGF0aWNNZW51RGVza3RvcEluYWN0aXZlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0aWNNZW51TW9iaWxlQWN0aXZlID0gIXRoaXMuc3RhdGljTWVudU1vYmlsZUFjdGl2ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cbn1cbiJdfQ==