/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectionStrategy, Component, Input } from '@angular/core';
import { ApiUtils, BaseComponent, DataFieldUtils } from '@er/core';
import { CommonsUtils } from '@er/utils';
import { PngTableComponent } from '../table/component';
var PngTableExpandedRowComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PngTableExpandedRowComponent, _super);
    function PngTableExpandedRowComponent(pngTable) {
        var _this = _super.call(this) || this;
        _this.pngTable = pngTable;
        _this.customerContent = false;
        return _this;
    }
    Object.defineProperty(PngTableExpandedRowComponent.prototype, "dataColumns", {
        get: /**
         * @return {?}
         */
        function () {
            return this.columns.filter(function (column) { return column.isDataColumn !== false && !column.isActionColumn; });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} changes
     * @return {?}
     */
    PngTableExpandedRowComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowId) {
            if (this.pngTable.$props.$ext.onExpandRowContent) {
                this.customerContent = true;
                this.expandContent$ = this.pngTable.$props.$ext.onExpandRowContent.method(this.rowId);
            }
            else {
                this.expandContent$ = ApiUtils.getById(this.pngTable.$props.$ext.apiDataProps.apiEntry, this.rowId, {
                    tag: this.rowId,
                    payload: { 'fields': this.pngTable.$props.$ext.expandRowFields || this.pngTable.dataColumnNames }
                });
            }
        }
    };
    /**
     * @param {?} col
     * @param {?} rowData
     * @return {?}
     */
    PngTableExpandedRowComponent.prototype.content = /**
     * @param {?} col
     * @param {?} rowData
     * @return {?}
     */
    function (col, rowData) {
        if (!col.key) {
            return;
        }
        if (col.cellContent) {
            console.log('cellcontent');
            return col.cellContent({ row: rowData });
        }
        /** @type {?} */
        var c = rowData[col.key];
        if (CommonsUtils.isJson(c)) {
            /** @type {?} */
            var key = void 0;
            if (col.dataField) {
                key = DataFieldUtils.getDefaultFieldName(col.dataField);
            }
            if (key) {
                return CommonsUtils.get(c, key);
            }
            else {
                /** @type {?} */
                var trans_1 = {};
                Object.keys(c).forEach(function (sub) {
                    /** @type {?} */
                    var label = CommonsUtils.get(col, "dataField.fields." + sub + ".label");
                    if (label) {
                        trans_1[label] = c[sub];
                    }
                    else {
                        trans_1[sub] = c[sub];
                    }
                });
                c = trans_1;
            }
        }
        return CommonsUtils.getText(c);
    };
    PngTableExpandedRowComponent.decorators = [
        { type: Component, args: [{
                    selector: '[png-table-expanded-row]',
                    template: "\n    <ng-container *ngIf=\"customerTpl;else default\">\n      <ng-container *ngTemplateOutlet=\"customerTpl;context:{$implicit:rowId,context:pngTable}\"></ng-container>\n    </ng-container>\n    <ng-template #default>\n      <td colspan=\"100%\">\n        <p-card styleClass=\"ui-card-shadow w-100 ui-table-expanded-content\" >\n          <er-http-status [tag]=\"rowId\" erPosition></er-http-status>\n          <ng-container *ngIf=\"expandContent$|async as expandContent\">\n            <div class=\"row w-100 m-3\" style=\"font-size: 16px\">\n              <ng-container *ngIf=\"!customerContent\">\n                <ng-container *ngFor=\"let col of dataColumns\">\n                  <span class=\"col-2 my-3\"><b class=\"pull-right\" [innerHTML]=\"col.label\"></b></span>\n                  <ng-container *ngIf=\"col.expandViewContent;else defaultView\">\n                    <er-dyna-content [content]=\"col.expandViewContent\" [context]=\"{data: expandContent, col: col}\"></er-dyna-content>\n                  </ng-container>\n                  <ng-template #defaultView>\n                    <span class=\"col-4 my-3\">{{content(col, expandContent)}}</span>\n                  </ng-template>\n                </ng-container>\n              </ng-container>\n              <ng-container *ngIf=\"customerContent\">\n                <er-dyna-content [content]=\"expandContent\"></er-dyna-content>\n              </ng-container>\n            </div>\n          </ng-container>\n        </p-card>\n      </td>\n    </ng-template>\n\n  ",
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    /** @nocollapse */
    PngTableExpandedRowComponent.ctorParameters = function () { return [
        { type: PngTableComponent }
    ]; };
    PngTableExpandedRowComponent.propDecorators = {
        rowId: [{ type: Input }],
        columns: [{ type: Input }],
        styleClass: [{ type: Input }],
        style: [{ type: Input }]
    };
    return PngTableExpandedRowComponent;
}(BaseComponent));
export { PngTableExpandedRowComponent };
if (false) {
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.rowId;
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.columns;
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.styleClass;
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.style;
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.expandContent$;
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.customerContent;
    /** @type {?} */
    PngTableExpandedRowComponent.prototype.pngTable;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL3ByaW1lbmcvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90YWJsZS9jb21wb25lbnQvZXhwYW5kZWQtcm93L2NvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUEyQixNQUFNLGVBQWUsQ0FBQztBQUNsRyxPQUFPLEVBQUMsUUFBUSxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFDakUsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUd2QyxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUVyRDtJQW9Da0Qsd0RBQWE7SUFjN0Qsc0NBQW1CLFFBQTJCO1FBQTlDLFlBQ0UsaUJBQU8sU0FDUjtRQUZrQixjQUFRLEdBQVIsUUFBUSxDQUFtQjtRQUY5QyxxQkFBZSxHQUFHLEtBQUssQ0FBQzs7SUFJeEIsQ0FBQztJQUVELHNCQUFJLHFEQUFXOzs7O1FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFVBQUEsTUFBTSxJQUFJLE9BQUEsTUFBTSxDQUFDLFlBQVksS0FBSyxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUF2RCxDQUF1RCxDQUFDLENBQUM7UUFDaEcsQ0FBQzs7O09BQUE7Ozs7O0lBRUQsa0RBQVc7Ozs7SUFBWCxVQUFZLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxDQUFDLEtBQUssRUFBRTtZQUNqQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtnQkFDaEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7Z0JBQzVCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDdkY7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLGNBQWMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUU7b0JBQ2xHLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSztvQkFDZixPQUFPLEVBQUUsRUFBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsRUFBQztpQkFDaEcsQ0FBQyxDQUFDO2FBQ0o7U0FDRjtJQUNILENBQUM7Ozs7OztJQUVELDhDQUFPOzs7OztJQUFQLFVBQVEsR0FBRyxFQUFFLE9BQU87UUFDbEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUU7WUFDWixPQUFPO1NBQ1I7UUFDRCxJQUFJLEdBQUcsQ0FBQyxXQUFXLEVBQUU7WUFDbkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUMzQixPQUFPLEdBQUcsQ0FBQyxXQUFXLENBQUMsRUFBQyxHQUFHLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztTQUN4Qzs7WUFDRyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFDeEIsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFOztnQkFDdEIsR0FBRyxTQUFBO1lBQ1AsSUFBSSxHQUFHLENBQUMsU0FBUyxFQUFFO2dCQUNqQixHQUFHLEdBQUcsY0FBYyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUN6RDtZQUNELElBQUksR0FBRyxFQUFFO2dCQUNQLE9BQU8sWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7YUFDakM7aUJBQU07O29CQUNDLE9BQUssR0FBRyxFQUFFO2dCQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUc7O3dCQUNsQixLQUFLLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsc0JBQW9CLEdBQUcsV0FBUSxDQUFDO29CQUNwRSxJQUFJLEtBQUssRUFBRTt3QkFDVCxPQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUN2Qjt5QkFBTTt3QkFDTCxPQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUNyQjtnQkFDSCxDQUFDLENBQUMsQ0FBQztnQkFDSCxDQUFDLEdBQUcsT0FBSyxDQUFDO2FBQ1g7U0FDRjtRQUNELE9BQU8sWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQyxDQUFDOztnQkF0R0YsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSwwQkFBMEI7b0JBQ3BDLFFBQVEsRUFBRSxpZ0RBOEJUO29CQUNELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2lCQUNoRDs7OztnQkFwQ08saUJBQWlCOzs7d0JBd0N0QixLQUFLOzBCQUVMLEtBQUs7NkJBRUwsS0FBSzt3QkFFTCxLQUFLOztJQTJEUixtQ0FBQztDQUFBLEFBdkdELENBb0NrRCxhQUFhLEdBbUU5RDtTQW5FWSw0QkFBNEI7OztJQUV2Qyw2Q0FBb0I7O0lBRXBCLCtDQUF3Qzs7SUFFeEMsa0RBQXlCOztJQUV6Qiw2Q0FBbUM7O0lBRW5DLHNEQUFnQzs7SUFFaEMsdURBQXdCOztJQUVaLGdEQUFrQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlc30gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0FwaVV0aWxzLCBCYXNlQ29tcG9uZW50LCBEYXRhRmllbGRVdGlsc30gZnJvbSAnQGVyL2NvcmUnO1xuaW1wb3J0IHtDb21tb25zVXRpbHN9IGZyb20gJ0Blci91dGlscyc7XG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJ3J4anMvaW50ZXJuYWwvT2JzZXJ2YWJsZSc7XG5pbXBvcnQge1BuZ1RhYmxlQ29sdW1uUHJvcHN9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7UG5nVGFibGVDb21wb25lbnR9IGZyb20gJy4uL3RhYmxlL2NvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1twbmctdGFibGUtZXhwYW5kZWQtcm93XScsXG4gIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImN1c3RvbWVyVHBsO2Vsc2UgZGVmYXVsdFwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImN1c3RvbWVyVHBsO2NvbnRleHQ6eyRpbXBsaWNpdDpyb3dJZCxjb250ZXh0OnBuZ1RhYmxlfVwiPjwvbmctY29udGFpbmVyPlxuICAgIDwvbmctY29udGFpbmVyPlxuICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdD5cbiAgICAgIDx0ZCBjb2xzcGFuPVwiMTAwJVwiPlxuICAgICAgICA8cC1jYXJkIHN0eWxlQ2xhc3M9XCJ1aS1jYXJkLXNoYWRvdyB3LTEwMCB1aS10YWJsZS1leHBhbmRlZC1jb250ZW50XCIgPlxuICAgICAgICAgIDxlci1odHRwLXN0YXR1cyBbdGFnXT1cInJvd0lkXCIgZXJQb3NpdGlvbj48L2VyLWh0dHAtc3RhdHVzPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJleHBhbmRDb250ZW50JHxhc3luYyBhcyBleHBhbmRDb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHctMTAwIG0tM1wiIHN0eWxlPVwiZm9udC1zaXplOiAxNnB4XCI+XG4gICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY3VzdG9tZXJDb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgY29sIG9mIGRhdGFDb2x1bW5zXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvbC0yIG15LTNcIj48YiBjbGFzcz1cInB1bGwtcmlnaHRcIiBbaW5uZXJIVE1MXT1cImNvbC5sYWJlbFwiPjwvYj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sLmV4cGFuZFZpZXdDb250ZW50O2Vsc2UgZGVmYXVsdFZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgPGVyLWR5bmEtY29udGVudCBbY29udGVudF09XCJjb2wuZXhwYW5kVmlld0NvbnRlbnRcIiBbY29udGV4dF09XCJ7ZGF0YTogZXhwYW5kQ29udGVudCwgY29sOiBjb2x9XCI+PC9lci1keW5hLWNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdFZpZXc+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29sLTQgbXktM1wiPnt7Y29udGVudChjb2wsIGV4cGFuZENvbnRlbnQpfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImN1c3RvbWVyQ29udGVudFwiPlxuICAgICAgICAgICAgICAgIDxlci1keW5hLWNvbnRlbnQgW2NvbnRlbnRdPVwiZXhwYW5kQ29udGVudFwiPjwvZXItZHluYS1jb250ZW50PlxuICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L3AtY2FyZD5cbiAgICAgIDwvdGQ+XG4gICAgPC9uZy10ZW1wbGF0ZT5cblxuICBgLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcblxuZXhwb3J0IGNsYXNzIFBuZ1RhYmxlRXhwYW5kZWRSb3dDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzIHtcblxuICBASW5wdXQoKSByb3dJZDogYW55O1xuXG4gIEBJbnB1dCgpIGNvbHVtbnM6IFBuZ1RhYmxlQ29sdW1uUHJvcHNbXTtcblxuICBASW5wdXQoKSBzdHlsZUNsYXNzOiBhbnk7XG5cbiAgQElucHV0KCkgc3R5bGU6IHt9IHwgKChyb3cpID0+IHt9KTtcblxuICBleHBhbmRDb250ZW50JDogT2JzZXJ2YWJsZTxhbnk+O1xuXG4gIGN1c3RvbWVyQ29udGVudCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwbmdUYWJsZTogUG5nVGFibGVDb21wb25lbnQpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgZ2V0IGRhdGFDb2x1bW5zKCkge1xuICAgIHJldHVybiB0aGlzLmNvbHVtbnMuZmlsdGVyKGNvbHVtbiA9PiBjb2x1bW4uaXNEYXRhQ29sdW1uICE9PSBmYWxzZSAmJiAhY29sdW1uLmlzQWN0aW9uQ29sdW1uKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlcy5yb3dJZCkge1xuICAgICAgaWYgKHRoaXMucG5nVGFibGUuJHByb3BzLiRleHQub25FeHBhbmRSb3dDb250ZW50KSB7XG4gICAgICAgIHRoaXMuY3VzdG9tZXJDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5leHBhbmRDb250ZW50JCA9IHRoaXMucG5nVGFibGUuJHByb3BzLiRleHQub25FeHBhbmRSb3dDb250ZW50Lm1ldGhvZCh0aGlzLnJvd0lkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29udGVudCQgPSBBcGlVdGlscy5nZXRCeUlkKHRoaXMucG5nVGFibGUuJHByb3BzLiRleHQuYXBpRGF0YVByb3BzLmFwaUVudHJ5LCB0aGlzLnJvd0lkLCB7XG4gICAgICAgICAgdGFnOiB0aGlzLnJvd0lkLFxuICAgICAgICAgIHBheWxvYWQ6IHsnZmllbGRzJzogdGhpcy5wbmdUYWJsZS4kcHJvcHMuJGV4dC5leHBhbmRSb3dGaWVsZHMgfHwgdGhpcy5wbmdUYWJsZS5kYXRhQ29sdW1uTmFtZXN9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnRlbnQoY29sLCByb3dEYXRhKSB7XG4gICAgaWYgKCFjb2wua2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb2wuY2VsbENvbnRlbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjZWxsY29udGVudCcpO1xuICAgICAgcmV0dXJuIGNvbC5jZWxsQ29udGVudCh7cm93OiByb3dEYXRhfSk7XG4gICAgfVxuICAgIGxldCBjID0gcm93RGF0YVtjb2wua2V5XTtcbiAgICBpZiAoQ29tbW9uc1V0aWxzLmlzSnNvbihjKSkge1xuICAgICAgbGV0IGtleTtcbiAgICAgIGlmIChjb2wuZGF0YUZpZWxkKSB7XG4gICAgICAgIGtleSA9IERhdGFGaWVsZFV0aWxzLmdldERlZmF1bHRGaWVsZE5hbWUoY29sLmRhdGFGaWVsZCk7XG4gICAgICB9XG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBDb21tb25zVXRpbHMuZ2V0KGMsIGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0cmFucyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKHN1YiA9PiB7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBDb21tb25zVXRpbHMuZ2V0KGNvbCwgYGRhdGFGaWVsZC5maWVsZHMuJHtzdWJ9LmxhYmVsYCk7XG4gICAgICAgICAgaWYgKGxhYmVsKSB7XG4gICAgICAgICAgICB0cmFuc1tsYWJlbF0gPSBjW3N1Yl07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zW3N1Yl0gPSBjW3N1Yl07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYyA9IHRyYW5zO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFRleHQoYyk7XG4gIH1cbn1cbiJdfQ==