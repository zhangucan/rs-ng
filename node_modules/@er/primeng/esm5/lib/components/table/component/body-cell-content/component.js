/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectionStrategy, Component, Input, QueryList, ViewChildren } from '@angular/core';
import { BaseComponent, DataFieldUtils, SelectorDirective } from '@er/core';
import { DataAttr, DataType, OverlayType } from '@er/types';
import { CommonsUtils } from '@er/utils';
import { PngTableBodyCellComponent } from '../body-cell/component';
import { PngTableComponent } from '../table/component';
var PngTableBodyCellContentComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PngTableBodyCellContentComponent, _super);
    function PngTableBodyCellContentComponent(pngTable, cell) {
        var _this = _super.call(this) || this;
        _this.pngTable = pngTable;
        _this.cell = cell;
        _this.DATA_ATTR = DataAttr;
        _this.DATA_TYPE = DataType;
        _this.OVERLAY_TYPE = OverlayType;
        return _this;
    }
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "cellContent", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.column.dataAttr === DataAttr.BUTTONS) {
                /** @type {?} */
                var btns = this.column.cellContent;
                btns = CommonsUtils.getArrayValue(btns);
                btns = btns.filter(function (btn) { return !btn.show || btn.show === true || btn.show.method === true || (CommonsUtils.isFunction(btn.show.method) && (/** @type {?} */ ((btn.show.method).call(_this, _this.cellContext())))); });
                return btns;
            }
            /** @type {?} */
            var content = this.getValue(this.column.cellContent || this.row[this.column.key]);
            if (CommonsUtils.isEmpty(content) && this.column.defaultCellContent !== undefined) {
                content = this.column.defaultCellContent;
            }
            if (this.column.contentKey) {
                content = CommonsUtils.get(content, this.column.contentKey);
                if (CommonsUtils.isArray(content)) {
                    content = (/** @type {?} */ (content.join(',')));
                }
            }
            else if (this.column.format) {
                CommonsUtils.format(content, this.column.format);
            }
            else if (CommonsUtils.isFunction(this.column.formatter)) {
                content = ((/** @type {?} */ (this.column.formatter)))(content);
            }
            else if (this.column.formatter || CommonsUtils.isTemplateStr(content)) {
                content = CommonsUtils.templateStr(((/** @type {?} */ (this.column.formatter))) || content, this.row);
            }
            else if (CommonsUtils.isJson(content)) {
                content = DataFieldUtils.getFieldDisplayContent(content, this.column.dataField);
            }
            if (CommonsUtils.isString(content) && this.column.maxLength && content.length > this.column.maxLength) {
                content = content.substr(0, this.column.maxLength) + '...';
            }
            if (content === true) {
                return '是';
            }
            else if (content === false) {
                return '否';
            }
            return content;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "cellIcon", {
        get: /**
         * @return {?}
         */
        function () {
            return this.getValue(this.column.cellIcon);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "toolTip", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var toolTip = this.getValue(this.column.toolTip);
            if (!toolTip && this.column.maxLength && this.row[this.column.key] && this.row[this.column.key].length > this.column.maxLength) {
                return this.row[this.column.key];
            }
            return toolTip;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "cellClass", {
        get: /**
         * @return {?}
         */
        function () {
            return CommonsUtils.getValue(this.column.cellStyleClass, this.cellContext());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "cellStyle", {
        get: /**
         * @return {?}
         */
        function () {
            return CommonsUtils.getValue(this.column.cellStyle, this.cellContext());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "routLink", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (!this.column.routLink) {
                return;
            }
            /** @type {?} */
            var routerLink = this.column.routLink;
            if (CommonsUtils.isString(routerLink)) {
                routerLink = [routerLink];
            }
            /** @type {?} */
            var routeParams;
            if (this.column.routParam) {
                if (CommonsUtils.isFunction(this.column.routParam)) {
                    routeParams = ((/** @type {?} */ (this.column.routParam))).call(this.pngTable, this.column, this.row) || [];
                }
                else if (CommonsUtils.isArray(this.column.routParam)) {
                    routeParams = ((/** @type {?} */ (this.column.routParam))).map(function (param) { return _this.row[param]; }) || [];
                }
                else if (CommonsUtils.isString(this.column.routParam)) {
                    routeParams = [this.row[(/** @type {?} */ (this.column.routParam))]] || [];
                }
                else if (this.pngTable.$props.dataKey) {
                    routeParams = [this.row[this.pngTable.$props.dataKey]] || [];
                }
            }
            if (routeParams) {
                routerLink = tslib_1.__spread((/** @type {?} */ (routerLink)), routeParams);
            }
            return routerLink;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PngTableBodyCellContentComponent.prototype, "queryParam", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            var _a;
            if (!this.column.routQueryParams) {
                return;
            }
            if (CommonsUtils.isFunction(this.column.routQueryParams)) {
                return ((/** @type {?} */ (this.column.routQueryParams))).call(this.pngTable, this.column, this.row);
            }
            else if (CommonsUtils.isArray(this.column.routQueryParams)) {
                /** @type {?} */
                var params_1 = {};
                ((/** @type {?} */ (this.column.routQueryParams))).map(function (param) { return params_1[param] = _this.row[param]; });
                return params_1;
            }
            else if (CommonsUtils.isString(this.column.routQueryParams)) {
                return _a = {}, _a[(/** @type {?} */ (this.column.routQueryParams))] = this.row[(/** @type {?} */ (this.column.routQueryParams))], _a;
            }
            return undefined;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} icon
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.iconClass = /**
     * @param {?} icon
     * @return {?}
     */
    function (icon) {
        if (icon && icon.trim().startsWith('fa-')) {
            return "fa " + icon;
        }
        return icon;
    };
    /**
     * @param {?} attr
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.hasAttr = /**
     * @param {?} attr
     * @return {?}
     */
    function (attr) {
        return this.column.dataAttr === attr ||
            (CommonsUtils.isArray(this.column.dataAttr) && ((/** @type {?} */ (this.column.dataAttr))).indexOf(attr) >= 0);
    };
    /**
     * @param {?} overlay
     * @param {?} index
     * @param {?=} event
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.overlayContext = /**
     * @param {?} overlay
     * @param {?} index
     * @param {?=} event
     * @return {?}
     */
    function (overlay, index, event) {
        return tslib_1.__assign({}, this.cellContext(event), { type: overlay.type, content: this.getValue(overlay.content), context: overlay.context, styleClass: this.getValue(overlay.styleClass), style: this.getValue(overlay.style), overlayStyleClass: this.getValue(overlay.overlayStyleClass), overlayStyle: this.getValue(overlay.overlayStyle), id: "overlay-cell-" + this.column.key + "-" + index });
    };
    /**
     * @param {?} content
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.treeContent = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        if (CommonsUtils.isArray(content)) {
            return '共' + ((/** @type {?} */ (content))).length + '项';
        }
        else if (CommonsUtils.isJson(content)) {
            return '共' + Object.keys(content).length + '项';
        }
        else {
            return content;
        }
    };
    /**
     * @param {?} content
     * @param {?=} event
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.overlayTreeContext = /**
     * @param {?} content
     * @param {?=} event
     * @return {?}
     */
    function (content, event) {
        return tslib_1.__assign({}, this.cellContext(event), { type: OverlayType.TREE, content: content });
    };
    /**
     * @param {?=} event
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.cellContext = /**
     * @param {?=} event
     * @return {?}
     */
    function (event) {
        return this.cell.cellContext(event);
    };
    /**
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.column.overlays) {
            ((/** @type {?} */ (this.column.overlays))).filter(function (overlay) { return overlay.type === OverlayType.MENU; })
                .forEach(function (overlay) {
                if (overlay.content['menuItem'].command) {
                    /** @type {?} */
                    var command_1 = overlay.content['menuItem'].command;
                    overlay.content['menuItem'].command = function (event) { return command_1.call(_this, _this.cellContext(event)); };
                }
            });
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.cellClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.preventDefault();
        if (this.column.onClick) {
            this.column.onClick.call(this.pngTable, this.cellContext(event));
        }
    };
    /**
     * @param {?} event
     * @param {?} tipText
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.toggleTip = /**
     * @param {?} event
     * @param {?} tipText
     * @return {?}
     */
    function (event, tipText) {
        if (tipText) {
            this.pngTable.showOverlay((/** @type {?} */ ({
                $event: event,
                content: tipText,
                styleClass: 'alert alert-info',
                style: {
                    overflow: 'auto',
                    width: '300px',
                    height: '300px'
                }
            })));
        }
    };
    /**
     * @private
     * @param {?} target
     * @return {?}
     */
    PngTableBodyCellContentComponent.prototype.getValue = /**
     * @private
     * @param {?} target
     * @return {?}
     */
    function (target) {
        return CommonsUtils.getValue(target, this.cellContext()) || '';
    };
    PngTableBodyCellContentComponent.decorators = [
        { type: Component, args: [{
                    selector: 'png-table-body-cell-content',
                    template: "<ng-container *ngIf=\"customerTpl;else default\">\n  <ng-container *ngTemplateOutlet=\"customerTpl;context:cellContext()\"></ng-container>\n</ng-container>\n<ng-template #default>\n  <ng-container *ngIf=\"column.overlays\">\n    <ng-container *ngFor=\"let overlay of column.overlays; index as i\">\n      <ng-container [ngSwitch]=\"overlay.type\">\n        <ng-container *ngSwitchCase=\"OVERLAY_TYPE.CHART\">\n          <i [ngClass]=\"overlay.icon || 'fa fa-bar-chart text-primary'\" class=\"pull-right\"\n             title=\"\u663E\u793A\u56FE\u5F62\" (click)=\"pngTable.showOverlay(overlayContext(overlay,i,$event))\"></i>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"OVERLAY_TYPE.TABLE\">\n          <i [ngClass]=\"overlay.icon || 'fa fa-eye text-primary'\" class=\"pull-right\"\n             title=\"\u663E\u793A\u8868\u683C\" (click)=\"pngTable.showOverlay(overlayContext(overlay,i,$event))\"></i>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"OVERLAY_TYPE.PANEL\">\n          <i [ngClass]=\"overlay.icon || 'fa fa-eye text-primary'\" class=\"pull-right\"\n             title=\"\u663E\u793A\u66F4\u591A\u4FE1\u606F\" (click)=\"pngTable.showOverlay(overlayContext(overlay,i,$event))\"></i>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"OVERLAY_TYPE.MENU\">\n          <i [ngClass]=\"overlay.icon || 'fa fa-arrow-circle-down text-primary'\" class=\"pull-right\"\n             title=\"\u663E\u793A\u83DC\u5355\" (click)=\"pngTable.showOverlay(overlayContext(overlay,i,$event))\"></i>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"OVERLAY_TYPE.FRAME\">\n          <i [ngClass]=\"overlay.icon || 'fa fa-play text-primary'\"\n             title=\"\u663E\u793A\u66F4\u591A\u5185\u5BB9\" (click)=\"pngTable.showOverlay(overlayContext(overlay,i,$event))\"></i>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"OVERLAY_TYPE.COMPONENT\">\n          <i [ngClass]=\"overlay.icon || 'fa fa-eye text-primary'\"\n             title=\"\u663E\u793A\u66F4\u591A\u5185\u5BB9\" (click)=\"pngTable.showOverlay(overlayContext(overlay,i,$event))\"></i>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n  <ng-container [ngSwitch]=\"column.dataAttr\">\n    <ng-container *ngSwitchCase=\"DATA_ATTR.IMAGE\">\n      <png-image [imageStyleClass]=\"cellClass\"\n                 [imageStyle]=\"cellStyle\"\n                 size=\"small\"\n                 [fileId]=\"cellContent\"\n                 [showDescription]=\"false\"\n      >\n      </png-image>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.TAG\">\n        <span erTag [pTooltip]=\"toolTip\"\n              tooltipPosition=\"top\"\n              class=\"pull-right\"\n              [ngClass]=\"cellClass\"\n              [ngStyle]=\"cellStyle\">{{cellContent}}</span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.URL\">\n      <a [pTooltip]=\"toolTip\"\n         tooltipPosition=\"top\"\n         [href]=\"routLink\"\n         [ngClass]=\"cellClass\"\n         [ngStyle]=\"cellStyle\"\n         target=\"_blank\">{{cellContent}}</a>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.COLOR\">\n      <span [ngClass]=\"cellContent | lowercase\"></span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.TREE\">\n      <span class=\"pull-right\">\n        {{treeContent(cellContent)}} <i class=\"fa fa-tree blue\" title=\"\u67E5\u770B\u5185\u5BB9\"\n                                        (click)=\"pngTable.showOverlay(overlayTreeContext(cellContent,$event))\"></i>\n      </span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.ICON\">\n      <span class=\"pull-right\"><i [ngClass]=\"iconClass(cellContent)\"></i></span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.DATE\">\n      <span>{{cellContent | date: 'yyyy-MM-dd'}}</span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.TIME\">\n      <span>{{cellContent | date: 'HH:mm:ss'}}</span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.DATE_TIME\">\n      <span>{{cellContent | date: 'yyyy-MM-dd HH:mm:ss'}}</span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.UP_TO_NOW\">\n      <ng-container *ngIf=\"cellContent\">\n       <span erTag class=\"pull-right date-to-now\" [pTooltip]=\"cellContent\" tooltipPosition=\"top\">\n        {{cellContent | erUpToNow}}\n      </span>\n        <i class=\"fa fa-clock-o pull-right\"></i>\n      </ng-container>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.BADGE\">\n      <span [pTooltip]=\"toolTip\"\n            tooltipPosition=\"top\"\n            class='pull-right badge'\n            [ngClass]=\"cellClass\"\n            [ngStyle]=\"cellStyle\"\n            [innerHTML]=\"cellContent\"></span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.CODE\">\n      <span [pTooltip]=\"toolTip\"\n            tooltipPosition=\"top\"\n            class=\"pull-right data-code\"\n            [ngClass]=\"cellClass\"\n            [ngStyle]=\"cellStyle\"\n            [innerHTML]=\"cellContent\"></span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.PERCENT\">\n      <span [innerHTML]=\"cellContent|erPercent\"></span>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"DATA_ATTR.BUTTONS\">\n      <png-buttons [btns]=\"cellContent\" [context]=\"cellContext()\" [styleClass]=\"cellClass\"\n                   [style]=\"cellStyle\"></png-buttons>\n    </ng-container>\n    <ng-container *ngSwitchDefault>\n      <ng-container *ngIf=\"column.routLink || column.routParam\">\n        <a [pTooltip]=\"toolTip\" tooltipPosition=\"top\"\n           [ngClass]=\"cellClass\"\n           [ngStyle]=\"cellStyle\"\n           [routerLink]=\"routLink\" [queryParams]=\"queryParam\"\n           [innerHTML]=\"cellContent\"></a>\n      </ng-container>\n      <ng-container *ngIf=\"column.onClick\">\n        <a href=\"#\" [pTooltip]=\"toolTip\" tooltipPosition=\"top\"\n           [ngClass]=\"cellClass\"\n           [ngStyle]=\"cellStyle\"\n           (click)=\"cellClick($event)\"\n           [innerHTML]=\"cellContent\"></a>\n      </ng-container>\n      <ng-container *ngIf=\"!(column.routLink || column.routParam) && !column.onClick\">\n              <span [innerHTML]=\"cellContent\"\n                    [pTooltip]=\"toolTip\"\n                    tooltipPosition=\"top\"\n                    [ngClass]=\"cellClass\"\n                    [ngStyle]=\"cellStyle\"\n                    class=\"pull-right\"\n                    (click)=\"toggleTip($event, toolTip)\"\n              ></span>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</ng-template>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    /** @nocollapse */
    PngTableBodyCellContentComponent.ctorParameters = function () { return [
        { type: PngTableComponent },
        { type: PngTableBodyCellComponent }
    ]; };
    PngTableBodyCellContentComponent.propDecorators = {
        column: [{ type: Input }],
        row: [{ type: Input }],
        rowIndex: [{ type: Input }],
        selectors: [{ type: ViewChildren, args: [SelectorDirective,] }]
    };
    return PngTableBodyCellContentComponent;
}(BaseComponent));
export { PngTableBodyCellContentComponent };
if (false) {
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.DATA_ATTR;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.DATA_TYPE;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.OVERLAY_TYPE;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.column;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.row;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.rowIndex;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.selectors;
    /** @type {?} */
    PngTableBodyCellContentComponent.prototype.pngTable;
    /**
     * @type {?}
     * @private
     */
    PngTableBodyCellContentComponent.prototype.cell;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL3ByaW1lbmcvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90YWJsZS9jb21wb25lbnQvYm9keS1jZWxsLWNvbnRlbnQvY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFDLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsU0FBUyxFQUFFLFlBQVksRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUMsYUFBYSxFQUFFLGNBQWMsRUFBRSxpQkFBaUIsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUMxRSxPQUFPLEVBQUMsUUFBUSxFQUFFLFFBQVEsRUFBMkIsV0FBVyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQ25GLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFFdkMsT0FBTyxFQUFDLHlCQUF5QixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDakUsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFckQ7SUFNc0QsNERBQWE7SUFnQmpFLDBDQUFtQixRQUEyQixFQUMxQixJQUErQjtRQURuRCxZQUVFLGlCQUFPLFNBQ1I7UUFIa0IsY0FBUSxHQUFSLFFBQVEsQ0FBbUI7UUFDMUIsVUFBSSxHQUFKLElBQUksQ0FBMkI7UUFmbkQsZUFBUyxHQUFHLFFBQVEsQ0FBQztRQUVyQixlQUFTLEdBQUcsUUFBUSxDQUFDO1FBRXJCLGtCQUFZLEdBQUcsV0FBVyxDQUFDOztJQWEzQixDQUFDO0lBRUQsc0JBQUkseURBQVc7Ozs7UUFBZjtZQUFBLGlCQWtDQztZQWpDQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxPQUFPLEVBQUU7O29CQUN6QyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXO2dCQUNsQyxJQUFJLEdBQUcsWUFBWSxDQUFDLGFBQWEs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SyxFQUFFLE9BQU87b0JBQ2QsTUFBTSxFQUFFLE9BQU87aUJBQ2hCO2FBQ0YsRUFBQSxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7Ozs7OztJQUVPLG1EQUFROzs7OztJQUFoQixVQUFpQixNQUFNO1FBQ3JCLE9BQU8sWUFBWSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2pFLENBQUM7O2dCQWpORixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLDZCQUE2QjtvQkFDdkMsb21OQUF1QjtvQkFDdkIsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2hEOzs7O2dCQU5PLGlCQUFpQjtnQkFEakIseUJBQXlCOzs7eUJBaUI5QixLQUFLO3NCQUVMLEtBQUs7MkJBRUwsS0FBSzs0QkFFTCxZQUFZLFNBQUMsaUJBQWlCOztJQThMakMsdUNBQUM7Q0FBQSxBQWxORCxDQU1zRCxhQUFhLEdBNE1sRTtTQTVNWSxnQ0FBZ0M7OztJQUUzQyxxREFBcUI7O0lBRXJCLHFEQUFxQjs7SUFFckIsd0RBQTJCOztJQUUzQixrREFBcUM7O0lBRXJDLCtDQUFtQjs7SUFFbkIsb0RBQTBCOztJQUUxQixxREFBeUU7O0lBRTdELG9EQUFrQzs7Ozs7SUFDbEMsZ0RBQXVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBRdWVyeUxpc3QsIFZpZXdDaGlsZHJlbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0Jhc2VDb21wb25lbnQsIERhdGFGaWVsZFV0aWxzLCBTZWxlY3RvckRpcmVjdGl2ZX0gZnJvbSAnQGVyL2NvcmUnO1xuaW1wb3J0IHtEYXRhQXR0ciwgRGF0YVR5cGUsIE92ZXJsYXksIE92ZXJsYXlDb250ZXh0LCBPdmVybGF5VHlwZX0gZnJvbSAnQGVyL3R5cGVzJztcbmltcG9ydCB7Q29tbW9uc1V0aWxzfSBmcm9tICdAZXIvdXRpbHMnO1xuaW1wb3J0IHtQbmdUYWJsZUNvbHVtblByb3BzfSBmcm9tICcuLi8uLi90eXBlcyc7XG5pbXBvcnQge1BuZ1RhYmxlQm9keUNlbGxDb21wb25lbnR9IGZyb20gJy4uL2JvZHktY2VsbC9jb21wb25lbnQnO1xuaW1wb3J0IHtQbmdUYWJsZUNvbXBvbmVudH0gZnJvbSAnLi4vdGFibGUvY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncG5nLXRhYmxlLWJvZHktY2VsbC1jb250ZW50JyxcbiAgdGVtcGxhdGVVcmw6ICd0cGwuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuXG5leHBvcnQgY2xhc3MgUG5nVGFibGVCb2R5Q2VsbENvbnRlbnRDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBEQVRBX0FUVFIgPSBEYXRhQXR0cjtcblxuICBEQVRBX1RZUEUgPSBEYXRhVHlwZTtcblxuICBPVkVSTEFZX1RZUEUgPSBPdmVybGF5VHlwZTtcblxuICBASW5wdXQoKSBjb2x1bW46IFBuZ1RhYmxlQ29sdW1uUHJvcHM7XG5cbiAgQElucHV0KCkgcm93OiB7fVtdO1xuXG4gIEBJbnB1dCgpIHJvd0luZGV4OiBudW1iZXI7XG5cbiAgQFZpZXdDaGlsZHJlbihTZWxlY3RvckRpcmVjdGl2ZSkgc2VsZWN0b3JzOiBRdWVyeUxpc3Q8U2VsZWN0b3JEaXJlY3RpdmU+O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwbmdUYWJsZTogUG5nVGFibGVDb21wb25lbnQsXG4gICAgICAgICAgICAgIHByaXZhdGUgY2VsbDogUG5nVGFibGVCb2R5Q2VsbENvbXBvbmVudCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBnZXQgY2VsbENvbnRlbnQoKSB7XG4gICAgaWYgKHRoaXMuY29sdW1uLmRhdGFBdHRyID09PSBEYXRhQXR0ci5CVVRUT05TKSB7XG4gICAgICBsZXQgYnRucyA9IHRoaXMuY29sdW1uLmNlbGxDb250ZW50O1xuICAgICAgYnRucyA9IENvbW1vbnNVdGlscy5nZXRBcnJheVZhbHVlKGJ0bnMpO1xuICAgICAgYnRucyA9IGJ0bnMuZmlsdGVyKGJ0biA9PiAhYnRuLnNob3cgfHwgYnRuLnNob3cgPT09IHRydWUgfHwgYnRuLnNob3cubWV0aG9kID09PSB0cnVlIHx8IChDb21tb25zVXRpbHMuaXNGdW5jdGlvbihidG4uc2hvdy5tZXRob2QpICYmIDxGdW5jdGlvbj4oYnRuLnNob3cubWV0aG9kKS5jYWxsKHRoaXMsIHRoaXMuY2VsbENvbnRleHQoKSkpKTtcbiAgICAgIHJldHVybiBidG5zO1xuICAgIH1cbiAgICBsZXQgY29udGVudCA9IHRoaXMuZ2V0VmFsdWUodGhpcy5jb2x1bW4uY2VsbENvbnRlbnQgfHwgdGhpcy5yb3dbdGhpcy5jb2x1bW4ua2V5XSk7XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc0VtcHR5KGNvbnRlbnQpICYmIHRoaXMuY29sdW1uLmRlZmF1bHRDZWxsQ29udGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb250ZW50ID0gdGhpcy5jb2x1bW4uZGVmYXVsdENlbGxDb250ZW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5jb2x1bW4uY29udGVudEtleSkge1xuICAgICAgY29udGVudCA9IENvbW1vbnNVdGlscy5nZXQoY29udGVudCwgdGhpcy5jb2x1bW4uY29udGVudEtleSk7XG4gICAgICBpZiAoQ29tbW9uc1V0aWxzLmlzQXJyYXkoY29udGVudCkpIHtcbiAgICAgICAgY29udGVudCA9IDxzdHJpbmdbXT5jb250ZW50LmpvaW4oJywnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuY29sdW1uLmZvcm1hdCkge1xuICAgICAgQ29tbW9uc1V0aWxzLmZvcm1hdChjb250ZW50LCB0aGlzLmNvbHVtbi5mb3JtYXQpO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzRnVuY3Rpb24odGhpcy5jb2x1bW4uZm9ybWF0dGVyKSkge1xuICAgICAgY29udGVudCA9ICh0aGlzLmNvbHVtbi5mb3JtYXR0ZXIgYXMgRnVuY3Rpb24pKGNvbnRlbnQpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb2x1bW4uZm9ybWF0dGVyIHx8IENvbW1vbnNVdGlscy5pc1RlbXBsYXRlU3RyKGNvbnRlbnQpKSB7XG4gICAgICBjb250ZW50ID0gQ29tbW9uc1V0aWxzLnRlbXBsYXRlU3RyKCh0aGlzLmNvbHVtbi5mb3JtYXR0ZXIgYXMgc3RyaW5nKSB8fCBjb250ZW50LCB0aGlzLnJvdyk7XG4gICAgfSBlbHNlIGlmIChDb21tb25zVXRpbHMuaXNKc29uKGNvbnRlbnQpKSB7XG4gICAgICBjb250ZW50ID0gRGF0YUZpZWxkVXRpbHMuZ2V0RmllbGREaXNwbGF5Q29udGVudChjb250ZW50LCB0aGlzLmNvbHVtbi5kYXRhRmllbGQpO1xuICAgIH1cbiAgICBpZiAoQ29tbW9uc1V0aWxzLmlzU3RyaW5nKGNvbnRlbnQpICYmIHRoaXMuY29sdW1uLm1heExlbmd0aCAmJiBjb250ZW50Lmxlbmd0aCA+IHRoaXMuY29sdW1uLm1heExlbmd0aCkge1xuICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyKDAsIHRoaXMuY29sdW1uLm1heExlbmd0aCkgKyAnLi4uJztcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiAn5pivJztcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gJ+WQpic7XG4gICAgfVxuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgZ2V0IGNlbGxJY29uKCkge1xuICAgIHJldHVybiB0aGlzLmdldFZhbHVlKHRoaXMuY29sdW1uLmNlbGxJY29uKTtcbiAgfVxuXG4gIGdldCB0b29sVGlwKCkge1xuICAgIGNvbnN0IHRvb2xUaXAgPSB0aGlzLmdldFZhbHVlKHRoaXMuY29sdW1uLnRvb2xUaXApO1xuICAgIGlmICghdG9vbFRpcCAmJiB0aGlzLmNvbHVtbi5tYXhMZW5ndGggJiYgdGhpcy5yb3dbdGhpcy5jb2x1bW4ua2V5XSAmJiB0aGlzLnJvd1t0aGlzLmNvbHVtbi5rZXldLmxlbmd0aCA+IHRoaXMuY29sdW1uLm1heExlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMucm93W3RoaXMuY29sdW1uLmtleV07XG4gICAgfVxuICAgIHJldHVybiB0b29sVGlwO1xuICB9XG5cbiAgZ2V0IGNlbGxDbGFzcygpIHtcbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFZhbHVlKHRoaXMuY29sdW1uLmNlbGxTdHlsZUNsYXNzLCB0aGlzLmNlbGxDb250ZXh0KCkpO1xuICB9XG5cbiAgZ2V0IGNlbGxTdHlsZSgpIHtcbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFZhbHVlKHRoaXMuY29sdW1uLmNlbGxTdHlsZSwgdGhpcy5jZWxsQ29udGV4dCgpKTtcbiAgfVxuXG4gIGdldCByb3V0TGluaygpIHtcbiAgICBpZiAoIXRoaXMuY29sdW1uLnJvdXRMaW5rKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCByb3V0ZXJMaW5rID0gdGhpcy5jb2x1bW4ucm91dExpbms7XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhyb3V0ZXJMaW5rKSkge1xuICAgICAgcm91dGVyTGluayA9IFtyb3V0ZXJMaW5rXTtcbiAgICB9XG4gICAgbGV0IHJvdXRlUGFyYW1zOiBhbnlbXTtcbiAgICBpZiAodGhpcy5jb2x1bW4ucm91dFBhcmFtKSB7XG4gICAgICBpZiAoQ29tbW9uc1V0aWxzLmlzRnVuY3Rpb24odGhpcy5jb2x1bW4ucm91dFBhcmFtKSkge1xuICAgICAgICByb3V0ZVBhcmFtcyA9ICg8RnVuY3Rpb24+dGhpcy5jb2x1bW4ucm91dFBhcmFtKS5jYWxsKHRoaXMucG5nVGFibGUsIHRoaXMuY29sdW1uLCB0aGlzLnJvdykgfHwgW107XG4gICAgICB9IGVsc2UgaWYgKENvbW1vbnNVdGlscy5pc0FycmF5KHRoaXMuY29sdW1uLnJvdXRQYXJhbSkpIHtcbiAgICAgICAgcm91dGVQYXJhbXMgPSAoPGFueVtdPnRoaXMuY29sdW1uLnJvdXRQYXJhbSkubWFwKHBhcmFtID0+IHRoaXMucm93W3BhcmFtXSkgfHwgW107XG4gICAgICB9IGVsc2UgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyh0aGlzLmNvbHVtbi5yb3V0UGFyYW0pKSB7XG4gICAgICAgIHJvdXRlUGFyYW1zID0gW3RoaXMucm93WzxzdHJpbmc+dGhpcy5jb2x1bW4ucm91dFBhcmFtXV0gfHwgW107XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucG5nVGFibGUuJHByb3BzLmRhdGFLZXkpIHtcbiAgICAgICAgcm91dGVQYXJhbXMgPSBbdGhpcy5yb3dbdGhpcy5wbmdUYWJsZS4kcHJvcHMuZGF0YUtleV1dIHx8IFtdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocm91dGVQYXJhbXMpIHtcbiAgICAgIHJvdXRlckxpbmsgPSBbLi4uPGFueVtdPnJvdXRlckxpbmssIC4uLnJvdXRlUGFyYW1zXTtcbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlckxpbms7XG4gIH1cblxuICBnZXQgcXVlcnlQYXJhbSgpIHtcbiAgICBpZiAoIXRoaXMuY29sdW1uLnJvdXRRdWVyeVBhcmFtcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoQ29tbW9uc1V0aWxzLmlzRnVuY3Rpb24odGhpcy5jb2x1bW4ucm91dFF1ZXJ5UGFyYW1zKSkge1xuICAgICAgcmV0dXJuICg8RnVuY3Rpb24+dGhpcy5jb2x1bW4ucm91dFF1ZXJ5UGFyYW1zKS5jYWxsKHRoaXMucG5nVGFibGUsIHRoaXMuY29sdW1uLCB0aGlzLnJvdyk7XG4gICAgfSBlbHNlIGlmIChDb21tb25zVXRpbHMuaXNBcnJheSh0aGlzLmNvbHVtbi5yb3V0UXVlcnlQYXJhbXMpKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgICAgICg8YW55W10+dGhpcy5jb2x1bW4ucm91dFF1ZXJ5UGFyYW1zKS5tYXAocGFyYW0gPT4gcGFyYW1zW3BhcmFtXSA9IHRoaXMucm93W3BhcmFtXSk7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzU3RyaW5nKHRoaXMuY29sdW1uLnJvdXRRdWVyeVBhcmFtcykpIHtcbiAgICAgIHJldHVybiB7WzxzdHJpbmc+dGhpcy5jb2x1bW4ucm91dFF1ZXJ5UGFyYW1zXTogdGhpcy5yb3dbPHN0cmluZz50aGlzLmNvbHVtbi5yb3V0UXVlcnlQYXJhbXNdfTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGljb25DbGFzcyhpY29uKSB7XG4gICAgaWYgKGljb24gJiYgaWNvbi50cmltKCkuc3RhcnRzV2l0aCgnZmEtJykpIHtcbiAgICAgIHJldHVybiBgZmEgJHtpY29ufWA7XG4gICAgfVxuICAgIHJldHVybiBpY29uO1xuICB9XG5cbiAgaGFzQXR0cihhdHRyKSB7XG4gICAgcmV0dXJuIHRoaXMuY29sdW1uLmRhdGFBdHRyID09PSBhdHRyIHx8XG4gICAgICAoQ29tbW9uc1V0aWxzLmlzQXJyYXkodGhpcy5jb2x1bW4uZGF0YUF0dHIpICYmICh0aGlzLmNvbHVtbi5kYXRhQXR0ciBhcyBEYXRhQXR0cltdKS5pbmRleE9mKGF0dHIpID49IDApO1xuICB9XG5cbiAgb3ZlcmxheUNvbnRleHQob3ZlcmxheSwgaW5kZXgsIGV2ZW50Pyk6IE92ZXJsYXlDb250ZXh0IHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4udGhpcy5jZWxsQ29udGV4dChldmVudCksXG4gICAgICB0eXBlOiBvdmVybGF5LnR5cGUsXG4gICAgICBjb250ZW50OiB0aGlzLmdldFZhbHVlKG92ZXJsYXkuY29udGVudCksXG4gICAgICBjb250ZXh0OiBvdmVybGF5LmNvbnRleHQsXG4gICAgICBzdHlsZUNsYXNzOiB0aGlzLmdldFZhbHVlKG92ZXJsYXkuc3R5bGVDbGFzcyksXG4gICAgICBzdHlsZTogdGhpcy5nZXRWYWx1ZShvdmVybGF5LnN0eWxlKSxcbiAgICAgIG92ZXJsYXlTdHlsZUNsYXNzOiB0aGlzLmdldFZhbHVlKG92ZXJsYXkub3ZlcmxheVN0eWxlQ2xhc3MpLFxuICAgICAgb3ZlcmxheVN0eWxlOiB0aGlzLmdldFZhbHVlKG92ZXJsYXkub3ZlcmxheVN0eWxlKSxcbiAgICAgIGlkOiBgb3ZlcmxheS1jZWxsLSR7dGhpcy5jb2x1bW4ua2V5fS0ke2luZGV4fWBcbiAgICB9O1xuICB9XG5cbiAgdHJlZUNvbnRlbnQoY29udGVudCkge1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShjb250ZW50KSkge1xuICAgICAgcmV0dXJuICflhbEnICsgKGNvbnRlbnQgYXMgYW55W10pLmxlbmd0aCArICfpobknO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzSnNvbihjb250ZW50KSkge1xuICAgICAgcmV0dXJuICflhbEnICsgT2JqZWN0LmtleXMoY29udGVudCkubGVuZ3RoICsgJ+mhuSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIG92ZXJsYXlUcmVlQ29udGV4dChjb250ZW50LCBldmVudD8pOiBPdmVybGF5Q29udGV4dCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMuY2VsbENvbnRleHQoZXZlbnQpLFxuICAgICAgdHlwZTogT3ZlcmxheVR5cGUuVFJFRSxcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcbiAgICB9O1xuICB9XG5cbiAgY2VsbENvbnRleHQoZXZlbnQ/KSB7XG4gICAgcmV0dXJuIHRoaXMuY2VsbC5jZWxsQ29udGV4dChldmVudCk7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb2x1bW4ub3ZlcmxheXMpIHtcbiAgICAgICg8T3ZlcmxheVtdPnRoaXMuY29sdW1uLm92ZXJsYXlzKS5maWx0ZXIob3ZlcmxheSA9PiBvdmVybGF5LnR5cGUgPT09IE92ZXJsYXlUeXBlLk1FTlUpXG4gICAgICAgIC5mb3JFYWNoKG92ZXJsYXkgPT4ge1xuICAgICAgICAgIGlmIChvdmVybGF5LmNvbnRlbnRbJ21lbnVJdGVtJ10uY29tbWFuZCkge1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG92ZXJsYXkuY29udGVudFsnbWVudUl0ZW0nXS5jb21tYW5kO1xuICAgICAgICAgICAgb3ZlcmxheS5jb250ZW50WydtZW51SXRlbSddLmNvbW1hbmQgPSAoZXZlbnQpID0+IGNvbW1hbmQuY2FsbCh0aGlzLCB0aGlzLmNlbGxDb250ZXh0KGV2ZW50KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjZWxsQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICh0aGlzLmNvbHVtbi5vbkNsaWNrKSB7XG4gICAgICB0aGlzLmNvbHVtbi5vbkNsaWNrLmNhbGwodGhpcy5wbmdUYWJsZSwgdGhpcy5jZWxsQ29udGV4dChldmVudCkpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZVRpcChldmVudCwgdGlwVGV4dCkge1xuICAgIGlmICh0aXBUZXh0KSB7XG4gICAgICB0aGlzLnBuZ1RhYmxlLnNob3dPdmVybGF5KDxPdmVybGF5Q29udGV4dD57XG4gICAgICAgICRldmVudDogZXZlbnQsXG4gICAgICAgIGNvbnRlbnQ6IHRpcFRleHQsXG4gICAgICAgIHN0eWxlQ2xhc3M6ICdhbGVydCBhbGVydC1pbmZvJyxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxuICAgICAgICAgIHdpZHRoOiAnMzAwcHgnLFxuICAgICAgICAgIGhlaWdodDogJzMwMHB4J1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFZhbHVlKHRhcmdldCkge1xuICAgIHJldHVybiBDb21tb25zVXRpbHMuZ2V0VmFsdWUodGFyZ2V0LCB0aGlzLmNlbGxDb250ZXh0KCkpIHx8ICcnO1xuICB9XG59XG4iXX0=