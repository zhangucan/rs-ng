/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
var FormlyFieldValidatorExtension = /** @class */ (function () {
    function FormlyFieldValidatorExtension() {
    }
    /**
     * @param {?} field
     * @return {?}
     */
    FormlyFieldValidatorExtension.prototype.onPopulate = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        // console.log('FormlyFieldValidatorExtension');
        // this.initFieldValidation(field);
        // this.initFieldAsyncValidation(field);
    };
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    FormlyFieldValidatorExtension.prototype.initFieldValidation = /**
     * @private
     * @param {?} field
     * @return {?}
     */
    function (field) {
        if (field.validators) {
            return;
        }
        this.initPredefinedFieldValidation(field);
        if (field.validators) {
            var _loop_1 = function (validatorName) {
                if (validatorName !== 'validation') {
                    /** @type {?} */
                    var validator_1 = field.validators[validatorName];
                    /** @type {?} */
                    var errorPath_1;
                    /** @type {?} */
                    var message_1;
                    if (validator_1 && typeof validator_1 === 'object') {
                        errorPath_1 = validator_1.errorPath;
                        message_1 = validator_1.message;
                        validator_1 = validator_1.expression;
                    }
                    field.validators.push(function (control) {
                        var _a, _b;
                        /** @type {?} */
                        var isValid = validator_1(control, field);
                        if (errorPath_1 && field.formControl && field.formControl.get(errorPath_1)) {
                            if (!isValid) {
                                field.formControl.get(errorPath_1).setErrors(tslib_1.__assign({}, (field.formControl.get(errorPath_1).errors || {}), (_a = {}, _a[validatorName] = { message: message_1 }, _a)));
                            }
                            else {
                                /** @type {?} */
                                var errors = (field.formControl.get(errorPath_1).errors || {});
                                delete errors[validatorName];
                                field.formControl.get(errorPath_1).setErrors(Object.keys(errors).length === 0 ? null : errors);
                            }
                        }
                        return isValid ? null : (_b = {}, _b[validatorName] = errorPath_1 ? { errorPath: errorPath_1 } : true, _b);
                    });
                }
                else {
                    if (!Array.isArray(field.validators.validation)) {
                        field.validators.validation = [field.validators.validation];
                    }
                    // field.validators.validation
                    //   .forEach((validator: any) => field._validators.push(this.wrapNgValidatorFn(field, validator)));
                }
            };
            for (var validatorName in field.validators) {
                _loop_1(validatorName);
            }
        }
    };
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    FormlyFieldValidatorExtension.prototype.initFieldAsyncValidation = /**
     * @private
     * @param {?} field
     * @return {?}
     */
    function (field) {
        if (field.asyncValidators) {
            return;
        }
        if (field.asyncValidators) {
            // for (const validatorName in field.asyncValidators) {
            //   if (validatorName !== 'validation') {
            //     let validator = field.asyncValidators[validatorName];
            //     if (isObject(validator)) {
            //       validator = validator.expression;
            //     }
            //
            //     field._asyncValidators.push((control: AbstractControl) => new Promise((resolve) => {
            //       return validator(control, field).then((result: boolean) => {
            //         resolve(result ? null : { [validatorName]: true });
            //       });
            //     }));
            //   } else {
            //     if (!Array.isArray(field.asyncValidators.validation)) {
            //       field.asyncValidators.validation = [field.asyncValidators.validation];
            //     }
            //     field.asyncValidators.validation
            //       .forEach((validator: any) => field._asyncValidators.push(this.wrapNgValidatorFn(field, validator) as any));
            //   }
            // }
        }
    };
    /**
     * @private
     * @param {?} field
     * @return {?}
     */
    FormlyFieldValidatorExtension.prototype.initPredefinedFieldValidation = /**
     * @private
     * @param {?} field
     * @return {?}
     */
    function (field) {
        // const attr = '';
        //
        //   switch (attr) {
        //     case 'required':
        //       return Validators.required(control);
        //     case 'pattern':
        //       return Validators.pattern(value)(control);
        //     case 'minLength':
        //       return Validators.minLength(value)(control);
        //     case 'maxLength':
        //       return Validators.maxLength(value)(control);
        //     case 'min':
        //       return Validators.min(value)(control);
        //     case 'max':
        //       return Validators.max(value)(control);
        //   }
        //
    };
    return FormlyFieldValidatorExtension;
}());
export { FormlyFieldValidatorExtension };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmllbGQtdmFsaWRhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Blci9mb3JtbHkvIiwic291cmNlcyI6WyJsaWIvZXh0ZW5zaW9ucy9maWVsZC12YWxpZGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBR0E7SUFBQTtJQXVHQSxDQUFDOzs7OztJQXJHQyxrREFBVTs7OztJQUFWLFVBQVcsS0FBd0I7UUFDakMsZ0RBQWdEO1FBQ2pELG1DQUFtQztRQUNuQyx3Q0FBd0M7SUFDekMsQ0FBQzs7Ozs7O0lBRU8sMkRBQW1COzs7OztJQUEzQixVQUE0QixLQUF3QjtRQUNsRCxJQUFJLEtBQUssQ0FBQyxVQUFVLEVBQUU7WUFDcEIsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLDZCQUE2QixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLElBQUksS0FBSyxDQUFDLFVBQVUsRUFBRTtvQ0FDVCxhQUFhO2dCQUN0QixJQUFJLGFBQWEsS0FBSyxZQUFZLEVBQUU7O3dCQUM5QixXQUFTLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUM7O3dCQUMzQyxXQUFTOzt3QkFDVCxTQUFPO29CQUNYLElBQUksV0FBUyxJQUFJLE9BQU8sV0FBUyxLQUFLLFFBQVEsRUFBRTt3QkFDOUMsV0FBUyxHQUFHLFdBQVMsQ0FBQyxTQUFTLENBQUM7d0JBQ2hDLFNBQU8sR0FBRyxXQUFTLENBQUMsT0FBTyxDQUFDO3dCQUM1QixXQUFTLEdBQUcsV0FBUyxDQUFDLFVBQVUsQ0FBQztxQkFDbEM7b0JBRUQsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBQyxPQUF3Qjs7OzRCQUN2QyxPQUFPLEdBQUcsV0FBUyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUM7d0JBQ3pDLElBQUksV0FBUyxJQUFJLEtBQUssQ0FBQyxXQUFXLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsV0FBUyxDQUFDLEVBQUU7NEJBQ3RFLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0NBQ1osS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsV0FBUyxDQUFDLENBQUMsU0FBUyxzQkFDckMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxXQUFTLENBQUMsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLGVBQ2pELGFBQWEsSUFBRyxFQUFFLE9BQU8sV0FBQSxFQUFFLE9BQzVCLENBQUM7NkJBQ0o7aUNBQU07O29DQUNDLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFdBQVMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUM7Z0NBQzlELE9BQU8sTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dDQUM3QixLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxXQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDOzZCQUM5Rjt5QkFDRjt3QkFFRCxPQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBRyxHQUFDLGFBQWEsSUFBRyxXQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxhQUFBLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFFLENBQUM7b0JBQ2hGLENBQUMsQ0FBQyxDQUFDO2lCQUNKO3FCQUFNO29CQUNMLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUU7d0JBQy9DLEtBQUssQ0FBQyxVQUFVLENBQUMsVUFBVSxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztxQkFDN0Q7b0JBQ0QsOEJBQThCO29CQUM5QixvR0FBb0c7aUJBQ3JHO1lBQ0gsQ0FBQztZQW5DRCxLQUFLLElBQU0sYUFBYSxJQUFJLEtBQUssQ0FBQyxVQUFVO3dCQUFqQyxhQUFhO2FBbUN2QjtTQUNGO0lBQ0gsQ0FBQzs7Ozs7O0lBRU8sZ0VBQXdCOzs7OztJQUFoQyxVQUFpQyxLQUF3QjtRQUN2RCxJQUFJLEtBQUssQ0FBQyxlQUFlLEVBQUU7WUFDekIsT0FBTztTQUNSO1FBRUQsSUFBSSxLQUFLLENBQUMsZUFBZSxFQUFFO1lBQ3pCLHVEQUF1RDtZQUN2RCwwQ0FBMEM7WUFDMUMsNERBQTREO1lBQzVELGlDQUFpQztZQUNqQywwQ0FBMEM7WUFDMUMsUUFBUTtZQUNSLEVBQUU7WUFDRiwyRkFBMkY7WUFDM0YscUVBQXFFO1lBQ3JFLDhEQUE4RDtZQUM5RCxZQUFZO1lBQ1osV0FBVztZQUNYLGFBQWE7WUFDYiw4REFBOEQ7WUFDOUQsK0VBQStFO1lBQy9FLFFBQVE7WUFDUix1Q0FBdUM7WUFDdkMsb0hBQW9IO1lBQ3BILE1BQU07WUFDTixJQUFJO1NBQ0w7SUFDSCxDQUFDOzs7Ozs7SUFFTyxxRUFBNkI7Ozs7O0lBQXJDLFVBQXNDLEtBQXdCO1FBRXhELG1CQUFtQjtRQUNuQixFQUFFO1FBQ0Ysb0JBQW9CO1FBQ3BCLHVCQUF1QjtRQUN2Qiw2Q0FBNkM7UUFDN0Msc0JBQXNCO1FBQ3RCLG1EQUFtRDtRQUNuRCx3QkFBd0I7UUFDeEIscURBQXFEO1FBQ3JELHdCQUF3QjtRQUN4QixxREFBcUQ7UUFDckQsa0JBQWtCO1FBQ2xCLCtDQUErQztRQUMvQyxrQkFBa0I7UUFDbEIsK0NBQStDO1FBQy9DLE1BQU07UUFDTixFQUFFO0lBRVIsQ0FBQztJQUNILG9DQUFDO0FBQUQsQ0FBQyxBQXZHRCxJQXVHQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7QWJzdHJhY3RDb250cm9sfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge0Zvcm1seUV4dGVuc2lvbiwgRm9ybWx5RmllbGRDb25maWd9IGZyb20gJ0BuZ3gtZm9ybWx5L2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgRm9ybWx5RmllbGRWYWxpZGF0b3JFeHRlbnNpb24gaW1wbGVtZW50cyBGb3JtbHlFeHRlbnNpb24ge1xuXG4gIG9uUG9wdWxhdGUoZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ0Zvcm1seUZpZWxkVmFsaWRhdG9yRXh0ZW5zaW9uJyk7XG4gICAvLyB0aGlzLmluaXRGaWVsZFZhbGlkYXRpb24oZmllbGQpO1xuICAgLy8gdGhpcy5pbml0RmllbGRBc3luY1ZhbGlkYXRpb24oZmllbGQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0RmllbGRWYWxpZGF0aW9uKGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykge1xuICAgIGlmIChmaWVsZC52YWxpZGF0b3JzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaW5pdFByZWRlZmluZWRGaWVsZFZhbGlkYXRpb24oZmllbGQpO1xuICAgIGlmIChmaWVsZC52YWxpZGF0b3JzKSB7XG4gICAgICBmb3IgKGNvbnN0IHZhbGlkYXRvck5hbWUgaW4gZmllbGQudmFsaWRhdG9ycykge1xuICAgICAgICBpZiAodmFsaWRhdG9yTmFtZSAhPT0gJ3ZhbGlkYXRpb24nKSB7XG4gICAgICAgICAgbGV0IHZhbGlkYXRvciA9IGZpZWxkLnZhbGlkYXRvcnNbdmFsaWRhdG9yTmFtZV07XG4gICAgICAgICAgbGV0IGVycm9yUGF0aDtcbiAgICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgICBpZiAodmFsaWRhdG9yICYmIHR5cGVvZiB2YWxpZGF0b3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBlcnJvclBhdGggPSB2YWxpZGF0b3IuZXJyb3JQYXRoO1xuICAgICAgICAgICAgbWVzc2FnZSA9IHZhbGlkYXRvci5tZXNzYWdlO1xuICAgICAgICAgICAgdmFsaWRhdG9yID0gdmFsaWRhdG9yLmV4cHJlc3Npb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZmllbGQudmFsaWRhdG9ycy5wdXNoKChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZGF0b3IoY29udHJvbCwgZmllbGQpO1xuICAgICAgICAgICAgaWYgKGVycm9yUGF0aCAmJiBmaWVsZC5mb3JtQ29udHJvbCAmJiBmaWVsZC5mb3JtQ29udHJvbC5nZXQoZXJyb3JQYXRoKSkge1xuICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5mb3JtQ29udHJvbC5nZXQoZXJyb3JQYXRoKS5zZXRFcnJvcnMoe1xuICAgICAgICAgICAgICAgICAgLi4uKGZpZWxkLmZvcm1Db250cm9sLmdldChlcnJvclBhdGgpLmVycm9ycyB8fCB7fSksXG4gICAgICAgICAgICAgICAgICBbdmFsaWRhdG9yTmFtZV06IHsgbWVzc2FnZSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IChmaWVsZC5mb3JtQ29udHJvbC5nZXQoZXJyb3JQYXRoKS5lcnJvcnMgfHwge30pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBlcnJvcnNbdmFsaWRhdG9yTmFtZV07XG4gICAgICAgICAgICAgICAgZmllbGQuZm9ybUNvbnRyb2wuZ2V0KGVycm9yUGF0aCkuc2V0RXJyb3JzKE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwID8gbnVsbCA6IGVycm9ycyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQgPyBudWxsIDogeyBbdmFsaWRhdG9yTmFtZV06IGVycm9yUGF0aCA/IHsgZXJyb3JQYXRoIH0gOiB0cnVlIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGZpZWxkLnZhbGlkYXRvcnMudmFsaWRhdGlvbikpIHtcbiAgICAgICAgICAgIGZpZWxkLnZhbGlkYXRvcnMudmFsaWRhdGlvbiA9IFtmaWVsZC52YWxpZGF0b3JzLnZhbGlkYXRpb25dO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBmaWVsZC52YWxpZGF0b3JzLnZhbGlkYXRpb25cbiAgICAgICAgICAvLyAgIC5mb3JFYWNoKCh2YWxpZGF0b3I6IGFueSkgPT4gZmllbGQuX3ZhbGlkYXRvcnMucHVzaCh0aGlzLndyYXBOZ1ZhbGlkYXRvckZuKGZpZWxkLCB2YWxpZGF0b3IpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXRGaWVsZEFzeW5jVmFsaWRhdGlvbihmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgICBpZiAoZmllbGQuYXN5bmNWYWxpZGF0b3JzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkLmFzeW5jVmFsaWRhdG9ycykge1xuICAgICAgLy8gZm9yIChjb25zdCB2YWxpZGF0b3JOYW1lIGluIGZpZWxkLmFzeW5jVmFsaWRhdG9ycykge1xuICAgICAgLy8gICBpZiAodmFsaWRhdG9yTmFtZSAhPT0gJ3ZhbGlkYXRpb24nKSB7XG4gICAgICAvLyAgICAgbGV0IHZhbGlkYXRvciA9IGZpZWxkLmFzeW5jVmFsaWRhdG9yc1t2YWxpZGF0b3JOYW1lXTtcbiAgICAgIC8vICAgICBpZiAoaXNPYmplY3QodmFsaWRhdG9yKSkge1xuICAgICAgLy8gICAgICAgdmFsaWRhdG9yID0gdmFsaWRhdG9yLmV4cHJlc3Npb247XG4gICAgICAvLyAgICAgfVxuICAgICAgLy9cbiAgICAgIC8vICAgICBmaWVsZC5fYXN5bmNWYWxpZGF0b3JzLnB1c2goKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vICAgICAgIHJldHVybiB2YWxpZGF0b3IoY29udHJvbCwgZmllbGQpLnRoZW4oKHJlc3VsdDogYm9vbGVhbikgPT4ge1xuICAgICAgLy8gICAgICAgICByZXNvbHZlKHJlc3VsdCA/IG51bGwgOiB7IFt2YWxpZGF0b3JOYW1lXTogdHJ1ZSB9KTtcbiAgICAgIC8vICAgICAgIH0pO1xuICAgICAgLy8gICAgIH0pKTtcbiAgICAgIC8vICAgfSBlbHNlIHtcbiAgICAgIC8vICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmllbGQuYXN5bmNWYWxpZGF0b3JzLnZhbGlkYXRpb24pKSB7XG4gICAgICAvLyAgICAgICBmaWVsZC5hc3luY1ZhbGlkYXRvcnMudmFsaWRhdGlvbiA9IFtmaWVsZC5hc3luY1ZhbGlkYXRvcnMudmFsaWRhdGlvbl07XG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICAgIGZpZWxkLmFzeW5jVmFsaWRhdG9ycy52YWxpZGF0aW9uXG4gICAgICAvLyAgICAgICAuZm9yRWFjaCgodmFsaWRhdG9yOiBhbnkpID0+IGZpZWxkLl9hc3luY1ZhbGlkYXRvcnMucHVzaCh0aGlzLndyYXBOZ1ZhbGlkYXRvckZuKGZpZWxkLCB2YWxpZGF0b3IpIGFzIGFueSkpO1xuICAgICAgLy8gICB9XG4gICAgICAvLyB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0UHJlZGVmaW5lZEZpZWxkVmFsaWRhdGlvbihmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcblxuICAgICAgICAvLyBjb25zdCBhdHRyID0gJyc7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgc3dpdGNoIChhdHRyKSB7XG4gICAgICAgIC8vICAgICBjYXNlICdyZXF1aXJlZCc6XG4gICAgICAgIC8vICAgICAgIHJldHVybiBWYWxpZGF0b3JzLnJlcXVpcmVkKGNvbnRyb2wpO1xuICAgICAgICAvLyAgICAgY2FzZSAncGF0dGVybic6XG4gICAgICAgIC8vICAgICAgIHJldHVybiBWYWxpZGF0b3JzLnBhdHRlcm4odmFsdWUpKGNvbnRyb2wpO1xuICAgICAgICAvLyAgICAgY2FzZSAnbWluTGVuZ3RoJzpcbiAgICAgICAgLy8gICAgICAgcmV0dXJuIFZhbGlkYXRvcnMubWluTGVuZ3RoKHZhbHVlKShjb250cm9sKTtcbiAgICAgICAgLy8gICAgIGNhc2UgJ21heExlbmd0aCc6XG4gICAgICAgIC8vICAgICAgIHJldHVybiBWYWxpZGF0b3JzLm1heExlbmd0aCh2YWx1ZSkoY29udHJvbCk7XG4gICAgICAgIC8vICAgICBjYXNlICdtaW4nOlxuICAgICAgICAvLyAgICAgICByZXR1cm4gVmFsaWRhdG9ycy5taW4odmFsdWUpKGNvbnRyb2wpO1xuICAgICAgICAvLyAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgLy8gICAgICAgcmV0dXJuIFZhbGlkYXRvcnMubWF4KHZhbHVlKShjb250cm9sKTtcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vXG5cbiAgfVxufVxuIl19