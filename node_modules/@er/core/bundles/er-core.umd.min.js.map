{"version":3,"sources":["ng://@er/core/lib/bases/class.ts","node_modules/tslib/tslib.es6.js","ng://@er/core/lib/bases/unsubscribe.ts","ng://@er/core/lib/bases/directive.ts","ng://@er/core/lib/bases/serice.ts","ng://@er/core/lib/directives/typed-template/directive.ts","ng://@er/core/lib/bases/component.ts","ng://@er/core/lib/utils/di/index.ts","ng://@er/core/lib/utils/http/index.ts","ng://@er/core/lib/services/log/service.ts","ng://@er/core/lib/utils/log/index.ts","ng://@er/core/lib/utils/component/index.ts","ng://@er/core/lib/utils/nav/index.ts","ng://@er/core/lib/bases/roue.bind.component.ts","ng://@er/core/lib/bases/control.ts","ng://@er/core/lib/bases/wrappe.ts","ng://@er/core/lib/bases/control-wrapper.ts","ng://@er/core/lib/utils/api/index.ts","ng://@er/core/lib/directives/api-data/directive.ts","ng://@er/core/lib/bases/data-aware-control-wrapper.ts","ng://@er/core/lib/bases/form.ts","ng://@er/core/lib/states/all.ts","ng://@er/core/lib/utils/permission/index.ts","ng://@er/core/lib/utils/auth/index.ts","ng://@er/core/lib/bases/abstract/app-config.component.ts","ng://@er/core/lib/bases/abstract/module-config.component.ts","ng://@er/core/lib/bases/abstract/auth.component.ts","ng://@er/core/lib/bases/abstract/login.component.ts","ng://@er/core/lib/validators/async/index.ts","ng://@er/core/lib/bases/abstract/register.component.ts","ng://@er/core/lib/bases/abstract/change-pwd.component.ts","ng://@er/core/lib/components/animate-number/component.ts","ng://@er/core/lib/components/breadcrumb/component.ts","ng://@er/core/lib/components/button/component.ts","ng://@er/core/lib/components/buttons/component.ts","ng://@er/core/lib/components/data-item/component.ts","ng://@er/core/lib/utils/dyna/index.ts","ng://@er/core/lib/components/dyna-component/component.ts","ng://@er/core/lib/directives/props-bind/util.ts","ng://@er/core/lib/directives/props-bind/directive.ts","ng://@er/core/lib/components/dyna-content/component.ts","ng://@er/core/lib/components/http-status/component.ts","ng://@er/core/lib/components/layout/container/component.ts","ng://@er/core/lib/components/layout/fluid/component.ts","ng://@er/core/lib/components/layout/left-right/component.ts","ng://@er/core/lib/components/layout/phone-preview/component.ts","ng://@er/core/lib/components/query-builder/defaults.ts","ng://@er/core/lib/components/query-builder/component.ts","ng://@er/core/lib/components/query-builder/rule/component.ts","ng://@er/core/lib/components/route-bind/component.ts","ng://@er/core/lib/components/we-chat/component.ts","ng://@er/core/lib/components/all.ts","ng://@er/core/lib/directives/animate-if/directive.ts","ng://@er/core/lib/directives/animate/directive.ts","ng://@er/core/lib/directives/dyna-template/directive.ts","ng://@er/core/lib/directives/focus-high-light/directive.ts","ng://@er/core/lib/directives/high-light/directive.ts","ng://@er/core/lib/directives/json-viewer/diff.ts","ng://@er/core/lib/directives/json-viewer/directive.ts","ng://@er/core/lib/directives/movable/movable-handle.directive.ts","ng://@er/core/lib/directives/movable/movable.directive.ts","ng://@er/core/lib/directives/position/directive.ts","ng://@er/core/lib/directives/remove-me/directive.ts","ng://@er/core/lib/directives/selector/directive.ts","ng://@er/core/lib/directives/state-spinner/base.ts","ng://@er/core/lib/directives/state-spinner/http/directive.ts","ng://@er/core/lib/directives/state-spinner/notify/directive.ts","ng://@er/core/lib/directives/text-tag/directive.ts","ng://@er/core/lib/directives/all.ts","ng://@er/core/lib/interceptors/customer/interceptor.ts","ng://@er/core/lib/interceptors/error/interceptor.ts","ng://@er/core/lib/interceptors/jwt/interceptor.ts","ng://@er/core/lib/utils/date-sync/index.ts","ng://@er/core/lib/interceptors/log/interceptor.ts","ng://@er/core/lib/interceptors/progress/interceptor.ts","ng://@er/core/lib/interceptors/timeout/interceptor.ts","ng://@er/core/lib/interceptors/all.ts","ng://@er/core/lib/pipes/as-list/pipe.ts","ng://@er/core/lib/pipes/base64/pipe.ts","ng://@er/core/lib/pipes/comma-separate/pipe.ts","ng://@er/core/lib/pipes/data-items/pipe.ts","ng://@er/core/lib/pipes/default/pipe.ts","ng://@er/core/lib/pipes/emojify/pipe.ts","ng://@er/core/lib/pipes/filter/pipe.ts","ng://@er/core/lib/pipes/high-light/pipe.ts","ng://@er/core/lib/pipes/id-card/pipe.ts","ng://@er/core/lib/pipes/join/pipe.ts","ng://@er/core/lib/pipes/linky/pipe.ts","ng://@er/core/lib/pipes/map-keys/pipe.ts","ng://@er/core/lib/pipes/number-text/pipe.ts","ng://@er/core/lib/pipes/observable/pipe.ts","ng://@er/core/lib/pipes/order/pipe.ts","ng://@er/core/lib/pipes/percent/pipe.ts","ng://@er/core/lib/pipes/safe/pipe.ts","ng://@er/core/lib/pipes/split/pipe.ts","ng://@er/core/lib/pipes/style/pipe.ts","ng://@er/core/lib/pipes/sub/pipe.ts","ng://@er/core/lib/pipes/text/pipe.ts","ng://@er/core/lib/pipes/timer/pipe.ts","ng://@er/core/lib/pipes/tracker/pipe.ts","ng://@er/core/lib/pipes/tree-nodes/pipe.ts","ng://@er/core/lib/pipes/unique/pipe.ts","ng://@er/core/lib/pipes/unit-number/pipe.ts","ng://@er/core/lib/pipes/up-to-now/pipe.ts","ng://@er/core/lib/pipes/value/pipe.ts","ng://@er/core/lib/pipes/all.ts","ng://@er/core/lib/services/auth/authed-guard.ts","ng://@er/core/lib/services/auth/deactive-guard.ts","ng://@er/core/lib/services/error/service.ts","ng://@er/core/lib/services/pre-loading/service.ts","ng://@er/core/lib/services/resolver/page-model/service.ts","ng://@er/core/lib/services/resource/service.ts","ng://@er/core/lib/services/router/service.ts","ng://@er/core/lib/services/task/service.ts","ng://@er/core/lib/services/all.ts","ng://@er/core/lib/tasks/update-title.ts","ng://@er/core/lib/tasks/all.ts","ng://@er/core/lib/utils/annotation/index.ts","ng://@er/core/lib/utils/data/index.ts","ng://@er/core/lib/utils/data-field/index.ts","ng://@er/core/lib/utils/changes/index.ts","ng://@er/core/lib/utils/resource/index.ts","ng://@er/core/lib/utils/url/index.ts","ng://@er/core/lib/services/strategy/service.ts","ng://@er/core/lib/er-core.module.ts","ng://@er/core/lib/interceptors/customer/preset/bound.ts","ng://@er/core/lib/interceptors/customer/preset/credential.ts"],"names":["BaseClass","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spread","concat","Unsubscribe","_this","_super","destroyed$","Subject","_$subscriptions","tslib_1.__extends","defineProperty","subscription","ngOnDestroy","prop","stopSubscribe","filter","sub","map","unsubscribe","Subscription","complete","BaseDirective","animations","ctx","$from","getContext","id","$id","context","getEventContext","event","emitEvent","eventName","eventEmitter","EventEmitter","emit","isFirstChanges","changes","keys","every","isFirstChange","animate","name","BaseService","TypedTemplateDirective","template","getType","type","Directive","args","selector","TemplateRef","Input","BaseComponent","templates","ngAfterContentInit","typedTemplates","forEach","item","CommonsUtils","set","eventHandler","outputs","defaultHandler","defaultTpls","_i","tpls","defaultTpl","undefined","getComponentBySelectorId","selectors","matched","toArray","comp","hostComponent","hasTemplate","hasChildren","isJson","ngAfterContentChecked","ngAfterViewInit","ngAfterViewChecked","ngDoCheck","ngOnInit","ngOnChanges","ContentChildren","cacheKey","viewContainerRef","DiUtils","get","token","cached","CacheUtils","injector","Error","put","getRootViewContainerRef","applicationRef","ApplicationRef","appInstance","components","instance","rootViewContainerRef","appName","componentTypes","HttpUtils","getHttpClient","_httpClient","HttpClient","timeout","_timeout","ConfigUtils","getConfig","httpTimeout","request","options","httpRequestOptions","isString","getObjWhenStr","stateName","StatesUtils","onRequest","result","url","uri","startsWith","indexOf","api","servers","serverType","default","requestOptions","observe","responseType","HttpResponseType","JSON","headers","getRequestHeader","method","body","payload","HttpMethod","POST","GET","payloadType","HttpRequestPayloadType","PARAMS","params","BODY","getRequestParams","getRequestBody","pipe","RxUtils","retry","HttpEventType","Sent","Response","tap","updateHttpTagState","tag","opts","response","status","resp","onResponse","update","catchError","onError","of","state","extra","StateNames","http","start","HttpParams","fromString","key","append","toString","HttpHeaders","contentType","HttpContentType","upload","file","formdata","FormData","req","HttpRequest","reportProgress","LogService","debug","from","message","isProduction","log","enableApp","level","LogLevel","DEBUG","blackLList","getLogger","DateUtils","getFormattedTime","getLogData","info","INFO","warn","messages","WARN","DialogUtils","ERROR","httpPost","isFunction","getHttpLogger","getFormattedDateTime","console","optionalParams","logHttpOptions","Injectable","providedIn","LogUtils","getLogService","_logService","ComponentUtils","resolveProps","compInstance","props","inputs","bindLifeCycles","hooks","destructor","originalLifeCycles","ngEventName","capitalize","original_1","slice","_a","destroyLifeCycle_1","lifeCycleName","bind","unSubscribe","getConstructor","takeUntil","subscribe","reWriteMethod","methodName","newFun","position","buildInFn","getHostComponentInst","viewContainer","componentView","component","getViewComponentRef","view","RouteUtils","getActiveRoute","route","ActivatedRoute","firstChild","getActiveRouteData","snapshot","data","clearOutlet","outletName","isRelative","Router","navigate","outlets","nav","commands","paramsOrRelative","extras","back","Location","forward","refresh","getValue","window","location","href","navigateByUrl","RouteBindComponent","$subscriptions","activeRoute","copy","queryParams","parent","routeData","param","substring","beforeRoutePropsBind","afterRoutePropsBind","ControlComponent","disabled","disabled$","BehaviorSubject","onTouched","NO_OP","onChange","innerValue","v","parser","defaultValue","updateTouch","writeValue","model","formatter","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","HostBinding","WrapperComponent","_initProps","$props","defaults","$defaultProps","IdUtils","getRandom","$ext","onPropsInit","_propsBind","onPropsBind","ControlWrapperComponent","resettable","valueParser","isEqual","modelFormatter","reset","DEFAULT_API_REQUEST_OPTIONS","notifyFailure","ApiUtils","getPresetApiOptions","ApiServerType","ES","presetApiOptions","actions","login","presetActionOptions","doRequest","logout","changePwd","register","save","apiEntry","_data","patchById","setContext","getById","getByIds","ids","getByQuery","updateById","updateByQuery","query","deleteById","confirm","first","accept","switchMap","_","deleteByQuery","batch","batchFetch","dataSource","_apiDataProp","apiDataProps_1","getArrayValue","isEmpty","apiDataProp","apiQuery","_filter","zip","fetch","dataSet","resultList","resultMap","apiDataProps","queryPayload","EsUtils","buildQueryBody","apiRequestBody","aggs","resolveAggs","items","path","dataPath","aggProps","actionOptions","apiRequestOptions","requestPayload","buildUri","buildPayload","paramsKeys","uriResolver","payloadResolver","apiServer","success","alertSuccess","successMessage","notifySuccess","notify","title","onSuccess","content","alertFailure","NotifyLevel","onFailure","isTemplateStr","serverUri","_payload","merge","ContextUtils","resolveVariables","resolveApiParamsName","resolved","ApiDataDirective","onDataReady","currentValue","autoFetch","fetchData","data$","Output","DataAwareControlWrapperComponent","_apiDataProps","initLocalDataItem","parseValue","dataItemProps","DataItemUtils","getItemValue","valueKey","formatModel","getItemLabel","labelKey","dataItems","ViewChild","BaseFormComponent","cd","buttonsStyleClass","submitBtnStyleClass","resetBtnStyleClass","initBtnStyleClass","onSubmit","onSubmitted","onModel","onFormValueChanges","form","FormGroup","templateNames","header","buttons","footer","runtimeData","hasUpdated","_model","omitBy","lodash","isUndefined","valueChanges","_modelId","modelId","getModelOptions","updateValueAndValidity","onlySelf","resetModel","updateControls","valid","formId","submitRootKey","submitExcludeKeys","removeKeys","formControl","fieldName","controls","fieldComponent","getFormErrorFields","errors","controlErrors","keyError","patchModel","patchRuntimeData","isFieldValid","field","isFieldTouched","fieldNamePath","touched","control","FormControl","markAsTouched","resetForm","initModel","setInitModel","detectChanges","submit","isFormValid","beforeSubmit","Observable","submitAfterBefore","doSubmit","defaultSubmit","submitModel","submitOptions","submitted","afterSubmit","dat","doPostSubmit","other","formlyForm","entry","entity","observers","resetKeys","resetAfterSubmit","initValue","HTTP_STATE$","rootHttp","distinctUntilChanged","inProcess","HTTP_TAG_STATE$","httpTag","ROUTE_STATE$","outlet","WEB_SOCKET_STATES","socket","PermissionUtils","getPermissionsService","_permissionsService","NgxPermissionsService","getRolesService","_rolesService","NgxRolesService","getRolePermissions","roles","auth","HasModulePermission","permissionName","permissions","getPermissions","some","addPermissions","validationFunction","addPermission","addRole","roleName","addRoles","_roles","roleService_1","role","hasRole","getRoles","hasAnyRole","userRoles","hasAllRoles","permissions$","roles$","hasPermission","permission","hasAnyPermission","permissios","_permissions","userPermissions","permisiion","hasAllPermissions","hasAuth","roleOrPermission","hasAllAuths","roleOrPermissions","clearRoles","flushRoles","clearPermission","flushPermissions","AuthUtils","payLoad","isRememberMe","rememberMe","loginApiOptions","loginUser","jwtToken","getUserInfo","userInfo","user","onLoginSuccess","registerApiOptions","logoutApiOptions","updateUser","logoutSuccessRouter","changePwdApiOptions","getCurrentUser","CURRENT_USER","storageKey","parse","sessionStorage","getItem","localStorage","isSu","isAdmin","patch","remeber","setItem","stringify","removeItem","checkLogin","returnUrl","currentUser","JwtUtils","isValid","popup","visible","minWidth","minHeight","contentMaxWidth","contentMaxHeight","loginRouter","successUrl","enabled","defaultRules","requiredUserProps","loginSuccessRouter","failedPropsRouter","AppConfigComponent","onLoading","browserSupport","BrowserOsUtils","checkBrowser","resolveBrowserSupport","configApp","appConfig","setTimeout","httpState$","routeState$","version","features","alert","ModuleConfigComponent","router","configModule","moduleConfig","AuthBaseComponent","userToken","userTokenKey","password","passwordKey","rememberMeKey","stateKey","getSubmitData","AbstractLoginComponent","FormBuilder","group","Validators","required","NgAsyncValidator","requestProps","errorKey","AbstractRegisterComponent","checkExists","inFocus","errorMessage","duplicated","validators","NgValidators","asyncValidators","userExistsApiOptions","updateOn","minLength","rePassword","equalTo","ER","val","userName","AbstractChangePwdComponent","oldPasswordKey","newPasswordKey","reNewPassword","changePwdSuccessRouter","AnimateNumberComponent","currentNumber","fontSize","counter$","endRange","timer","mapTo","positiveOrNegative","startWith","scan","acc","curr","takeWhile","end","_end","getRandomNumber","Component","changeDetection","ChangeDetectionStrategy","OnPush","ChangeDetectorRef","ROUTE_DATA_BREADCRUMB_KEY","BreadcrumbsComponent","breadcrumbs$","resolveRoute","getRouterLink","breadcrumb","breadcrumbs","currentRoute","root","menus","rootMenu","prefix","excludes","lastLabel","childrenRoutes","children","routeSnapshot","label","routeConfig","currentUrl","join","trim","RegUtils","test","parts","split","menu","deepFind","routerLink","StateButtonComponent","hint","onClick","onFocus","onBlur","processIcon","processing$","processing","markForCheck","stateLabel","stateHint","click","StateButtonsComponent","DataItemComponent","_label","labelKeys","isArray","dropDownOptionKey","DynaComponentUtils","createComponentByType","hostViewContainerRef","componentType","componentFactory","getComponentFactoryResolver","resolveComponentFactory","createComponent","createComponentByTemplate","component_1","createDecoratedComponent","createNgModule","componentFactories","find","factory","_componentFactoryResolver","ComponentFactoryResolver","useClass","componentClass","ngModule","NgModule","declarations","class_1","Compiler","compileModuleAndAllComponentsSync","clear","DynaCompComponent","el","renderer","onCreated","destroy","parent_1","nativeElement","parentNode","removeChild","ViewContainerRef","ElementRef","Renderer2","recordToChange","record","createNewChange","SimpleChange","previousValue","setChangeFromRecord","setter","defaultOpts","onlyNewChanges","changesFromRecord","getNewChangesRecords","change","getChangesRecords","recordToChanges","recordToNewChanges","PropsBindDirective","differs","elementRef","autoBind","differ","_hostComponentInst","_viewComponentRef","methods","bindMethods","inputsChanges","diff","expInputs","getExpressionInputs","updateInputsChanges","updateInputs","lastInputChanges","bindOutputs","hostComponentInst","attrs","resolveAttrs","attrChanges","lastAttrChanges","changesToAttrChanges","updateAttributes","expAttrs","isNotFirstChange","notifyOnInputChanges","forceFirstChanges","collectFirstChanges","expProps_1","Function","collectChangesFromDiffer","forEachAddedItem","forEachItem","remove","forEachChangedItem","forEachRemovedItem","setAttribute","removeAttribute","namespace","omit","KeyValueDiffers","DynaContentComponent","CONTENT_TYPE","ContentType","parsedContent$","styleClass","style","DATA","parsedContent","getText","COMPONENT","dynaComponent","directives","dynaDirectives_1","direct","dynamicDirectiveDef","parsedContext","templateStr","TEMPLATE_STR","STRING","TEMPLATE","parsedContextFn","rtn","FUNCTION","HttpStatusComponent","loadingClass","ContainerComponent","FluidContainerComponent","LeftRightContainerComponent","leftStyleClass","rightStyleClass","switchable","onLeftHide","left","right","reLayout","hideLeft","iphoneX","iphone8","iphone8plus","iphone5s","nexus5","ipad","note8","macbook","PhonePreviewComponent","MOBILE_TYPE","MobileType","mobile","isLandscape","scale","zoomIn","zoomOut","EMPTY_QUERY_RULE_SET","condition","rules","DEFAULT_QUERY_BUILDER_PROPS","fields","styleClasses","removeIcon","addIcon","button","buttonGroup","rightAlign","switchRow","switchGroup","switchRadio","switchLabel","switchControl","row","connector","rule","ruleSet","invalidRuleSet","emptyWarning","operatorControl","operatorControlSize","fieldControl","fieldControlSize","entityControl","entityControlSize","inputControl","inputControlSize","allowRuleSet","CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","QueryBuilderComponent","multi","VALIDATOR","NG_VALIDATORS","changeDetectorRef","removeButton","operator","input","empty","_config","config","validate","ruleErrorStore","hasErrors","allowEmptyRuleSet","checkEmptyRuleInRuleSet","validateRulesInRuleSet","ruleSetStyle","index","index$$1","bgColor","THEME_COLORS","color","border-left-width","border-left-style","border-left-color","getOperators","operators","operators_1","getFields","entityKey","entities","getField","getClassNames","classNames","c","isInValidRule","getRuleClassName","cls","getDefaultDataField","defaultField","getDefaultValue","entityDataFields","getDefaultOperator","addRule","addRuleSet","removeRule","removeRuleSet","parentRuleSet","changeCondition","changeField","changeEntity","entityValue","qb","errorStore","providers","QueryBuilderRuleComponent","ruleChange","_rule","RouteDataPropsBindComponent","created","componentRef","WechatQrCodeComponent","height","width","baseUrl","wechat","redirect","encodeURIComponent","redirect_uri","appid","scope","self_redirect","CoreComponents","animationEndSafe","maxWait","observer","addEventListener","AnimatedIfDirective","_templateRef","animatedIfOnShow","animatedIfOnHide","hide","show","getContainer","rootNodes","container","classList","add","ngIf","NgIf","AnimateDirective","_animations","classes","animation","DomUtils","addClasses","DynaTemplateDirective","isEmptyString","innerHTML","replace","FocusHighlightDirective","defaultBgColor","onMouseEnter","highlight","onMouseLeave","backgroundColor","HostListener","HighlightDirective","searchTerm","caseSensitive","viewRendered","WRAPPER_TOKEN","highlightSearchTerm","removePreviouslyMarkedTextInNode","markMatchedTextTokens","htmlNode","_searchTerm","getSearchTerm","searchRegex","RegExp","_searchTermUniqueTokens","getUniqueTokenWrappedSearchTerm","searchRegexUniqueTokens","traverseHtmlElementsTree","traverseNodesInElement","childNodes","node","wrapUniqueTokensAroundMatchedText","markMatchedTextAndRemoveUniqueTokens","newHtml","match","wrapperLength","substr","nodes","visitCallback","nodeType","newText","nodeValue","currentNode","childNode","markingPattern","cleanText","escapedSearchTerm","escapeRegExp","spaceToMultiMatchRegex","str","ObjectDiff","openChar","closeChar","obj1","obj2","diffOwnProperties","formatChangesToHtml","a","shallow","isOwn","equalObj","diffValue","equal","isValidAttr","valueDiff","changed","removed","added","formatToJsonXMLString","properties","inspect","formatChange","formatToJson","obj","typeA","typeB","diffItem","diffOnly","property","stringifyObjectKey","escapeHTML","string","that","_inspect","accumulator","length_1","String","JsonViewerDirective","showCurrent","openLevel","showDiff","showJson","JSONFormatter","hoverPreviewEnabled","divEle","render","appendChild","document","createElement","MovableHandleDirective","element","movableEnabled","isMoving","isHandle","Position","pos","containsNumberProp","top","clientY","clientX","changedTouches","minus","plus","object","MovableDirective","movableConstrained","isMovable","handles","_movableEnabled","handle","movableName","getStyle","positionStyle","allHandles","updateQuery","movableHandle","onMouseDown","startMoving","onMouseUp","stopMoving","onMouseMove","moveElement","onTouchStart","onTouchEnd","onTouchMove","isEventInHandle","startPosition","getRelativeRect","moved","newPosition","constainedByElement","ownerDocument","getElementById","movableConstraint","constainedByAbsPos","getBoundingClientRect","getViewPos","elementAbsPos","diffAbsToRel","newAbsPos","bottom","positionTop","positionLeft","preventDefault","stopPropagation","srcElement","target","HTMLElement","parentElement","parseStyleInt","parseInt","getView","getComputedStyle","getPropertyValue","defaultView","opener","innerHeight","documentElement","clientHeight","innerWidth","clientWidth","descendants","PositionDirective","addClass","positionClass","RemoveMeDirective","parentContent","insertBefore","SelectorDirective","SpinnerBaseDirective","onInit","spinElement","spinnerClass","spinnerEle","placeSpin","HTMLDivElement","addSpin","HTMLButtonElement","appendChildSpin","HTMLImageElement","replaceWithWrapper","HTMLUListElement","HTMLInputElement","removeClass","containerElement","className","HttpSpinnerDirective","spinnerTag","setStyle","NotifySpinnerDirective","notifier","TagDirective","bg","text","ColorUtils","getColor","CoreDirectives","HttpAppConfiguredInterceptor","customerInterceptors","httpInterceptors","intercept","HttpErrorHandlerInterceptor","err","HttpErrorResponse","errorHandler","TimeoutError","throwError","HttpJwtAuthInterceptor","headerName","authScheme","clone","setHeaders","DateSyncUtils","timeServer","dates","getAll","updateLocalDate","date","Date","timeServer$","stopSyncSchedule","startRefreshSchedule","startSyncSchedule","interval","clearInterval","setInterval","setSeconds","getSeconds","serverTime","HttpLogInterceptor","logService","started","now","HttpResponse","elapsed","httpTimer","HttpProgressInterceptor","HttpTimeoutInterceptor","reqTimeout","Number","CoreInterceptors","HTTP_INTERCEPTORS","KeyValuePipe","transform","lst","Pipe","Base64DecodePipe","decodeURIComponent","atob","CommaSeparatedNumberPipe","reg","DataItemsPipe","transItems","DefaultPipe","dft","emojiDictionary","patterns","unicode","EmojifyPipe","pipeEnabled","emoji","pattern","FilterPipe","arr","criteria","matcher","toLowerCase","HighLightPipe","keywords","keyword","IdCardPipe","idCardNo","attr","IdCardUtils","JoinPipe","seperator","LinkifyPipe","linkify","plainText","replacePattern1","replacePattern2","replacePattern3","pure","KeysPipe","src","NumberToTextPipe","numbers","0","00","000","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","30","40","50","60","70","80","90","numberWords","re","numberString","divide","Math","ceil","splits","shift","ObservablePipe","OrderByPipe","_orderByComparator","isNaN","parseFloat","isFinite","_getDeepValue","propertyPath","pathList","flag","getDeepValueByPath","_c","propertyToCheck","desc_1","property_1","sort","reverse","desc","comparison","PercentPipe","num","isNumber","SafeHtmlPipe","sanitizer","bypassSecurityTrustUrl","bypassSecurityTrustResourceUrl","bypassSecurityTrustStyle","bypassSecurityTrustScript","bypassSecurityTrustHtml","DomSanitizer","SplitPipe","StylePipe","SubPipe","iStart","iEnd","TextPipe","TimerPipe","getTime","TrackerPipe","number","offset","TreeNodesPipe","keyMap","TreeUtils","transNodes","UniquePipe","unique","UnitNumberPipe","ele","decimal","suffix","numeral","thresholds","toFixed","round","UpToNowPipe","ngZone","due","toDate","span","getDateByNow","removeTimer","timeToUpdate","seconds","getUpdateSeconds","runOutsideAngular","run","clearTimeout","NgZone","ValuePipe","CorePipes","AuthGuard","canActivate","canActivateChild","canLoad","DeactivateGuard","canDeactivate","currentState","GlobalErrorHandler","zone","LocationStrategy","handleError","PathLocationStrategy","resolveUserAgent","Injector","ConfigurablePreloadingStrategy","preloadedModules","preload","load","PathPropsDataResolver","resolve","pathValues","seg","resource","EMPTY","ResourceResolver","RouterStateService","events","navigationInterceptor","NavigationStart","NavigationEnd","appTitle","NavigationCancel","NavigationError","BACKGROUND_TASK_TOKEN","InjectionToken","TaskService","tasks","subs","cleanStates","_tasks","flatten","task","startTask","updateTitle","Title","setTitle","store","getStore","preserved","schedule_1","context_1","Optional","Inject","CoreServices","updateTitleTask","CORE_TASKS","AnnotationsUtils","getFor","annotations","Reflect","getOwnMetadata","getForDirective","getForComponent","getForPipe","DataUtils","getNextValue","opt","DEFAULT_PROPS","q","esb.termQuery","parentKey","seqKey","Order","DESC","size","repeat","seqLen","total","last","seq","withParent","checkDistinct","apiProps","distinct","queryValue","onNodeSelect","keyOrQuery","treeProps","tableId","nodeCode","code","esb.prefixQuery","esb.matchAllQuery","DEFAULT_ROOT_SEQ","DataFieldUtils","getFieldDefaultProps","dataField","dataAttr","DataAttr","DATA_CODE","getDataCodeFieldProps","URL","dataType","DataType","RegPatterns","PHONE","phone","ID_CARD","EMAIL","email","CURRENCY","NUMBER","pNumeric","getDefaultFieldName","defaultKey","getFieldDisplayContent","fieldValue","trans_1","isBoolean","dataFieldProps","dataCode","catCode","sortKey","codeKey","aggKey","nameKey","searchFields","abbrKey","returnFields","catKey","inUseKey","esb.boolQuery","mustNot","idKey","ChangesUtils","getChangeByDiff","deleted","ResourceUtils","getConfigs","resourceUri","resourcesConfig","resources","endsWith","module","reload","initial","restoreJsonFn","take","reserve","UrlUtils","serializer","serialize","tree","DefaultUrlSerializer","CachedRouteReuseStrategy","storedRouteHandles","Map","allowRetrieveCache","shouldReuseRoute","future","isInOutlet","$reuse","retrieve","getPath","shouldAttach","has","shouldDetach","detachedTree","APP_CONFIG","ErCoreModule","stompService","StompService","stomp","StompStates","NotifyType","ANNOUNCE","ALERT","forRoot","useValue","StompConfig","RouteReuseStrategy","imports","CommonModule","FormsModule","RouterModule","HttpClientModule","NgPipesModule","DynamicModule","withComponents","exports","esBoundInterceptor","bounds","must","_bounds","bound","toJSON","credentialHttpRequestInterceptor","anyRoleUser","toPromise"],"mappings":"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","sourcesContent":["export class BaseClass {\n\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {OnDestroy} from '@angular/core';\nimport {Subject, Subscription} from 'rxjs';\nimport {BaseClass} from './class';\n\n/**\n * provide auto unsubscribe support\n */\nexport class Unsubscribe extends BaseClass implements OnDestroy {\n\n  protected destroyed$: Subject<void> = new Subject<void>();\n\n  protected _$subscriptions: Subscription[] = [];\n\n  set $subscriptions(subscription) {\n    this._$subscriptions.push(subscription);\n  }\n\n  ngOnDestroy(): void {\n\n    this.stopSubscribe();\n\n    this._$subscriptions\n      .filter(sub => sub)\n      .map(sub => sub.unsubscribe());\n\n    for (const prop in this) {\n      if (this[prop]) {\n        const m = this[prop];\n        if (m && m instanceof Subscription) {\n          m.unsubscribe();\n        }\n      }\n    }\n  }\n\n  stopSubscribe() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","import {EventEmitter} from '@angular/core';\nimport {Unsubscribe} from './unsubscribe';\n\n/**\n * provide event emit support\n */\nexport abstract class BaseDirective extends Unsubscribe {\n\n  public ctx: {};\n\n  public animations = {};\n\n  constructor() {\n    super();\n    this.ctx = {\n      $from: <any>this\n    };\n  }\n\n  getContext() {\n    let id;\n    if (!this['$id'] && this['$props'] && this['$props'].$id) {\n      id = this['$props'].$id;\n      this['$id'] = id;\n    }\n    const context = {\n      $from: <any>this\n    };\n    return id ? {$id: id, ...context} : context;\n  }\n\n  getEventContext(event?): {} {\n    return {\n      ...this.getContext(),\n      ...event || {}\n    };\n  }\n\n  emitEvent(eventName, event) {\n    let eventEmitter = this[eventName];\n    if (!eventEmitter) {\n      eventEmitter = new EventEmitter();\n      this[eventName] = eventEmitter;\n    }\n    if (eventEmitter instanceof EventEmitter) {\n      return eventEmitter.emit(this.getEventContext(event));\n    }\n  }\n\n  isFirstChanges(changes) {\n    return Object.keys(changes).every(prop => changes[prop].isFirstChange());\n  }\n\n  animate(name?: string) {\n    return !(this.animations[name] || false);\n  }\n}\n","import {Unsubscribe} from './unsubscribe';\n\nexport abstract class BaseService extends Unsubscribe {\n\n}\n","import {Directive, Input, TemplateRef} from '@angular/core';\n\n@Directive({\n  selector: '[erTypedTemplate]'\n})\nexport class TypedTemplateDirective {\n\n  @Input('erTypedTemplate') type: string;\n\n  constructor(public template: TemplateRef<any>) {}\n\n  getType(): string {\n    return this.type;\n  }\n}\n\n/**\n * <td *ngFor=\"let col of columns\">\n <ng-container *ngIf=\"!col.template; else customTemplate\">\n {{row[col.attribute]}}\n </ng-container>\n <ng-template #customTemplate\n [ngTemplateOutlet]=\"col.template\"\n [ngTemplateOutletContext]=\"{ col: col, row: row }\">\n </ng-template>\n </td>\n\n <ng-template #titleTemplate let-col=\"col\" let-row=\"row\">\n <a role=\"button\" ...>\n <b>Custom</b> {{row[col.attribute]}}\n </a>\n </ng-template>\n **/\n","import {ContentChildren, Input, QueryList, SimpleChanges, TemplateRef} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {SelectorDirective} from '../directives/selector/directive';\nimport {TypedTemplateDirective} from '../directives/typed-template/directive';\nimport {BaseDirective} from './directive';\n\n/**\n * provide template & dynamic query support\n */\nexport abstract class BaseComponent extends BaseDirective {\n\n  @Input() customerTpl: TemplateRef<any>;\n\n  @ContentChildren(TypedTemplateDirective) typedTemplates: QueryList<TypedTemplateDirective>;\n\n  selectors: QueryList<SelectorDirective>;\n\n  templateNames: {};\n\n  templates: { [type: string]: TemplateRef<any> | {} } = {};\n\n  ngAfterContentInit(): void {\n    if (this.typedTemplates && this.typedTemplates.length > 0) {\n      this.typedTemplates.forEach((item) => {\n        if (item.type) {\n          CommonsUtils.set(this.templates, item.type, item.template);\n        } else {\n          this.templates['_'] = item.template;\n        }\n      });\n    }\n  }\n\n  eventHandler(outputs, eventName, defaultHandler, event) {\n    if (outputs && outputs[eventName]) {\n      return outputs[eventName].call(this, event);\n    } else {\n      return defaultHandler(event);\n    }\n  }\n\n  template(name?: string, ...defaultTpls: TemplateRef<any>[]): TemplateRef<any> | {} {\n    if (!name) {\n      name = '_';\n    }\n    if (this.templates[name]) {\n      return this.templates[name];\n    } else if (defaultTpls.length > 0) {\n      const tpls = CommonsUtils.filter(defaultTpls, defaultTpl => !!defaultTpl);\n      if (tpls.length > 0) {\n        return tpls[0];\n      }\n    }\n    return undefined;\n  }\n\n  getComponentBySelectorId<C>(id: any): C {\n    if (this.selectors) {\n      const matched: SelectorDirective[] = this.selectors.toArray().filter(comp => comp.id === id);\n      if (matched.length === 1) {\n        return matched[0].hostComponent;\n      }\n    }\n    return undefined;\n  }\n\n  hasTemplate(name: string, ...defaultTpls: TemplateRef<any>[]): boolean {\n    return this.template(name, ...defaultTpls) !== undefined;\n  }\n\n  hasChildren(templates) {\n    return CommonsUtils.isJson(templates);\n  }\n\n\n  // empty hooks for dyna bind\n\n  ngAfterContentChecked() {\n  }\n\n  ngAfterViewInit() {\n    this['__ngAfterViewInit'] = true;\n  }\n\n  ngAfterViewChecked() {\n  }\n\n  ngDoCheck() {\n  }\n\n  ngOnInit() {\n    this['__ngOnInit'] = true;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n  }\n\n  ngOnDestroy() {\n  }\n\n}\n","import {ApplicationRef, ViewContainerRef} from '@angular/core';\nimport {CacheUtils} from '@er/utils';\n\nconst cacheKey = '$rootInjectables';\nlet viewContainerRef: ViewContainerRef = null;\n\nexport class DiUtils {\n\n  static injector = null;\n\n  static get<T>(token): T {\n    let cached = CacheUtils.get(cacheKey, token);\n    if (!cached) {\n      if (!DiUtils.injector) {\n        throw new Error('rootInjector ');\n      }\n      cached = DiUtils.injector.get(token);\n      if (cached) {\n        CacheUtils.put(cacheKey, token, cached);\n      }\n    }\n    return cached;\n  }\n\n  static getRootViewContainerRef(): ViewContainerRef {\n    if (!viewContainerRef) {\n      const applicationRef = DiUtils.get<ApplicationRef>(ApplicationRef);\n      const appInstance = applicationRef.components[0].instance;\n      if (!appInstance.rootViewContainerRef) {\n        const appName = applicationRef.componentTypes[0].name;\n        throw new Error(`${appName} constructorrootViewContainerRef`);\n      }\n      viewContainerRef = appInstance.rootViewContainerRef;\n    }\n    return viewContainerRef;\n  }\n\n}\n","import {HttpClient, HttpEvent, HttpEventType, HttpHeaders, HttpParams, HttpRequest} from '@angular/common/http';\nimport {\n  HttpClientRequestOptions,\n  HttpContentType,\n  HttpMethod,\n  HttpRequestOptions,\n  HttpRequestPayloadType,\n  HttpResponseType,\n  StateNames\n} from '@er/types';\nimport {CommonsUtils, ConfigUtils, RxUtils, StatesUtils} from '@er/utils';\nimport {Observable, of} from 'rxjs';\nimport {catchError, filter, map, tap} from 'rxjs/operators';\nimport {DiUtils} from '../di';\n\nexport class HttpUtils {\n\n  private static _httpClient: HttpClient = null;\n  private static _timeout = 3000;\n\n  static getHttpClient() {\n    if (!HttpUtils._httpClient) {\n      HttpUtils._httpClient = DiUtils.get<HttpClient>(HttpClient);\n    }\n    return HttpUtils._httpClient;\n  }\n\n  static timeout() {\n    if (HttpUtils._timeout) {\n      HttpUtils._timeout = ConfigUtils.getConfig().httpTimeout || 5000;\n    }\n    return HttpUtils._timeout;\n  }\n\n  static request<T = any>(options: HttpRequestOptions | string): Observable<T> {\n\n    let httpRequestOptions: HttpRequestOptions;\n\n    if (CommonsUtils.isString(options)) {\n      httpRequestOptions = CommonsUtils.getObjWhenStr(options, 'uri');\n    } else {\n      httpRequestOptions = options as HttpRequestOptions;\n    }\n\n    if (httpRequestOptions.stateName) {\n      return StatesUtils.get(httpRequestOptions.stateName);\n    }\n\n    if (httpRequestOptions.onRequest) {\n      const result = httpRequestOptions.onRequest(httpRequestOptions);\n      if (result === false) {\n        return;\n      }\n      httpRequestOptions = <HttpRequestOptions>result;\n    }\n\n    let url = httpRequestOptions.uri || '/';\n\n    if (!url.startsWith('http') && url.indexOf('assets/') < 0) {\n      if (!url.startsWith('/')) {\n        url = '/' + url;\n      }\n      url = ConfigUtils.getConfig().api.servers[httpRequestOptions.serverType || ConfigUtils.getConfig().api.default].uri + url;\n    }\n\n    const requestOptions: HttpClientRequestOptions = {};\n\n    requestOptions.observe = httpRequestOptions.observe || 'body';\n\n    requestOptions.responseType = httpRequestOptions.responseType || HttpResponseType.JSON;\n\n    requestOptions.headers = HttpUtils.getRequestHeader(httpRequestOptions);\n\n    const method = httpRequestOptions.method || ((httpRequestOptions.body || httpRequestOptions.payload) ? HttpMethod.POST : HttpMethod.GET);\n\n    if (httpRequestOptions.payload) {\n      if (httpRequestOptions.payloadType === HttpRequestPayloadType.PARAMS) {\n        httpRequestOptions.params = httpRequestOptions.payload;\n      } else if (httpRequestOptions.payloadType === HttpRequestPayloadType.BODY) {\n        httpRequestOptions.body = httpRequestOptions.payload;\n      } else if (!method || httpRequestOptions.method === HttpMethod.GET) {\n        httpRequestOptions.params = httpRequestOptions.payload;\n      } else {\n        httpRequestOptions.body = httpRequestOptions.payload;\n      }\n    }\n\n    if (httpRequestOptions.params) {\n      requestOptions.params = HttpUtils.getRequestParams(httpRequestOptions);\n    }\n\n    if (httpRequestOptions.body) {\n      requestOptions.body = HttpUtils.getRequestBody(httpRequestOptions);\n    }\n\n    if (!httpRequestOptions.context) {\n      httpRequestOptions.context = this; // use HttpUtils.request.call(this,...) to init context\n    }\n\n    return HttpUtils.getHttpClient().request(method, url, {\n      ...requestOptions,\n      observe: 'events'\n    })\n      .pipe(\n        RxUtils.retry(httpRequestOptions.retry, HttpUtils.timeout()),\n        filter(event => event.type === HttpEventType.Sent || event.type === HttpEventType.Response),\n        tap(event => {\n          if (event.type === HttpEventType.Sent) {\n            HttpUtils.updateHttpTagState(httpRequestOptions.tag, true, {url, opts: httpRequestOptions});\n          }\n        }),\n        filter(event => event.type === HttpEventType.Response),\n        map(event => {\n          let response = event;\n          if (!httpRequestOptions.observe || httpRequestOptions.observe === 'body') {\n            response = event.body;\n          }\n          HttpUtils.updateHttpTagState(httpRequestOptions.tag, false, {\n            status: 'success',\n            httpRequestOptions\n          });\n          const resp = httpRequestOptions.onResponse\n            ? httpRequestOptions.onResponse.call(httpRequestOptions.context, response, httpRequestOptions)\n            : response;\n          if (httpRequestOptions.stateName) {\n            StatesUtils.update(httpRequestOptions.stateName, resp);\n          }\n          return resp;\n        }),\n        catchError((error) => {\n          HttpUtils.updateHttpTagState(httpRequestOptions.tag, false, {status: 'error', error});\n          if (httpRequestOptions.onError) {\n            httpRequestOptions.onError.call(httpRequestOptions.context, error, httpRequestOptions);\n          }\n          return of(':' + error.status);\n        })\n      );\n  }\n\n  private static updateHttpTagState(tag, state: boolean, extra?: {}) {\n    if (tag) {\n      StatesUtils.create([StateNames.http, tag], {start: state, ...extra});\n    }\n  }\n\n  private static getRequestParams(options: HttpRequestOptions) {\n    let params: HttpParams;\n    if (typeof options.params === 'string') {\n      params = new HttpParams({fromString: options.params});\n    } else {\n      params = new HttpParams();\n      for (const key in options.params) {\n        if (key) {\n          if (options.params.hasOwnProperty(key) && (options.params[key] !== null || options.params[key] !== undefined)) {\n            params = params.append(key, CommonsUtils.toString(options.params[key]));\n          }\n        }\n      }\n    }\n    return params;\n  }\n\n  private static getRequestBody(options: HttpRequestOptions) {\n\n    return options.body;\n  }\n\n  private static getRequestHeader(options: HttpRequestOptions): HttpHeaders {\n    let headers: HttpHeaders = new HttpHeaders();\n    if (options.contentType) {\n      headers = headers.append('Content-Type', options.contentType);\n    } else {\n      headers = headers.append('Content-Type', HttpContentType.JSON);\n    }\n    if (options.headers) {\n      for (const key in options.headers) {\n        if (key) {\n          headers = headers.append(key, options.headers[key]);\n        }\n      }\n    }\n    return headers;\n  }\n\n  upload(file: File): Observable<HttpEvent<{}>> {\n    const formdata: FormData = new FormData();\n    formdata.append('file', file);\n    const req = new HttpRequest('POST', `upload`, formdata, {\n      reportProgress: true,\n      responseType: 'text'\n    });\n    return HttpUtils.getHttpClient().request(req);\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {LogLevel} from '@er/types';\nimport {CommonsUtils, ConfigUtils, DateUtils, DialogUtils} from '@er/utils';\nimport {HttpUtils} from '../../utils/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LogService {\n\n  debug(from, message: string, ...context: any[]) {\n    if (!ConfigUtils.getConfig().isProduction\n      && ConfigUtils.getConfig().log.enableApp\n      && ConfigUtils.getConfig().log.level <= LogLevel.DEBUG) {\n      if ((typeof from) !== 'string' && from.constructor) {\n        from = from.constructor.name;\n      }\n      if (ConfigUtils.getConfig().log.blackLList.indexOf(from) < 0) {\n        this.getLogger().log(`[${DateUtils.getFormattedTime()}] %c DEBUG `,\n          'color: white; background: green; font-size: 18px;',\n          this.getLogData([from, message, ...context]));\n      }\n    }\n  }\n\n  info(from, message: string, ...context: any[]) {\n    if (ConfigUtils.getConfig().log.level <= LogLevel.INFO) {\n      if (typeof from !== 'string' && from.constructor) {\n        from = from.constructor.name;\n      }\n      if (ConfigUtils.getConfig().log.blackLList.indexOf(from) < 0) {\n        this.getLogger().log(`[${DateUtils.getFormattedTime()}] %c INFO `,\n          'color: white; background: blue; font-size: 18px;',\n          this.getLogData([from, message, ...context]));\n      }\n    }\n  }\n\n  warn(messages: any) {\n    if (ConfigUtils.getConfig().log.level <= LogLevel.WARN) {\n      this.getLogger().log(`[${DateUtils.getFormattedTime()}] %c WARN `,\n        'color: white; background: blue; font-size: 18px;',\n        this.getLogData(messages));\n    }\n  }\n\n  error(from, message, ...context: any[]) {\n    DialogUtils.error('', message);\n    if (ConfigUtils.getConfig().log.level <= LogLevel.ERROR) {\n      this.getLogger().log(`[${DateUtils.getFormattedTime()}] %c ERROR `,\n        'color: white; background: red; font-size: 18px;',\n        this.getLogData([from, message, ...context]));\n      if (ConfigUtils.getConfig().log.httpPost) {\n        if (CommonsUtils.isFunction(from)) {\n          from = from.constructor.name;\n        }\n        this.getHttpLogger().log(DateUtils.getFormattedDateTime(),\n          this.getLogData([from, message]));\n      }\n    }\n  }\n\n  protected getLogger(): Console {\n    return console;\n  }\n\n  protected getHttpLogger(): Console {\n    return <Console>{\n      log: (message?: any, ...optionalParams: any[]) => {\n        HttpUtils.request({\n          ...ConfigUtils.getConfig().logHttpOptions,\n          body: {\n            message,\n            ...optionalParams\n          }\n        });\n      }\n    };\n  }\n\n  private getLogData(messages: any) {\n    return {\n      ...messages\n    };\n  }\n}\n","import {LogService} from '../../services/log/service';\nimport {DiUtils} from '../di';\n\n\nexport class LogUtils {\n\n  private static _logService: LogService = null;\n\n  static debug(from, message, ...context: any[]) {\n    LogUtils.getLogService().debug(from, message, context);\n  }\n\n  static info(from, message, ...context: any[]) {\n    LogUtils.getLogService().info(from, message, context);\n  }\n\n  static warn(messages: any | any[]) {\n    LogUtils.getLogService().warn(messages);\n  }\n\n  static error(from, message, ...context: any[]) {\n    LogUtils.getLogService().error(from, message, context);\n  }\n\n  private static getLogService() {\n    if (!LogUtils._logService) {\n      LogUtils._logService = DiUtils.get<LogService>(LogService);\n    }\n    return LogUtils._logService;\n  }\n}\n","import {EventEmitter, ViewContainerRef} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {takeUntil} from 'rxjs/operators';\nimport {LogUtils} from '../log/index';\n\nexport class ComponentUtils {\n\n  static resolveProps(compInstance, props) {\n    const result = {\n      inputs: {},\n      outputs: {}\n    };\n    if (compInstance && CommonsUtils.isJson(props)) {\n      Object.keys(props).forEach(key => {\n        if (compInstance[key] instanceof EventEmitter) {\n          result.outputs[key] = props[key];\n        } else {\n          result.inputs[key] = props[key];\n        }\n      });\n    }\n    return result;\n  }\n\n  static bindLifeCycles(compInstance, hooks, constructor, destructor) {\n    let originalLifeCycles: {};\n    if (hooks) {\n      originalLifeCycles = {};\n      Object.keys(hooks).forEach(eventName => {\n        const ngEventName = `ng${CommonsUtils.capitalize(eventName)}`;\n\n        if (compInstance[`__${ngEventName}`] === true) {\n          (<Function>hooks[eventName]).call(compInstance, compInstance);\n        } else {\n          const original = constructor.prototype[ngEventName];\n          constructor.prototype[ngEventName] = function () {\n            CommonsUtils.isFunction(original) && original.apply(compInstance, arguments);\n            const args = Array.prototype.slice.call(arguments);\n            (<Function>hooks[eventName]).call(compInstance, ...args, compInstance);\n          };\n          originalLifeCycles[ngEventName] = original;\n        }\n      });\n      if (Object.keys(originalLifeCycles).length > 0) {\n        const destroyLifeCycle = 'ngOnDestroy';\n        constructor.prototype[destroyLifeCycle] = function () {\n          Object.keys(originalLifeCycles).forEach(lifeCycleName => {\n            constructor.prototype[lifeCycleName] = originalLifeCycles[lifeCycleName];\n          });\n          CommonsUtils.isFunction(destructor) && destructor.apply(compInstance);\n          constructor.prototype[destroyLifeCycle] = destructor;\n        };\n      }\n    }\n  }\n\n  // static bindLifeCycles(compInstance, hooks) {\n  //   if (!CommonsUtils.isEmpty(hooks)) {\n  //     Object.keys(hooks).forEach(eventName => {\n  //       const hookName = `ng${CommonsUtils.capitalize(eventName)}`;\n  //       const original = compInstance.__proto__[hookName];\n  //       compInstance.__proto__[hookName] = function () {\n  //         CommonsUtils.isFunction(original) && original.apply(compInstance, arguments);\n  //         const args = Array.prototype.slice.call(arguments);\n  //         (<Function>hooks[eventName]).call(compInstance, ...args, compInstance);\n  //       };\n  //     });\n  //   }\n  // }\n\n  /**\n   * set component instance attributes and event from props object\n   */\n  static bind(compInstance, props, unSubscribe?) {\n    for (const prop in props) {\n      if (prop === 'hooks') {\n        const constructor = ComponentUtils.getConstructor(compInstance);\n        const destructor = constructor.prototype['ngOnDestroy'];\n        ComponentUtils.bindLifeCycles(compInstance, props[prop], constructor, destructor);\n      } else if ((compInstance[prop] instanceof EventEmitter)) {\n        (compInstance[prop] as EventEmitter<any>)\n          .pipe(takeUntil(unSubscribe || compInstance['destroyed$']))\n          .subscribe(event => {\n            try {\n              if (CommonsUtils.isFunction(compInstance['getEventContext'])) {\n                event = compInstance.getEventContext(event);\n              }\n              props[prop].call(compInstance, event);\n            } catch (e) {\n              LogUtils.error(compInstance, '', e);\n            }\n          });\n      } else {\n        compInstance[prop] = props[prop];\n      }\n    }\n  }\n\n  static reWriteMethod(compInstance, methodName: string, newFun: Function, position: 'before' | 'after' | 'override' = 'after') {\n    const buildInFn = compInstance[methodName];\n    Object.defineProperty(compInstance, methodName, {\n      get: () => {\n        return (args) => {\n          if (buildInFn && position === 'after') {\n            buildInFn.call(compInstance, args);\n          }\n\n          newFun.call(compInstance, args);\n\n          if (buildInFn && position === 'before') {\n            buildInFn.call(compInstance, args);\n          }\n        };\n      }\n    });\n  }\n\n  static getHostComponentInst(viewContainer: ViewContainerRef) {\n    if (viewContainer) {\n      const componentView = viewContainer['_data'].componentView;\n      if (componentView) {\n        return componentView.component;\n      }\n    }\n    return null;\n  }\n\n  static getViewComponentRef(viewContainer: ViewContainerRef) {\n    if (viewContainer) {\n      const view = viewContainer['_view'];\n      if (view) {\n        return view.component;\n      }\n    }\n    return null;\n  }\n\n  static getConstructor(component) {\n    return component.__proto__.constructor;\n  }\n}\n","import {Location} from '@angular/common';\nimport {ActivatedRoute, NavigationExtras, Router} from '@angular/router';\nimport {StateNames} from '@er/types';\nimport {CommonsUtils, StatesUtils} from '@er/utils';\nimport {DiUtils} from '../di';\n\nexport class RouteUtils {\n\n  static getActiveRoute() {\n    let route = DiUtils.get<ActivatedRoute>(ActivatedRoute);\n    while (route.firstChild) {\n      route = route.firstChild;\n    }\n    return route;\n  }\n\n  static getActiveRouteData() {\n    const route = RouteUtils.getActiveRoute();\n    return route && route.snapshot.data;\n  }\n\n  static clearOutlet(outletName: string = 'primary', isRelative = false) {\n    const extra = {};\n    if (!isRelative) {\n      extra['relativeTo'] = RouteUtils.getActiveRoute();\n    }\n    DiUtils.get<Router>(Router).navigate([{outlets: {[outletName]: null}}], extra);\n  }\n\n  static nav(commands: string | any[], paramsOrRelative?: {} | boolean, extras?: NavigationExtras) {\n    if (CommonsUtils.isString(commands)) {\n      commands = [commands];\n    }\n    if (!extras) {\n      extras = <NavigationExtras>{};\n    }\n    if (paramsOrRelative && Object.keys(paramsOrRelative).length > 0) {\n      CommonsUtils.set(<{}>extras, 'queryParams', paramsOrRelative);\n    }\n    if ((CommonsUtils.isString(commands) && !(<string>commands).startsWith('/'))\n      || (paramsOrRelative === true)) {\n      CommonsUtils.set(<{}>extras, 'relativeTo', RouteUtils.getActiveRoute());\n    }\n    DiUtils.get<Router>(Router).navigate(<any[]>commands, extras);\n  }\n\n  static back() {\n    DiUtils.get<Location>(Location).back();\n  }\n\n  static forward() {\n    DiUtils.get<Location>(Location).forward();\n  }\n\n  static refresh() {\n    RouteUtils.navigate(StatesUtils.getValue(StateNames.nav)['url']);\n  }\n\n  static navigate(url: string): void {\n    if (url.startsWith('http')) {\n      window.location.href = url;\n    } else {\n      DiUtils.get<Router>(Router).navigateByUrl(url);\n    }\n  }\n}\n","import {OnInit} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {ComponentUtils} from '../utils/component';\nimport {LogUtils} from '../utils/log';\nimport {RouteUtils} from '../utils/nav';\nimport {BaseComponent} from './component';\n\n\nexport class RouteBindComponent extends BaseComponent implements OnInit {\n\n  ngOnInit() {\n    this.$subscriptions = RouteUtils.getActiveRoute().url.subscribe(url => {\n      let activeRoute = RouteUtils.getActiveRoute();\n      if (!activeRoute) {\n        return;\n      }\n      const data = CommonsUtils.copy(activeRoute.snapshot.data);\n      const params = {\n        ...activeRoute.snapshot.params || {},\n        ...activeRoute.snapshot.queryParams || {}\n      };\n      while (activeRoute && !activeRoute.snapshot.data['$props']) {\n        activeRoute = activeRoute.parent;\n      }\n      const routeData = {\n        ...activeRoute.snapshot.data,\n        ...data\n      };\n      let props = CommonsUtils.copy(routeData['$resolvedProps'] || routeData['$props']);\n      if (data['$propsKey']) {\n        props = CommonsUtils.get(props, data['$propsKey']);\n      }\n      Object.keys(data).forEach(key => {\n        if (CommonsUtils.isFunction(data[key])) {\n          props[key] = (<Function>data[key])(props, params, data);\n        } else if (CommonsUtils.isString(data[key]) && data[key].startsWith(':')) {\n          const param = (<string>data[key]).substring(1);\n          if (params[param]) {\n            props[key] = params[param];\n          }\n        } else if (key !== '$propsKey' && key !== '$propsWrapperKey' && key !== '$props') {\n          props[key] = data[key];\n        }\n      });\n      props['$routeParams'] = params;\n\n      LogUtils.debug(this, '', routeData);\n\n      props = this.beforeRoutePropsBind(props);\n\n      ComponentUtils.bind(this, props);\n\n      this.afterRoutePropsBind();\n    });\n  }\n\n  beforeRoutePropsBind(props): {} {\n    return props;\n  }\n\n  afterRoutePropsBind() {\n  }\n}\n","import {HostBinding, Input, OnInit} from '@angular/core';\nimport {ControlValueAccessor} from '@angular/forms';\nimport {NO_OP} from '@er/types';\nimport {BehaviorSubject} from 'rxjs';\nimport {BaseComponent} from './component';\n\n\nexport class ControlComponent extends BaseComponent implements OnInit, ControlValueAccessor {\n\n  @Input() parser: (value) => any;\n\n  @Input() formatter: (model) => any;\n\n  @Input() disabled = false;\n\n  defaultValue: any;\n\n  disabled$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n\n  onTouched: () => void = NO_OP;\n  onChange: (_: any) => void = NO_OP;\n\n  protected innerValue: any;\n\n  @HostBinding('style.opacity')\n  get opacity() {\n    return this.disabled ? 0.25 : 1;\n  }\n\n  @HostBinding('style.cursor')\n  get cursor() {\n    return this.disabled ? 'not-allowed' : 'default';\n  }\n\n  get value(): any {\n    return this.innerValue;\n  }\n\n  set value(value: any) {\n    if (!value || value !== this.innerValue) {\n      const v = this.parser ? this.parser(value) : value;\n      this.innerValue = v;\n      this.onChange(v);\n    }\n  }\n\n  ngOnInit() {\n    if (this.defaultValue) {\n      this.innerValue = this.defaultValue;\n    }\n  }\n\n  updateTouch() {\n    this.onTouched();\n  }\n\n  writeValue(model: any) {\n    const v = this.formatter ? this.formatter(model) : model;\n    if (v !== this.innerValue) {\n      this.innerValue = v;\n    }\n  }\n\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this.disabled$.next(isDisabled);\n  }\n}\n","import {Input} from '@angular/core';\nimport {Props} from '@er/types';\nimport {CommonsUtils, IdUtils} from '@er/utils';\nimport {BaseComponent} from './component';\n\nexport abstract class WrapperComponent<T extends Props = Props> extends BaseComponent {\n\n  $props: T;\n\n  @Input() outputContext: {}; // target component event context\n\n  @Input() attrs: any;\n\n  protected $defaultProps: T;\n\n  _initProps() {\n    this.$props = CommonsUtils.defaults({}, this.$props || {}, this.$defaultProps || {});\n    if (!this.$props.$id) {\n      this.$props.$id = IdUtils.getRandom();\n    }\n    if (!this.$props.$ext) {\n      this.$props.$ext = {};\n    }\n    if (this.$props.$ext['apiDataProps']) {\n      if (!this.$props.$ext['apiDataProps'].requestOptions) {\n        this.$props.$ext['apiDataProps'].requestOptions = {};\n      }\n      CommonsUtils.defaults(this.$props.$ext['apiDataProps'].requestOptions, {\n        context: this,\n        tag: this.$props.$id\n      });\n    }\n    this.onPropsInit();\n  }\n\n  _propsBind() {\n    this.onPropsBind();\n  }\n\n  onPropsInit() {}\n\n  onPropsBind() {\n  }\n}\n","import {HostBinding, Input} from '@angular/core';\nimport {ControlValueAccessor} from '@angular/forms';\nimport {NO_OP, Props} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {WrapperComponent} from './wrappe';\n\n\nexport class ControlWrapperComponent<T extends Props = Props> extends WrapperComponent<T> implements ControlValueAccessor {\n\n  @Input() valueParser: (value) => any;\n\n  @Input() modelFormatter: (model) => any;\n\n  @Input() resettable = true;\n\n  @Input() disabled = false;\n\n  onTouched: () => void = NO_OP;\n  onChange: (_: any) => void = NO_OP;\n\n  protected innerValue: any;\n\n  @HostBinding('style.opacity')\n  get opacity() {\n    return this.disabled ? 0.25 : 1;\n  }\n\n  @HostBinding('style.cursor')\n  get cursor() {\n    return this.disabled ? 'not-allowed' : 'default';\n  }\n\n  get value(): any {\n    return this.innerValue;\n  }\n\n  set value(value: any) {\n    const v = this.valueParser ? this.valueParser(value) : value;\n    if (!CommonsUtils.isEqual(v, this.innerValue)) {\n      this.innerValue = v;\n      this.onChange(v);\n    }\n  }\n\n  updateTouch() {\n    this.onTouched();\n  }\n\n  writeValue(model: any) {\n    const v = this.modelFormatter ? this.modelFormatter(model) : model;\n    if ( v !== this.innerValue) {\n      this.innerValue = v;\n    }\n  }\n\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  onPropsInit() {\n    if (this.disabled) {\n      this.$props['disabled'] = this.disabled;\n    }\n  }\n\n  reset() {\n    this.value = null;\n  }\n}\n","import {ApiDataProps, ApiPayload, ApiRequestOptions, ApiServerType, DataSource, NotifyLevel, Query, StateNames} from '@er/types';\nimport {CommonsUtils, ConfigUtils, ContextUtils, DialogUtils, EsUtils, StatesUtils} from '@er/utils';\nimport {RequestBodySearch} from 'elastic-builder';\nimport {Observable, of, zip} from 'rxjs';\nimport {filter, first, map, switchMap} from 'rxjs/operators';\nimport {HttpUtils} from '../http';\nimport {LogUtils} from '../log';\n\nexport const DEFAULT_API_REQUEST_OPTIONS: ApiRequestOptions = {\n  notifyFailure: true\n};\n\nexport class ApiUtils {\n\n  private static presetApiOptions: { [key: string]: ApiRequestOptions } = {};\n\n\n  static getPresetApiOptions(serverType): ApiRequestOptions {\n\n    if (!serverType) {\n      serverType = CommonsUtils.get(ConfigUtils.getConfig(), 'api.default') || ApiServerType.ES;\n    }\n    ApiUtils.presetApiOptions[serverType] = {\n      ...DEFAULT_API_REQUEST_OPTIONS,\n      ...CommonsUtils.get(ConfigUtils.getConfig(), `api.servers.${serverType}`, {})\n    };\n    if (!ApiUtils.presetApiOptions[serverType].actions) {\n      ApiUtils.presetApiOptions[serverType].actions = {};\n    }\n    return ApiUtils.presetApiOptions[serverType];\n  }\n\n  static login(payload: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.login || {};\n    return ApiUtils.doRequest(null, payload, presetActionOptions, options);\n  }\n\n  static logout(options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.logout || {};\n    return ApiUtils.doRequest(null, null, presetActionOptions, options);\n  }\n\n  static changePwd(payload: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.changePwd || {};\n    return ApiUtils.doRequest(null, payload, presetActionOptions, options);\n  }\n\n  static register(payload: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.register || {};\n    return ApiUtils.doRequest(null, payload, presetActionOptions, options);\n  }\n\n  static save(apiEntry: string, data: {}, options: ApiRequestOptions = {}): Observable<any> {\n    if (data) {\n      const _data = {...data};\n      if (_data['id']) {\n        const id = _data['id'];\n        delete _data['id'];\n        return ApiUtils.patchById.call(this, apiEntry, id, _data, options);\n      } else {\n        return ApiUtils.create.call(this, apiEntry, _data, options);\n      }\n    }\n  }\n\n  static create(apiEntry: string, data: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.create || {};\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, data, presetActionOptions, options);\n  }\n\n  static getById(apiEntry: string, id: string, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.getById || {};\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, {id}, presetActionOptions, options);\n  }\n\n  static getByIds(apiEntry: string, ids: string | string[], options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.getByIds || {};\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, ids, presetActionOptions, options);\n  }\n\n  static getByQuery(apiEntry: string, payload?: ApiPayload | string | RequestBodySearch, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.getByQuery;\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, payload, presetActionOptions, options);\n  }\n\n  static updateById(apiEntry: string, id: string, data: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.updateById;\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, {id, ...data}, presetActionOptions, options);\n  }\n\n  static patchById(apiEntry: string, id: string, data: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.patchById;\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, {id, ...data}, presetActionOptions, options);\n  }\n\n  static updateByQuery(apiEntry: string, query: Query | Query[] | RequestBodySearch, data: {}, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.updateByQuery;\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, query, presetActionOptions, options);\n  }\n\n  static deleteById(apiEntry: string, id: string, options: ApiRequestOptions = {}): Observable<any> {\n    const obv = DialogUtils.confirm('', '<b></b>?')\n      .pipe(\n        first(),\n        filter(accept => accept),\n        switchMap(_ => {\n          const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.deleteById;\n          return ApiUtils.doRequest(apiEntry, id, presetActionOptions, options);\n        })\n      );\n    return obv;\n  }\n\n  static deleteByQuery(apiEntry: string, query: Query | RequestBodySearch, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.deleteByQuery;\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, query, presetActionOptions, options);\n  }\n\n  static batch(apiEntry: string, body, options: ApiRequestOptions = {}) {\n    const presetActionOptions = ApiUtils.getPresetApiOptions(options.serverType).actions.batch;\n    ApiUtils.setContext(options, this);\n    return ApiUtils.doRequest(apiEntry, body, presetActionOptions, options);\n  }\n\n  static batchFetch(dataSource: ApiDataProps | ApiDataProps[] | DataSource, tag?): Observable<any> {\n    if (dataSource) {\n      let _apiDataProp = dataSource;\n      if (dataSource['apiDataProps']) {\n        _apiDataProp = dataSource['apiDataProps'];\n      }\n      _apiDataProp = CommonsUtils.copy(_apiDataProp);\n      const apiDataProps: ApiDataProps[] = CommonsUtils.getArrayValue(_apiDataProp);\n      if (CommonsUtils.isEmpty(apiDataProps)) {\n        return;\n      }\n      if (!tag) {\n        tag = dataSource['id'] || apiDataProps[0].id || '';\n      }\n      apiDataProps.forEach(apiDataProp => {\n        if (dataSource['query']) {\n          const query = dataSource['query'];\n          const apiQuery = CommonsUtils.getArrayValue(apiDataProp.query || []);\n          apiQuery.concat(CommonsUtils.getArrayValue(query));\n          apiDataProp.query = apiQuery;\n        }\n        const _filter = apiDataProp.filter;\n        if (CommonsUtils.isFunction(_filter)) {\n          if (dataSource['queryValue']) {\n            apiDataProp.filter = (apiDataProp.filter as Function)(dataSource['queryValue']);\n          } else {\n            delete apiDataProp.filter;\n          }\n        }\n\n        if (dataSource['interval']) {\n          CommonsUtils.set(<{}>apiDataProp, 'aggProps.interval', dataSource['interval']);\n        }\n        if (dataSource['format']) {\n          CommonsUtils.set(<{}>apiDataProp, 'aggProps.format', dataSource['format']);\n        }\n      });\n      // return forkJoin(...apiDataProps.map(apiDataProp => ApiUtils.fetch(apiDataProp, tag)))\n      //   .pipe(\n      //     catchError((err) => throwError(err))\n      //   );\n      return zip(...apiDataProps.map(apiDataProp => ApiUtils.fetch(apiDataProp, tag)))\n        .pipe(\n          map(dataSet => {\n            let resultList;\n            let resultMap;\n            dataSet.forEach((data, i) => {\n              if (apiDataProps[i].id) {\n                if (!resultMap) {\n                  resultMap = {};\n                }\n                resultMap[apiDataProps[i].id] = data;\n              } else {\n                if (!resultList) {\n                  resultList = [];\n                }\n                resultList.push(data);\n              }\n            });\n            if (resultList && resultList.length === 1) {\n              resultList = resultList[0];\n            }\n            if (resultMap && resultList) {\n              return {\n                ...resultMap,\n                data: resultList\n              };\n            } else {\n              return resultMap || resultList || [];\n            }\n          })\n        );\n    }\n  }\n\n  static fetch(apiDataProps: ApiDataProps, tag?): Observable<any> {\n    if (!apiDataProps.apiEntry) {\n      LogUtils.error('apiUtil', 'apiEntry');\n      return of([]);\n    }\n    let queryPayload: {};\n    if (CommonsUtils.isFunction(apiDataProps.payload)) {\n      queryPayload = (<Function>apiDataProps.payload).call(undefined, apiDataProps);\n    } else if (apiDataProps.payload) {\n      queryPayload = apiDataProps.payload;\n    }\n    if (!queryPayload) {\n      const qBody = EsUtils.buildQueryBody(apiDataProps);\n      queryPayload = qBody;\n    }\n    const options = apiDataProps.requestOptions || {};\n    if (!options.tag) {\n      options.tag = tag || '';\n    }\n    LogUtils.debug('apiUtils', 'apiData', {apiDataProps: apiDataProps, apiRequestBody: queryPayload});\n    return ApiUtils.getByQuery(apiDataProps.apiEntry, queryPayload, options)\n      .pipe(\n        map(data => {\n          let aggs;\n          if (data && data.aggs) {\n            aggs = EsUtils.resolveAggs(data.aggs);\n            data.aggs = aggs;\n          }\n          if (CommonsUtils.isEmpty(data.items)) {\n            delete data.items;\n          }\n          if (CommonsUtils.isEmpty(data.aggs)) {\n            delete data.aggs;\n          }\n          let path = apiDataProps.dataPath || (apiDataProps.aggProps ? 'aggs' : undefined);\n          if (path === '/') {\n            path = undefined;\n          }\n          return path ? CommonsUtils.get(data, path) : data;\n        })\n      );\n  }\n\n  private static setContext(options, context) {\n    options = options || {};\n    options.context = context;\n  }\n\n  private static doRequest(apiEntry: string,\n                           payload: any,\n                           presetActionOptions: ApiRequestOptions,\n                           actionOptions?: ApiRequestOptions): Observable<any> {\n    const apiRequestOptions: ApiRequestOptions = {\n      ...presetActionOptions,\n      ...actionOptions\n    };\n    delete apiRequestOptions.actions;\n    const requestPayload = payload;\n    const requestOptions = {\n      ...apiRequestOptions,\n      uri: ApiUtils.buildUri(apiEntry, requestPayload, apiRequestOptions),\n      payload: ApiUtils.buildPayload(apiEntry, requestPayload, apiRequestOptions)\n    };\n    delete requestOptions.paramsKeys;\n    delete requestOptions.uriResolver;\n    delete requestOptions.payloadResolver;\n    if (!requestOptions.uri || !requestOptions.uri.startsWith('http')) {\n      const apiServer = ApiUtils.getPresetApiOptions(presetActionOptions.serverType).uri || '';\n      requestOptions.uri = apiServer + (requestOptions.uri.startsWith('/') ? '' : '/') + requestOptions.uri;\n    }\n    return HttpUtils.request(requestOptions)\n      .pipe(\n        filter(response => !!response),\n        map(response => {\n          if (response.success === true) {\n            if (apiRequestOptions.alertSuccess) {\n              DialogUtils.info('', apiRequestOptions.successMessage);\n            }\n            if (apiRequestOptions.notifySuccess) {\n              StatesUtils.create(StateNames.notify, {\n                title: '',\n                message: apiRequestOptions.successMessage\n              });\n            }\n            if (apiRequestOptions.onSuccess) {\n              return apiRequestOptions.onSuccess.call(requestOptions.context, response, requestOptions);\n            } else {\n              if (apiRequestOptions.dataPath) {\n                return CommonsUtils.get(response.content, apiRequestOptions.dataPath);\n              }\n              return response.content || response;\n            }\n          } else if (!response.success === false) {\n            if (apiRequestOptions.alertFailure) {\n              DialogUtils.error('', response.message);\n            }\n            if (apiRequestOptions.notifyFailure) {\n              StatesUtils.create(StateNames.notify, {\n                level: NotifyLevel.ERROR,\n                title: response.error,\n                message: response.message\n              });\n            }\n            if (apiRequestOptions.onFailure) {\n              return apiRequestOptions.onFailure.call(requestOptions.context, response, requestOptions);\n            }\n            return response;\n          }\n          return response;\n        }),\n        first()\n      );\n  }\n\n  private static buildUri(apiEntry: string, payload: any, options: ApiRequestOptions) {\n    let uri = apiEntry;\n    if (CommonsUtils.isTemplateStr(apiEntry)) {\n      // apiEntry = CommonsUtils.templateStr(apiEntry, ContextUtils.context());\n    }\n    if (CommonsUtils.isString(options.uriResolver)) {\n      uri = options.uriResolver as string;\n    } else if (CommonsUtils.isFunction(options.uriResolver)) {\n      uri = (options.uriResolver as Function).call(options.context, apiEntry, payload, options);\n    } else if (!uri) {\n      uri = options.uri || '';\n    }\n    if (!uri.startsWith('http')) {\n      const serverUri = ApiUtils.getPresetApiOptions(options.serverType).uri;\n      if (serverUri) {\n        uri = serverUri + (uri.startsWith('/') ? uri : '/' + uri);\n      }\n    }\n    return uri;\n  }\n\n  private static buildPayload(apiEntry: string, payload: any, options: ApiRequestOptions): {} {\n    let _payload = payload;\n    if (CommonsUtils.isJson(_payload)) {\n      _payload = CommonsUtils.merge({}, _payload || {}, options.payload || {}, options.body || options.params || {});\n    }\n    if (options.payloadResolver) {\n      _payload = (options.payloadResolver as Function).call(options.context, apiEntry, _payload, options);\n    }\n    if (CommonsUtils.isString(_payload)) {\n      return _payload;\n    } else if (CommonsUtils.isString(options.body)) {\n      return options.body;\n    } else if (CommonsUtils.isEmpty(_payload)) {\n      return undefined;\n    }\n    _payload = ContextUtils.resolveVariables(_payload);\n    _payload = ApiUtils.resolveApiParamsName(\n      options.paramsKeys || ApiUtils.getPresetApiOptions(options.serverType).paramsKeys || {},\n      _payload);\n    if (CommonsUtils.isEmpty(_payload)) {\n      return undefined;\n    }\n    return _payload;\n  }\n\n  private static resolveApiParamsName(paramsKeys: {}, payload) {\n    if (!CommonsUtils.isJson(payload)) {\n      return payload;\n    }\n    const resolved = {};\n    for (const key in payload) {\n      if (paramsKeys.hasOwnProperty(key)) {\n        resolved[paramsKeys[key]] = payload[key];\n      } else {\n        resolved[key] = payload[key];\n      }\n    }\n    return resolved;\n  }\n}\n\n","import {Directive, EventEmitter, Input, OnChanges, Output, SimpleChanges} from '@angular/core';\nimport {ApiDataProps} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {BaseDirective} from '../../bases/directive';\nimport {ApiUtils} from '../../utils/api';\nimport {LogUtils} from '../../utils/log';\n\n@Directive({\n  selector: '[erApiData]'\n})\nexport class ApiDataDirective extends BaseDirective implements OnChanges {\n\n  @Input('erApiData') apiDataProps: ApiDataProps;\n\n  @Output() onRequestData: Function;\n\n  @Output() onDataReady = new EventEmitter();\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.apiDataProps\n      && changes.apiDataProps.currentValue\n      && (this.apiDataProps.autoFetch !== false || !changes.apiDataProps.isFirstChange())) {\n      this.fetchData();\n    }\n  }\n\n  fetchData() {\n    if (CommonsUtils.isEmpty(this.apiDataProps)) {\n      LogUtils.debug('apiDataDirective', 'apiDataProps');\n      return;\n    }\n    ApiUtils.fetch(this.apiDataProps)\n      .subscribe(data => {\n        LogUtils.debug(this, 'apiData', data);\n        if (this.apiDataProps.data$) {\n          this.apiDataProps.data$.next(data);\n        }\n        this.onDataReady.emit(data);\n      });\n  }\n}\n","import {Input, ViewChild} from '@angular/core';\nimport {ApiDataProps, DataAwareProps} from '@er/types';\nimport {CommonsUtils, DataItemUtils} from '@er/utils';\nimport {BehaviorSubject} from 'rxjs';\nimport {ApiDataDirective} from '../directives/api-data/directive';\nimport {LogUtils} from '../utils/log';\nimport {ControlWrapperComponent} from './control-wrapper';\n\nexport class DataAwareControlWrapperComponent<T extends DataAwareProps = DataAwareProps> extends ControlWrapperComponent<T> {\n\n  public data$: BehaviorSubject<any> = new BehaviorSubject<any>(undefined);\n\n  @ViewChild(ApiDataDirective) apiData: ApiDataDirective;\n\n  private _apiDataProps: ApiDataProps;\n\n  @Input() get apiDataProps() {\n    return this._apiDataProps || {};\n  }\n\n  set apiDataProps(props: ApiDataProps) {\n    this._apiDataProps = props;\n    if (this._apiDataProps && !this._apiDataProps.data$) {\n      this._apiDataProps.data$ = this.data$;\n    }\n  }\n\n  onPropsInit() {\n    super.onPropsInit();\n    this.initLocalDataItem();\n  }\n\n  parseValue(value) {\n    try {\n      if (value && this.$props.$ext.dataItemProps && !CommonsUtils.isString(value)) {\n        return DataItemUtils.getItemValue(value, this.$props.$ext.dataItemProps.valueKey);\n      }\n      return value;\n    } catch (e) {\n      LogUtils.error(this, '', e);\n      return undefined;\n    }\n  }\n\n  formatModel(model) {\n    try {\n      if (CommonsUtils.isJson(model) && this.$props.$ext.dataItemProps) {\n        return DataItemUtils.getItemLabel(model, this.$props.$ext.dataItemProps.labelKey);\n      }\n      return model;\n    } catch (e) {\n      LogUtils.error(this, '', e);\n      return undefined;\n    }\n  }\n\n  initLocalDataItem() {\n    if (this.$props.$ext && this.$props.$ext.dataItems) {\n      let data: {}[] = this.$props.$ext.dataItems;\n      data = data.map(d => d['data'] = d);\n      this.data$.next(data);\n    }\n  }\n}\n","import {ChangeDetectorRef, EventEmitter, Input, Output} from '@angular/core';\nimport {AbstractControl, FormControl, FormGroup, ValidationErrors} from '@angular/forms';\nimport {ApiRequestOptions, ButtonProps, DataEntity, DynaContent} from '@er/types';\nimport {CommonsUtils, DialogUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {first} from 'rxjs/operators';\nimport {ApiUtils} from '../utils/api';\nimport {BaseComponent} from './component';\n\nexport abstract class BaseFormComponent extends BaseComponent {\n\n  @Input() $id?: any;\n\n  @Input() entity: DataEntity;\n\n  @Input() apiEntry: string;\n\n  @Input() options = {};\n\n  @Input() submitRootKey: string;\n\n  @Input() submitExcludeKeys: string | string[];\n\n  @Input() resetKeys: string | string[];\n\n  @Input() styleClass: any;\n\n  @Input() style: any;\n\n  @Input() formStyleClass: any;\n\n  @Input() formStyle: any;\n\n  @Input() buttonsStyleClass: any = 'text-center my-5';\n\n  @Input() submitBtnStyleClass: any = 'btn btn-success';\n\n  @Input() resetBtnStyleClass: any = 'btn btn-danger';\n\n  @Input() initBtnStyleClass: any = 'btn btn-alert';\n\n  @Input() header: DynaContent;\n\n  @Input() footer: DynaContent;\n\n  @Input() buttons?: ButtonProps[];\n\n  @Input() getModelOptions: ApiRequestOptions;\n\n  @Input() submitOptions: ApiRequestOptions;\n\n  @Input() beforeSubmit: (context) => boolean | Observable<boolean>;\n\n  @Input() afterSubmit: (context) => void | {} | Observable<any>;\n\n  @Input() valueChanges: (context) => void;\n\n  @Input() resetAfterSubmit: boolean;\n\n  @Output() onSubmit: EventEmitter<{}> = new EventEmitter();\n\n  @Output() onSubmitted: EventEmitter<{}> = new EventEmitter();\n\n  @Output() onModel: EventEmitter<{}> = new EventEmitter();\n\n  @Output() onFormValueChanges: EventEmitter<any> = new EventEmitter();\n\n  form: FormGroup = new FormGroup({});\n\n  templateNames = {\n    header: 'header',\n    buttons: 'buttons',\n    footer: 'footer'\n  };\n\n  private initModel: {};\n\n  runtimeData = {};\n\n  private hasUpdated = false;\n\n  constructor(protected cd: ChangeDetectorRef) {\n    super();\n  }\n\n  private _model: {};\n\n  @Input()\n  get model() {\n    return this._model;\n  }\n\n  set model(model) {\n    this._model = CommonsUtils.omitBy(model, CommonsUtils.lodash().isUndefined);\n    this.refresh();\n  }\n\n  private _modelId: any;\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.$subscriptions = this.form.valueChanges.subscribe(event => this.onFormValueChanges.emit(event));\n  }\n\n  @Input()\n  get modelId() {\n    return this._modelId;\n  }\n\n  set modelId(modelId) {\n    if (modelId !== this.modelId) {\n      this._modelId = modelId;\n      if (!modelId || modelId === '') {\n        this.resetModel();\n      } else if (this.apiEntry) {\n        ApiUtils.getById(this.apiEntry, modelId, this.getModelOptions)\n          .subscribe(result => {\n            this.model = result;\n            this.form.updateValueAndValidity({onlySelf: false, emitEvent: true});\n          });\n      }\n    }\n  }\n\n  get isFormValid() {\n    if (!this.hasUpdated) {\n      this.updateControls();\n    }\n    return this.form.valid;\n  }\n\n  get httpTag(): string {\n    return `http${'-' + this.formId || ''}`;\n  }\n\n  get formId() {\n    return this.$id;\n  }\n\n  get submitModel() {\n    let model = {...this.model};\n    if (this.submitRootKey) {\n      model = this.model[this.submitRootKey];\n    }\n    if (this.submitExcludeKeys) {\n      model = CommonsUtils.removeKeys(model, ...CommonsUtils.getArrayValue(this.submitExcludeKeys));\n    }\n    Object.keys(model).forEach(key => {\n      if (key.startsWith('$_')) {\n        delete model[key];\n      }\n    });\n    return model;\n  }\n\n  formControl(fieldName): AbstractControl {\n    return this.form.controls[fieldName];\n  }\n\n  fieldComponent(fieldName) {\n    return this.form['components'][fieldName];\n  }\n\n  getFormErrorFields() {\n    const errors = [];\n    Object.keys(this.form.controls).forEach(key => {\n      const controlErrors: ValidationErrors = this.form.get(key).errors;\n      if (controlErrors != null) {\n        Object.keys(controlErrors).forEach(keyError => {\n          errors.push(key); // + ', err value: ', controlErrors[keyError]);\n        });\n      }\n    });\n    return errors;\n  }\n\n  patchModel(model) {\n    this.model = Object.assign({}, this.model || {}, model);\n  }\n\n  patchRuntimeData(data) {\n    Object.assign(this.runtimeData, data);\n  }\n\n  isFieldValid(path: string | string[]) {\n    const field = this.field(path);\n    if (field) {\n      return field.valid;\n    } else {\n      return undefined;\n    }\n  }\n\n  isFieldTouched(fieldNamePath: string) {\n    const field = this.field(fieldNamePath);\n    if (field) {\n      return field.touched;\n    } else {\n      return undefined;\n    }\n  }\n\n  updateControls(form?: FormGroup) {\n    if (!form) {\n      form = this.form;\n    }\n    Object.keys(form.controls).forEach(field => {\n      const control = form.get(field);\n      if (control instanceof FormControl) {\n        control.markAsTouched({onlySelf: true});\n        // control.updateValueAndValidity({onlySelf: true});\n      } else if (control instanceof FormGroup) {\n        this.updateControls(control);\n      }\n    });\n    this.hasUpdated = true;\n  }\n\n  field(path: string | string[]): AbstractControl {\n    return this.form.get(path);\n  }\n\n  resetForm() {\n    this.form.reset({});\n  }\n\n  resetModel(reset?) {\n    if (this.initModel) {\n      this.model = CommonsUtils.copy(this.initModel);\n    } else if (CommonsUtils.isJson(reset)) {\n      this.model = {...reset};\n    } else if (this.options['resetModel']) {\n      this.options['resetModel']();\n    } else {\n      this.model = {};\n    }\n    this.form.reset(this.model, {emitEvent: true});\n  }\n\n  setInitModel() {\n    this.initModel = CommonsUtils.copy(this.model);\n    if (this.options['updateInitialValue']) {\n      this.options['updateInitialValue']();\n    }\n  }\n\n  refresh() {\n    this.cd.detectChanges();\n  }\n\n  submit() {\n    if (!this.isFormValid) {\n      DialogUtils.error('', '');\n      return;\n    }\n    let result;\n    if (this.beforeSubmit) {\n      result = this.beforeSubmit(this.getEventContext());\n      if (result instanceof Observable) {\n        (<Observable<boolean>>result)\n          .pipe(first())\n          .subscribe(data => {\n            this.submitAfterBefore(data);\n          });\n      } else {\n        this.submitAfterBefore(result);\n      }\n    } else {\n      this.doSubmit();\n    }\n  }\n\n  defaultSubmit(submitModel?) {\n    this.$subscriptions = ApiUtils.save.call(this, this.apiEntry, submitModel || this.submitModel, {\n      tag: this.formId,\n      ...this.submitOptions || {}\n    })\n      .subscribe(data => {\n        if (data.id && data.id !== this.model['id']) {\n          this.model['id'] = data.id;\n        }\n        this.onSubmitted.emit(this.getEventContext({response: data, model: this.model, submitted: submitModel || this.submitModel}));\n        if (this.afterSubmit) {\n          const result = this.afterSubmit(this.getEventContext({submitModel: submitModel || this.submitModel, id: data.id}));\n          if (result instanceof Observable) {\n            (<Observable<any>>result)\n              .pipe(first())\n              .subscribe(dat => {\n                this.doPostSubmit(dat);\n              });\n          } else {\n            this.doPostSubmit(result);\n          }\n        } else {\n          this.doPostSubmit();\n        }\n      });\n  }\n\n  getEventContext(other?) {\n    return ({\n      formlyForm: this,\n      form: <FormGroup>this.form,\n      model: this.model,\n      modelId: this.modelId,\n      entry: this.apiEntry,\n      entity: <DataEntity>this.entity,\n      ...other || {}\n    });\n  }\n\n\n  private submitAfterBefore(result) {\n    if (result !== false) {\n      if (CommonsUtils.isJson(result) && !CommonsUtils.isEmpty(result)) {\n        this.doSubmit(result);\n      } else {\n        this.doSubmit();\n      }\n    }\n  }\n\n  private doSubmit(submitModel?) {\n    if (this.onSubmit.observers.length > 0) {\n      this.onSubmit.emit(this.getEventContext({submitModel}));\n    } else {\n      this.defaultSubmit(submitModel);\n    }\n  }\n\n  private doPostSubmit(model?) {\n    if (model) {\n      this.resetModel(model);\n    } else if (this.resetKeys) {\n      const keys = CommonsUtils.getArrayValue(this.resetKeys);\n      keys.forEach(key => delete this.model[key]);\n      delete this.model['id'];\n      this.form.reset(this.model, {emitEvent: true});\n    } else if (this.resetAfterSubmit !== false) {\n      this.resetModel(this.entity && this.entity.initValue || {});\n    }\n  }\n}\n","import {StateNames} from '@er/types';\nimport {StatesUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {distinctUntilChanged, filter, map} from 'rxjs/operators';\n\n\nexport const HTTP_STATE$: Observable<boolean> = StatesUtils.observe(StateNames.rootHttp)\n  .pipe(\n    distinctUntilChanged(),\n    map(state => state && state.inProcess && state.inProcess > 0)\n  );\n\nexport const HTTP_TAG_STATE$ = (httpTag): Observable<boolean> => {\n  return StatesUtils.observe(StateNames.http, httpTag)\n    .pipe(\n      distinctUntilChanged(),\n      filter(state => !!state),\n      map(state => state && state.start)\n    );\n};\n\nexport const ROUTE_STATE$: Observable<boolean> = StatesUtils.observe(StateNames.nav)\n  .pipe(\n    distinctUntilChanged(),\n    filter(state => !!state),\n    map(state => state && state.start && state.outlet === 'primary')\n  );\n\nexport const ROUTE_OUTLET_STATE$ = (outlet): Observable<boolean> => {\n  return StatesUtils.observe(StateNames.nav)\n    .pipe(\n      distinctUntilChanged(),\n      filter(state => !!state),\n      map(state => state && state.start && state.outlet === outlet)\n    );\n};\n\nexport const WEB_SOCKET_STATES: Observable<string> = StatesUtils.observe(StateNames.socket)\n  .pipe(\n    distinctUntilChanged(),\n    filter(state => !!state),\n    map(state => state.state)\n  );\n","import {CommonsUtils, ConfigUtils} from '@er/utils';\nimport {NgxPermissionsService, NgxRolesService} from 'ngx-permissions';\nimport {NgxPermissionsObject} from 'ngx-permissions/service/permissions.service';\nimport {NgxRolesObject} from 'ngx-permissions/service/roles.service';\nimport {Observable, of} from 'rxjs';\nimport {DiUtils} from '../di';\n\n\nexport class PermissionUtils {\n\n  static _permissionsService: NgxPermissionsService = null;\n\n  static _rolesService: NgxRolesService = null;\n\n  static getPermissionsService() {\n    if (!PermissionUtils._permissionsService) {\n      PermissionUtils._permissionsService = DiUtils.get(NgxPermissionsService);\n    }\n    return PermissionUtils._permissionsService;\n  }\n\n  static getRolesService() {\n    if (!PermissionUtils._rolesService) {\n      PermissionUtils._rolesService = DiUtils.get(NgxRolesService);\n    }\n    return PermissionUtils._rolesService;\n  }\n\n  static getRolePermissions(roles: string | string[]): Observable<string[]> {\n    return (ConfigUtils.getConfig().auth.getRolePermissions\n      && ConfigUtils.getConfig().auth.getRolePermissions(roles))\n      || of([]);\n  }\n\n  static HasModulePermission(permissionName): boolean {\n    const permissions = PermissionUtils.getPermissionsService().getPermissions();\n    const matched = Object.keys(permissions).some(name => {\n      return name === permissionName\n        || name.startsWith(permissionName + ':');\n    });\n    return matched && Object.keys(matched).length > 0;\n  }\n\n  static addPermissions(permissions: string | string[], validationFunction?: (permissionName, permissionsObject) => boolean) {\n    PermissionUtils.getPermissionsService().addPermission(permissions, validationFunction);\n  }\n\n  static addRole(roleName: string, validationFunction?: Function | string[]) {\n    if (!validationFunction) {\n      validationFunction = () => true;\n    }\n    PermissionUtils.getRolesService().addRole(roleName, validationFunction);\n  }\n\n  static addRoles(roles: string | string[]) {\n    const _roles: string[] = CommonsUtils.getArrayValue(roles);\n    if (_roles) {\n      const roleService = PermissionUtils.getRolesService();\n      _roles.filter(role => !!role).forEach(role => roleService.addRole(role, () => true));\n    }\n  }\n\n  static hasRole(role: string): boolean {\n    const userRoles: NgxRolesObject = PermissionUtils.getRolesService().getRoles();\n    return userRoles.hasOwnProperty(role);\n  }\n\n  static hasAnyRole(roles: string | string[]) {\n    const _roles = CommonsUtils.getArrayValue(roles);\n    const userRoles: NgxRolesObject = PermissionUtils.getRolesService().getRoles();\n    return _roles.some(role => userRoles.hasOwnProperty(role));\n  }\n\n  static hasAllRoles(roles: string | string[]) {\n    const _roles = CommonsUtils.getArrayValue(roles);\n    const userRoles: NgxRolesObject = PermissionUtils.getRolesService().getRoles();\n    return _roles.every(role => userRoles.hasOwnProperty(role));\n  }\n\n  static getPermissions(): Observable<NgxPermissionsObject> {\n    return PermissionUtils.getPermissionsService().permissions$;\n  }\n\n  static getRoles(): Observable<NgxRolesObject> {\n    return PermissionUtils.getRolesService().roles$;\n  }\n\n  static hasPermission(permission: string): boolean {\n    const userPermissions: NgxPermissionsObject = PermissionUtils.getPermissionsService().getPermissions();\n    return userPermissions.hasOwnProperty(permission);\n  }\n\n  static hasAnyPermission(permissios: string | string[]) {\n    const _permissions = CommonsUtils.getArrayValue(permissios);\n    const userPermissions: NgxPermissionsObject = PermissionUtils.getPermissionsService().getPermissions();\n    return _permissions.some(permisiion => userPermissions.hasOwnProperty(permisiion));\n  }\n\n  static hasAllPermissions(permissions: string | string[]) {\n    const _permissions = CommonsUtils.getArrayValue(permissions);\n    const userPermissions: NgxPermissionsObject = PermissionUtils.getPermissionsService().getPermissions();\n    return _permissions.every(permisiion => userPermissions.hasOwnProperty(permisiion));\n  }\n\n  static hasAuth(roleOrPermission: string | string[]) {\n    return PermissionUtils.hasAnyRole(roleOrPermission) || PermissionUtils.hasAnyPermission(roleOrPermission);\n  }\n\n  static hasAllAuths(roleOrPermissions: string | string[]) {\n    return PermissionUtils.hasAllRoles(roleOrPermissions) || PermissionUtils.hasAllPermissions(roleOrPermissions);\n  }\n\n  static clearRoles() {\n    PermissionUtils.getRolesService().flushRoles();\n  }\n\n  static clearPermission() {\n    PermissionUtils.getPermissionsService().flushPermissions();\n  }\n}\n","import {ActivatedRouteSnapshot, RouterStateSnapshot} from '@angular/router';\nimport {StateNames, User} from '@er/types';\nimport {CommonsUtils, ConfigUtils, JwtUtils, StatesUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {filter, tap} from 'rxjs/operators';\nimport {ApiUtils} from '../api';\nimport {RouteUtils} from '../nav';\nimport {PermissionUtils} from '../permission';\n\nexport function anyRoleUser(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n  if (AuthUtils.getCurrentUser().roles) {\n    return AuthUtils.getCurrentUser().roles;\n  } else {\n    return 'NO_ROLE_USER';\n  }\n}\n\nexport class AuthUtils {\n\n  private static CURRENT_USER: User = null;\n\n  static login(payLoad: {}, isRememberMe?: boolean): Observable<any> {\n    const login$ = ApiUtils.login({\n      ...payLoad,\n      rememberMe: isRememberMe\n    }, {\n      ...ConfigUtils.getConfig().auth.loginApiOptions || {},\n      tag: StateNames.auth\n    })\n      .pipe(\n        filter(loginUser => !!loginUser),\n        tap(loginUser => {\n          if (loginUser.jwtToken) {\n            if (ConfigUtils.getConfig().auth.getUserInfo) {\n              ConfigUtils.getConfig().auth.getUserInfo(loginUser)\n                .subscribe(userInfo => {\n                  const user = {\n                    ...loginUser,\n                    ...userInfo\n                  };\n                  AuthUtils.onLoginSuccess(user, isRememberMe);\n                });\n            } else {\n              AuthUtils.onLoginSuccess(loginUser, isRememberMe);\n            }\n          }\n        })\n      );\n    return login$;\n  }\n\n  static register(payLoad: {}): Observable<any> {\n    const reg$ = ApiUtils.register(payLoad, {\n      ...ConfigUtils.getConfig().auth.registerApiOptions || ConfigUtils.getConfig().auth.loginApiOptions,\n      tag: StateNames.auth\n    });\n    return reg$;\n  }\n\n  static logout() {\n    ApiUtils.logout({\n      ...ConfigUtils.getConfig().auth.logoutApiOptions || ConfigUtils.getConfig().auth.loginApiOptions,\n      tag: StateNames.auth\n    })\n      .subscribe(success => {\n        if (success) {\n          AuthUtils.updateUser({});\n          PermissionUtils.clearRoles();\n          PermissionUtils.clearPermission();\n          const url = ConfigUtils.getConfig().auth.logoutSuccessRouter;\n          RouteUtils.nav(url);\n        }\n      });\n  }\n\n  static changePwd(payload) {\n    const pwd$ = ApiUtils.changePwd(payload, {\n      ...ConfigUtils.getConfig().auth.changePwdApiOptions || ConfigUtils.getConfig().auth.loginApiOptions,\n      tag: StateNames.auth\n    });\n    return pwd$;\n  }\n\n  static getCurrentUser(): User {\n    if (AuthUtils.CURRENT_USER) {\n      return AuthUtils.CURRENT_USER || {};\n    }\n    const storageKey = ConfigUtils.getConfig().auth.storageKey;\n    let user = (JSON.parse(sessionStorage.getItem(storageKey))) as User;\n    if (!user) {\n      user = (JSON.parse(localStorage.getItem(storageKey))) as User;\n    }\n    if (user && user.isSu) {\n      user.isAdmin = true;\n    }\n    AuthUtils.CURRENT_USER = user;\n    return AuthUtils.CURRENT_USER || {};\n  }\n\n  static updateUser(patch: User, remeber?: boolean) {\n    if (!CommonsUtils.isEmpty(patch)) {\n      AuthUtils.CURRENT_USER = {\n        ...AuthUtils.CURRENT_USER,\n        ...patch\n      };\n    } else {\n      AuthUtils.CURRENT_USER = {};\n    }\n    StatesUtils.update(StateNames.user, AuthUtils.CURRENT_USER);\n    const storageKey = ConfigUtils.getConfig().auth.storageKey;\n    sessionStorage.setItem(storageKey, JSON.stringify(AuthUtils.CURRENT_USER));\n    if (remeber) {\n      if (!CommonsUtils.isEmpty(AuthUtils.CURRENT_USER)) {\n        localStorage.setItem(storageKey, JSON.stringify(AuthUtils.CURRENT_USER));\n      } else {\n        localStorage.removeItem(storageKey);\n      }\n    }\n  }\n\n  static checkLogin(returnUrl: string) {\n\n    const currentUser: User = AuthUtils.getCurrentUser();\n\n    if (currentUser.jwtToken && JwtUtils.isValid(currentUser.jwtToken)) {\n      return true;\n    } else {\n      if (true === StatesUtils.getValue(StateNames.auth, 'dialog')) {\n        StatesUtils.update(StateNames.popup, {\n          content: ConfigUtils.getConfig().auth.component,\n          header: ConfigUtils.getConfig().auth.title,\n          visible: true,\n          minWidth: 500,\n          minHeight: 300,\n          contentMaxWidth: 500,\n          contentMaxHeight: 300\n        });\n      } else {\n        const loginRouter = ConfigUtils.getConfig().auth.loginRouter;\n        StatesUtils.update(StateNames.auth, {successUrl: returnUrl});\n        RouteUtils.nav(loginRouter);\n      }\n      return false;\n    }\n  }\n\n  private static onLoginSuccess(user, isRememberMe) {\n    if (ConfigUtils.getConfig().auth.onLoginSuccess) {\n      ConfigUtils.getConfig().auth.onLoginSuccess(user);\n    }\n    user.enabled = true;\n    AuthUtils.updateUser(user, isRememberMe);\n    PermissionUtils.addRoles(user.roles);\n    if (ConfigUtils.getConfig().auth.defaultRules) {\n      PermissionUtils.addRoles(ConfigUtils.getConfig().auth.defaultRules);\n    }\n    PermissionUtils.addPermissions(user.permissions || []);\n    const key = ConfigUtils.getConfig().auth.requiredUserProps;\n    if (key) {\n      if (!CommonsUtils.get(user, key)) {\n        RouteUtils.nav(ConfigUtils.getConfig().auth.failedPropsRouter);\n      } else {\n        const successUrl = ConfigUtils.getConfig().auth.loginSuccessRouter;\n        RouteUtils.nav(successUrl);\n      }\n    } else {\n      const successUrl = ConfigUtils.getConfig().auth.loginSuccessRouter;\n      RouteUtils.nav(successUrl);\n    }\n  }\n}\n","import {OnInit, ViewContainerRef} from '@angular/core';\nimport {ConfigModel} from '@er/types';\nimport {BrowserOsUtils, BrowserSupport, CommonsUtils, ConfigUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {HTTP_STATE$, ROUTE_STATE$} from '../../states/all';\nimport {AuthUtils} from '../../utils/auth';\nimport {PermissionUtils} from '../../utils/permission';\n\nexport abstract class AppConfigComponent implements OnInit {\n\n  httpState$: Observable<boolean>;\n\n  routeState$: Observable<boolean>;\n\n  inValidBrowser: boolean;\n\n  constructor(public rootViewContainerRef: ViewContainerRef) {\n  }\n\n  get loadingClass() {\n    return ConfigUtils.getConfig().onLoading;\n  }\n\n  ngOnInit(): void {\n    const browserSupport = BrowserOsUtils.checkBrowser();\n    this.resolveBrowserSupport(browserSupport);\n    ConfigUtils.configApp(this.appConfig());\n    setTimeout(() => {\n      this.httpState$ = HTTP_STATE$;\n      this.routeState$ = ROUTE_STATE$;\n    }, 0);\n    const user = AuthUtils.getCurrentUser();\n    if (!CommonsUtils.isEmpty(user)) {\n      PermissionUtils.addPermissions(user.permissions);\n      PermissionUtils.addRoles(user.roles);\n      if (user.roles && ConfigUtils.getConfig().auth.defaultRules) {\n        PermissionUtils.addRoles(ConfigUtils.getConfig().auth.defaultRules);\n      }\n    }\n  }\n\n  resolveBrowserSupport(browserSupport: BrowserSupport) {\n    if (!browserSupport.version) {\n      alert('!');\n    } else if (!browserSupport.features) {\n      alert('!');\n    }\n  }\n\n  abstract appConfig(): ConfigModel;\n\n\n}\n","import {OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {ConfigModel} from '@er/types';\nimport {ConfigUtils} from '@er/utils';\nimport {DiUtils} from '../../utils/di';\nimport {BaseComponent} from '../component';\n\nexport abstract class ModuleConfigComponent extends BaseComponent implements OnInit {\n\n  ngOnInit(): void {\n    const router = DiUtils.get<Router>(Router);\n    ConfigUtils.configModule(this.moduleConfig() || {}, router.url);\n  }\n\n  abstract moduleConfig(): ConfigModel;\n}\n","import {FormGroup} from '@angular/forms';\nimport {StateNames} from '@er/types';\nimport {ConfigUtils} from '@er/utils';\nimport {AuthUtils} from '../../utils/auth';\nimport {RouteUtils} from '../../utils/nav';\nimport {BaseComponent} from '../component';\n\n\nexport class AuthBaseComponent extends BaseComponent {\n\n  public form: FormGroup;\n\n  public error: string;\n\n  public appName: string;\n\n  public stateKey: string;\n\n  public userToken;\n\n  public password;\n\n  public rememberMe;\n\n  constructor() {\n    super();\n    this.userToken = ConfigUtils.getConfig().auth.userTokenKey;\n    this.password = ConfigUtils.getConfig().auth.passwordKey;\n    this.rememberMe = ConfigUtils.getConfig().auth.rememberMeKey;\n    this.appName = ConfigUtils.getConfig().appName;\n    this.stateKey = StateNames.auth;\n  }\n\n  login() {\n    this.error = undefined;\n    AuthUtils.login(this.getSubmitData(this.form.value))\n      .subscribe(response => {\n        if (response.success === false) {\n          this.error = response.message;\n        }\n      });\n  }\n\n  register() {\n    this.error = undefined;\n    const data = this.form.value;\n    delete data['rePassword'];\n    AuthUtils.register(this.getSubmitData(this.form.value))\n      .subscribe(response => {\n        if (response.success === false) {\n          this.error = response.message;\n        } else {\n          RouteUtils.nav(ConfigUtils.getConfig().auth.loginSuccessRouter);\n        }\n      });\n  }\n\n\n  getSubmitData(data) {\n    return data;\n  }\n}\n\n","import {OnInit} from '@angular/core';\nimport {FormBuilder, Validators} from '@angular/forms';\nimport {DiUtils} from '../../utils/di/index';\nimport {AuthBaseComponent} from './auth.component';\n\nexport class AbstractLoginComponent extends AuthBaseComponent implements OnInit {\n\n  ngOnInit() {\n    this.form = DiUtils.get<FormBuilder>(FormBuilder).group({\n      [this.userToken]: ['', Validators.required],\n      [this.password]: ['', Validators.required],\n      [this.rememberMe]: ['']\n    });\n  }\n}\n","import {AbstractControl, AsyncValidatorFn} from '@angular/forms';\nimport {ApiDataProps} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {map} from 'rxjs/operators';\nimport {ApiUtils} from '../../utils/api';\n\nexport const NgAsyncValidator = function (requestProps: ApiDataProps, errorKey?: string): AsyncValidatorFn {\n  const fn = (control: AbstractControl) => {\n    let props = requestProps;\n    if (requestProps.query && CommonsUtils.isFunction(requestProps.query)) {\n      const query = (requestProps.query as Function)(control.value);\n      props = {\n        ...props,\n        query\n      };\n    }\n    const httpRequest = ApiUtils.fetch(props)\n      .pipe(\n        map(data => {\n          return !data ? null : {[errorKey]: true};\n        })\n      );\n    return httpRequest;\n  };\n  return fn;\n};\n\n\nexport const FormlyAsyncValidator = function (requestProps: ApiDataProps) {\n  const fn = (control: AbstractControl) => {\n    let props = requestProps;\n    if (requestProps.query && CommonsUtils.isFunction(requestProps.query)) {\n      const query = (requestProps.query as Function)(control.value);\n      props = {\n        ...props,\n        query\n      };\n    }\n    const httpRequest = ApiUtils.fetch(props)\n      .pipe(map(data => !data)\n      );\n    return httpRequest.toPromise();\n  };\n  return fn;\n};\n","import {OnInit} from '@angular/core';\nimport {FormBuilder, FormControl} from '@angular/forms';\nimport {ApiDataProps, ApiServerType} from '@er/types';\nimport {NgValidators} from '@er/validate';\nimport {DiUtils} from '../../utils/di/index';\nimport {NgAsyncValidator} from '../../validators/async';\nimport {AuthBaseComponent} from './auth.component';\n\nexport class AbstractRegisterComponent extends AuthBaseComponent implements OnInit {\n\n  checkExists = false;\n\n  inFocus = false;\n\n  errorMessage = {\n    duplicated: ''\n  };\n\n  get isUserNameValidate() {\n    return !this.inFocus && this.form.get(this.userToken).valid;\n  }\n\n  ngOnInit() {\n    this.form = DiUtils.get<FormBuilder>(FormBuilder).group({\n      [this.userToken]: new FormControl('', {\n        validators: NgValidators.required,\n        asyncValidators: NgAsyncValidator(this.userExistsApiOptions(), 'duplicated'),\n        updateOn: 'blur'\n      }),\n      [this.password]: ['', [NgValidators.required, NgValidators.minLength(6)]],\n      rePassword: ['', [NgValidators.required, NgValidators.minLength(6), NgValidators.equalTo(this.password)]]\n    });\n  }\n\n  userExistsApiOptions(): ApiDataProps {\n    return {\n      requestOptions: {\n        serverType: ApiServerType.ER\n      },\n      apiEntry: 'user/exists',\n      payload: (val) => {\n        return {userName: val};\n      }\n    };\n  }\n}\n","import {OnInit} from '@angular/core';\nimport {FormBuilder, Validators} from '@angular/forms';\nimport {ConfigUtils, DateUtils} from '@er/utils';\nimport {NgValidators} from '@er/validate';\nimport {AuthUtils} from '../../utils/auth/index';\nimport {DiUtils} from '../../utils/di/index';\nimport {RouteUtils} from '../../utils/nav/index';\nimport {AuthBaseComponent} from './auth.component';\n\nexport class AbstractChangePwdComponent extends AuthBaseComponent implements OnInit {\n\n  public oldPasswordKey;\n\n  public newPasswordKey;\n\n  ngOnInit() {\n    this.form = DiUtils.get<FormBuilder>(FormBuilder).group({\n      [this.oldPasswordKey]: ['', Validators.required],\n      [this.newPasswordKey]: ['', [NgValidators.required, NgValidators.minLength(6)]],\n      reNewPassword: ['', [NgValidators.required, NgValidators.minLength(6), NgValidators.equalTo(this.newPasswordKey)]]\n    });\n  }\n\n  changePwd() {\n    this.error = undefined;\n    const data: {} = this.form.value;\n    delete data['reNewPassword'];\n    data['userPwdSetDate'] = DateUtils.getFormattedDateTime();\n    AuthUtils.changePwd(this.getSubmitData(this.form.value))\n      .subscribe(response => {\n        if (response.success === true) {\n\n          RouteUtils.nav(ConfigUtils.getConfig().auth.changePwdSuccessRouter);\n        } else {\n          this.error = response.message || '';\n        }\n      });\n  }\n}\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, Input} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {Subject, timer} from 'rxjs';\nimport {mapTo, scan, startWith, switchMap, takeWhile} from 'rxjs/operators';\nimport {BaseComponent} from '../../bases/component';\n\n\n@Component({\n  selector: 'animate-number',\n  template: `\n    <span [ngStyle]=\"{'font-size': fontSize, 'font-weight': 'bold'}\">\n       {{currentNumber}}\n    </span>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AnimateNumberComponent extends BaseComponent {\n\n  currentNumber = 0;\n\n  fontSize = '.8em';\n\n  private counter$ = new Subject();\n\n  constructor(private cd: ChangeDetectorRef) {\n    super();\n    this.$subscriptions = this.counter$\n      .pipe(\n        switchMap(endRange => {\n            return timer(1000, 200)\n              .pipe(\n                mapTo(this.positiveOrNegative(endRange, this.currentNumber)),\n                startWith(this.currentNumber),\n                scan((acc, curr) => acc + curr),\n                takeWhile(this.takeUntil(endRange, this.currentNumber))\n              );\n          }\n        )\n      )\n      .subscribe(val => {\n        this.currentNumber = val;\n        if (this.currentNumber === this.end) {\n          this.fontSize = '1em';\n        }\n        this.cd.detectChanges();\n      });\n  }\n\n  private _end: number;\n\n  get end() {\n    return this._end;\n  }\n\n  @Input()\n  set end(endRange: number) {\n    this._end = endRange;\n    this.currentNumber = endRange - CommonsUtils.getRandomNumber(20);\n    this.counter$.next(endRange);\n  }\n\n  private positiveOrNegative(endRange, currentNumber) {\n    return endRange > currentNumber ? 1 : -1;\n  }\n\n  private takeUntil(endRange, currentNumber) {\n    return endRange > currentNumber\n      ? val => val <= endRange\n      : val => val >= endRange;\n  }\n\n}\n\n","import {ChangeDetectionStrategy, Component, Input, OnInit} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {Breadcrumb, Menu, MenuItem, StateNames} from '@er/types';\nimport {CommonsUtils, ConfigUtils, RegUtils, StatesUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {filter, map} from 'rxjs/operators';\nimport {BaseComponent} from '../../bases/component';\n\nconst ROUTE_DATA_BREADCRUMB_KEY = 'breadcrumb';\n\n@Component({\n  selector: 'er-breadcrumbs',\n  templateUrl: 'tpl.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BreadcrumbsComponent extends BaseComponent implements OnInit {\n\n  @Input() outlet = 'primary';\n\n  breadcrumbs$: Observable<Breadcrumb[]>;\n\n  constructor(private router: Router,\n              private route: ActivatedRoute) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.breadcrumbs$ = StatesUtils.observe(StateNames.nav)\n      .pipe(\n        filter(state => state && state.status === 'success'),\n        map(() => this.resolveRoute())\n      );\n  }\n\n  getRouterLink(breadcrumb: Breadcrumb) {\n    if (breadcrumb.params) {\n      return [breadcrumb.url, breadcrumb.params];\n    } else {\n      return [breadcrumb.url];\n    }\n  }\n\n  private resolveRoute() {\n    const breadcrumbs = [];\n    let currentRoute = this.route.root;\n    const menus: Menu = StatesUtils.getValue(StateNames.rootMenu);\n    let url;\n    const prefix = CommonsUtils.get(ConfigUtils.getConfig(), 'breadcrumb.prefix');\n    const excludes = CommonsUtils.get(ConfigUtils.getConfig(), 'breadcrumb.excludes');\n    let lastLabel = '';\n    do {\n      const childrenRoutes = currentRoute.children;\n      currentRoute = null;\n      childrenRoutes.forEach(route => {\n        if (route.outlet === this.outlet) {\n          const routeSnapshot = route.snapshot;\n          let label = null;\n          if (routeSnapshot.routeConfig && routeSnapshot.routeConfig.data && routeSnapshot.routeConfig.data[ROUTE_DATA_BREADCRUMB_KEY]) {\n            label = routeSnapshot.routeConfig.data[ROUTE_DATA_BREADCRUMB_KEY];\n          }\n          if (!label) {\n            const currentUrl = routeSnapshot.url.join('/');\n            if (currentUrl && currentUrl.trim().length > 0) {\n              if (!url) {\n                url = currentUrl;\n              } else {\n                url = url + '/' + currentUrl;\n              }\n            }\n            if (url && !RegUtils.test(url, excludes)) {\n              const parts = url.split('/');\n              const menu = CommonsUtils.deepFind(menus, {routerLink: url}, {routerLink: `/${url}`}, {name: parts[parts.length - 1]});\n              if (menu && menu.length > 0) {\n                label = (<MenuItem>menu[0]).label;\n              }\n            }\n          }\n          if (label && label.length !== 0 && label !== lastLabel) {\n            if (url.length === 0) { routeSnapshot.params = {}; }\n            breadcrumbs.push(<Breadcrumb>{\n              label: label,\n              url: url,\n              params: routeSnapshot.params\n            });\n          }\n          currentRoute = route;\n          lastLabel = label;\n        }\n      });\n    } while (currentRoute);\n\n    if (prefix) {\n      return prefix.concat(breadcrumbs);\n    } else {\n      return breadcrumbs;\n    }\n  }\n\n}\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {StateNames} from '@er/types';\nimport {StatesUtils} from '@er/utils';\nimport {Subject} from 'rxjs';\nimport {filter, map} from 'rxjs/operators';\nimport {BaseComponent} from '../../bases/component';\n\n@Component({\n  selector: 'er-button',\n  templateUrl: 'tpl.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StateButtonComponent extends BaseComponent implements OnInit {\n\n  @Input() type: 'button' | 'link' = 'button';\n  @Input() hint = '';\n  @Input() label: string;\n  @Input() icon: string;\n  @Input() style: {};\n  @Input() hidden: boolean;\n  @Input() styleClass: string;\n  @Input() disabled: boolean;\n  @Input() iconRight: boolean;\n  @Input() stateKey: string;\n  @Input() stateLabel: string;\n  @Input() stateHint: string;\n  @Input() context: {};\n\n  @Output() onClick: EventEmitter<any> = new EventEmitter();\n  @Output() onFocus: EventEmitter<any> = new EventEmitter();\n  @Output() onBlur: EventEmitter<any> = new EventEmitter();\n\n  processIcon = 'fa fa-cog fa-spin';\n\n  processing$: Subject<boolean> = new Subject<boolean>();\n\n  constructor(protected cd: ChangeDetectorRef) {\n    super();\n  }\n\n  @Input()\n  set processing(processing: boolean) {\n    this.processing$.next(processing);\n    this.cd.markForCheck(); // used for not dom event modify\n  }\n\n  get btnLabel() {\n    if (this.processing) {\n      return this.stateLabel || this.label;\n    } else {\n      return this.label || '';\n    }\n  }\n\n  get btnTitle() {\n    if (this.processing) {\n      return this.stateHint || '...';\n    } else {\n      return this.hint || '';\n    }\n  }\n\n  ngOnInit() {\n    if (this.stateKey) {\n      this.$subscriptions = StatesUtils.observe(StateNames.http, this.stateKey)\n        .pipe(\n          filter(state => !!state),\n          map(state => state['start'])\n        ).subscribe(b => this.processing$.next(b));\n    }\n  }\n\n  click(event) {\n    this.onClick.emit({\n      ...event,\n      ...this.context || {}\n    });\n  }\n}\n","import {ChangeDetectionStrategy, Component} from '@angular/core';\nimport {BaseComponent} from '../../bases/component';\n\n@Component({\n  selector: 'er-buttons',\n  template: `\n    \n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\n\nexport class StateButtonsComponent extends BaseComponent {\n\n}\n","import {ChangeDetectionStrategy, Component, Input, OnInit} from '@angular/core';\nimport {DataItemProps} from '@er/types';\nimport {CommonsUtils, DataItemUtils} from '@er/utils';\nimport {BaseComponent} from '../../bases/component';\n\n@Component({\n  selector: 'er-data-item',\n  template: `\n    <ng-container *ngIf=\"props.template;else default\">\n      <er-dyna-content [content]=\"props.template\" [context]=\"item\"></er-dyna-content>\n    </ng-container>\n    <ng-template #default>\n      <div class=\"d-flex data-item\" [ngClass]=\"props.itemStyleClass || 'ui-clearfix'\">\n        <span class=\"label mr-3 border-right\" *ngFor=\"let label of labels\" [ngClass]=\"props.labelStyleClass\" [innerHTML]=\"label\"></span>\n        <span class=\"pull-right count\" *ngIf=\"props.showCounter && item['value']\">\n          <span [ngClass]=\"props.counterStyleClass || 'badge badge-pill badge-info'\">{{item['value']}}</span>\n        </span>\n      </div>\n    </ng-template>\n  `,\n  styleUrls: ['styles.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\n\nexport class DataItemComponent extends BaseComponent implements OnInit {\n\n  @Input() item: {};\n\n  @Input() props: DataItemProps;\n\n  get labels() {\n    const _label = DataItemUtils.getItemLabel(this.item, this.labelKeys);\n    if (CommonsUtils.isArray(_label)) {\n      return _label;\n    } else {\n      return [_label];\n    }\n  }\n\n  get labelKeys() {\n    let keys = this.props.dropDownOptionKey || this.props.labelKey;\n    if (!keys) {\n      if (this.item.hasOwnProperty('label')) {\n        keys = 'label';\n      } else {\n        keys = Object.keys(this.item).filter(key => !key.startsWith('_') && key !== 'id');\n      }\n    }\n    return keys;\n  }\n\n  ngOnInit() {\n    if (!this.props) {\n      this.props = {};\n    }\n  }\n\n}\n","import {\n  Compiler,\n  Component,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ModuleWithComponentFactories,\n  NgModule,\n  Type,\n  ViewContainerRef\n} from '@angular/core';\nimport {ComponentRef} from '@angular/core/src/linker/component_factory';\nimport {CacheUtils} from '@er/utils';\nimport {DiUtils} from '../di';\n\nconst cacheKey = '$component-factory';\n\nexport class DynaComponentUtils {\n\n  private static _componentFactoryResolver: ComponentFactoryResolver = null;\n\n  static createComponentByType(hostViewContainerRef: ViewContainerRef,\n                               componentType: Type<any>): ComponentRef<any> {\n    if (!componentType) {\n      return;\n    }\n    let componentFactory = CacheUtils.get(cacheKey, componentType);\n    if (!componentFactory) {\n      componentFactory = DynaComponentUtils.getComponentFactoryResolver().resolveComponentFactory(componentType);\n      CacheUtils.put(cacheKey, componentType, componentFactory);\n    }\n    return DynaComponentUtils.createComponent(hostViewContainerRef, componentFactory);\n  }\n\n  static createComponentByTemplate(hostViewContainerRef: ViewContainerRef,\n                                   template: string) {\n\n    if (!template) {\n      return;\n    }\n    let componentFactory: ComponentFactory<any> = CacheUtils.get<ComponentFactory<any>>(cacheKey, template);\n    if (!componentFactory) {\n      const component = DynaComponentUtils.createDecoratedComponent(null, template);\n      const module = DynaComponentUtils.createNgModule(component);\n      componentFactory = module.componentFactories.find(factory => factory.componentType === component);\n      CacheUtils.put(cacheKey, template, componentFactory);\n    }\n    return DynaComponentUtils.createComponent(hostViewContainerRef, componentFactory);\n  }\n\n  private static getComponentFactoryResolver(): ComponentFactoryResolver {\n    if (!DynaComponentUtils._componentFactoryResolver) {\n      DynaComponentUtils._componentFactoryResolver = DiUtils.get<ComponentFactoryResolver>(ComponentFactoryResolver);\n    }\n    return DynaComponentUtils._componentFactoryResolver;\n  }\n\n  private static createDecoratedComponent(useClass: any, template: string) {\n    const componentClass = useClass || class {\n    };\n    return Component({\n      template: template\n    })(componentClass);\n  }\n\n  private static createNgModule(component: Type<any>): ModuleWithComponentFactories<any> {\n    const ngModule = NgModule({declarations: [component]})(class {\n    });\n    return DiUtils.get<Compiler>(Compiler).compileModuleAndAllComponentsSync(ngModule);\n  }\n\n  private static createComponent(hostViewContainerRef: ViewContainerRef,\n                                 componentFactory: ComponentFactory<any>): ComponentRef<any> {\n    hostViewContainerRef.clear();\n    const componentRef = hostViewContainerRef.createComponent(componentFactory);\n    return componentRef;\n  }\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ComponentRef,\n  ElementRef,\n  EventEmitter,\n  Input,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  Type,\n  ViewContainerRef\n} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {ComponentUtils} from '../../utils/component';\nimport {DynaComponentUtils} from '../../utils/dyna';\n\n\n@Component({\n  selector: 'er-dyna-component',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DynaCompComponent {\n  @Input() type: Type<any> | string;\n  @Input() props: {};\n  @Output() onCreated = new EventEmitter();\n\n  private component: ComponentRef<{}>;\n\n  constructor(private viewContainerRef: ViewContainerRef,\n              private el: ElementRef,\n              private renderer: Renderer2) {\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.type) {\n      this.createComponent();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.component) {\n      this.component.destroy();\n      this.component = null;\n    }\n  }\n\n  private createComponent() {\n    if (this.type) {\n      if (CommonsUtils.isString(this.type)) {\n        this.component = DynaComponentUtils.createComponentByTemplate(\n          this.viewContainerRef,\n          <string>this.type\n        );\n      } else {\n        this.component = DynaComponentUtils.createComponentByType(\n          this.viewContainerRef,\n          <Type<any>>this.type\n        );\n      }\n      ComponentUtils.bind(this.component.instance, this.props);\n      this.onCreated.emit(this.component);\n      const parent = this.el.nativeElement.parentNode;\n      this.renderer.removeChild(parent, this.el.nativeElement);\n    }\n  }\n}\n","import {KeyValueChangeRecord, SimpleChange, SimpleChanges} from '@angular/core';\n\nexport type KeyValueChangeRecordAny = KeyValueChangeRecord<any, any>;\n\nexport function createNewChange(val: any): SimpleChange {\n  return new SimpleChange(undefined, val, true);\n}\n\nexport function recordToChange(\n  record: KeyValueChangeRecordAny,\n  isFirstChange = false,\n): SimpleChange {\n  return isFirstChange\n    ? createNewChange(record.currentValue)\n    : new SimpleChange(record.previousValue, record.currentValue, false);\n}\n\nexport function setChangeFromRecord(\n  isFirstChanges: boolean,\n  setter: (record: KeyValueChangeRecordAny, change: SimpleChange) => void,\n) {\n  return (record: KeyValueChangeRecordAny) =>\n    setter(record, recordToChange(record, isFirstChanges));\n}\n\nfunction getChangesRecords(isFirstChanges: boolean) {\n  return (changes: SimpleChanges) => setChangeFromRecord(isFirstChanges,\n    (record, change) => changes[record.key] = change);\n}\n\nfunction getNewChangesRecords(isFirstChanges: boolean) {\n  return (changes: SimpleChanges) => setChangeFromRecord(isFirstChanges,\n    (record, change) => {\n      if (!changes[record.key]) {\n        changes[record.key] = change;\n      }\n    });\n}\n\nexport const defaultOpts = {\n  isFirstChanges: false,\n  onlyNewChanges: false,\n};\n\nexport type DefaultOpts = Partial<typeof defaultOpts>;\n\nexport function changesFromRecord(\n  opts: DefaultOpts = defaultOpts,\n) {\n  return opts.onlyNewChanges\n    ? getNewChangesRecords(opts.isFirstChanges)\n    : getChangesRecords(opts.isFirstChanges);\n}\n","import {\n  Directive,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Input,\n  KeyValueChanges,\n  KeyValueDiffers,\n  OnChanges,\n  Renderer2,\n  SimpleChange,\n  SimpleChanges,\n  ViewContainerRef\n} from '@angular/core';\nimport {LifeCycles} from '@er/types';\nimport {CommonsUtils, IdUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {BaseDirective} from '../../bases/directive';\nimport {WrapperComponent} from '../../bases/wrappe';\nimport {ComponentUtils} from '../../utils/component';\nimport {LogUtils} from '../../utils/log';\nimport {changesFromRecord} from './util';\n\nconst recordToChanges = changesFromRecord({isFirstChanges: true});\nconst recordToNewChanges = changesFromRecord({onlyNewChanges: true});\n\n@Directive({\n  selector: '[erPropsBind]'\n})\nexport class PropsBindDirective extends BaseDirective implements OnChanges, DoCheck {\n  @Input() props: {};\n  @Input() context: {};\n  @Input() attrs: {};\n  @Input() autoBind = true;\n  private methods: { [key: string]: Function };\n  private inputs: { [k: string]: any };\n  private outputs: { [eventName: string]: (event) => void };\n  private expInputs: { [k: string]: (event) => any };\n  private expAttrs: { [k: string]: (event) => any };\n  private hooks: LifeCycles;\n  private lastInputChanges: SimpleChanges;\n  private lastAttrChanges: {\n    set: {},\n    remove: string[],\n  };\n  private differ = this.differs.find({}).create();\n\n  constructor(private differs: KeyValueDiffers,\n              protected elementRef: ElementRef,\n              protected renderer: Renderer2,\n              protected viewContainerRef: ViewContainerRef) {\n    super();\n  }\n\n  private _hostComponentInst: any = undefined;\n\n  get hostComponentInst() {\n    if (this._hostComponentInst === undefined) {\n      this._hostComponentInst = ComponentUtils.getHostComponentInst(this.viewContainerRef);\n    }\n    return this._hostComponentInst;\n  }\n\n  private _viewComponentRef: any = undefined;\n\n  get viewComponentRef() {\n    if (this._viewComponentRef === undefined) {\n      this._viewComponentRef = ComponentUtils.getViewComponentRef(this.viewContainerRef);\n    }\n    return this._viewComponentRef;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.autoBind) {\n      if (changes.props && !CommonsUtils.isEmpty(this.props)) {\n        this.resolveProps();\n        this.differs.find({}).create();\n        LogUtils.debug(this, '', this.props, this.inputs, this.outputs, this.hooks);\n        if (this.methods) {\n          this.bindMethods();\n        }\n        if (this.inputs) {\n          const inputsChanges = this.differ.diff(this.inputs);\n          this.expInputs = this.getExpressionInputs(this.inputs);\n          if (inputsChanges) {\n            this.updateInputsChanges(inputsChanges);\n            this.updateInputs(!this.lastInputChanges);\n          }\n        }\n        if (this.outputs) {\n          const outputsChanges = this.differ.diff(this.outputs);\n          if (outputsChanges) {\n            this.bindOutputs();\n          }\n        }\n        if (this.hooks) {\n          this.bindLifeCycles();\n        }\n        if (changes.props.isFirstChange()) {\n          if (this.hostComponentInst._propsBind) {\n            this.hostComponentInst._propsBind();\n          }\n        }\n      }\n\n      if (changes.attrs && this.attrs) {\n        this.resolveAttrs();\n        const attrChanges = this.differ.diff(this.attrs);\n        if (attrChanges) {\n          this.lastAttrChanges = this.changesToAttrChanges(attrChanges);\n          this.updateAttributes(this.lastAttrChanges);\n        }\n        // this.expAttrs = this.getExpressionInputs(this.attrs);\n      }\n    }\n  }\n\n  ngDoCheck() {\n    if (this.attrs && this.autoBind) {\n      if (this.expAttrs && Object.keys(this.expAttrs).length > 0) {\n        Object.keys(this.expAttrs).forEach(key => {\n          this.attrs[key] = this.expAttrs[key].call(this, this.getEventContext());\n        });\n      }\n      const attrChanges = this.differ.diff(this.attrs);\n      if (attrChanges) {\n        this.lastAttrChanges = this.changesToAttrChanges(attrChanges);\n        this.updateAttributes(this.lastAttrChanges);\n      }\n    }\n    if (this.inputs && this.autoBind) {\n      if (this.expInputs && Object.keys(this.expInputs).length > 0) {\n        Object.keys(this.expInputs).forEach(key => {\n          const result = this.expInputs[key](this.getEventContext());\n          if (result instanceof Observable) {\n            this.$subscriptions = (<Observable<any>>result).subscribe(data => {\n              this.inputs[key] = data;\n            });\n          } else {\n            this.inputs[key] = result;\n          }\n        });\n      }\n      const inputsChanges = this.differ.diff(this.inputs);\n      if (inputsChanges) {\n        const isNotFirstChange = !!this.lastInputChanges;\n        this.updateInputsChanges(inputsChanges);\n        if (isNotFirstChange) {\n          this.updateInputs();\n        }\n      }\n    }\n  }\n\n  getEventContext(event?) {\n    return {\n      ...event,\n      $from: this.hostComponentInst,\n      ...this.context || {}\n    };\n  }\n\n  private updateInputs(isFirstChange = false) {\n    if (!this.hostComponentInst || !this.inputs) {\n      return;\n    }\n    Object.keys(this.inputs)\n      .forEach(p => (this.hostComponentInst[p] = this.inputs[p]));\n    this.notifyOnInputChanges(this.lastInputChanges, isFirstChange);\n  }\n\n  private bindOutputs() {\n    this.stopSubscribe();\n    if (!this.outputs) {\n      return;\n    }\n    Object.keys(this.outputs)\n      .filter(p => this.hostComponentInst[p])\n      .forEach(p =>\n        this.$subscriptions = (<EventEmitter<any>>this.hostComponentInst[p])\n          .subscribe(event => {\n            try {\n              this.outputs[p](this.getEventContext(event));\n            } catch (e) {\n              LogUtils.error(this.hostComponentInst, '', e);\n            }\n          })\n      );\n  }\n\n  private bindLifeCycles() {\n    const constructor = ComponentUtils.getConstructor(this.hostComponentInst);\n    const destructor = constructor.prototype['ngOnDestroy'];\n    ComponentUtils.bindLifeCycles(this.hostComponentInst, this.hooks, constructor, destructor);\n  }\n\n  private bindMethods() {\n    if (this.methods) {\n      Object.keys(this.methods).forEach(method => {\n        this.hostComponentInst[method] = this.methods[method].bind(this.hostComponentInst);\n      });\n    }\n  }\n\n  private notifyOnInputChanges(changes: SimpleChanges = {}, forceFirstChanges: boolean) {\n\n    if (!this.hostComponentInst.ngOnChanges) {\n      return;\n    }\n\n    if (forceFirstChanges) {\n      changes = this.collectFirstChanges();\n    }\n\n    this.hostComponentInst.ngOnChanges(changes);\n\n    if (this.hostComponentInst.cd && this.hostComponentInst.cd.detectChanges) {\n      this.hostComponentInst.cd.detectChanges();\n    }\n  }\n\n  private getExpressionInputs(props) {\n    if (props) {\n      const expProps = {};\n      Object.keys(props).forEach(key => {\n        if (props[key] instanceof Function) {\n          expProps[key] = props[key];\n        }\n      });\n      return expProps;\n    }\n    return undefined;\n  }\n\n  private updateInputsChanges(differ: KeyValueChanges<any, any>) {\n    this.lastInputChanges = this.collectChangesFromDiffer(differ);\n  }\n\n  private collectFirstChanges(): SimpleChanges {\n    const changes = {} as SimpleChanges;\n    const inputs = this.inputs;\n\n    Object.keys(inputs)\n      .forEach(prop => (changes[prop] = new SimpleChange(undefined, inputs[prop], true)));\n\n    return changes;\n  }\n\n  private collectChangesFromDiffer(differ: KeyValueChanges<any, any>): SimpleChanges {\n    const changes = {} as SimpleChanges;\n    differ.forEachAddedItem(recordToChanges(changes));\n    differ.forEachItem(recordToNewChanges(changes));\n    return changes;\n  }\n\n  private changesToAttrChanges(changes: KeyValueChanges<string, any>) {\n    const attrChanges = {\n      set: {},\n      remove: []\n    };\n    changes.forEachAddedItem(r => (attrChanges.set[r.key] = r.currentValue));\n    changes.forEachChangedItem(r => (attrChanges.set[r.key] = r.currentValue));\n    changes.forEachRemovedItem(r => attrChanges.remove.push(r.key));\n    return attrChanges;\n  }\n\n  private updateAttributes(actions) {\n    Object.keys(actions.set).forEach(key =>\n      this.setAttribute(key, actions.set[key])\n    );\n    actions.remove.forEach(key => this.removeAttribute(key));\n  }\n\n  private setAttribute(name: string, value: string, namespace?: string) {\n    this.renderer.setAttribute(this.elementRef.nativeElement, name, value, namespace);\n  }\n\n  private removeAttribute(name: string, namespace?: string) {\n    this.renderer.removeAttribute(this.elementRef.nativeElement, name, namespace);\n  }\n\n  private resolveProps() {\n    if (this.hostComponentInst && CommonsUtils.isJson(this.props)) {\n      this.inputs = {};\n      this.outputs = {};\n      if (this.hostComponentInst._initProps) {\n        this.hostComponentInst.$props = CommonsUtils.merge({}, this.props);\n        this.hostComponentInst._initProps();\n        this.props = CommonsUtils.merge({}, this.hostComponentInst.$props);\n      }\n\n      if (!this.props['$id']) {\n        this.props['$id'] = IdUtils.getRandom();\n      }\n\n      if (this.props['methods']) {\n        this.methods = this.props['methods'];\n        delete this.props['methods'];\n      }\n\n      if (this.props['hooks']) {\n        this.hooks = this.props['hooks'];\n        delete this.props['hooks'];\n      }\n      // else if (this.props['$ext'] && this.props['$ext'].hooks) {\n      //   this.hooks = this.props['$ext'].hooks;\n      //   delete this.props['$ext'].hooks;\n      // }\n\n      if (this.hostComponentInst instanceof WrapperComponent) {\n        this.props = CommonsUtils.get(this.props, '$ext', {});\n        if (this.props['hooks']) {\n          this.hooks = this.props['hooks'];\n          delete this.props['hooks'];\n        }\n      } else {\n        this.props = CommonsUtils.omit(this.props, '$ext');\n      }\n      Object.keys(this.props).forEach(key => {\n        if (this.hostComponentInst[key] instanceof EventEmitter) {\n          this.outputs[key] = this.props[key];\n        } else {\n          this.inputs[key] = this.props[key];\n        }\n      });\n\n      if (Object.keys(this.inputs).length === 0) {\n        this.inputs = undefined;\n      }\n      if (Object.keys(this.outputs).length === 0) {\n        this.outputs = undefined;\n      }\n    }\n  }\n\n  private resolveAttrs() {\n    if (this.hostComponentInst instanceof WrapperComponent) {\n      this.attrs = CommonsUtils.get(this.attrs, '$ext', {});\n    } else {\n      this.attrs = CommonsUtils.omit(this.attrs, '$ext');\n    }\n  }\n\n}\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges, TemplateRef} from '@angular/core';\nimport {ContentType, Context, ContextedContent, DynaComponent, DynaContent} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {dynamicDirectiveDef} from 'ng-dynamic-component';\nimport {Observable} from 'rxjs';\nimport {BehaviorSubject} from 'rxjs/internal/BehaviorSubject';\nimport {BaseComponent} from '../../bases/component';\nimport {PropsBindDirective} from '../../directives/props-bind/directive';\n\n@Component({\n  selector: 'er-dyna-content',\n  template: `\n    <ng-container [ngSwitch]=\"contentType\">\n      <div *ngSwitchCase=\"CONTENT_TYPE.STRING\" [ngClass]=\"styleClass\" [ngStyle]=\"style\" [innerHTML]=\"parsedContent|erSafeHtml\"></div>\n      <div *ngSwitchCase=\"CONTENT_TYPE.DATA\" class=\"d-flex\" [ngClass]=\"styleClass\" [ngStyle]=\"style\">\n        <div *ngFor=\"let item of parsedContent\" class=\"d-flex justify-content-center m-3\">\n          <span class=\"mr-2 font-weight-bold\">{{item.key}}</span>\n          <span [innerHTML]=\"item.value|erSafeHtml\"></span>\n        </div>\n      </div>\n      <span *ngSwitchCase=\"CONTENT_TYPE.TEMPLATE_STR\" [innerHTML]=\"parsedContent\" [ngClass]=\"styleClass\"\n            [ngStyle]=\"style\"></span>\n      <ng-container *ngSwitchCase=\"CONTENT_TYPE.FUNCTION\">\n        <ng-container *ngIf=\"parsedContent$|async as asyncContent\">\n          <span [innerHTML]=\"asyncContent\" [ngClass]=\"styleClass\" [ngStyle]=\"style\"></span>\n        </ng-container>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"CONTENT_TYPE.TEMPLATE\">\n        <ng-container *ngTemplateOutlet=\"parsedContent;context:parsedContext\"></ng-container>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"CONTENT_TYPE.COMPONENT\">\n        <ndc-dynamic [ndcDynamicComponent]=\"dynaComponent.type\"\n                     [ndcDynamicDirectives]=\"dynaComponent.directives\"\n                     [ndcDynamicAttributes]=\"dynaComponent.attrs\"\n        >\n        </ndc-dynamic>\n      </ng-container>\n    </ng-container>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DynaContentComponent extends BaseComponent implements OnInit, OnChanges {\n\n  CONTENT_TYPE = ContentType;\n\n  @Input() content: DynaContent;\n\n  @Input() context: Context;\n\n  @Input() styleClass: any;\n\n  @Input() style: any;\n\n  parsedContent: any;\n\n  parsedContent$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\n\n  contentType: ContentType;\n\n  parsedContext: Context;\n\n  parsedContextFn: (context) => string | Observable<string>;\n\n  dynaComponent: DynaComponent;\n\n  constructor(public cd: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.parse();\n  }\n\n  refresh() {\n    this.parse();\n    this.cd.markForCheck();\n  }\n\n  private parse() {\n    if (CommonsUtils.isJson(this.content)) {\n      if (this.content['content']) {\n        if (this.content['styleClass']) {\n          this.styleClass = this.content['styleClass'];\n        }\n        if (this.content['style']) {\n          this.style = this.content['style'];\n        }\n        this.content = this.content['content'];\n      }\n      if (this.content['data']) {\n        this.contentType = ContentType.DATA;\n        this.parsedContent = [];\n        Object.keys(this.content['data']).forEach(key => {\n          this.parsedContent.push({\n              key,\n            value: CommonsUtils.getText(this.content['data'][key])\n            }\n          );\n        });\n        return;\n      } else if (this.content['type']) {\n        this.contentType = ContentType.COMPONENT;\n        this.dynaComponent = <DynaComponent>this.content;\n        let directives = this.dynaComponent.directives;\n        const dynaDirectives = [];\n        if (directives) {\n          directives = CommonsUtils.getArrayValue(directives);\n          directives.filter(direct => !!direct.type).forEach(direct => {\n            dynaDirectives.push(dynamicDirectiveDef(direct.type, direct.inputs, direct.outputs));\n          });\n        }\n        if (this.dynaComponent.props || this.context) {\n          dynaDirectives.push(dynamicDirectiveDef(PropsBindDirective, Object.assign({}, this.dynaComponent.props || {}, this.context || {})));\n        }\n        this.dynaComponent.directives = dynaDirectives;\n        return;\n      } else {\n        this.parsedContent = (<ContextedContent>this.content).content;\n        this.parsedContext = {\n          ...(<ContextedContent>this.content).context || {},\n          ...this.context || {}\n        };\n      }\n    } else {\n      this.parsedContent = this.content;\n      this.parsedContext = this.context;\n    }\n    if (CommonsUtils.isString(this.parsedContent)) {\n      if (CommonsUtils.isTemplateStr(this.parsedContent)) {\n        this.parsedContent = CommonsUtils.templateStr(this.parsedContent, this.context) || '<span></span>';\n        this.contentType = ContentType.TEMPLATE_STR;\n      } else {\n        this.contentType = ContentType.STRING;\n      }\n    } else if (this.parsedContent instanceof TemplateRef) {\n      this.contentType = ContentType.TEMPLATE;\n    } else if (CommonsUtils.isFunction(this.parsedContent)) {\n      this.parsedContextFn = this.parsedContent;\n      const rtn: string | Observable<string> = this.parsedContextFn(this.parsedContext);\n      if (rtn instanceof Observable) {\n        (<Observable<string>>rtn).subscribe(result => this.parsedContent$.next(CommonsUtils.toString(result)));\n      } else {\n        this.parsedContent$.next(rtn);\n      }\n      this.contentType = ContentType.FUNCTION;\n    }\n  }\n}\n\n","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\nimport {BaseComponent} from '../../bases/component';\nimport {HTTP_STATE$, HTTP_TAG_STATE$} from '../../states/all';\n\n\n@Component({\n  selector: 'er-http-status',\n  template: `    \n      <ng-container *ngIf=\"httpState$|async\">\n        <ng-container *ngTemplateOutlet=\"template('_',default)\"></ng-container>\n        <ng-template #default>\n          <div [ngClass]=\"loadingClass\"></div>\n        </ng-template>\n      </ng-container>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class HttpStatusComponent extends BaseComponent {\n\n  @Input() tag;\n\n  @Input() loadingClass = 'loading-circle';\n\n  get httpState$() {\n    let subject;\n    if (!this.tag) {\n      subject = HTTP_STATE$;\n    } else {\n      subject = HTTP_TAG_STATE$(this.tag);\n    }\n    return subject;\n  }\n\n}\n","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'er-container',\n  template: `\n    <div [ngClass]=\"styleClass\">\n       <ng-content></ng-content>\n     </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ContainerComponent {\n  @Input() styleClass = 'container';\n}\n","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'er-fluid-container',\n  template: `\n    <div [ngClass]=\"styleClass\">\n       <ng-content></ng-content>\n     </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FluidContainerComponent {\n  @Input() styleClass = 'container-fluid';\n}\n","import {ChangeDetectionStrategy, Component, EventEmitter, Input, Output} from '@angular/core';\nimport {BaseComponent} from '../../../bases/component';\n\n@Component({\n  selector: 'er-left-right',\n  template: `\n    <div class=\"d-flex\">\n      <div *ngIf=\"!hideLeft\" class=\"w-25 shadow-lg\">\n        <ng-container *ngTemplateOutlet=\"template(templateNames.left)\"></ng-container>\n      </div>\n      <div class=\"flex-grow-1\">\n        <div *ngIf=\"switchable\">\n          <i class=\"fa fa-2x  text-primary\" [title]=\"hideLeft?'':''\"\n             [ngClass]=\"hideLeft?'fa-arrow-circle-right':'fa-arrow-circle-left'\"\n             (click)=\"reLayout(!hideLeft)\"></i>\n        </div>\n        <ng-container *ngTemplateOutlet=\"template(templateNames.right)\"></ng-container>\n      </div>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LeftRightContainerComponent extends BaseComponent {\n  @Input() leftStyleClass = 'col-3';\n  @Input() rightStyleClass = 'col-9';\n\n  @Input() hideLeft: boolean;\n\n  @Input() switchable = true;\n\n  @Output() onLeftHide: EventEmitter<boolean> = new EventEmitter();\n\n  templateNames = {\n    left: 'left',\n    right: 'right'\n  };\n\n  reLayout(event) {\n    this.hideLeft = event;\n    this.onLeftHide.emit(event);\n  }\n}\n","import {ChangeDetectionStrategy, Component, Input} from '@angular/core';\nimport {BaseComponent} from '../../../bases/component';\n\nexport enum MobileType {\n  iphoneX = 'iphone-x',\n  iphone8 = 'iphone8',\n  iphone8plus = 'iphone8plus',\n  iphone5s = 'iphone5s',\n  nexus5 = 'nexus5',\n  ipad = 'ipad',\n  note8 = 'note8',\n  macbook = 'macbook'\n}\n\n@Component({\n  selector: 'er-phone-preview',\n  templateUrl: 'tpl.html',\n  styleUrls: ['styles.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PhonePreviewComponent extends BaseComponent {\n  MOBILE_TYPE = MobileType;\n  @Input() mobile: MobileType = MobileType.iphone8;\n  @Input() color: 'black' | 'gold' | 'silver';\n  @Input() isLandscape = false;\n  @Input() scale = 1;\n\n  zoomIn() {\n    if (this.scale > 0.25) {\n      this.scale = (this.scale - 0.25);\n    }\n  }\n\n  zoomOut() {\n    if (this.scale < 2) {\n      this.scale = (this.scale + 0.25);\n    }\n  }\n}\n\n","import {QueryBuilderProps, QueryBuilderStyleClasses, QueryRuleSet} from '@er/types';\n\n\nexport const DEFAULT_QUERY_BUILDER_STYLE_CLASSES: QueryBuilderStyleClasses = {\n  removeIcon: 'q-icon q-remove-icon',\n  addIcon: 'q-icon q-add-icon',\n  button: 'q-button',\n  buttonGroup: 'q-button-group',\n  removeButton: 'q-remove-button',\n  switchGroup: 'q-switch-group',\n  switchLabel: 'q-switch-label',\n  switchRadio: 'q-switch-radio',\n  rightAlign: 'q-right-align',\n  transition: 'q-transition',\n  tree: 'q-tree',\n  row: 'q-row',\n  connector: 'q-connector',\n  rule: 'q-rule',\n  ruleSet: 'q-ruleset',\n  invalidRuleSet: 'q-invalid-ruleset',\n  emptyWarning: 'q-empty-warning',\n  fieldControl: 'q-field-control',\n  fieldControlSize: 'q-control-size',\n  entityControl: 'q-entity-control',\n  entityControlSize: 'q-control-size',\n  operatorControl: 'q-operator-control',\n  operatorControlSize: 'q-control-size',\n  inputControl: 'q-input-control',\n  inputControlSize: 'q-control-size'\n};\n\nexport const DEFAULT_QUERY_BUILDER_BOOTSTRAP_STYLES_CLASS: QueryBuilderStyleClasses = {\n  removeIcon: 'fa fa-minus',\n  addIcon: 'fa fa-plus',\n  button: 'btn',\n  buttonGroup: 'btn-group',\n  rightAlign: 'order-12 ml-auto',\n  switchRow: 'd-flex px-2',\n  switchGroup: 'd-flex align-items-center',\n  switchRadio: 'custom-control-input',\n  switchLabel: 'custom-control-label',\n  switchControl: 'custom-control custom-radio custom-control-inline',\n  row: 'row p-2 m-1',\n  connector: 'q-connector',\n  rule: 'border',\n  ruleSet: 'border',\n  invalidRuleSet: 'alert alert-danger',\n  emptyWarning: 'text-danger mx-auto',\n  operatorControl: 'form-control',\n  operatorControlSize: 'col-auto pr-0',\n  fieldControl: 'form-control',\n  fieldControlSize: 'col-auto pr-0',\n  entityControl: 'form-control',\n  entityControlSize: 'col-auto pr-0',\n  inputControl: 'form-control',\n  inputControlSize: 'col-auto'\n};\n\n// export const DEFAULT_QUERY_BUILDER_TYPE_OPERATORS = {\n//   string: ['=', '!=', 'contains', 'like'],\n//   number: ['=', '!=', '>', '>=', '<', '<='],\n//   time: ['=', '!=', '>', '>=', '<', '<='],\n//   date: ['=', '!=', '>', '>=', '<', '<='],\n//   category: ['=', '!=', 'in', 'not in'],\n//   boolean: ['=']\n// };\n\nexport const EMPTY_QUERY_RULE_SET: QueryRuleSet = {condition: 'AND', rules: []};\n\nexport const DEFAULT_QUERY_BUILDER_PROPS: QueryBuilderProps = {\n  fields: [],\n  styleClasses: DEFAULT_QUERY_BUILDER_BOOTSTRAP_STYLES_CLASS,\n  allowRuleSet: true\n};\n\n\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, forwardRef, Input} from '@angular/core';\nimport {AbstractControl, NG_VALIDATORS, NG_VALUE_ACCESSOR, ValidationErrors, Validator} from '@angular/forms';\nimport {DataEntity, DataField, DataItem, QueryBuilderProps, QueryRule, QueryRuleSet, THEME_COLORS} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {ControlComponent} from '../../bases/control';\nimport {LogUtils} from '../../utils/log';\nimport {DEFAULT_QUERY_BUILDER_PROPS, EMPTY_QUERY_RULE_SET} from './defaults';\n\n\nconst CONTROL_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => QueryBuilderComponent),\n  multi: true\n};\n\nconst VALIDATOR: any = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => QueryBuilderComponent),\n  multi: true\n};\n\n@Component({\n  selector: 'er-query-builder',\n  templateUrl: 'tpl.html',\n  styleUrls: ['styles.scss'],\n  providers: [CONTROL_VALUE_ACCESSOR, VALIDATOR],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class QueryBuilderComponent extends ControlComponent implements Validator {\n\n  @Input() ruleSet: QueryRuleSet = {condition: 'AND', rules: []};\n  @Input() index: number;\n  @Input() parentRuleSet: QueryRuleSet;\n\n  defaultValue = EMPTY_QUERY_RULE_SET;\n\n  templateNames = {\n    buttonGroup: 'buttonGroup',\n    switchGroup: 'switchGroup',\n    removeButton: 'removeButton',\n    entity: 'entity',\n    field: 'field',\n    operator: 'operator',\n    input: 'input',\n    empty: 'empty'\n  };\n\n  constructor(private changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  private _config: QueryBuilderProps = {};\n\n  @Input()\n  get config() {\n    return this._config;\n  }\n\n  set config(config) {\n    CommonsUtils.defaults(this._config, config, DEFAULT_QUERY_BUILDER_PROPS);\n    LogUtils.debug(this, '', this._config);\n  }\n\n  @Input()\n  get value(): QueryRuleSet {\n    return this.ruleSet;\n  }\n\n  set value(value: QueryRuleSet) {\n    this.ruleSet = value || {condition: 'AND', rules: []};\n  }\n\n  validate(control: AbstractControl): ValidationErrors | null {\n    const errors: { [key: string]: any } = {};\n    const ruleErrorStore = [];\n    let hasErrors = false;\n\n    if (!this.config.allowEmptyRuleSet && this.checkEmptyRuleInRuleSet(this.value)) {\n      errors.empty = '.';\n      hasErrors = true;\n    }\n\n    this.validateRulesInRuleSet(this.value, ruleErrorStore);\n\n    if (ruleErrorStore.length) {\n      errors.rules = ruleErrorStore;\n      hasErrors = true;\n    }\n    return hasErrors ? errors : null;\n  }\n\n  ruleSetStyle(index = 0) {\n    const bgColor = Object.keys(THEME_COLORS).filter((color, i) => i === index);\n    if (bgColor.length === 0) {\n      bgColor[0] = 'blue';\n    }\n    return {\n      'border-left-width': '5px',\n      'border-left-style': 'solid',\n      'border-left-color': THEME_COLORS[bgColor[0]]\n    };\n  }\n\n  getOperators(field: DataField): DataItem[] {\n    if (CommonsUtils.isFunction(this.config.operators)) {\n      return (<Function>this.config.operators)(field);\n    } else {\n      const operators = [];\n      Object.keys(this.config.operators).forEach(key => {\n        if (key === field.key) {\n          operators.push(this.config.operators[key]);\n        }\n      });\n      return operators;\n    }\n  }\n\n  getFields(entityKey?: string): DataField[] {\n    if (this.config.entities && entityKey) {\n      return this.config.fields.filter((field) => {\n        return field && field['entityKey'] === entityKey;\n      });\n    } else {\n      return this.config.fields;\n    }\n  }\n\n  getField(rule: QueryRule): DataField {\n    const fields = this.getFields(rule.entity);\n    if (fields) {\n      const matched = fields.filter(field => field.key === rule.field);\n      if (matched && matched.length > 0) {\n        return matched[0];\n      }\n    }\n    return undefined;\n  }\n\n  getClassNames(...args): string {\n    const styleClasses = this.config.styleClasses;\n    const classNames = args.map((id) => styleClasses[id]).filter((c) => !!c);\n    return classNames.length ? classNames.join(' ') : null;\n  }\n\n  isInValidRule(rule) {\n    return this.config.allowRuleSet && rule.rules && rule.rules.length === 0;\n  }\n\n  getRuleClassName(rule): string {\n    let cls = this.getClassNames('row', 'connector', 'transition');\n    cls += ' ' + this.getClassNames(rule['condition'] ? 'ruleSet' : 'rule');\n    // if (ruleMeta.invalid) {\n    // cls += ' ' + this.getClassNames('invalidRuleSet');\n    // }\n    return cls;\n  }\n\n  getDefaultDataField(entity: DataEntity): DataField {\n    if (!entity) {\n      return null;\n    } else if (entity.defaultField !== undefined) {\n      return this.getDefaultValue(entity.defaultField);\n    } else {\n      const entityDataFields = this.config.fields.filter((field) => {\n        return field && field['entityKey'] === entity.key;\n      });\n      if (entityDataFields && entityDataFields.length) {\n        return entityDataFields[0];\n      }\n    }\n  }\n\n  getDefaultOperator(field: DataField): string {\n    if (field && field['defaultOperator'] !== undefined) {\n      return this.getDefaultValue(field['defaultOperator']);\n    } else {\n      const operators = this.getOperators(field);\n      if (operators && operators.length) {\n        //  return operators[0];\n      }\n    }\n  }\n\n  addRule(): void {\n    const parent = this.ruleSet;\n    if (this.config.addRule) {\n      this.config.addRule(parent);\n    } else {\n      const field = this.config.fields[0];\n      parent.rules = [\n        ...parent.rules,\n        {\n          field: field.key,\n          entity: field['entityKey'],\n          operator: this.getDefaultOperator(field),\n          value: this.getDefaultValue(field.defaultValue)\n        }\n      ];\n    }\n  }\n\n  addRuleSet(): void {\n    const parent = this.ruleSet;\n    if (this.config.addRuleSet) {\n      this.config.addRuleSet(parent);\n    } else {\n      parent.rules = [\n        ...parent.rules,\n        {condition: 'AND', rules: []}\n      ];\n    }\n  }\n\n  removeRule(rule: QueryRule): void {\n    const parent = this.ruleSet;\n    if (this.config.removeRule) {\n      this.config.removeRule(rule, parent);\n    } else {\n      parent.rules = parent.rules.filter((r) => r !== rule);\n    }\n  }\n\n  removeRuleSet(ruleSet?: QueryRuleSet): void {\n    ruleSet = ruleSet || this.ruleSet;\n    const parent = this.parentRuleSet;\n    if (this.config.removeRuleSet) {\n      this.config.removeRuleSet(ruleSet, parent);\n    } else {\n      parent.rules = parent.rules.filter((r) => r !== ruleSet);\n    }\n  }\n\n  changeCondition(value): void {\n    this.ruleSet.condition = value;\n  }\n\n  changeField(key: string, rule: QueryRule): void {\n\n    const field: DataField = this.config.fields[key];\n\n    if (field && field.defaultValue !== undefined) {\n      rule.value = this.getDefaultValue(field.defaultValue);\n    } else {\n      delete rule.value;\n    }\n\n    rule.operator = this.getDefaultOperator(field);\n  }\n\n  changeEntity(entityValue: string, rule: QueryRule): void {\n    if (this.disabled) {\n      return;\n    }\n\n    // const currentEntity: DataEntity = this.config.entities.find((e) => e.value === entityValue);\n    // const defaultDataField: DataField = this.getDefaultDataField(currentEntity);\n\n    // if (defaultDataField) {\n    //   this.changeDataField(defaultDataField.key, rule);\n    // }\n  }\n\n  getDefaultValue(defaultValue: any): any {\n    switch (typeof defaultValue) {\n      case 'function':\n        return defaultValue();\n      default:\n        return defaultValue;\n    }\n  }\n\n  context(context?: {}) {\n    return {\n      qb: <QueryBuilderComponent>this,\n      ...context\n    };\n  }\n\n  private checkEmptyRuleInRuleSet(ruleSet: QueryRuleSet): boolean {\n    if (!ruleSet || !ruleSet.rules || ruleSet.rules.length === 0) {\n      return true;\n    } else {\n      return ruleSet.rules.some((item: QueryRuleSet) => {\n        if (item.rules) {\n          return this.checkEmptyRuleInRuleSet(item);\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n\n  private validateRulesInRuleSet(ruleSet: QueryRuleSet, errorStore: any[]) {\n    if (ruleSet && ruleSet.rules && ruleSet.rules.length > 0) {\n      ruleSet.rules.forEach((item) => {\n        if ((item as QueryRuleSet).rules) {\n          return this.validateRulesInRuleSet(item as QueryRuleSet, errorStore);\n        } else if ((item as QueryRule).field) {\n          const field = this.config.fields[(item as QueryRule).field];\n          if (field && field['validator'] && field['validator'].apply) {\n            const error = field['validator'](item as QueryRule, ruleSet);\n            if (error != null) {\n              errorStore.push(error);\n            }\n          }\n        }\n      });\n    }\n  }\n\n}\n","import {ChangeDetectionStrategy, Component, EventEmitter, Input, Output} from '@angular/core';\nimport {QueryRule} from '@er/types';\nimport {BaseComponent} from '../../../bases/component';\nimport {QueryBuilderComponent} from '../component';\n\n\n@Component({\n  selector: 'er-query-builder-rule',\n  templateUrl: 'tpl.html',\n  styleUrls: ['styles.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class QueryBuilderRuleComponent extends BaseComponent {\n\n  @Input() ruleIndex: number;\n\n  @Output() ruleChange = new EventEmitter();\n\n  constructor(public qb: QueryBuilderComponent) {\n    super();\n  }\n\n  private _rule: QueryRule;\n\n  @Input()\n  get rule(): QueryRule {\n    return this._rule;\n  }\n\n  set rule(rule) {\n    this._rule = rule;\n    this.ruleChange.emit(this._rule);\n  }\n}\n","import {ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentRef, OnInit} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {BaseComponent} from '../../bases/component';\nimport {ComponentUtils} from '../../utils/component';\nimport {LogUtils} from '../../utils/log';\nimport {RouteUtils} from '../../utils/nav';\n\n\n/**\n * \n */\n@Component({\n  selector: 'er-route-bind',\n  template: `\n    <ndc-dynamic [ndcDynamicComponent]=\"type\"\n                 [ndcDynamicInputs]=\"inputs\"\n                 [ndcDynamicOutputs]=\"outputs\"\n                 (ndcDynamicCreated)=\"created($event)\"\n    >\n    </ndc-dynamic>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RouteDataPropsBindComponent extends BaseComponent implements OnInit {\n\n  props: {};\n\n  type: any;\n\n  inputs: {};\n\n  outputs: {};\n\n  hooks: {};\n\n  constructor(private cd: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnInit() {\n    this.$subscriptions = RouteUtils.getActiveRoute().data.subscribe(data => {\n      if (!data['$component']) {\n        LogUtils.error(this, '', data);\n        return;\n      }\n      let activeRoute = RouteUtils.getActiveRoute();\n      const params = {\n        ...activeRoute.snapshot.params || {},\n        ...activeRoute.snapshot.queryParams || {}\n      };\n      while (activeRoute && !activeRoute.snapshot.data['$props']) {\n        activeRoute = activeRoute.parent;\n      }\n      const routeData = {\n        ...activeRoute.snapshot.data,\n        ...data\n      };\n      LogUtils.debug(this, '', routeData);\n      let props = routeData['$resolvedProps'] || routeData['$props'];\n      if (routeData['$propsKey']) {\n        props = CommonsUtils.get(props, routeData['$propsKey']);\n      }\n      const component = routeData['$component'];\n      Object.keys(data).forEach(key => {\n        if (CommonsUtils.isFunction(data[key])) {\n          data[key] = (<Function>data[key])(props, params, data);\n        } else if (CommonsUtils.isString(data[key]) && data[key].startsWith(':')) {\n          const param = (<string>data[key]).substring(1);\n          if (param === 'USER_ID') {\n          } else if (params[param]) {\n            props[key] = params[param];\n          }\n        } else if (key !== '$component' && key !== '$propsKey') {\n          props[key] = data[key];\n        }\n      });\n\n      this.type = component;\n\n      this.props = props;\n\n      this.inputs = props['inputs'] || props || {};\n\n      this.outputs = props['outputs'] || {};\n\n      if (props['hooks']) {\n        this.hooks = props['hooks'];\n        delete props['hooks'];\n      }\n\n      if (!props['inputs'] && !props['outputs']) {\n        props['$props'] = CommonsUtils.copy(props);\n      }\n\n      this.cd.detectChanges();\n    });\n  }\n\n  created(componentRef: ComponentRef<any>) {\n    if (!CommonsUtils.isEmpty(this.hooks)) {\n      const constructor = ComponentUtils.getConstructor(componentRef);\n      const destructor = constructor.prototype['ngOnDestroy'];\n      ComponentUtils.bindLifeCycles(componentRef.instance, this.hooks, constructor, destructor);\n    }\n  }\n}\n","import {Component, Input} from '@angular/core';\nimport {ConfigUtils} from '@er/utils';\n\n@Component({\n  selector: 'wechat-qrcode',\n  template: `\n    <iframe [src]=\"qrCodeUrl|erSafeHtml:'resource'\" [width]=\"width\" [height]=\"height\" scrolling=\"no\" [attr.frameborder]=\"0\"></iframe>\n  `,\n  styles: []\n})\nexport class WechatQrCodeComponent {\n\n  @Input() height = 300;\n\n  @Input() width = 300;\n\n  private baseUrl = 'https://open.weixin.qq.com/connect/qrconnect';\n\n  get qrCodeUrl() {\n    const wechat = ConfigUtils.getConfig().wechat;\n    const redirect = encodeURIComponent(wechat.redirect_uri);\n    let url = `${this.baseUrl}?appid=${wechat.appid}&redirect_uri=${redirect}&scope=${wechat.scope}&response_type=code`;\n    url += wechat.style ? '&style=' + wechat.style : '';\n    url += wechat.self_redirect ? '&self_redirect=' + wechat.self_redirect : '';\n    url += wechat.href ? '&href=' + wechat.href : '';\n    return url;\n  }\n}\n\n// 'https://open.weixin.qq.com/connect/qrconnect?appid=wxbdc5610cc59c1631&redirect_uri=https%3A%2F%2Fpassport.yhd.com%2Fw2echat%2Fcallback.do&response_type=code&scope=snsapi_login';\n\n// 'https://open.weixin.qq.com/connect/qrconnect?appid=wxcfb1ab30687c02ae&redirect_uri=http%3A%2F%2Fwww.hbsrcfwj.cn%2Findex&response_type=code&scope=snsapi_login';\n\n// https://open.weixin.qq.com/connect/qrconnect?appid=wxcfb1ab30687c02ae&redirect_uri=http%3A%2F%2Fwww.hbsrcfwj.cn%2Findex&scope=snsapi_login&response_type=code&style=black&self_redirect=true\n","import {AnimateNumberComponent} from './animate-number/component';\nimport {BreadcrumbsComponent} from './breadcrumb/component';\nimport {StateButtonComponent} from './button/component';\nimport {StateButtonsComponent} from './buttons/component';\nimport {DataItemComponent} from './data-item/component';\nimport {DynaCompComponent} from './dyna-component/component';\nimport {DynaContentComponent} from './dyna-content/component';\nimport {HttpStatusComponent} from './http-status/component';\nimport {ContainerComponent} from './layout/container/component';\nimport {FluidContainerComponent} from './layout/fluid/component';\nimport {LeftRightContainerComponent} from './layout/left-right/component';\nimport {PhonePreviewComponent} from './layout/phone-preview/component';\nimport {QueryBuilderComponent} from './query-builder/component';\nimport {QueryBuilderRuleComponent} from './query-builder/rule/component';\nimport {RouteDataPropsBindComponent} from './route-bind/component';\nimport {WechatQrCodeComponent} from './we-chat/component';\n\nexport * from './breadcrumb/component';\nexport * from './button/component';\nexport * from './buttons/component';\nexport * from './dyna-content/component';\nexport * from './layout/container/component';\nexport * from './data-item/component';\nexport * from './http-status/component';\nexport * from './layout/fluid/component';\nexport * from './layout/left-right/component';\nexport * from './layout/phone-preview/component';\nexport * from './route-bind/component';\nexport * from './query-builder/component';\nexport * from './query-builder/rule/component';\nexport * from './animate-number/component';\nexport * from './dyna-component/component';\n\nexport const CoreComponents = [\n  BreadcrumbsComponent,\n  DataItemComponent,\n  HttpStatusComponent,\n  DynaContentComponent,\n  StateButtonComponent,\n  StateButtonsComponent,\n  ContainerComponent,\n  FluidContainerComponent,\n  LeftRightContainerComponent,\n  PhonePreviewComponent,\n  RouteDataPropsBindComponent,\n  QueryBuilderComponent,\n  QueryBuilderRuleComponent,\n  AnimateNumberComponent,\n  WechatQrCodeComponent,\n  DynaCompComponent\n];\n","import {NgIf} from '@angular/common';\nimport {Directive, EmbeddedViewRef, EventEmitter, Input, OnDestroy, Output, TemplateRef, ViewContainerRef} from '@angular/core';\nimport {Subject} from 'rxjs/index';\nimport {Observable} from 'rxjs/internal/Observable';\nimport {takeUntil} from 'rxjs/operators';\n\nfunction animationEndSafe(el: Element, maxWait: number): Observable<{}> {\n  return Observable.create((observer) => {\n    el.addEventListener('animationend', observer);\n    setTimeout(observer, maxWait);\n  });\n  // return new Promise((resolve, reject) => {\n  //   el.addEventListener('animationend', resolve);\n  //   setTimeout(resolve, maxWait);\n  // });\n}\n\n@Directive({\n  selector: '[erAnimatedIf]'\n})\nexport class AnimatedIfDirective extends NgIf implements OnDestroy {\n\n  @Output() animatedIfOnShow = new EventEmitter<any>(false);\n  @Output() animatedIfOnHide = new EventEmitter<any>(false);\n\n  private visible = false;\n  protected destroyed$: Subject<void> = new Subject<void>();\n\n  constructor(private viewContainer: ViewContainerRef, _templateRef: TemplateRef<any>) {\n    super(viewContainer, _templateRef);\n  }\n\n  @Input()\n  set erAnimatedIf(val: boolean) {\n    if (this.visible && !val) {\n      this.hide();\n    } else if (!this.visible && val) {\n      this.show();\n    }\n    this.visible = val;\n  }\n\n  private getContainer(): HTMLElement | null {\n    if (this.viewContainer.length > 0) {\n      return (this.viewContainer.get(0) as EmbeddedViewRef<any>).rootNodes[0];\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Hides the element. Animation is performed through css on the container.\n   * This method will set the class to hiding and preserve the element for the animation duration.\n   */\n  private hide() {\n    const container = this.getContainer();\n    if (!!container) {\n      container.classList.remove('showing');\n      container.classList.add('hiding');\n      animationEndSafe(container, 1000)\n        .pipe(\n          takeUntil(this.destroyed$)\n        )\n        .subscribe(() => {\n        this.ngIf = this.visible;\n        container.classList.remove('hiding');\n      });\n      this.animatedIfOnHide.emit();\n    }\n  }\n\n  /**\n   * Shows the element. Animation is performed through css on the container\n   */\n  private show() {\n    this.ngIf = true;\n    const container = this.getContainer();\n    if (!!container) {\n      container.classList.remove('hiding');\n      container.classList.add('showing');\n      animationEndSafe(container, 1000)\n        .pipe(\n          takeUntil(this.destroyed$)\n        )\n        .subscribe(() => {\n        container.classList.remove('showing');\n      });\n      this.animatedIfOnShow.emit();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n\n/**\n *  <p>Toggle element with animation <input type=checkbox [(ngModel)]=\"isVisible\"><p>\n <p>\n <span class=\"fancyBox\" *appAnimatedIf=\"isVisible\">Click the checkbox above to toggle me!</span>\n </p>\n **/\n","import {Directive, ElementRef, Input, OnInit} from '@angular/core';\nimport {CommonsUtils, DomUtils} from '@er/utils';\n\n@Directive({\n  selector: '[erAnimate]'\n})\nexport class AnimateDirective implements OnInit {\n\n  @Input('erAnimate') animation: string;\n\n  private _animations = [\n    'fadeIn',\n    'fadeInLeft',\n    'fadeInRight',\n    'fadeInUp',\n    'fadeInDown',\n    'zoomIn',\n    'zoomInLeft',\n    'zoomInRight',\n    'zoomInUp',\n    'slideInDown',\n    'slideInLeft',\n    'slideInRight',\n    'slideInUp'\n  ];\n\n  constructor(private el: ElementRef) {\n  }\n\n  ngOnInit() {\n    let classes = 'animated ';\n    if (this.animation) {\n      classes += this.animation;\n    } else {\n      classes += this._animations[CommonsUtils.getRandomNumber(this._animations.length - 1)];\n    }\n    DomUtils.addClasses(this.el.nativeElement, classes);\n  }\n}\n","import {ComponentRef, Directive, ElementRef, Input, OnInit, Renderer2, ViewContainerRef} from '@angular/core';\nimport {Context} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {BaseDirective} from '../../bases/directive';\nimport {DynaComponentUtils} from '../../utils/dyna';\n\n@Directive({\n  selector: '[erDynaTemplate]',\n})\nexport class DynaTemplateDirective extends BaseDirective implements OnInit {\n\n  @Input('erDynaTemplate') template: string;\n  @Input() context: Context;\n\n  private componentRef: ComponentRef<{}>;\n\n  constructor(private viewContainerRef: ViewContainerRef,\n              private el: ElementRef,\n              private renderer: Renderer2) {\n    super();\n  }\n\n  ngOnInit() {\n    if (CommonsUtils.isEmptyString(this.template)) { this.template = this.el.nativeElement.innerHTML; }\n    if (CommonsUtils.isEmptyString(this.template)) { return; }\n    this.template = this.template.replace(/\\[\\[/g, '{{');\n    this.template = this.template.replace(/]]/g, '}}');\n    this.componentRef = DynaComponentUtils.createComponentByTemplate(\n      this.viewContainerRef,\n      this.template,\n    );\n    const parent = this.el.nativeElement.parentNode;\n    this.renderer.removeChild(parent, this.el.nativeElement);\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    if (this.componentRef) {\n      this.componentRef.destroy();\n      this.componentRef = null;\n    }\n  }\n}\n","import {Directive, ElementRef, HostListener, Input} from '@angular/core';\nimport {BaseDirective} from '../../bases/directive';\n\n@Directive({selector: '[erFocusHighlight]'})\nexport class FocusHighlightDirective extends BaseDirective {\n\n  @Input() bgColor: string;\n\n  defaultBgColor = 'yellow';\n\n  constructor(private el: ElementRef) {\n    super();\n  }\n\n  @HostListener('mouseenter')\n  onMouseEnter() {\n    this.highlight(this.bgColor || this.defaultBgColor);\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave() {\n    this.highlight(null);\n  }\n\n  private highlight(color: string) {\n    this.el.nativeElement.style.backgroundColor = color;\n  }\n}\n","import {AfterViewChecked, AfterViewInit, Directive, ElementRef, Input, OnChanges, SimpleChanges} from '@angular/core';\nimport {BaseDirective} from '../../bases/directive';\n\n@Directive({\n  selector: '[erHighlight]'\n})\nexport class HighlightDirective extends BaseDirective implements OnChanges, AfterViewInit, AfterViewChecked {\n\n  @Input('erHighlight') searchTerm = undefined;\n  @Input() caseSensitive = true;\n\n  private viewRendered = false;\n  private WRAPPER_TOKEN = '==--==##';\n\n  constructor(private el: ElementRef) {\n    super();\n  }\n\n  private get caseSensitivity(): string {\n    return this.caseSensitive ? '' : 'i';\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.highlightSearchTerm();\n  }\n\n  ngAfterViewInit(): void {\n    this.highlightSearchTerm();\n  }\n\n  ngAfterViewChecked(): void {\n    this.viewRendered = true;\n  }\n\n  highlightSearchTerm() {\n    if (!this.searchTerm) {\n      if (this.viewRendered) {\n        this.removePreviouslyMarkedTextInNode();\n      }\n      return;\n    }\n\n    if (this.el.nativeElement) {\n      this.removePreviouslyMarkedTextInNode();\n      this.markMatchedTextTokens(this.el.nativeElement);\n    }\n  }\n\n  private markMatchedTextTokens(htmlNode: HTMLElement) {\n    const _searchTerm = this.getSearchTerm();\n    const searchRegex = new RegExp(_searchTerm, 'gmi');\n\n    const _searchTermUniqueTokens = this.getUniqueTokenWrappedSearchTerm();\n    const searchRegexUniqueTokens = new RegExp(_searchTermUniqueTokens, 'gmi');\n    this.traverseHtmlElementsTree(htmlNode, e => {\n      this.traverseNodesInElement(htmlNode.childNodes, node => this.wrapUniqueTokensAroundMatchedText(node, searchRegex));\n    });\n\n    this.markMatchedTextAndRemoveUniqueTokens(htmlNode, searchRegexUniqueTokens);\n  }\n\n  private markMatchedTextAndRemoveUniqueTokens(htmlNode: HTMLElement, searchRegex: RegExp) {\n    if (htmlNode.innerHTML) {\n      const innerHtml = htmlNode.innerHTML;\n      const newHtml = innerHtml.replace(searchRegex, match => {\n        const wrapperLength = this.WRAPPER_TOKEN.length;\n        const markedStr = match.substr(wrapperLength, match.length - (wrapperLength * 2));\n        return `<mark>${markedStr}</mark>`;\n      });\n\n      htmlNode.innerHTML = newHtml;\n    }\n  }\n\n  private traverseNodesInElement(nodes: NodeList, visitCallback: (node: Node) => any) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n      if (node.nodeType === 3) {\n        visitCallback(node);\n      }\n    }\n  }\n\n  private wrapUniqueTokensAroundMatchedText(htmlNode: Node, searchRegex: RegExp) {\n    const innerText = htmlNode.nodeValue;\n    const newText = innerText.replace(searchRegex, `${this.WRAPPER_TOKEN}$&${this.WRAPPER_TOKEN}`);\n    htmlNode.nodeValue = newText;\n  }\n\n  private traverseHtmlElementsTree(currentNode: HTMLElement, visitCallback: (node: HTMLElement) => any) {\n    if (currentNode) {\n      visitCallback(currentNode);\n    }\n\n    for (let i = 0; i < currentNode.children.length; i++) {\n      const childNode = currentNode.children[i];\n      this.markMatchedTextTokens(<HTMLElement>childNode);\n    }\n  }\n\n  private removePreviouslyMarkedTextInNode() {\n    const node = this.el.nativeElement;\n    const markingPattern = new RegExp('<mark>|<\\/mark>', 'g');\n    const cleanText = node.innerHTML.replace(markingPattern, '');\n    node.innerHTML = cleanText;\n  }\n\n  // private highlightedNewTextInNode() {\n  //   const node = this.el.nativeElement;\n  //   const htmlNegativeLookaheadPattern = '(?![^<>]*>)';\n  //   const searchTermPattern = this.getSearchTerm();\n  //   const searchRegex = new RegExp(searchTermPattern + htmlNegativeLookaheadPattern, 'gmi');\n  //   const markedText = node.innerHTML.replace(searchRegex, '<mark>$&</mark>');\n  //   node.innerHTML = markedText;\n  // }\n  private getSearchTerm() {\n    let escapedSearchTerm = `${this.escapeRegExp(this.searchTerm)}`;\n    const spaceToMultiMatchRegex = new RegExp(' ', 'gm');\n    escapedSearchTerm = escapedSearchTerm.replace(spaceToMultiMatchRegex, '|');\n    return escapedSearchTerm;\n  }\n\n  private getUniqueTokenWrappedSearchTerm() {\n    let escapedSearchTerm = this.escapeRegExp(this.searchTerm);\n    const spaceToMultiMatchRegex = new RegExp(' ', 'gm');\n    escapedSearchTerm = escapedSearchTerm.replace(spaceToMultiMatchRegex, `${this.WRAPPER_TOKEN}|${this.WRAPPER_TOKEN}`);\n    escapedSearchTerm = `${this.WRAPPER_TOKEN}${escapedSearchTerm}${this.WRAPPER_TOKEN}`;\n    return escapedSearchTerm;\n  }\n\n  private escapeRegExp(str) {\n    return str.replace('/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g', '\\\\$&');\n  }\n}\n","export class ObjectDiff {\n\n  private static instance: ObjectDiff = undefined;\n  private openChar = '{';\n  private closeChar = '}';\n\n  static diff(obj1, obj2): string {\n    if (!ObjectDiff.instance) {\n      ObjectDiff.instance = new ObjectDiff();\n    }\n    const diff = ObjectDiff.instance.diffOwnProperties(obj1, obj2);\n    return '<pre>' + ObjectDiff.instance.formatChangesToHtml(diff) + '</pre>';\n  }\n\n  diff(a, b, shallow, isOwn) {\n\n    if (a === b) {\n      return this.equalObj(a);\n    }\n\n    const diffValue = {};\n    let equal = true;\n\n    if (!a) {\n      a = {};\n    }\n\n    for (const key in a) {\n      if ((!isOwn && key in b) || (isOwn && b && b.hasOwnProperty(key))) {\n        if (a[key] === b[key]) {\n          diffValue[key] = this.equalObj(a[key]);\n        } else {\n          if (!shallow && this.isValidAttr(a[key], b[key])) {\n            const valueDiff = this.diff(a[key], b[key], shallow, isOwn);\n            if (valueDiff.changed === 'equal') {\n              diffValue[key] = this.equalObj(a[key]);\n            } else {\n              equal = false;\n              diffValue[key] = valueDiff;\n            }\n          } else {\n            equal = false;\n            diffValue[key] = {\n              changed: 'primitive change',\n              removed: a[key],\n              added: b[key]\n            };\n          }\n        }\n      } else {\n        equal = false;\n        diffValue[key] = {\n          changed: 'removed',\n          value: a[key]\n        };\n      }\n    }\n\n    for (const key in b) {\n      if ((!isOwn && !(key in a)) || (isOwn && typeof a !== 'undefined' && !a.hasOwnProperty(key))) {\n        equal = false;\n        diffValue[key] = {\n          changed: 'added',\n          value: b[key]\n        };\n      }\n    }\n\n    if (equal) {\n      return this.equalObj(a);\n    } else {\n      return {\n        changed: 'object change',\n        value: diffValue\n      };\n    }\n  }\n\n\n  diffOwnProperties(a, b, shallow?) {\n    return this.diff(a, b, shallow, true);\n  }\n\n  formatToJsonXMLString(changes, shallow?) {\n    const properties = [];\n\n    const diff = changes.value;\n    if (changes.changed === 'equal') {\n      return this.inspect(diff, shallow);\n    }\n\n    for (const key in diff) {\n      properties.push(this.formatChange(key, diff[key], shallow));\n    }\n\n    return '<span>' + this.openChar + '</span>\\n<div class=\"diff-level\">' + properties.join('<span>,</span>\\n') + '\\n</div><span>' + this.closeChar + '</span>';\n\n  }\n\n  formatToJson(obj, shallow) {\n    return this.inspect(obj, shallow);\n  }\n\n  formatChangesToHtml(changes, shallow?) {\n    const properties = [];\n\n    if (changes.changed === 'equal') {\n      return '';\n    }\n\n    const diff = changes.value;\n\n    for (const key in diff) {\n      const changed = diff[key].changed;\n      if (changed !== 'equal')\n        properties.push(this.formatChange(key, diff[key], shallow, true));\n    }\n\n    return '<span>' + this.openChar + '</span>\\n<div class=\"diff-level\">' + properties.join('<span>,</span>\\n') + '\\n</div><span>' + this.closeChar + '</span>';\n\n  }\n\n  equalObj(obj) {\n    return {\n      changed: 'equal',\n      value: obj\n    };\n  }\n\n  isValidAttr(a, b) {\n    const typeA = typeof a;\n    const typeB = typeof b;\n    return (a && b && (typeA === 'object' || typeA === 'function') && (typeB === 'object' || typeB === 'function'));\n  }\n\n  formatChange(key, diffItem, shallow, diffOnly?) {\n    const changed = diffItem.changed;\n    let property;\n    switch (changed) {\n      case 'equal':\n        property = (this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>' + this.inspect(diffItem.value));\n        break;\n\n      case 'removed':\n        property = ('<del class=\"diff\">' + this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>' + this.inspect(diffItem.value) + '</del>');\n        break;\n\n      case 'added':\n        property = ('<ins class=\"diff\">' + this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>' + this.inspect(diffItem.value) + '</ins>');\n        break;\n\n      case 'primitive change':\n        const prefix = this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>';\n        property = (\n          '<del class=\"diff diff-key\">' + prefix + this.inspect(diffItem.removed) + '</del><span>,</span>\\n' +\n          '<ins class=\"diff diff-key\">' + prefix + this.inspect(diffItem.added) + '</ins>');\n        break;\n\n      case 'object change':\n        property = shallow ? '' : (this.stringifyObjectKey(key) + '<span>: </span>' + (diffOnly ? this.formatChangesToHtml(diffItem) : this.formatToJsonXMLString(diffItem)));\n        break;\n    }\n\n    return property;\n  }\n\n  stringifyObjectKey(key) {\n    return /^[a-z0-9_$]*$/i.test(key) ?\n      key :\n      JSON.stringify(key);\n  }\n\n\n  escapeHTML(string) {\n    return string.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n\n  inspect(obj, shallow?) {\n\n    const that = this;\n\n    return _inspect('', obj, shallow);\n\n    function _inspect(accumulator, obj, shallow?) {\n      switch (typeof obj) {\n        case 'object':\n          if (!obj) {\n            accumulator += 'null';\n            break;\n          }\n          if (shallow) {\n            accumulator += '[object]';\n            break;\n          }\n          const keys = Object.keys(obj);\n          const length = keys.length;\n          if (length === 0) {\n            accumulator += '<span>' + that.openChar + that.closeChar + '</span>';\n          } else {\n            accumulator += '<span>' + that.openChar + '</span>\\n<div class=\"diff-level\">';\n            for (let i = 0; i < length; i++) {\n              const key = keys[i];\n              accumulator = _inspect(accumulator + that.stringifyObjectKey(that.escapeHTML(key)) + '<span>: </span>', obj[key]);\n              if (i < length - 1) {\n                accumulator += '<span>,</span>\\n';\n              }\n            }\n            accumulator += '\\n</div><span>' + that.closeChar + '</span>';\n          }\n          break;\n\n        case 'string':\n          accumulator += JSON.stringify(that.escapeHTML(obj));\n          break;\n\n        case 'undefined':\n          accumulator += 'undefined';\n          break;\n\n        default:\n          accumulator += that.escapeHTML(String(obj));\n          break;\n      }\n      return accumulator;\n    }\n  }\n}\n","import {ChangeDetectorRef, Directive, ElementRef, Input, OnChanges, SimpleChanges} from '@angular/core';\nimport JSONFormatter from 'json-formatter-js';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\nimport {BaseDirective} from '../../bases/directive';\nimport {ObjectDiff} from './diff';\n\nexport {ObjectDiff} from './diff';\n\n@Directive({\n  selector: '[erJsonViewer]'\n})\nexport class JsonViewerDirective extends BaseDirective implements OnChanges {\n\n  @Input('erJsonViewer') model: {};\n\n  @Input('current') showCurrent = true;\n\n  @Input() openLevel = 2;\n\n  @Input('diff') showDiff = false;\n\n  private diff: string;\n\n  constructor(private el: ElementRef, private cd: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.model) {\n      this.model = changes.model.currentValue;\n      if (this.model) {\n        Object.keys(this.model).forEach(key => {\n          if (this.model[key] instanceof BehaviorSubject) {\n            this.model[key] = this.model[key].value;\n          } else if (this.model[key] instanceof Observable) {\n            (this.model[key] as Observable<any>)\n              .pipe(\n                takeUntil(this.destroyed$)\n              )\n              .subscribe(v => this.model[key] = v);\n          } else if (this.showDiff) {\n            try {\n              this.diff = ObjectDiff.diff(changes.model.previousValue, changes.model.currentValue);\n            } catch (e) {\n            }\n          }\n        });\n      }\n      this.showJson();\n    }\n  }\n\n  showJson() {\n    this.el.nativeElement.innerHTML = '';\n    if (this.showCurrent) {\n      const formatter = new JSONFormatter(this.model || {}, this.openLevel, {\n        hoverPreviewEnabled: true\n      });\n      try {\n        const divEle: HTMLDivElement = formatter.render();\n        divEle.classList.add('json-viewer');\n        this.el.nativeElement.appendChild(divEle);\n      } catch (e) {\n      }\n    }\n    if (this.showDiff) {\n      const divEle = document.createElement('div');\n      divEle.classList.add('diff-viewer');\n      divEle.innerHTML = this.diff;\n      this.el.nativeElement.appendChild(divEle);\n    }\n  }\n}\n","import {Directive, ElementRef, HostBinding, Input} from '@angular/core';\n\n@Directive({\n  selector: '[movableHandle]'\n})\nexport class MovableHandleDirective {\n\n  @HostBinding('class.movable-enabled')\n  public movableEnabled = false;\n  @HostBinding('class.movable-moving')\n  public isMoving = false;\n  @Input()\n  public movableHandle: string;\n  @HostBinding('class.movable-handle')\n  protected isHandle = true;\n\n  constructor(public element: ElementRef) {\n  }\n\n}\n","import {\n  AfterContentInit,\n  AfterViewInit,\n  ChangeDetectorRef,\n  ContentChildren,\n  Directive,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Input,\n  QueryList\n} from '@angular/core';\nimport {MovableHandleDirective} from './movable-handle.directive';\n\nexport interface Coordinates {\n  top: number;\n  left: number;\n}\n\nexport interface Rects {\n  top: number;\n  left: number;\n  height: number;\n  width: number;\n}\n\n// workaround to prevent error in MS Edge\nexport interface ITouchEvent extends UIEvent {\n  changedTouches: Coordinates[];\n}\n\nexport type Positions = Coordinates | Rects | ITouchEvent | MouseEvent;\n\nexport class Position {\n  public top: number;\n  public left: number;\n  public height: number = null;\n  public width: number = null;\n\n  constructor(pos: Positions) {\n    if (this.containsNumberProp(pos, ['top', 'left'])) {\n      this.top = (<any>pos).top;\n      this.left = (<any>pos).left;\n      if (this.containsNumberProp(pos, ['height', 'width'])) {\n        this.height = (<any>pos).height;\n        this.width = (<any>pos).width;\n      }\n    } else if (this.containsNumberProp(pos, ['clientY', 'clientX'])) {\n      this.top = (<any>pos).clientY;\n      this.left = (<any>pos).clientX;\n    } else if ((<any>pos).changedTouches\n      && (<any>pos).changedTouches.length > 0\n      && (<any>pos).changedTouches[0]\n      && this.containsNumberProp((<any>pos).changedTouches[0], ['clientY', 'clientX'])\n    ) {\n      this.top = (<any>pos).changedTouches[0].clientY;\n      this.left = (<any>pos).changedTouches[0].clientX;\n    }\n  }\n\n  public get bottom() {\n    return (this.height === null) ? null : this.top + this.height;\n  }\n\n  public get right() {\n    return (this.width === null) ? null : this.left + this.width;\n  }\n\n  public minus(position: Coordinates) {\n    return new Position({\n      top: (this.top - position.top),\n      left: (this.left - position.left),\n      height: this.height,\n      width: this.width\n    });\n  }\n\n  public plus(position: Coordinates) {\n    return new Position({\n      top: (this.top + position.top),\n      left: (this.left + position.left),\n      height: this.height,\n      width: this.width\n    });\n  }\n\n  protected containsNumberProp(object: any, props: string[]) {\n    return props.every(prop => prop in object && typeof object[prop] === 'number');\n  }\n}\n\n\n@Directive({\n  selector: '[movable]'\n})\nexport class MovableDirective implements AfterViewInit, AfterContentInit {\n\n  @Input()\n  public movableConstrained = true;\n  @Input()\n  public movableConstraint: string;\n  /** saved start position when moving starts. */\n  protected startPosition: Position;\n  /** true if moving is in progress. */\n  @HostBinding('class.movable-moving')\n  protected isMoving = false;\n  @HostBinding('class.movable-handle')\n  protected isHandle = false;\n  /** set position style on host to relative. */\n  @HostBinding('style.position')\n  protected positionStyle: string;\n  /** current Y position of the native element. */\n  @HostBinding('style.top.px')\n  protected positionTop: number;\n  /** current X position of the native element. */\n  @HostBinding('style.left.px')\n  protected positionLeft: number;\n  /** set class on host to indicate movable support. */\n  @HostBinding('class.movable')\n  protected isMovable = true;\n  protected movableName: string;\n  @ContentChildren(MovableHandleDirective, {descendants: true})\n  protected allHandles: QueryList<MovableHandleDirective>;\n  protected handles: MovableHandleDirective[] = [];\n\n  constructor(public element: ElementRef, protected cd: ChangeDetectorRef) {\n  }\n\n  /** set class depending on the status. */\n  @HostBinding('class.movable-enabled')\n  protected _movableEnabled = true;\n\n  protected get movableEnabled() {\n    return this._movableEnabled;\n  }\n\n  /** optional input to toggle movable status. */\n  @Input()\n  protected set movableEnabled(value: boolean) {\n    this._movableEnabled = value;\n    // propagate enabled status to handles\n    if (this.handles.length > 0) {\n      this.handles.forEach(handle => handle.movableEnabled = value);\n    }\n  }\n\n  @Input()\n  protected set movable(value: string) {\n    this.movableName = value;\n  }\n\n  ngAfterViewInit() {\n    const position = this.getStyle(this.element.nativeElement, 'position');\n    if (position === 'static') {\n      this.positionStyle = 'relative';\n      this.cd.detectChanges();\n    }\n  }\n\n  ngAfterContentInit() {\n    this.allHandles.changes.subscribe((handles: QueryList<MovableHandleDirective>) => this.updateQuery(handles));\n    // TODO: workaround for https://github.com/angular/angular/issues/12818 and https://github.com/angular/angular/issues/9689\n    // manually trigger first update.\n    this.updateQuery(this.allHandles);\n  }\n\n  protected updateQuery(handles: QueryList<MovableHandleDirective>) {\n    this.handles = handles.filter(handle => handle.movableHandle === this.movableName);\n    // fallback to this as handle if not specified\n    if (this.handles.length === 0) {\n      this.isHandle = true;\n    }\n    // propagate enabled status to handles\n    if (this.handles.length > 0) {\n      this.handles.forEach(handle => handle.movableEnabled = this.movableEnabled);\n    }\n  }\n\n  @HostListener('mousedown', ['$event'])\n  protected onMouseDown(event: MouseEvent) {\n    this.startMoving(event);\n  }\n\n  @HostListener('document:mouseup', ['$event'])\n  protected onMouseUp(event: MouseEvent) {\n    this.stopMoving();\n  }\n\n  // using document to move even pointer leaves the host (fast moving)\n  @HostListener('document:mousemove', ['$event'])\n  protected onMouseMove(event: MouseEvent) {\n    this.moveElement(event);\n  }\n\n  @HostListener('touchstart', ['$event'])\n  protected onTouchStart(event: ITouchEvent) {\n    this.startMoving(event);\n  }\n\n  @HostListener('document:touchend', ['$event'])\n  protected onTouchEnd(event: ITouchEvent) {\n    this.stopMoving();\n  }\n\n  // using document to move even pointer leaves the host (fast moving)\n  @HostListener('document:touchmove', ['$event'])\n  protected onTouchMove(event: any) {\n    this.moveElement(event);\n  }\n\n  protected startMoving(event: ITouchEvent | MouseEvent) {\n    if (this.isEventInHandle(event) && this.movableEnabled) {\n      this.startPosition = new Position(event).minus(this.getRelativeRect(this.element.nativeElement));\n      this.isMoving = true;\n      if (this.handles.length > 0) {\n        this.handles.forEach(handle => handle.isMoving = true);\n      }\n      this.cd.detectChanges();\n    }\n  }\n\n  protected stopMoving() {\n    this.isMoving = false;\n    if (this.handles.length > 0) {\n      this.handles.forEach(handle => handle.isMoving = false);\n    }\n    this.cd.detectChanges();\n  }\n\n  protected moveElement(event: ITouchEvent | MouseEvent) {\n    if (this.isMoving) {\n      let moved = false;\n      const newPosition = new Position(event).minus(this.startPosition);\n      if (!this.movableConstrained) {\n        this.positionTop = newPosition.top;\n        this.positionLeft = newPosition.left;\n        moved = true;\n      } else {\n        const constainedByElement: HTMLElement = this.element.nativeElement.ownerDocument.getElementById(this.movableConstraint);\n        let constainedByAbsPos: Position;\n        if (constainedByElement) {\n          constainedByAbsPos = new Position(constainedByElement.getBoundingClientRect());\n        } else {\n          constainedByAbsPos = this.getViewPos(this.element.nativeElement);\n        }\n        const elementAbsPos = new Position(this.element.nativeElement.getBoundingClientRect());\n        const diffAbsToRel = elementAbsPos.minus(this.getRelativeRect(this.element.nativeElement));\n        const newAbsPos = diffAbsToRel.plus(newPosition);\n        if (newAbsPos.top >= constainedByAbsPos.top && newAbsPos.bottom <= constainedByAbsPos.bottom) {\n          this.positionTop = newPosition.top;\n          moved = true;\n        } else {\n          if (newAbsPos.top < constainedByAbsPos.top) {\n            // max to top limit, to prevent sticking of the movable on fast move\n            this.positionTop = constainedByAbsPos.minus(diffAbsToRel).top;\n            moved = true;\n          }\n          if (newAbsPos.bottom > constainedByAbsPos.bottom) {\n            // max to bottom limit, to prevent sticking of the movable on fast move\n            this.positionTop = constainedByAbsPos.minus(diffAbsToRel).bottom - elementAbsPos.height;\n            moved = true;\n          }\n        }\n        if (newAbsPos.left >= constainedByAbsPos.left && newAbsPos.right <= constainedByAbsPos.right) {\n          this.positionLeft = newPosition.left;\n          moved = true;\n        } else {\n          if (newAbsPos.left < constainedByAbsPos.left) {\n            // max to left limit, to prevent sticking of the movable on fast move\n            this.positionLeft = constainedByAbsPos.minus(diffAbsToRel).left;\n            moved = true;\n          }\n          if (newAbsPos.right > constainedByAbsPos.right) {\n            // max to right limit, to prevent sticking of the movable on fast move\n            this.positionLeft = constainedByAbsPos.minus(diffAbsToRel).right - elementAbsPos.width;\n            moved = true;\n          }\n        }\n      }\n      if (moved) {\n        // prevent selection and other side effects during moving, only when position moved, i.e. to allow buttons to be clicked\n        event.preventDefault();\n        event.stopPropagation();\n        this.cd.detectChanges();\n      }\n    }\n  }\n\n  protected isEventInHandle(event: ITouchEvent | MouseEvent): boolean {\n    let srcElement = event.target || event.srcElement;\n    if (this.isHandle) {\n      // check parent elements too.\n      while (srcElement instanceof HTMLElement && srcElement !== this.element.nativeElement && srcElement.parentElement) {\n        srcElement = srcElement.parentElement;\n      }\n      return this.element.nativeElement === srcElement;\n    } else {\n      return this.handles.some(handle => {\n        // check parent elements too.\n        while (srcElement instanceof HTMLElement && srcElement !== handle.element.nativeElement && srcElement.parentElement) {\n          srcElement = srcElement.parentElement;\n        }\n        return handle.element.nativeElement === srcElement;\n      });\n    }\n  }\n\n  protected getRelativeRect(element: HTMLElement): Position {\n    return new Position({\n      top: this.parseStyleInt(this.getStyle(element, 'top')) || 0,\n      left: this.parseStyleInt(this.getStyle(element, 'left')) || 0,\n      height: this.parseStyleInt(this.getStyle(element, 'height')) || 0,\n      width: this.parseStyleInt(this.getStyle(element, 'width')) || 0\n    });\n  }\n\n  protected parseStyleInt(value: string) {\n    return parseInt(value, 10);\n  }\n\n  protected getStyle(element: HTMLElement, property: string) {\n    const view = this.getView(element);\n    return view.getComputedStyle(element, null).getPropertyValue(property);\n  }\n\n  protected getView(element: HTMLElement) {\n    let view = element.ownerDocument.defaultView;\n    if (!view || view.opener) {\n      view = window;\n    }\n    return view;\n  }\n\n\n  protected getViewPos(element: HTMLElement) {\n    const view = this.getView(element);\n    return new Position({\n      top: 0,\n      left: 0,\n      height: view.innerHeight || element.ownerDocument.documentElement.clientHeight,\n      width: view.innerWidth || element.ownerDocument.documentElement.clientWidth\n    });\n  }\n\n}\n","import {AfterViewInit, Directive, ElementRef, Input, Renderer2} from '@angular/core';\n\n@Directive({\n  selector: '[erPosition]'\n})\nexport class PositionDirective implements AfterViewInit {\n\n  @Input('erPosition') positionClass: string;\n\n  constructor(private el: ElementRef, private render: Renderer2) {\n  }\n\n  ngAfterViewInit() {\n    this.render.addClass(this.el.nativeElement.parentNode, 'd-flex');\n    this.render.addClass(this.el.nativeElement.parentNode, 'align-items-center');\n    this.render.addClass(this.el.nativeElement.parentNode, 'justify-content-center');\n    this.render.addClass(this.el.nativeElement, this.positionClass || 'text-center');\n  }\n}\n","import {Directive, ElementRef, OnInit} from '@angular/core';\n\n@Directive({\n  selector: '[erInsideOut]'\n})\nexport class RemoveMeDirective implements OnInit {\n\n  private parentContent;\n\n  constructor(private el: ElementRef) {\n  }\n\n  ngOnInit() {\n    const nativeElement: HTMLElement = this.el.nativeElement;\n    const parentElement = nativeElement.parentElement;\n    if (!this.parentContent) {\n      this.parentContent = parentElement.innerHTML;\n    } else {\n      parentElement.innerHTML = this.parentContent;\n    }\n    // move all children out of the element\n    while (nativeElement.firstChild) {\n      parentElement.insertBefore(nativeElement.firstChild, nativeElement);\n    }\n    // remove the empty element(the host)\n    parentElement.removeChild(nativeElement);\n  }\n}\n","import {Directive, Input, ViewContainerRef} from '@angular/core';\nimport {BaseDirective} from '../../bases/directive';\n\n@Directive({\n  selector: '[erSelector]'\n})\nexport class SelectorDirective extends BaseDirective {\n\n  @Input('erSelector') id: any;\n\n  constructor(private viewContainerRef: ViewContainerRef) {\n    super();\n  }\n\n  get hostComponent() {\n    return this.viewContainerRef['_data'].componentView.component;\n  }\n}\n","import {AfterViewInit, ElementRef, Input, OnInit, Renderer2} from '@angular/core';\nimport {ConfigUtils} from '@er/utils';\nimport {BaseDirective} from '../../bases/directive';\n\n\nexport abstract class SpinnerBaseDirective extends BaseDirective implements OnInit, AfterViewInit {\n\n  @Input() spinnerClass: string;\n  @Input() position: 'left' | 'right' | 'center' = 'right';\n\n  spinElement: any;\n  containerElement: any;\n\n  constructor(protected el: ElementRef, protected renderer: Renderer2) {\n    super();\n  }\n\n  abstract onInit(): void;\n\n  ngOnInit(): void {\n    this.onInit();\n  }\n\n  ngAfterViewInit() {\n    this.spinElement = this.createElement('span', ['spinner', this.position, 'd-none']);\n    if (!this.spinnerClass) {\n      this.spinnerClass = ConfigUtils.getConfig().onLoading || 'fa fa-cog fa-spin fa-spin-2x';\n    }\n    const spinnerEle = this.createElement('i', this.spinnerClass.split(' '));\n    this.renderer.appendChild(this.spinElement, spinnerEle);\n    this.placeSpin();\n  }\n\n  protected placeSpin() {\n    const element = this.el.nativeElement;\n    if (element instanceof HTMLDivElement) {\n      this.addSpin(element);\n    } else if (element instanceof HTMLButtonElement) {\n      this.appendChildSpin(element);\n    } else if (element instanceof HTMLImageElement) {\n      this.replaceWithWrapper();\n    } else if (element instanceof HTMLUListElement) {\n      this.replaceWithWrapper();\n    } else if (element instanceof HTMLInputElement) {\n      switch (element.type) {\n        case 'text':\n        case 'file': {\n          this.replaceWithWrapper();\n          break;\n        }\n        case 'checkbox':\n        case 'radio':\n        case 'button': {\n          this.replaceWithWrapper('span');\n          break;\n        }\n        default:\n          this.replaceWithWrapper();\n      }\n    } else {\n      this.replaceWithWrapper();\n    }\n  }\n\n  protected appendChildSpin(parent) {\n    this.renderer.appendChild(parent, this.spinElement);\n  }\n\n  protected addSpin(parent) {\n    this.renderer.addClass(parent, 'spin-container');\n    this.renderer.removeClass(this.spinElement, this.position);\n    this.renderer.addClass(this.spinElement, 'fa-2x');\n    this.renderer.addClass(this.spinElement, 'center');\n    this.appendChildSpin(parent);\n  }\n\n  protected replaceWithWrapper(tag = 'div') {\n    this.containerElement = this.createElement(tag, ['spin-container']);\n    const parent = this.el.nativeElement.parentNode;\n    this.renderer.insertBefore(parent, this.containerElement, this.el.nativeElement);\n    this.renderer.removeChild(parent, this.el.nativeElement);\n    if (tag !== 'div') {\n      this.renderer.addClass(this.spinElement, 'spin-inline');\n      if (this.position === 'left') {\n        this.renderer.appendChild(this.containerElement, this.spinElement);\n        this.renderer.appendChild(this.containerElement, this.el.nativeElement);\n      }\n    } else {\n      this.renderer.appendChild(this.containerElement, this.el.nativeElement);\n      this.renderer.appendChild(this.containerElement, this.spinElement);\n    }\n  }\n\n\n  protected createElement(tag, classNames: string[]): any {\n    const element = this.renderer.createElement(tag);\n    if (classNames) {\n      classNames.forEach(className =>\n        this.renderer.addClass(element, className));\n    }\n    return element;\n  }\n\n}\n","import {Directive, ElementRef, Input, Renderer2} from '@angular/core';\nimport {StateNames} from '@er/types';\nimport {StatesUtils} from '@er/utils';\nimport {SpinnerBaseDirective} from '../base';\n\n\n@Directive({\n  selector: '[erHttpState]'\n})\nexport class HttpSpinnerDirective extends SpinnerBaseDirective {\n\n  @Input('erHttpState') spinnerTag: string;\n\n  constructor(el: ElementRef, renderer: Renderer2) {\n    super(el, renderer);\n  }\n\n  onInit(): void {\n    this.$subscriptions = StatesUtils.observe(StateNames.http, this.spinnerTag)\n      .subscribe(state => {\n        if (state && state.start) {\n          this.renderer.removeClass(this.spinElement, 'd-none');\n          this.renderer.setAttribute(this.el.nativeElement, 'disabled', 'true');\n          if (this.containerElement) {\n            this.renderer.setStyle(this.el.nativeElement, 'opacity', 0.5);\n          }\n        } else {\n          if (this.spinElement) {\n            this.renderer.addClass(this.spinElement, 'd-none');\n            this.renderer.removeAttribute(this.el.nativeElement, 'disabled');\n            if (this.containerElement) {\n              this.renderer.setStyle(this.el.nativeElement, 'opacity', 1);\n            }\n          }\n        }\n      });\n  }\n}\n","import {Directive, ElementRef, Input, Renderer2} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {SpinnerBaseDirective} from '../base';\n\n\n@Directive({\n  selector: '[erNotifySpinner]'\n})\nexport class NotifySpinnerDirective extends SpinnerBaseDirective {\n\n  @Input('notifySpinner') notifier: Observable<boolean>;\n\n  constructor(el: ElementRef, renderer: Renderer2) {\n    super(el, renderer);\n  }\n\n  onInit(): void {\n    this.$subscriptions =\n      this.notifier\n        .subscribe(state => {\n          !!state\n            ? this.renderer.removeClass(this.spinElement, 'd-none')\n            : this.renderer.addClass(this.spinElement, 'd-none');\n        });\n  }\n}\n","import {Directive, ElementRef, Input, Renderer2} from '@angular/core';\nimport {ColorUtils, CommonsUtils} from '@er/utils';\nimport {BaseDirective} from '../../bases/directive';\n\n\n@Directive({\n  selector: '[erTag]'\n})\nexport class TagDirective extends BaseDirective {\n\n  @Input() text: string;\n\n  @Input() bg: string;\n\n  @Input() color: string;\n\n  constructor(private el: ElementRef, private render: Renderer2) {\n    super();\n  }\n\n  ngAfterViewInit() {\n    if (!CommonsUtils.isEmpty(this.color)) {\n      this.render.setStyle(this.el.nativeElement, 'color', this.color);\n    }\n    if (!CommonsUtils.isEmpty(this.bg)) {\n      this.render.setStyle(this.el.nativeElement, 'background-color', this.bg);\n    }\n    if (CommonsUtils.isEmpty(this.color) && CommonsUtils.isEmpty(this.bg)) {\n      if (!this.text) {\n        this.text = this.el.nativeElement.innerHTML;\n      }\n      this.render.setStyle(this.el.nativeElement, 'background', ColorUtils.getColor(this.text));\n      this.render.setStyle(this.el.nativeElement, 'color', 'white');\n    }\n    this.render.addClass(this.el.nativeElement, 'badge-pill');\n    this.render.addClass(this.el.nativeElement, 'badge');\n  }\n}\n","import {AnimatedIfDirective} from './animate-if/directive';\nimport {AnimateDirective} from './animate/directive';\nimport {ApiDataDirective} from './api-data/directive';\nimport {DynaTemplateDirective} from './dyna-template/directive';\nimport {FocusHighlightDirective} from './focus-high-light/directive';\nimport {HighlightDirective} from './high-light/directive';\nimport {JsonViewerDirective} from './json-viewer/directive';\nimport {MovableHandleDirective} from './movable/movable-handle.directive';\nimport {MovableDirective} from './movable/movable.directive';\nimport {PositionDirective} from './position/directive';\nimport {PropsBindDirective} from './props-bind/directive';\nimport {RemoveMeDirective} from './remove-me/directive';\nimport {SelectorDirective} from './selector/directive';\nimport {HttpSpinnerDirective} from './state-spinner/http/directive';\nimport {NotifySpinnerDirective} from './state-spinner/notify/directive';\nimport {TagDirective} from './text-tag/directive';\nimport {TypedTemplateDirective} from './typed-template/directive';\n\nexport * from './animate/directive';\nexport * from './api-data/directive';\nexport * from './typed-template/directive';\nexport * from './dyna-template/directive';\nexport * from './props-bind/directive';\nexport * from './text-tag/directive';\nexport * from './selector/directive';\nexport * from './position/directive';\nexport * from './remove-me/directive';\nexport * from './state-spinner/http/directive';\nexport * from './state-spinner/notify/directive';\nexport * from './high-light/directive';\nexport * from './focus-high-light/directive';\nexport * from './movable/movable-handle.directive';\nexport * from './movable/movable.directive';\nexport {JsonViewerDirective, ObjectDiff} from './json-viewer/directive';\n\nexport const CoreDirectives = [\n  AnimateDirective,\n  AnimatedIfDirective,\n  ApiDataDirective,\n  TypedTemplateDirective,\n  DynaTemplateDirective,\n  TagDirective,\n  SelectorDirective,\n  PositionDirective,\n  RemoveMeDirective,\n  PropsBindDirective,\n  MovableDirective,\n  MovableHandleDirective,\n  JsonViewerDirective,\n  HttpSpinnerDirective,\n  NotifySpinnerDirective,\n  HighlightDirective,\n  FocusHighlightDirective\n];\n","import {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {HttpInterceptorConfig} from '@er/types';\nimport {ConfigUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\n\n\n@Injectable()\nexport class HttpAppConfiguredInterceptor implements HttpInterceptor {\n\n  customerInterceptors: HttpInterceptorConfig[];\n\n  constructor() {\n    this.customerInterceptors = ConfigUtils.getConfig().httpInterceptors;\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n   // const cloned = req.clone();\n    // if (this.customerInterceptors) {\n    //   this.customerInterceptors.forEach((interceptor: HttpInterceptorConfig) => {\n    //     if (req && interceptor.request && RegUtils.test(req.url, interceptor.urlPatterns)) {\n    //      // cloned = interceptor.request(cloned);\n    //     }\n    //   });\n    // }\n    return next.handle(req);\n      // .pipe(\n      //    map(response => {\n      //      if (this.customerInterceptors) {\n      //        this.customerInterceptors.forEach((interceptor: HttpInterceptorConfig) => {\n      //          if (interceptor.response && RegUtils.test(req.url, interceptor.urlPatterns)) {\n      //            interceptor.response(response);\n      //          }\n      //        });\n      //        return response;\n      //      } else {\n      //        return response;\n      //      }\n      //    })\n      // );\n  }\n}\n","import {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {NotifyLevel, StateNames} from '@er/types';\nimport {ConfigUtils, StatesUtils} from '@er/utils';\nimport {Observable, throwError, TimeoutError} from 'rxjs';\nimport {catchError} from 'rxjs/operators';\nimport {RouteUtils} from '../../utils/nav';\n\n@Injectable()\nexport class HttpErrorHandlerInterceptor implements HttpInterceptor {\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(req)\n      .pipe(\n        catchError((err) => {\n          if (err instanceof HttpErrorResponse) {\n            if (err.status === 401) {\n              RouteUtils.nav(ConfigUtils.getConfig().auth.loginRouter);\n            } else if (err.status === 403) {\n              StatesUtils.create(StateNames.notify, {\n                message: '',\n                level: NotifyLevel.ERROR\n              });\n            } else {\n              this.errorHandler(err);\n            }\n          } else if (err instanceof TimeoutError) {\n            StatesUtils.create(StateNames.notify, {\n              message: '',\n              level: NotifyLevel.ERROR\n            });\n          }\n          return throwError(err);\n        })\n      );\n  }\n\n  private errorHandler(err: HttpErrorResponse) {\n    let message = '';\n    if (err.error instanceof Error) {\n      message = err.error.message;\n    } else {\n      if (err.status === 0) {\n        message = '';\n      } else if (err.status === 404) {\n        message = '';\n      } else if (err.status === 500) {\n        message = '';\n      } else {\n        message = '';\n      }\n    }\n    StatesUtils.create(StateNames.notify, {\n      level: NotifyLevel.ERROR,\n      message: `${message},:${err.status}`,\n      title: ''\n    });\n  }\n}\n\n\n","import {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {User} from '@er/types';\nimport {ConfigUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {AuthUtils} from '../../utils/auth';\n\n@Injectable()\nexport class HttpJwtAuthInterceptor implements HttpInterceptor {\n\n  private readonly headerName: string;\n\n  private readonly authScheme: string;\n\n  constructor() {\n    this.headerName = ConfigUtils.getConfig().auth.headerName;\n    this.authScheme = ConfigUtils.getConfig().auth.authScheme;\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const currentUser: User = AuthUtils.getCurrentUser();\n    if (currentUser && currentUser.jwtToken) {\n      //  if (JwtUtils.isValid(currentUser.jwtToken))\n      {\n        req = req.clone({\n          setHeaders: {\n            [this.headerName]: `${this.authScheme}${currentUser.jwtToken}`\n          }\n        });\n      }\n    }\n    return next.handle(req);\n  }\n}\n","import {StateNames} from '@er/types';\nimport {ConfigUtils, StatesUtils} from '@er/utils';\nimport {BehaviorSubject} from 'rxjs';\nimport {first} from 'rxjs/operators';\nimport {HttpUtils} from '../http';\nimport {LogUtils} from '../log';\n\n\nexport class DateSyncUtils {\n\n  static timeServer$: BehaviorSubject<Date> = new BehaviorSubject(new Date());\n\n  private static interval = undefined;\n\n  static start() {\n    const timeServer = ConfigUtils.getConfig().api.servers.timer;\n    if (timeServer) {\n      HttpUtils.request({\n          uri: timeServer.uri,\n          observe: 'events'\n        })\n        .pipe(first())\n        .subscribe(response => {\n          const dates = response.headers && response.headers.getAll('Date');\n          if (dates) {\n            LogUtils.info('DateSyncUtils', '', dates);\n            if (dates && dates.length > 0) {\n              DateSyncUtils.updateLocalDate(dates[0]);\n            }\n          }\n        });\n    }\n  }\n\n  static updateLocalDate(date) {\n    const d = new Date(date);\n    DateSyncUtils.timeServer$.next(d);\n    DateSyncUtils.stopSyncSchedule();\n    DateSyncUtils.startRefreshSchedule();\n    DateSyncUtils.startSyncSchedule();\n  }\n\n  private static stopSyncSchedule() {\n    if (DateSyncUtils.interval) {\n      clearInterval(DateSyncUtils.interval);\n    }\n  }\n\n  private static startRefreshSchedule() {\n    DateSyncUtils.interval = setInterval(() => {\n      const d = DateSyncUtils.timeServer$.value;\n      d.setSeconds(DateSyncUtils.timeServer$.value.getSeconds() + 1);\n      DateSyncUtils.timeServer$.next(d);\n      StatesUtils.create(StateNames.serverTime, {date: d}, true);\n    }, 1000);\n  }\n\n  private static startSyncSchedule() {\n    setInterval(() => {\n      DateSyncUtils.start();\n    }, 1000 * 60 * 15);\n  }\n}\n","import {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {StateNames} from '@er/types';\nimport {ConfigUtils, StatesUtils} from '@er/utils';\nimport {Observable, throwError} from 'rxjs';\nimport {catchError, tap} from 'rxjs/operators';\nimport {LogService} from '../../services/log/service';\nimport {DateSyncUtils} from '../../utils/date-sync';\n\n@Injectable()\nexport class HttpLogInterceptor implements HttpInterceptor {\n\n  constructor(private logService: LogService) {\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const started = Date.now();\n    return next.handle(req)\n      .pipe(\n        tap(event => {\n          if (event instanceof HttpResponse) {\n            const elapsed = Date.now() - started;\n            StatesUtils.set(StateNames.httpTimer, {elapsed});\n            const dates = event.headers.getAll('Date');\n            if (dates && dates.length > 0) {\n              DateSyncUtils.updateLocalDate(dates[0]);\n            }\n          }\n        }),\n        catchError((err) => {\n          if (!ConfigUtils.getConfig().isProduction) {\n            this.logService.debug(this, '', req.url, err);\n          }\n          return throwError(err);\n        })\n      );\n  }\n}\n","import {HttpEvent, HttpEventType, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {StateNames} from '@er/types';\nimport {StatesUtils} from '@er/utils';\nimport {Observable, throwError} from 'rxjs';\nimport {catchError, tap} from 'rxjs/operators';\n\n@Injectable()\nexport class HttpProgressInterceptor implements HttpInterceptor {\n\n  private inProcess = 0;\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n    return next\n      .handle(req).pipe(\n        tap(event => {\n          if (event.type === HttpEventType.Sent) {\n            StatesUtils.update(StateNames.rootHttp, {inProcess: ++this.inProcess, request: req});\n          } else if (event instanceof HttpResponse) {\n            StatesUtils.update(StateNames.rootHttp, {inProcess: --this.inProcess, request: req});\n          }\n        }),\n        catchError((err) => {\n          StatesUtils.update(StateNames.rootHttp, {inProcess: --this.inProcess, request: req});\n          return throwError(err);\n        })\n      );\n  }\n}\n","import {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {ConfigUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {timeout} from 'rxjs/operators';\n\n@Injectable()\nexport class HttpTimeoutInterceptor implements HttpInterceptor {\n\n  timeout: number;\n\n  constructor() {\n    this.timeout = ConfigUtils.getConfig().httpTimeout || 5000;\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const reqTimeout = Number(req.headers.get('timeout')) || this.timeout;\n    return next.handle(req)\n      .pipe(\n        timeout(reqTimeout)\n      );\n  }\n}\n","import {HTTP_INTERCEPTORS} from '@angular/common/http';\nimport {HttpAppConfiguredInterceptor} from './customer/interceptor';\nimport {HttpErrorHandlerInterceptor} from './error/interceptor';\nimport {HttpJwtAuthInterceptor} from './jwt/interceptor';\nimport {HttpLogInterceptor} from './log/interceptor';\nimport {HttpProgressInterceptor} from './progress/interceptor';\nimport {HttpTimeoutInterceptor} from './timeout/interceptor';\n\nexport {HttpAppConfiguredInterceptor} from './customer/interceptor';\nexport {HttpErrorHandlerInterceptor} from './error/interceptor';\nexport {HttpJwtAuthInterceptor} from './jwt/interceptor';\nexport {HttpProgressInterceptor} from './progress/interceptor';\nexport {HttpLogInterceptor} from './log/interceptor';\nexport {HttpTimeoutInterceptor} from './timeout/interceptor';\nexport * from './customer/preset/all';\n\nexport const CoreInterceptors = [\n  {provide: HTTP_INTERCEPTORS, useClass: HttpErrorHandlerInterceptor, multi: true},\n  {provide: HTTP_INTERCEPTORS, useClass: HttpProgressInterceptor, multi: true},\n  {provide: HTTP_INTERCEPTORS, useClass: HttpLogInterceptor, multi: true},\n  {provide: HTTP_INTERCEPTORS, useClass: HttpTimeoutInterceptor, multi: true},\n  {provide: HTTP_INTERCEPTORS, useClass: HttpJwtAuthInterceptor, multi: true},\n  {provide: HTTP_INTERCEPTORS, useClass: HttpAppConfiguredInterceptor, multi: true}\n];\n\n\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'erKeyValue'\n})\nexport class KeyValuePipe implements PipeTransform {\n  transform(data: { [key: string]: any }): {}[] {\n    const lst = [];\n    Object.keys(data).map(key => {\n      lst.push({key, value: data[key]});\n    });\n    return lst;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'base64Decode'\n})\nexport class Base64DecodePipe implements PipeTransform {\n  transform(value: string): string {\n    return decodeURIComponent(atob( value ))\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'erCommaSeparatedNumber'\n})\nexport class CommaSeparatedNumberPipe implements PipeTransform {\n  transform(value: number, args: string[]): any {\n    const reg = /(^[+-]?\\d+)(\\d{3})/;\n    let n = value.toString();\n\n    while (reg.test(n)) { n = n.replace(reg, '$1' + ',' + '$2'); }\n    return n;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {DataItemProps} from '@er/types';\nimport {DataItemUtils} from '@er/utils';\n\n@Pipe({name: 'erDataItems'})\nexport class DataItemsPipe implements PipeTransform {\n  transform(items: {}[], config: DataItemProps | {}) {\n    if (!items) {\n      return items;\n    }\n    return DataItemUtils.transItems(items, config || {});\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'erDefault'})\nexport class DefaultPipe implements PipeTransform {\n  transform(data: any, dft: any) {\n    return !!data ? data : dft;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\nconst emojiDictionary = [\n  {patterns: [':)', ':-)', '=)'], unicode: ''},\n  {patterns: [':D', ':-D', '=D'], unicode: ''},\n  {patterns: [':(', ':-(', '=('], unicode: ''},\n  {patterns: [':|', ':-|', '=|'], unicode: ''},\n  {patterns: [':*', ':-*', '=*'], unicode: ''},\n  {patterns: ['T_T', 'T.T'], unicode: ''},\n  {patterns: [':O', ':-O', '=O', ':o', ':-o', '=o'], unicode: ''},\n  {patterns: [':P', ':-P', '=P', ':p', ':-p', '=p'], unicode: ''},\n  {patterns: ['>.<'], unicode: ''},\n  {patterns: ['@.@'], unicode: ''},\n  {patterns: ['*.*'], unicode: ''},\n  {patterns: ['<3'], unicode: ''},\n  {patterns: ['^.^'], unicode: ''},\n  {patterns: [':+1'], unicode: ''},\n  {patterns: [':-1'], unicode: ''}\n];\n\n\n@Pipe({name: 'erEmojify'})\nexport class EmojifyPipe implements PipeTransform {\n  transform(message: string, pipeEnabled = true): string {\n    if (pipeEnabled && message && message.length > 1) {\n      emojiDictionary.forEach(emoji => {\n        emoji.patterns.forEach(pattern => {\n          message = message.replace(pattern, emoji.unicode);\n        });\n      });\n    }\n\n    return message;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n\n@Pipe({\n  name: 'erFilter'\n})\nexport class FilterPipe implements PipeTransform {\n  transform(arr: any[],\n            criteria: { key: string, value: any } | any,\n            matcher?: { startWith: boolean, contains: boolean, regex: boolean, pinyin: boolean }) {\n\n    if (!criteria) return arr;\n\n    return arr.filter(value => {\n      if (CommonsUtils.isJson(value)) {\n        return value[criteria.key] && value[criteria.key].toLowerCase().indexOf(criteria.value.toLowerCase()) > -1;\n      } else\n        return value === criteria;\n    });\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'erHighLight'\n})\nexport class HighLightPipe implements PipeTransform {\n\n  transform(text: any, ...keywords: any[]): any {\n    if (text && keywords.length > 0) {\n      keywords.forEach(keyword => {\n        text = text.replace(new RegExp('(' + keyword + ')', 'gi'),\n          '<span class=\"keyword\">$1</span>')\n      })\n    }\n    return text\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {IdCardUtils} from '@er/utils';\n\n@Pipe({name: 'idCard'})\nexport class IdCardPipe implements PipeTransform {\n  transform(idCardNo: any, attr?: 'gender' | 'birthday' | 'age') {\n    const attrs = IdCardUtils.parse(idCardNo);\n    if (attrs && Object.keys(attrs).length > 0) {\n      return attr ? attrs[attr] : attrs;\n    } else {\n      return '';\n    }\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n@Pipe({name: 'join'})\nexport class JoinPipe implements PipeTransform {\n  transform(arr: any, seperator?: string) {\n    return CommonsUtils.join(arr, seperator);\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n\n@Pipe({\n  name: 'erLinkify',\n  pure: false\n})\nexport class LinkifyPipe implements PipeTransform {\n\n  transform(text: string, pipeEnabled = true): string {\n    if (pipeEnabled && !CommonsUtils.isEmpty(text)) {\n      return this.linkify(text);\n    }\n    return text;\n  }\n\n  private linkify(plainText, pipeEnabled = true): string {\n    if (pipeEnabled) {\n      let replacedText;\n      let replacePattern1;\n      let replacePattern2;\n      let replacePattern3;\n\n      // URLs starting with http://, https://, or ftp://\n      replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n      replacedText = plainText.replace(replacePattern1, '<a href=\"$1\" target=`${options.target|\"_blank\"}`>$1</a>');\n\n      // URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n      replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n      replacedText = replacedText.replace(replacePattern2, '$1<a href=\"http://$2\" target=`${options.target|\"_blank\"}`>$2</a>');\n\n      // Change email addresses to mailto:: links.\n      replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n      replacedText = replacedText.replace(replacePattern3, '<a href=\"mailto:$1\">$1</a>');\n\n      return replacedText;\n    }\n    return plainText;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'erKeys'\n})\nexport class KeysPipe implements PipeTransform {\n\n  transform(src: { [key: string]: any }) {\n    return Object.keys(src);\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\ninterface NumbersObject {\n  [key: number]: string;\n  [key: string]: string;\n}\n\n@Pipe({ name: 'erNumberToText' })\nexport class NumberToTextPipe implements PipeTransform {\n\n  private numbers: NumbersObject = {\n    0: '',\n    '00': '',\n    '000': '',\n    1: 'one',\n    2: 'two',\n    3: 'three',\n    4: 'four',\n    5: 'five',\n    6: 'six',\n    7: 'seven',\n    8: 'eight',\n    9: 'nine',\n    10: 'ten',\n    11: 'eleven',\n    12: 'twelve',\n    13: 'thirteen',\n    14: 'fourteen',\n    15: 'fifteen',\n    16: 'sixteen',\n    17: 'seventeen',\n    18: 'eighteen',\n    19: 'nineteen',\n    20: 'twenty',\n    30: 'thirty',\n    40: 'forty',\n    50: 'fifty',\n    60: 'sixty',\n    70: 'seventy',\n    80: 'eighty',\n    90: 'ninety'\n  };\n\n  transform(value: number | string) {\n    let numberWords: Array<String> = [];\n\n    if (typeof value !== 'string') {\n      value = value.toString();\n    }\n\n    if (value.indexOf(',') > -1) {\n      const re = new RegExp(',', 'g');\n      value = value.replace(re, '');\n    }\n\n    let numLength = value.length,\n      numberString = '',\n      divide = Math.ceil(value.length / 3),\n      splits = [];\n\n    for (let i = 0; i < divide; i++) {\n      if (value.length % 3 === 2) {\n        splits.push([value[0], value[1]]);\n        value = value.substring(2);\n      } else if (value.length % 3 === 1) {\n        splits.push([value[0]]);\n        value = value.substring(1);\n      } else {\n        splits.push([value[0], value[1], value[2]]);\n        value = value.substring(3);\n      }\n    }\n\n    switch (divide) {\n      case 2: {\n        numberWords = ['thousand'];\n        break;\n      }\n      case 3: {\n        numberWords = ['million', 'thousand'];\n        break;\n      }\n      case 4: {\n        numberWords = ['billion', 'million', 'thousand'];\n        break;\n      }\n      case 5: {\n        numberWords = ['trillion', 'billion', 'million', 'thousand'];\n        break;\n      }\n    }\n\n\n    for (let i = 0; i < splits.length; i++) {\n      if (numberWords.length > 0) {\n        switch (splits[i].length) {\n          case 1:\n            numberString += this.numbers[splits[i][0]] + ' ' + numberWords[0];\n            break;\n          case 2:\n            if (this.numbers[splits[i][0].toString() + splits[i][1].toString()] !== undefined) {\n              numberString += this.numbers[splits[i][0].toString() + splits[i][1].toString()] + ' ' + numberWords[0];\n            } else {\n              numberString += this.numbers[splits[i][0] + '0'] + ' ' + this.numbers[splits[i][1]] + ' ' + numberWords[0];\n            }\n            break;\n          case 3:\n            if (this.numbers[splits[i][0].toString() + splits[i][1].toString() + splits[i][2].toString()] !== undefined) {\n              numberString = numberString.substring(0, numberString.length - 1);\n              break;\n            } else if (this.numbers[splits[i][1].toString() + splits[i][2].toString()] !== undefined) {\n\n              //Need to properly handle spaces when its double 00's\n              if (splits[i][1].toString() + splits[i][2].toString() === '00') {\n                numberString += this.numbers[splits[i][0]] + ' hundred' + ' ' + numberWords[0];\n              } else {\n                numberString += this.numbers[splits[i][0]] + ' hundred ' + this.numbers[splits[i][1].toString() + splits[i][2].toString()]  + ' ' + numberWords[0];\n              }\n            } else {\n              numberString += this.numbers[splits[i][0]] + ' hundred ' + this.numbers[splits[i][1] + '0'] + ' ' + this.numbers[splits[i][2]]  + ' ' + numberWords[0];\n            }\n            break;\n        }\n\n        numberWords.shift();\n        numberString += ' ';\n      } else {\n        switch (splits[i].length) {\n          case 1:\n            if (splits[i][0] === '0') {\n              numberString += 'zero';\n            } else {\n              numberString += this.numbers[splits[i][0]];\n            }\n\n            break;\n          case 2:\n            if (this.numbers[splits[i][0].toString() + splits[i][1].toString()] !== undefined) {\n              numberString += this.numbers[splits[i][0].toString() + splits[i][1].toString()];\n            } else {\n              numberString += this.numbers[splits[i][0] + '0'] + ' ' + this.numbers[splits[i][1]];\n            }\n\n            break;\n          case 3:\n            if (this.numbers[splits[i][0].toString() + splits[i][1].toString() + splits[i][2].toString()] !== undefined) {\n              numberString = numberString.substring(0, numberString.length - 1);\n              break;\n            } else if (this.numbers[splits[i][1].toString() + splits[i][2].toString()] !== undefined) {\n              numberString += this.numbers[splits[i][0]] + ' hundred ' + this.numbers[splits[i][1].toString() + splits[i][2].toString()];\n            } else {\n              numberString += this.numbers[splits[i][0]] + ' hundred ' + this.numbers[splits[i][1] + '0'] + ' ' + this.numbers[splits[i][2]];\n            }\n\n            break;\n        }\n      }\n    }\n\n    return numberString;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {of} from 'rxjs';\n\n@Pipe({name: 'observable', pure: false})\nexport class ObservablePipe implements PipeTransform {\n  transform(input: any): any {\n    return of(input);\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'orderBy', pure: false})\nexport class OrderByPipe implements PipeTransform {\n\n  static _orderByComparator(a: any, b: any): number {\n\n    try { // HACK cuz error when delete entire textbox of number and it compares\n      if ((isNaN(parseFloat(a)) || !isFinite(a)) || (isNaN(parseFloat(b)) || !isFinite(b))) {\n        //Isn't a number so lowercase the string to properly compare\n        if (a.toLowerCase() < b.toLowerCase()) { return -1; }\n        if (a.toLowerCase() > b.toLowerCase()) { return 1; }\n      } else {\n        // Parse strings as numbers to compare properly\n        if (parseFloat(a) < parseFloat(b)) { return -1; }\n        if (parseFloat(a) > parseFloat(b)) { return 1; }\n      }\n    } catch (e) {\n      return 1;\n    }\n\n    return 0; //equal each other\n  }\n\n  /* filter property by string 'parent.child.item.orderKey' */\n  static _getDeepValue(obj: any, propertyPath: string) {\n\n    const pathList = propertyPath.split('??');\n\n    if (pathList.length > 0) {\n      let index = 0,\n        flag = false,\n        result = '';\n\n      while (!flag) {\n        result = getDeepValueByPath(obj, pathList[index]);\n\n        if (result !== undefined) {\n          flag = true;\n        } else {\n          index++;\n\n          if (pathList.length === index) {\n            flag = true;\n          }\n        }\n      }\n\n      return result;\n    } else {\n      return getDeepValueByPath(obj, propertyPath);\n    }\n\n    function getDeepValueByPath(obj, path) {\n      path = path.split('.');\n\n      if (path.length > 0) {\n        for (let i = 0; i < path.length; i++) {\n          if (obj[path[i]] !== undefined) {\n            obj = obj[path[i]];\n          } else {\n            obj = undefined;\n            break;\n          }\n        }\n\n\n        return obj;\n      } else {\n        return obj[path];\n      }\n    }\n  }\n\n  transform(input: any, [config = '+']): any {\n    if (!Array.isArray(input)) { return input; }\n\n    if (!Array.isArray(config) || (Array.isArray(config) && config.length === 1)) {\n      const propertyToCheck: string = !Array.isArray(config) ? config : config[0];\n      const desc = propertyToCheck.substr(0, 1) === '-';\n\n      //Basic array\n      if (!propertyToCheck || propertyToCheck === '-' || propertyToCheck === '+') {\n        return !desc ? input.sort() : input.sort().reverse();\n      } else {\n        const property: string = propertyToCheck.substr(0, 1) === '+' || propertyToCheck.substr(0, 1) === '-'\n          ? propertyToCheck.substr(1)\n          : propertyToCheck;\n\n        return input.sort(function (a: any, b: any) {\n          return !desc\n            ? OrderByPipe._orderByComparator(OrderByPipe._getDeepValue(a, property), OrderByPipe._getDeepValue(b, property))\n            : -OrderByPipe._orderByComparator(OrderByPipe._getDeepValue(a, property), OrderByPipe._getDeepValue(b, property));\n        });\n      }\n    } else {\n      //Loop over property of the array in order and sort\n      return input.sort(function (a: any, b: any) {\n        for (let i = 0; i < config.length; i++) {\n          const desc = config[i].substr(0, 1) === '-';\n          const property = config[i].substr(0, 1) === '+' || config[i].substr(0, 1) === '-'\n            ? config[i].substr(1)\n            : config[i];\n\n          const comparison = !desc\n            ? OrderByPipe._orderByComparator(OrderByPipe._getDeepValue(a, property), OrderByPipe._getDeepValue(b, property))\n            : -OrderByPipe._orderByComparator(OrderByPipe._getDeepValue(a, property), OrderByPipe._getDeepValue(b, property));\n\n          //Don't return 0 yet in case of needing to sort by next property\n          if (comparison !== 0) { return comparison; }\n        }\n\n        return 0; //equal each other\n      });\n    }\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n@Pipe({name: 'erPercent'})\nexport class PercentPipe implements PipeTransform {\n\n  transform(num: number) {\n    if (num && CommonsUtils.isNumber(num)) {\n      return `${num * 100}%`;\n    }\n    return num;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {DomSanitizer} from '@angular/platform-browser';\n\n@Pipe({name: 'erSafeHtml'})\nexport class SafeHtmlPipe implements PipeTransform {\n  constructor(private sanitizer: DomSanitizer) {\n  }\n\n  transform(content, type?) {\n    if (!content) {\n      return '';\n    }\n    switch (type) {\n      case 'url':\n        return this.sanitizer.bypassSecurityTrustUrl(content);\n      case 'resource':\n        return this.sanitizer.bypassSecurityTrustResourceUrl(content);\n      case 'style':\n        return this.sanitizer.bypassSecurityTrustStyle(content);\n      case 'script':\n        return this.sanitizer.bypassSecurityTrustScript(content);\n      default:\n        return this.sanitizer.bypassSecurityTrustHtml(content);\n    }\n  }\n\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'split'})\nexport class SplitPipe implements PipeTransform {\n  transform(data: string, seperator?: string) {\n    if (data) {\n      return data.split(seperator ? seperator : ',');\n    }\n    return [];\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {Style} from '@er/types';\n\n\n@Pipe({name: 'erStyle'})\nexport class StylePipe implements PipeTransform {\n  transform(src: string | Style) {\n    if (typeof src === 'string') {\n      return src;\n    } else {\n      return JSON.stringify(src);\n    }\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n@Pipe({\n  name: 'erSub'\n})\nexport class SubPipe implements PipeTransform {\n  transform(value: any, start?: number, end?: number) {\n    if (!value) { return; }\n    const iStart = start || 0;\n    let iEnd = end;\n    if (CommonsUtils.isString(value)) {\n      if (!iEnd) { iEnd = value.length; }\n      return value.substr(iStart, iEnd) + '...';\n    } else if (CommonsUtils.isArray(value)) {\n      if (!iEnd) { iEnd = value.length; }\n      return (<any[]>value).slice(iStart, iEnd);\n    }\n    return value;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n@Pipe({name: 'erText'})\nexport class TextPipe implements PipeTransform {\n  transform(data: any) {\n    return CommonsUtils.getText(data);\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {Observable, timer} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n@Pipe({\n  name: 'erTimer'\n})\nexport class TimerPipe implements PipeTransform {\n\n  transform(start?: Date): Observable<Date> {\n    if (!start) {\n      start = new Date();\n    }\n   return timer(0, 1000)\n      .pipe(\n        map(() => {\n          start.setSeconds(start.getSeconds() + 1);\n          return new Date(start.getTime());\n        })\n      );\n  }\n}\n","import {ChangeDetectorRef, Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\nimport {BehaviorSubject, Observable, timer} from 'rxjs';\nimport {mapTo, scan, startWith, switchMap, tap} from 'rxjs/operators';\n\n@Pipe({\n  name: 'erTracker'\n})\nexport class TrackerPipe implements PipeTransform {\n\n  currentNumber = 0;\n\n  counter$ = new BehaviorSubject<number>(0);\n\n  constructor(private cd: ChangeDetectorRef) {\n    //   .subscribe();\n  }\n\n  transform(number: number, offset: number = 20): Observable<number> {\n    this.currentNumber = number - CommonsUtils.getRandomNumber(offset);\n    this.counter$.next(this.currentNumber);\n    this.counter$\n      .pipe(\n        switchMap(endRange => {\n          return timer(1000, 200)\n            .pipe(\n              mapTo(this.positiveOrNegative(endRange, this.currentNumber)),\n              startWith(this.currentNumber),\n              scan((acc, curr) => acc + curr),\n              tap(n => console.log(n))\n              //  takeWhile(this.takeUntil(endRange, this.currentNumber))\n            );\n        })\n      ).subscribe(() => this.cd.detectChanges());\n    return this.counter$;\n  }\n\n  private positiveOrNegative(endRange, currentNumber) {\n    return endRange > currentNumber ? 1 : -1;\n  }\n\n  private takeUntil(endRange, currentNumber) {\n    return endRange > currentNumber\n      ? val => val <= endRange\n      : val => val >= endRange;\n  }\n\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {TreeUtils} from '@er/utils';\n\n@Pipe({name: 'erTreeNodes'})\nexport class TreeNodesPipe implements PipeTransform {\n\n  transform(items, keyMap) {\n    if (!items) {\n      return items;\n    }\n    return TreeUtils.transNodes(items, keyMap);\n  }\n}","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n\n@Pipe({\n  name: 'unique'\n})\nexport class UniquePipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    if (value !== undefined && value !== null) {\n      return CommonsUtils.unique(value, args);\n    }\n    return value;\n  }\n\n}\n","import {ElementRef, Pipe, PipeTransform} from '@angular/core';\n\n\n@Pipe({\n  name: 'erUnitNumber'\n})\n\nexport class UnitNumberPipe implements PipeTransform {\n\n  constructor(private ele: ElementRef) {\n  }\n\n  transform(value: number, decimal?: number): string {\n\n    if (!value) {\n      return null;\n    }\n\n    if (typeof value === 'string') {\n      value = parseFloat(value);\n    }\n\n    let number, suffix;\n    const numeral = [\n      {thresholds: 1, suffix: ''},\n      {thresholds: 1e3, suffix: 'K'},\n      {thresholds: 1e6, suffix: 'M'},\n      {thresholds: 1e9, suffix: 'B'},\n      {thresholds: 1e12, suffix: 'T'},\n      {thresholds: 1e15, suffix: 'Q'}\n    ];\n    for (let i = numeral.length - 1; i >= 0; i--) {\n      if (value >= numeral[i].thresholds) {\n        number = value / numeral[i].thresholds;\n        suffix = numeral[i].suffix;\n        break;\n      }\n    }\n    if (value > 1e3) {\n      if (!decimal) {\n        if (number < 10) {\n          number = number.toFixed(1);\n        } else {\n          number = number.toFixed(0);\n        }\n      } else {\n        if (decimal === 0 || decimal === 1 || decimal === 2) {\n          number = number.toFixed(decimal);\n        } else {\n          throw new Error('must be integer 0, 1 or 2');\n        }\n      }\n    } else {\n      if (decimal === 0 || decimal === 1 || decimal === 2) {\n        number = number.toFixed(decimal);\n      } else {\n        number = Math.round(number);\n      }\n    }\n    // add hint of original value\n    // this.ele.nativeElement;\n\n    return number + suffix;\n  }\n}\n\n\n","import {ChangeDetectorRef, NgZone, OnDestroy, Pipe, PipeTransform} from '@angular/core';\nimport {DateUtils} from '@er/utils';\n\n@Pipe({\n  name: 'erUpToNow',\n  pure: false\n})\nexport class UpToNowPipe implements PipeTransform, OnDestroy {\n\n  private timer: number;\n\n  constructor(private cd: ChangeDetectorRef, private ngZone: NgZone) {\n  }\n\n  transform(value: any, due?: Date) {\n    const d = DateUtils.toDate(value);\n    if (!d) {\n      return '';\n    }\n    const span = DateUtils.getDateByNow(d, due);\n    this.removeTimer();\n    const timeToUpdate = (Number.isNaN(span.seconds)) ? 1000 : DateUtils.getUpdateSeconds(span.seconds) * 1000;\n    this.timer = this.ngZone.runOutsideAngular(() => {\n      if (typeof window !== 'undefined') {\n        return window.setTimeout(() => {\n          this.ngZone.run(() => this.cd.detectChanges());\n        }, timeToUpdate);\n      }\n      return null;\n    });\n    return span.message;\n  }\n\n  ngOnDestroy(): void {\n    this.removeTimer();\n  }\n\n  private removeTimer() {\n    if (this.timer) {\n      window.clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }\n\n\n}\n\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\n@Pipe({name: 'erValue'})\nexport class ValuePipe implements PipeTransform {\n  transform(data: {}, key: string | string[]) {\n    if (CommonsUtils.isJson(data)) {\n      if (key) {\n        return CommonsUtils.get(data, key) || '';\n      } else {\n        return CommonsUtils.toString(data);\n      }\n    } else {\n      return CommonsUtils.toString(data) || '';\n    }\n  }\n}\n","import {KeyValuePipe} from './as-list/pipe';\nimport {Base64DecodePipe} from './base64/pipe';\nimport {CommaSeparatedNumberPipe} from './comma-separate/pipe';\nimport {DataItemsPipe} from './data-items/pipe';\nimport {DefaultPipe} from './default/pipe';\nimport {EmojifyPipe} from './emojify/pipe';\nimport {FilterPipe} from './filter/pipe';\nimport {HighLightPipe} from './high-light/pipe';\nimport {IdCardPipe} from './id-card/pipe';\nimport {JoinPipe} from './join/pipe';\nimport {LinkifyPipe} from './linky/pipe';\nimport {KeysPipe} from './map-keys/pipe';\nimport {NumberToTextPipe} from './number-text/pipe';\nimport {ObservablePipe} from './observable/pipe';\nimport {OrderByPipe} from './order/pipe';\nimport {PercentPipe} from './percent/pipe';\nimport {SafeHtmlPipe} from './safe/pipe';\nimport {SplitPipe} from './split/pipe';\nimport {StylePipe} from './style/pipe';\nimport {SubPipe} from './sub/pipe';\nimport {TextPipe} from './text/pipe';\nimport {TimerPipe} from './timer/pipe';\nimport {TrackerPipe} from './tracker/pipe';\nimport {TreeNodesPipe} from './tree-nodes/pipe';\nimport {UniquePipe} from './unique/pipe';\nimport {UnitNumberPipe} from './unit-number/pipe';\nimport {UpToNowPipe} from './up-to-now/pipe';\nimport {ValuePipe} from './value/pipe';\n\nexport {FilterPipe} from './filter/pipe';\nexport {HighLightPipe} from './high-light/pipe';\nexport {KeysPipe} from './map-keys/pipe';\nexport {SafeHtmlPipe} from './safe/pipe';\nexport {StylePipe} from './style/pipe';\nexport {KeyValuePipe} from './as-list/pipe';\nexport {JoinPipe} from './join/pipe';\nexport {ObservablePipe} from './observable/pipe';\nexport {OrderByPipe} from './order/pipe';\nexport {IdCardPipe} from './id-card/pipe';\nexport {SplitPipe} from './split/pipe';\nexport {UniquePipe} from './unique/pipe';\nexport {Base64DecodePipe} from './base64/pipe';\nexport {CommaSeparatedNumberPipe} from './comma-separate/pipe';\nexport {LinkifyPipe} from './linky/pipe';\nexport {NumberToTextPipe} from './number-text/pipe';\nexport {UnitNumberPipe} from './unit-number/pipe';\nexport {DataItemsPipe} from './data-items/pipe';\nexport {TreeNodesPipe} from './tree-nodes/pipe';\nexport {PercentPipe} from './percent/pipe';\nexport {SubPipe} from './sub/pipe';\nexport {TextPipe} from './text/pipe';\nexport {TimerPipe} from './timer/pipe';\nexport {UpToNowPipe} from './up-to-now/pipe';\nexport {ValuePipe} from './value/pipe';\nexport {DefaultPipe} from './default/pipe';\nexport {TrackerPipe} from './tracker/pipe';\nexport {EmojifyPipe} from './emojify/pipe';\n\nexport const CorePipes = [\n  UpToNowPipe,\n  Base64DecodePipe,\n  CommaSeparatedNumberPipe,\n  LinkifyPipe,\n  NumberToTextPipe,\n  UnitNumberPipe,\n  SubPipe,\n  EmojifyPipe,\n  IdCardPipe,\n  ObservablePipe,\n  StylePipe,\n  SafeHtmlPipe,\n  HighLightPipe,\n  FilterPipe,\n  TrackerPipe,\n  KeyValuePipe,\n  KeysPipe,\n  DataItemsPipe,\n  TreeNodesPipe,\n  JoinPipe,\n  OrderByPipe,\n  SplitPipe,\n  UniquePipe,\n  StylePipe,\n  TextPipe,\n  ValuePipe,\n  DefaultPipe,\n  TimerPipe,\n  PercentPipe\n];\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, CanActivate, Route, RouterStateSnapshot} from '@angular/router';\nimport {AuthUtils} from '../../utils/auth';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    const url: string = state.url;\n    return AuthUtils.checkLogin(url);\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    return this.canActivate(route, state);\n  }\n\n  canLoad(route: Route): boolean {\n    const url = `/${route.path}`;\n    return AuthUtils.checkLogin(url);\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {CanDeactivate} from '@angular/router';\nimport {ActivatedRouteSnapshot, RouterStateSnapshot} from '@angular/router/src/router_state';\nimport {Observable} from 'rxjs';\n\nexport interface CanDeactivateComponent {\n  canDeactivate: () => Observable<boolean> | boolean;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DeactivateGuard implements CanDeactivate<CanDeactivateComponent> {\n  canDeactivate(component: CanDeactivateComponent, currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot) {\n    return component.canDeactivate ? component.canDeactivate() : true;\n  }\n}\n","import {LocationStrategy, PathLocationStrategy} from '@angular/common';\nimport {ErrorHandler, Injectable, Injector, NgZone} from '@angular/core';\nimport {DomUtils} from '@er/utils';\nimport {LogService} from '../log/service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GlobalErrorHandler implements ErrorHandler {\n\n  private logService: LogService;\n  private location: LocationStrategy;\n\n  constructor(private injector: Injector,\n              private zone: NgZone) {\n    this.logService = injector.get(LogService);\n    this.location = injector.get(LocationStrategy);\n  }\n\n  handleError(error) {\n    const message = error.message ? error.message : error.toString();\n    const url = this.location instanceof PathLocationStrategy\n      ? this.location.path() : '';\n    this.logService.error(this, message, url, DomUtils.resolveUserAgent());\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {PreloadingStrategy, Route} from '@angular/router';\nimport {Observable, of} from 'rxjs';\nimport {LogUtils} from '../../utils/log';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigurablePreloadingStrategy implements PreloadingStrategy {\n  preloadedModules: string[] = [];\n\n  preload(route: Route, load: () => Observable<any>): Observable<any> {\n    if (route.data && route.data['preload']) {\n\n      this.preloadedModules.push(route.path);\n\n      LogUtils.debug('Preloaded: ', route.path);\n\n      return load();\n    } else {\n      return of(null);\n    }\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, Resolve, RouterStateSnapshot} from '@angular/router';\nimport {ErRouteData} from '@er/types';\nimport {CommonsUtils} from '@er/utils';\nimport {EMPTY, Observable, of} from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PathPropsDataResolver implements Resolve<{}> {\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<{}> {\n    const routeData: ErRouteData = route.data;\n    if (routeData) {\n      if (!CommonsUtils.isEmpty(routeData)) {\n        const pathValues = route.url.map(seg => seg.path);\n        if (routeData['$props']) {\n          return of(CommonsUtils.get(routeData['$props'], pathValues.join('.')));\n        }\n      }\n    }\n    if (routeData.resource) {\n      // return forkJoin([]).pipe(\n      //   map(results => ({\n      //     tree: results[0],\n      //     table: results[1]\n      //   }))\n    }\n    return EMPTY;\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, Resolve, RouterStateSnapshot} from '@angular/router';\nimport {Observable} from 'rxjs';\n\n/**\n * resolve page model from router\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResourceResolver implements Resolve<any> {\n\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<{ [resourceKey: string]: any }> {\n    if (!route.data || !route.data['props']) { return; }\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {NavigationCancel, NavigationEnd, NavigationError, NavigationStart, Router, RouterEvent} from '@angular/router';\nimport {StateNames} from '@er/types';\nimport {StatesUtils} from '@er/utils';\nimport {RouteUtils} from '../../utils/nav';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RouterStateService {\n\n  constructor(private router: Router) {\n    router.events.subscribe((event: RouterEvent) => {\n      this.navigationInterceptor(event);\n    });\n  }\n\n  private navigationInterceptor(event: RouterEvent) {\n\n    const activeRoute = RouteUtils.getActiveRoute();\n\n    if (event instanceof NavigationStart) {\n      StatesUtils.create(StateNames.nav, {\n        start: true,\n        url: activeRoute.url,\n        outlet: activeRoute.outlet,\n        route: activeRoute\n      });\n    }\n\n    if (event instanceof NavigationEnd) {\n      StatesUtils.update(StateNames.nav, {\n        start: false,\n        status: 'success',\n        url: activeRoute.url,\n        outlet: activeRoute.outlet,\n        route: activeRoute\n      });\n      StatesUtils.update(StateNames.currentRoute, {activeRoute});\n      const title = activeRoute.data && activeRoute.data['title'];\n      if (title) {\n        StatesUtils.update(StateNames.appTitle, {title});\n      }\n    }\n\n    if (event instanceof NavigationCancel) {\n      StatesUtils.update(StateNames.nav, {\n        start: false,\n        status: 'cancel',\n        url: activeRoute.url,\n        outlet: activeRoute.outlet,\n        route: activeRoute\n      });\n    }\n\n    if (event instanceof NavigationError) {\n      StatesUtils.update(StateNames.nav, {\n        start: false,\n        status: 'error',\n        url: activeRoute.url,\n        outlet: activeRoute.outlet,\n        route: activeRoute\n      });\n    }\n  }\n}\n","import {Inject, Injectable, InjectionToken, OnDestroy, Optional} from '@angular/core';\nimport {Title} from '@angular/platform-browser';\nimport {ScheduledTask, StateNames, Task} from '@er/types';\nimport {CommonsUtils, ConfigUtils, StatesUtils} from '@er/utils';\nimport {Subscription, timer} from 'rxjs';\nimport {distinctUntilChanged, filter, map} from 'rxjs/operators';\nimport {DiUtils} from '../../utils/di';\n\nexport const BACKGROUND_TASK_TOKEN = new InjectionToken<Task>('BACKGROUND_TASK_TOKEN');\n\n/**\n * used to run background task globally\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class TaskService implements OnDestroy {\n\n  subs: Subscription[] = [];\n\n  constructor(@Optional() @Inject(BACKGROUND_TASK_TOKEN) tasks: Task[] = []) {\n    StatesUtils.create(StateNames.appTitle, ConfigUtils.getConfig().appTitle, true);\n    setTimeout(() => {\n      this.cleanStates();\n      const _tasks = CommonsUtils.flatten(tasks);\n      if (_tasks && _tasks.length > 0) {\n        _tasks.forEach(task => this.startTask(<Task>task));\n      }\n    }, 2000);\n  }\n\n  updateTitle() {\n    this.subs.push(\n      StatesUtils.observe(StateNames.appTitle)\n        .pipe(\n          filter(state => state && state.hasOwnProperty('title')),\n          map(state => state.title),\n          distinctUntilChanged()\n        )\n        .subscribe(title => {\n          DiUtils.get<Title>(Title).setTitle(title);\n        })\n    );\n  }\n\n  cleanStates() {\n    this.subs.push(\n      timer(30000, 30000)\n        .subscribe(() => {\n          let store = StatesUtils.getStore().value;\n          Object.keys(store).forEach(key => {\n            if (store[key]) {\n              if (!store[key].preserved && (store[key].state && store[key].state.observers.length === 0)) {\n                store = CommonsUtils.omit(store, key);\n              }\n            }\n          });\n          StatesUtils.getStore().next(store);\n        })\n    );\n  }\n\n  startTask(task: Task) {\n    if (CommonsUtils.isFunction(task)) {\n      (task as Function)();\n    } else {\n      const schedule = task as ScheduledTask;\n      let context = schedule.context;\n      if (CommonsUtils.isFunction(schedule.context)) {\n        context = schedule.context();\n      }\n      if (schedule.interval) {\n        this.subs.push(\n          timer(0, schedule.interval)\n            .subscribe(() => {\n              schedule.run(context);\n            })\n        );\n      } else {\n        schedule.run(context);\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subs.forEach(sub => {\n      sub.unsubscribe();\n    });\n  }\n}\n","import {AuthGuard, DeactivateGuard} from './auth/guards';\nimport {GlobalErrorHandler} from './error/service';\nimport {LogService} from './log/service';\nimport {ConfigurablePreloadingStrategy} from './pre-loading/service';\nimport {PathPropsDataResolver} from './resolver/page-model/service';\nimport {ResourceResolver} from './resource/service';\nimport {RouterStateService} from './router/service';\nimport {TaskService} from './task/service';\n\nexport {GlobalErrorHandler} from './error/service';\nexport {AuthGuard, DeactivateGuard} from './auth/guards';\nexport {ConfigurablePreloadingStrategy} from './pre-loading/service';\nexport {TaskService, BACKGROUND_TASK_TOKEN} from './task/service';\nexport {RouterStateService} from './router/service';\nexport {ResourceResolver} from './resource/service';\nexport {LogService} from './log/service';\nexport {PathPropsDataResolver} from './resolver/page-model/service';\n\nexport const CoreServices = [\n  LogService,\n  ResourceResolver,\n  TaskService,\n  RouterStateService,\n  AuthGuard,\n  DeactivateGuard,\n  GlobalErrorHandler,\n  ConfigurablePreloadingStrategy,\n  PathPropsDataResolver\n];\n","import {Title} from '@angular/platform-browser';\nimport {StateNames} from '@er/types';\nimport {StatesUtils} from '@er/utils';\nimport {distinctUntilChanged, filter, map} from 'rxjs/operators';\nimport {DiUtils} from '../utils/di';\n\nexport const updateTitleTask = function () {\n  StatesUtils.observe(StateNames.appTitle)\n    .pipe(\n      filter(appTitle => appTitle && appTitle.hasOwnProperty('title')),\n      map(appTitle => appTitle.title),\n      distinctUntilChanged()\n    )\n    .subscribe(title => {\n      DiUtils.get<Title>(Title).setTitle(title);\n    });\n};\n","import {updateTitleTask} from './update-title';\n\nexport {updateTitleTask} from './update-title';\n\nexport const CORE_TASKS = [\n  updateTitleTask\n];\n","import {Component, Directive, Pipe, Type} from '@angular/core';\nimport 'reflect-metadata';\n\nexport type AllDecorators = Directive & Component & Pipe;\n\nexport class AnnotationsUtils {\n\n  static getFor(type: Type<any>): AllDecorators {\n    const annotations = Reflect.getOwnMetadata('design:type', type);\n\n    if (!Array.isArray(annotations)) {\n      throw Error(`Annotations: Annotations not available for type '${type.name}'`);\n    }\n\n    return annotations[0];\n  }\n\n  static getForDirective(type: Type<any>): Directive {\n    return AnnotationsUtils.getFor(type);\n  }\n\n  static getForComponent(type: Type<any>): Component {\n    return AnnotationsUtils.getFor(type);\n  }\n\n  static getForPipe(type: Type<any>): Pipe {\n    return AnnotationsUtils.getFor(type);\n  }\n\n}\n","import {ApiDataProps, ApiPayload, Order} from '@er/types';\nimport {CommonsUtils, DialogUtils, StatesUtils} from '@er/utils';\nimport * as esb from 'elastic-builder';\nimport {Query} from 'elastic-builder';\nimport {Observable, throwError} from 'rxjs';\nimport {map, tap} from 'rxjs/operators';\nimport {ApiUtils} from '../api';\n\nexport interface NextSeqProps {\n  apiEntry?: string;\n  parent?: string;\n  query?: Query | Query[];\n  parentKey?: string;\n  seqKey?: string;\n  seqLen?: number;\n  withParent?: boolean;\n}\n\nexport interface DistinctValueProps {\n  apiProps?: ApiDataProps;\n  id?: any;\n}\n\nexport class DataUtils {\n\n  static DEFAULT_ROOT_SEQ = '001';\n\n  static DEFAULT_PROPS: NextSeqProps = {\n    parentKey: 'parent.code',\n    seqKey: 'code',\n    seqLen: 3\n  };\n\n  static getNextValue(options: NextSeqProps): Observable<any> {\n    const opt: NextSeqProps = CommonsUtils.defaults(options || {}, DataUtils.DEFAULT_PROPS);\n    const q = CommonsUtils.getArrayValue(opt.query) || [];\n    if (opt.parent) {\n      q.push(esb.termQuery(opt.parentKey, opt.parent));\n    }\n    return ApiUtils.getByQuery(`${opt.apiEntry}`, <ApiPayload>{\n      query: q,\n      sort: {[opt.seqKey]: Order.DESC},\n      size: 1\n    }).pipe(\n      map((data: any) => {\n        const prefix = '0'.repeat(opt.seqLen);\n        let next = 1;\n        if (data.total !== 0) {\n          const last = data.items[0];\n          if (last[opt.seqKey]) {\n            next = parseInt(last[opt.seqKey].replace(/^0+/, '')) + 1;\n          } else {\n            DialogUtils.error('', '');\n            throwError('');\n          }\n        }\n        const seq = (prefix + next).slice(-prefix.length);\n        if (opt.withParent && opt.parent) {\n          return opt.parent + seq;\n        } else {\n          return seq;\n        }\n      })\n    );\n  }\n\n  static checkDistinct(props: DistinctValueProps): Observable<boolean> {\n    const result$ = ApiUtils.fetch({\n      ...props.apiProps,\n      size: 2\n    }).pipe(\n      map((data) => !data.items || data.items.length === 0 ||\n        (data.items.length === 1 && data.items[0]['id'] === props.id)),\n      tap(distinct => {\n        if (!distinct) {\n          DialogUtils.error('', `${props.apiProps.queryValue}`);\n        }\n      })\n    );\n    return result$;\n  }\n\n  static onNodeSelect(event, keyOrQuery) {\n    const treeProps = event['$from'].$props;\n    const tableId = CommonsUtils.get(treeProps, '$ext.$container.table.$id');\n    if (tableId) {\n      let q = keyOrQuery;\n      const nodeCode = event.node.data && event.node.data.code;\n      if (nodeCode && CommonsUtils.isString(keyOrQuery)) {\n        q = esb.prefixQuery(keyOrQuery, nodeCode);\n      }\n      StatesUtils.update(tableId, <ApiPayload>{\n        query: nodeCode ? q : esb.matchAllQuery()\n      });\n    }\n  }\n}\n","import {ApiDataProps, DataAttr, DataField, DataType, RegPatterns} from '@er/types';\nimport {CommonsUtils, ConfigUtils} from '@er/utils';\nimport * as esb from 'elastic-builder';\nimport {LogUtils} from '../log';\n\nexport class DataFieldUtils {\n\n  static getFieldDefaultProps(dataField: DataField) {\n    switch (dataField.dataAttr) {\n      case DataAttr.DATA_CODE:\n        return DataFieldUtils.getDataCodeFieldProps(dataField);\n      case DataAttr.URL:\n        dataField.dataType = DataType.STRING;\n        dataField.pattern = RegPatterns.url;\n        break;\n      case DataAttr.PHONE:\n        dataField.dataType = DataType.STRING;\n        dataField.pattern = RegPatterns.phone;\n        break;\n      case DataAttr.ID_CARD:\n        dataField.dataType = DataType.STRING;\n        break;\n      case DataAttr.EMAIL:\n        dataField.dataType = DataType.STRING;\n        dataField.pattern = RegPatterns.email;\n        break;\n      case DataAttr.CURRENCY:\n        dataField.defaultValue = 0;\n        dataField.dataType = DataType.NUMBER;\n        dataField.pattern = RegPatterns.pNumeric;\n        break;\n    }\n    return dataField;\n  }\n\n  static getDefaultFieldName(field: DataField) {\n    if (field) {\n      if (field.defaultKey) {\n        return field.defaultKey;\n      } else {\n        return field.key;\n      }\n    }\n  }\n\n  static getFieldDisplayContent(fieldValue: any, field: DataField) {\n    if (!fieldValue) {\n      return '';\n    }\n    if (field) {\n      if (CommonsUtils.isJson(fieldValue)) {\n        let key;\n        if (field) {\n          key = DataFieldUtils.getDefaultFieldName(field);\n        }\n        if (key) {\n          return CommonsUtils.get(fieldValue, key);\n        } else {\n          const trans = {};\n          Object.keys(fieldValue).forEach(sub => {\n            const label = CommonsUtils.get(field, `fields.${sub}.label`)\n              && CommonsUtils.get(field, `refer.entity.${sub}.label`)\n              && CommonsUtils.get(field, `refer.${sub}.label`);\n            if (label) {\n              trans[label] = fieldValue[sub];\n            } else {\n              trans[sub] = fieldValue[sub];\n            }\n          });\n          fieldValue = trans;\n        }\n      }\n    }\n    if (CommonsUtils.isBoolean(fieldValue)) {\n      return fieldValue ? '' : '';\n    } else {\n      return CommonsUtils.getText(fieldValue);\n    }\n  }\n\n  private static getDataCodeFieldProps(dataField: DataField) {\n    const props = ConfigUtils.getConfig().dataFieldProps.dataCode;\n    if (!dataField.catCode) {\n      LogUtils.error('DataFieldUtils', `dataCodecatCode`, dataField);\n      return;\n    }\n    return <DataField>{\n      dataType: DataType.JSON,\n      sortKey: props.codeKey,\n      aggKey: props.codeKey,\n      defaultKey: props.nameKey,\n      apiDataProps: <ApiDataProps>{\n        apiEntry: props.apiEntry,\n        searchFields: [props.nameKey, props.codeKey, props.abbrKey],\n        returnFields: [props.nameKey, props.codeKey],\n        query: [\n          esb.termQuery(`${props.catKey}.code`, dataField.catCode),\n          props.inUseKey ? esb.boolQuery().mustNot(esb.termQuery(props.inUseKey, false)) : undefined\n        ],\n        sort: props.codeKey,\n        size: 10\n      },\n      dataItemProps: {\n        labelKey: props.nameKey,\n        valueKey: [props.nameKey, props.codeKey],\n        idKey: props.codeKey,\n        template: (item) => {\n          return `<span><b>${item[props.nameKey]}</b></span>  <span class=\"badge badge-info\"> ${item[props.codeKey]}</span> `;\n        }\n      }\n    };\n  }\n}\n","import {KeyValueChanges} from '@angular/core';\nimport {CommonsUtils} from '@er/utils';\n\nexport class ChangesUtils {\n\n  static getChangeByDiff(diff: KeyValueChanges<any, any>): {\n    changed?: { key: string, value: any, from: any }[],\n    added?: { key: string, value: any }[],\n    deleted?: { key: string, value: any }[]\n  } {\n    if (!diff) { return {}; }\n    const changes = {\n      changed: [],\n      added: [],\n      deleted: []\n    };\n    if (diff) {\n      diff.forEachChangedItem(r => {\n        changes.changed.push({\n          key: r.key,\n          value: r.currentValue,\n          from: r.previousValue\n        });\n      });\n      diff.forEachAddedItem(r => {\n        changes.added.push({\n          key: r.key,\n          value: r.currentValue\n        });\n      });\n      diff.forEachRemovedItem(r => {\n        changes.deleted.push({\n          key: r.key,\n          value: r.previousValue\n        });\n      });\n    }\n    return CommonsUtils.omitBy(changes, CommonsUtils.lodash().isEmpty);\n  }\n}\n","import {ResourceOptions} from '@er/types';\nimport {CommonsUtils, ConfigUtils, StatesUtils} from '@er/utils';\nimport {Observable} from 'rxjs';\nimport {take, tap} from 'rxjs/operators';\nimport {HttpUtils} from '../http';\n\nexport class ResourceUtils {\n\n  static getConfigs(options: ResourceOptions): Observable<any> {\n    let root = '', path;\n    let resourceUri = options.path;\n    const resourcesConfig = {\n      ...ConfigUtils.getConfig().resources,\n      ...options\n    };\n    if (resourcesConfig.root) {\n      if (!resourceUri.startsWith('/')) {\n        root = resourcesConfig.root;\n      } else {\n        resourceUri = resourceUri.substr(1);\n      }\n      if (!resourceUri.endsWith('.json')) {\n        resourceUri += '.json';\n      }\n    } else {\n      root = resourcesConfig.uri;\n    }\n\n    if (options.state) {\n      path = options.state;\n    } else {\n      path = [options.module, options.key];\n    }\n\n    const state = StatesUtils.get(path, true);\n\n    if (!state.value || options.reload) {\n      if (options.initial) {\n        state.next(options.initial);\n      }\n      return HttpUtils.request({\n        uri: `${root}/${resourceUri}`,\n        tag: path,\n        onResponse: (response) => response ? CommonsUtils.restoreJsonFn(response) : null\n      }).pipe(\n        take(1),\n        tap(response => StatesUtils.create(path, response, resourcesConfig.reserve || resourcesConfig.state !== undefined))\n      );\n    } else {\n      return state;\n    }\n  }\n}\n","import {DefaultUrlSerializer, UrlTree} from '@angular/router';\n\nexport class UrlUtils {\n\n  static serializer = new DefaultUrlSerializer();\n\n  static parse(url: string): UrlTree {\n    return UrlUtils.serializer.parse(url.toLowerCase());\n  }\n\n  static serialize(tree: UrlTree): string {\n    return UrlUtils.serialize(tree);\n  }\n}\n","import {ActivatedRouteSnapshot, DetachedRouteHandle} from '@angular/router';\nimport {RouteReuseStrategy} from '@angular/router/';\n\n// https://itnext.io/cache-components-with-angular-routereusestrategy-3e4c8b174d5f\nexport class CachedRouteReuseStrategy implements RouteReuseStrategy {\n  storedRouteHandles = new Map<string, DetachedRouteHandle>();\n  allowRetrieveCache = {};\n\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    if (this.isInOutlet(future['_routerState'].url) || this.isInOutlet(curr['_routerState'].url)) {\n      return future.routeConfig === curr.routeConfig;\n    }\n    return future.routeConfig === curr.routeConfig && (false !== (future.data && future.data.$reuse));\n  }\n\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle | null {\n    return this.storedRouteHandles.get(this.getPath(route)) as DetachedRouteHandle;\n  }\n\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    const path = this.getPath(route);\n    if (this.allowRetrieveCache[path]) {\n      return this.storedRouteHandles.has(this.getPath(route));\n    }\n    return false;\n  }\n\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    const path = this.getPath(route);\n    if (this.allowRetrieveCache.hasOwnProperty(path)) {\n      return true;\n    }\n    return false;\n  }\n\n  store(route: ActivatedRouteSnapshot, detachedTree: DetachedRouteHandle): void {\n    this.storedRouteHandles.set(this.getPath(route), detachedTree);\n  }\n\n  private isInOutlet(url) {\n    return /.*\\(.*:.*\\).*/.test(url);\n  }\n\n  private getPath(route: ActivatedRouteSnapshot): string {\n    if (route.routeConfig !== null && route.routeConfig.path !== null) {\n      return route.routeConfig.path;\n    }\n    return '';\n  }\n}\n","import {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport {APP_INITIALIZER, InjectionToken, Injector, ModuleWithProviders, NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {RouteReuseStrategy, RouterModule} from '@angular/router';\nimport {ConfigModel, NotifyLevel, NotifyType, StateNames, StompStates} from '@er/types';\nimport {ConfigUtils, StatesUtils} from '@er/utils';\nimport {StompConfig, StompService} from '@stomp/ng2-stompjs';\nimport {DynamicModule} from 'ng-dynamic-component';\nimport {NgPipesModule} from 'ngx-pipes';\nimport {distinctUntilChanged, tap} from 'rxjs/operators';\nimport {CoreComponents} from './components/all';\nimport {CoreDirectives} from './directives/all';\nimport {CoreInterceptors} from './interceptors/all';\nimport {CorePipes} from './pipes/all';\nimport {BACKGROUND_TASK_TOKEN} from './services/all';\nimport {RouterStateService} from './services/router/service';\nimport {CachedRouteReuseStrategy} from './services/strategy/service';\nimport {TaskService} from './services/task/service';\nimport {CORE_TASKS} from './tasks/all';\nimport {DateSyncUtils} from './utils/date-sync';\nimport {DiUtils} from './utils/di';\n\nexport const APP_CONFIG = new InjectionToken<string>('APP_CONFIG');\n\nexport function initialize(appConfig: ConfigModel) {\n  return function () {\n   // ConfigUtils.configApp(appConfig);\n  };\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    RouterModule,\n    HttpClientModule,\n    NgPipesModule,\n    DynamicModule.withComponents(CoreComponents)\n  ],\n  declarations: [\n    ...CoreComponents,\n    ...CoreDirectives,\n    ...CorePipes\n  ],\n  exports: [\n    CommonModule,\n    RouterModule,\n    HttpClientModule,\n    NgPipesModule,\n    ...CoreComponents,\n    ...CoreDirectives,\n    ...CorePipes\n  ]\n})\nexport class ErCoreModule {\n\n  constructor(private injector: Injector) {\n    if (!DiUtils.injector) {\n      DiUtils.injector = injector;\n      // load services\n      injector.get<RouterStateService>(RouterStateService);\n      injector.get<TaskService>(TaskService);\n      try {\n        const stompService = injector.get<StompService>(StompService);\n        if (stompService && ConfigUtils.getConfig().stomp.enabled) {\n          stompService.state\n            .pipe(\n              distinctUntilChanged(),\n              tap((state: number) => {\n                StatesUtils.update(StateNames.socket, {state: StompStates[state]});\n                StatesUtils.update(StateNames.notify, {\n                  type: state === 0 ? NotifyType.ANNOUNCE : NotifyType.ALERT,\n                  message: `${StompStates[state]}`,\n                  level: state === 0 ? NotifyLevel.ERROR : NotifyLevel.INFO\n                });\n              })\n            ).subscribe();\n        }\n      } catch (e) {\n      }\n    }\n  }\n\n  static forRoot(appConfig: ConfigModel): ModuleWithProviders {\n    return {\n      ngModule: ErCoreModule,\n      providers: [\n        {provide: APP_CONFIG, useValue: appConfig},\n        // {\n        //   provide: APP_INITIALIZER,\n        //   useFactory: initialize,\n        //   deps: [APP_CONFIG],\n        //   multi: true\n        // },\n        ...CoreInterceptors,\n        appConfig.stomp.enabled ? StompService : [],\n        appConfig.stomp.enabled ? {provide: StompConfig, useValue: appConfig.stomp} : [],\n        {provide: BACKGROUND_TASK_TOKEN, useValue: DateSyncUtils.start, multi: true},\n        {provide: BACKGROUND_TASK_TOKEN, useValue: CORE_TASKS, multi: true},\n        {\n          provide: RouteReuseStrategy,\n          useClass: CachedRouteReuseStrategy\n        }\n      ]\n    };\n  }\n}\n","import {HttpRequest} from '@angular/common/http';\nimport {CommonsUtils} from '@er/utils';\n\nexport function esBoundInterceptor(bounds: any | any[]) {\n\n  return (req: HttpRequest<any>): HttpRequest<any> => {\n\n    let must = [];\n\n    const query = CommonsUtils.get(req, 'body.query');\n\n    if (query) {\n      const bool = CommonsUtils.get(req, 'body.query.bool');\n      if (!bool) {\n        must.push(query);\n      }\n    }\n\n    must = CommonsUtils.get(req, 'body.query.bool.must', must);\n\n    if (!CommonsUtils.isArray(must)) {\n      must = [must];\n    }\n\n    let _bounds = bounds;\n    if (!CommonsUtils.isArray(bounds)) {\n      _bounds = [bounds];\n    }\n\n    _bounds.forEach(bound => {\n      if (must.indexOf(bound) === -1) {\n        if (bound.toJSON) {\n          must.push(bound.toJSON());\n        } else if (CommonsUtils.isFunction(bound)) {\n          must.push(bound(req));\n        } else if (CommonsUtils.isJson(bound)) {\n          must.push(bound);\n        }\n      }\n    });\n    \n    CommonsUtils.set(req, 'body.query.bool.must', must);\n    console.log(must)\n    return req;\n  };\n}\n","export function credentialHttpRequestInterceptor() {\n\n}"]}