/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
export class ObjectDiff {
    constructor() {
        this.openChar = '{';
        this.closeChar = '}';
    }
    /**
     * @param {?} obj1
     * @param {?} obj2
     * @return {?}
     */
    static diff(obj1, obj2) {
        if (!ObjectDiff.instance) {
            ObjectDiff.instance = new ObjectDiff();
        }
        /** @type {?} */
        const diff = ObjectDiff.instance.diffOwnProperties(obj1, obj2);
        return '<pre>' + ObjectDiff.instance.formatChangesToHtml(diff) + '</pre>';
    }
    /**
     * @param {?} a
     * @param {?} b
     * @param {?} shallow
     * @param {?} isOwn
     * @return {?}
     */
    diff(a, b, shallow, isOwn) {
        if (a === b) {
            return this.equalObj(a);
        }
        /** @type {?} */
        const diffValue = {};
        /** @type {?} */
        let equal = true;
        if (!a) {
            a = {};
        }
        for (const key in a) {
            if ((!isOwn && key in b) || (isOwn && b && b.hasOwnProperty(key))) {
                if (a[key] === b[key]) {
                    diffValue[key] = this.equalObj(a[key]);
                }
                else {
                    if (!shallow && this.isValidAttr(a[key], b[key])) {
                        /** @type {?} */
                        const valueDiff = this.diff(a[key], b[key], shallow, isOwn);
                        if (valueDiff.changed === 'equal') {
                            diffValue[key] = this.equalObj(a[key]);
                        }
                        else {
                            equal = false;
                            diffValue[key] = valueDiff;
                        }
                    }
                    else {
                        equal = false;
                        diffValue[key] = {
                            changed: 'primitive change',
                            removed: a[key],
                            added: b[key]
                        };
                    }
                }
            }
            else {
                equal = false;
                diffValue[key] = {
                    changed: 'removed',
                    value: a[key]
                };
            }
        }
        for (const key in b) {
            if ((!isOwn && !(key in a)) || (isOwn && typeof a !== 'undefined' && !a.hasOwnProperty(key))) {
                equal = false;
                diffValue[key] = {
                    changed: 'added',
                    value: b[key]
                };
            }
        }
        if (equal) {
            return this.equalObj(a);
        }
        else {
            return {
                changed: 'object change',
                value: diffValue
            };
        }
    }
    /**
     * @param {?} a
     * @param {?} b
     * @param {?=} shallow
     * @return {?}
     */
    diffOwnProperties(a, b, shallow) {
        return this.diff(a, b, shallow, true);
    }
    /**
     * @param {?} changes
     * @param {?=} shallow
     * @return {?}
     */
    formatToJsonXMLString(changes, shallow) {
        /** @type {?} */
        const properties = [];
        /** @type {?} */
        const diff = changes.value;
        if (changes.changed === 'equal') {
            return this.inspect(diff, shallow);
        }
        for (const key in diff) {
            properties.push(this.formatChange(key, diff[key], shallow));
        }
        return '<span>' + this.openChar + '</span>\n<div class="diff-level">' + properties.join('<span>,</span>\n') + '\n</div><span>' + this.closeChar + '</span>';
    }
    /**
     * @param {?} obj
     * @param {?} shallow
     * @return {?}
     */
    formatToJson(obj, shallow) {
        return this.inspect(obj, shallow);
    }
    /**
     * @param {?} changes
     * @param {?=} shallow
     * @return {?}
     */
    formatChangesToHtml(changes, shallow) {
        /** @type {?} */
        const properties = [];
        if (changes.changed === 'equal') {
            return '';
        }
        /** @type {?} */
        const diff = changes.value;
        for (const key in diff) {
            /** @type {?} */
            const changed = diff[key].changed;
            if (changed !== 'equal')
                properties.push(this.formatChange(key, diff[key], shallow, true));
        }
        return '<span>' + this.openChar + '</span>\n<div class="diff-level">' + properties.join('<span>,</span>\n') + '\n</div><span>' + this.closeChar + '</span>';
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    equalObj(obj) {
        return {
            changed: 'equal',
            value: obj
        };
    }
    /**
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    isValidAttr(a, b) {
        /** @type {?} */
        const typeA = typeof a;
        /** @type {?} */
        const typeB = typeof b;
        return (a && b && (typeA === 'object' || typeA === 'function') && (typeB === 'object' || typeB === 'function'));
    }
    /**
     * @param {?} key
     * @param {?} diffItem
     * @param {?} shallow
     * @param {?=} diffOnly
     * @return {?}
     */
    formatChange(key, diffItem, shallow, diffOnly) {
        /** @type {?} */
        const changed = diffItem.changed;
        /** @type {?} */
        let property;
        switch (changed) {
            case 'equal':
                property = (this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>' + this.inspect(diffItem.value));
                break;
            case 'removed':
                property = ('<del class="diff">' + this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>' + this.inspect(diffItem.value) + '</del>');
                break;
            case 'added':
                property = ('<ins class="diff">' + this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>' + this.inspect(diffItem.value) + '</ins>');
                break;
            case 'primitive change':
                /** @type {?} */
                const prefix = this.stringifyObjectKey(this.escapeHTML(key)) + '<span>: </span>';
                property = ('<del class="diff diff-key">' + prefix + this.inspect(diffItem.removed) + '</del><span>,</span>\n' +
                    '<ins class="diff diff-key">' + prefix + this.inspect(diffItem.added) + '</ins>');
                break;
            case 'object change':
                property = shallow ? '' : (this.stringifyObjectKey(key) + '<span>: </span>' + (diffOnly ? this.formatChangesToHtml(diffItem) : this.formatToJsonXMLString(diffItem)));
                break;
        }
        return property;
    }
    /**
     * @param {?} key
     * @return {?}
     */
    stringifyObjectKey(key) {
        return /^[a-z0-9_$]*$/i.test(key) ?
            key :
            JSON.stringify(key);
    }
    /**
     * @param {?} string
     * @return {?}
     */
    escapeHTML(string) {
        return string.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }
    /**
     * @param {?} obj
     * @param {?=} shallow
     * @return {?}
     */
    inspect(obj, shallow) {
        /** @type {?} */
        const that = this;
        return _inspect('', obj, shallow);
        /**
         * @param {?} accumulator
         * @param {?} obj
         * @param {?=} shallow
         * @return {?}
         */
        function _inspect(accumulator, obj, shallow) {
            switch (typeof obj) {
                case 'object':
                    if (!obj) {
                        accumulator += 'null';
                        break;
                    }
                    if (shallow) {
                        accumulator += '[object]';
                        break;
                    }
                    /** @type {?} */
                    const keys = Object.keys(obj);
                    /** @type {?} */
                    const length = keys.length;
                    if (length === 0) {
                        accumulator += '<span>' + that.openChar + that.closeChar + '</span>';
                    }
                    else {
                        accumulator += '<span>' + that.openChar + '</span>\n<div class="diff-level">';
                        for (let i = 0; i < length; i++) {
                            /** @type {?} */
                            const key = keys[i];
                            accumulator = _inspect(accumulator + that.stringifyObjectKey(that.escapeHTML(key)) + '<span>: </span>', obj[key]);
                            if (i < length - 1) {
                                accumulator += '<span>,</span>\n';
                            }
                        }
                        accumulator += '\n</div><span>' + that.closeChar + '</span>';
                    }
                    break;
                case 'string':
                    accumulator += JSON.stringify(that.escapeHTML(obj));
                    break;
                case 'undefined':
                    accumulator += 'undefined';
                    break;
                default:
                    accumulator += that.escapeHTML(String(obj));
                    break;
            }
            return accumulator;
        }
    }
}
ObjectDiff.instance = undefined;
if (false) {
    /**
     * @type {?}
     * @private
     */
    ObjectDiff.instance;
    /**
     * @type {?}
     * @private
     */
    ObjectDiff.prototype.openChar;
    /**
     * @type {?}
     * @private
     */
    ObjectDiff.prototype.closeChar;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlmZi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Blci9jb3JlLyIsInNvdXJjZXMiOlsibGliL2RpcmVjdGl2ZXMvanNvbi12aWV3ZXIvZGlmZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTSxPQUFPLFVBQVU7SUFBdkI7UUFHVSxhQUFRLEdBQUcsR0FBRyxDQUFDO1FBQ2YsY0FBUyxHQUFHLEdBQUcsQ0FBQztJQThOMUIsQ0FBQzs7Ozs7O0lBNU5DLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUk7UUFDcEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUU7WUFDeEIsVUFBVSxDQUFDLFFBQVEsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1NBQ3hDOztjQUNLLElBQUksR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7UUFDOUQsT0FBTyxPQUFPLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUM7SUFDNUUsQ0FBQzs7Ozs7Ozs7SUFFRCxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSztRQUV2QixJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDWCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDekI7O2NBRUssU0FBUyxHQUFHLEVBQUU7O1lBQ2hCLEtBQUssR0FBRyxJQUFJO1FBRWhCLElBQUksQ0FBQyxDQUFDLEVBQUU7WUFDTixDQUFDLEdBQUcsRUFBRSxDQUFDO1NBQ1I7UUFFRCxLQUFLLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRTtZQUNuQixJQUFJLENBQUMsQ0FBQyxLQUFLLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxD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QUcsQ0FBQyxDQUFDLENBQUM7NEJBQ2xILElBQUksQ0FBQyxHQUFHLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0NBQ2xCLFdBQVcsSUFBSSxrQkFBa0IsQ0FBQzs2QkFDbkM7eUJBQ0Y7d0JBQ0QsV0FBVyxJQUFJLGdCQUFnQixHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO3FCQUM5RDtvQkFDRCxNQUFNO2dCQUVSLEtBQUssUUFBUTtvQkFDWCxXQUFXLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ3BELE1BQU07Z0JBRVIsS0FBSyxXQUFXO29CQUNkLFdBQVcsSUFBSSxXQUFXLENBQUM7b0JBQzNCLE1BQU07Z0JBRVI7b0JBQ0UsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQzVDLE1BQU07YUFDVDtZQUNELE9BQU8sV0FBVyxDQUFDO1FBQ3JCLENBQUM7SUFDSCxDQUFDOztBQS9OYyxtQkFBUSxHQUFlLFNBQVMsQ0FBQzs7Ozs7O0lBQWhELG9CQUFnRDs7Ozs7SUFDaEQsOEJBQXVCOzs7OztJQUN2QiwrQkFBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgT2JqZWN0RGlmZiB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IE9iamVjdERpZmYgPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgb3BlbkNoYXIgPSAneyc7XG4gIHByaXZhdGUgY2xvc2VDaGFyID0gJ30nO1xuXG4gIHN0YXRpYyBkaWZmKG9iajEsIG9iajIpOiBzdHJpbmcge1xuICAgIGlmICghT2JqZWN0RGlmZi5pbnN0YW5jZSkge1xuICAgICAgT2JqZWN0RGlmZi5pbnN0YW5jZSA9IG5ldyBPYmplY3REaWZmKCk7XG4gICAgfVxuICAgIGNvbnN0IGRpZmYgPSBPYmplY3REaWZmLmluc3RhbmNlLmRpZmZPd25Qcm9wZXJ0aWVzKG9iajEsIG9iajIpO1xuICAgIHJldHVybiAnPHByZT4nICsgT2JqZWN0RGlmZi5pbnN0YW5jZS5mb3JtYXRDaGFuZ2VzVG9IdG1sKGRpZmYpICsgJzwvcHJlPic7XG4gIH1cblxuICBkaWZmKGEsIGIsIHNoYWxsb3csIGlzT3duKSB7XG5cbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgcmV0dXJuIHRoaXMuZXF1YWxPYmooYSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlmZlZhbHVlID0ge307XG4gICAgbGV0IGVxdWFsID0gdHJ1ZTtcblxuICAgIGlmICghYSkge1xuICAgICAgYSA9IHt9O1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IGluIGEpIHtcbiAgICAgIGlmICgoIWlzT3duICYmIGtleSBpbiBiKSB8fCAoaXNPd24gJiYgYiAmJiBiLmhhc093blByb3BlcnR5KGtleSkpKSB7XG4gICAgICAgIGlmIChhW2tleV0gPT09IGJba2V5XSkge1xuICAgICAgICAgIGRpZmZWYWx1ZVtrZXldID0gdGhpcy5lcXVhbE9iaihhW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghc2hhbGxvdyAmJiB0aGlzLmlzVmFsaWRBdHRyKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVEaWZmID0gdGhpcy5kaWZmKGFba2V5XSwgYltrZXldLCBzaGFsbG93LCBpc093bik7XG4gICAgICAgICAgICBpZiAodmFsdWVEaWZmLmNoYW5nZWQgPT09ICdlcXVhbCcpIHtcbiAgICAgICAgICAgICAgZGlmZlZhbHVlW2tleV0gPSB0aGlzLmVxdWFsT2JqKGFba2V5XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlcXVhbCA9IGZhbHNlO1xuICAgICAgICAgICAgICBkaWZmVmFsdWVba2V5XSA9IHZhbHVlRGlmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXF1YWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGRpZmZWYWx1ZVtrZXldID0ge1xuICAgICAgICAgICAgICBjaGFuZ2VkOiAncHJpbWl0aXZlIGNoYW5nZScsXG4gICAgICAgICAgICAgIHJlbW92ZWQ6IGFba2V5XSxcbiAgICAgICAgICAgICAgYWRkZWQ6IGJba2V5XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVxdWFsID0gZmFsc2U7XG4gICAgICAgIGRpZmZWYWx1ZVtrZXldID0ge1xuICAgICAgICAgIGNoYW5nZWQ6ICdyZW1vdmVkJyxcbiAgICAgICAgICB2YWx1ZTogYVtrZXldXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gYikge1xuICAgICAgaWYgKCghaXNPd24gJiYgIShrZXkgaW4gYSkpIHx8IChpc093biAmJiB0eXBlb2YgYSAhPT0gJ3VuZGVmaW5lZCcgJiYgIWEuaGFzT3duUHJvcGVydHkoa2V5KSkpIHtcbiAgICAgICAgZXF1YWwgPSBmYWxzZTtcbiAgICAgICAgZGlmZlZhbHVlW2tleV0gPSB7XG4gICAgICAgICAgY2hhbmdlZDogJ2FkZGVkJyxcbiAgICAgICAgICB2YWx1ZTogYltrZXldXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVxdWFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5lcXVhbE9iaihhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2hhbmdlZDogJ29iamVjdCBjaGFuZ2UnLFxuICAgICAgICB2YWx1ZTogZGlmZlZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG5cbiAgZGlmZk93blByb3BlcnRpZXMoYSwgYiwgc2hhbGxvdz8pIHtcbiAgICByZXR1cm4gdGhpcy5kaWZmKGEsIGIsIHNoYWxsb3csIHRydWUpO1xuICB9XG5cbiAgZm9ybWF0VG9Kc29uWE1MU3RyaW5nKGNoYW5nZXMsIHNoYWxsb3c/KSB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IFtdO1xuXG4gICAgY29uc3QgZGlmZiA9IGNoYW5nZXMudmFsdWU7XG4gICAgaWYgKGNoYW5nZXMuY2hhbmdlZCA9PT0gJ2VxdWFsJykge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zcGVjdChkaWZmLCBzaGFsbG93KTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkaWZmKSB7XG4gICAgICBwcm9wZXJ0aWVzLnB1c2godGhpcy5mb3JtYXRDaGFuZ2Uoa2V5LCBkaWZmW2tleV0sIHNoYWxsb3cpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJzxzcGFuPicgKyB0aGlzLm9wZW5DaGFyICsgJzwvc3Bhbj5cXG48ZGl2IGNsYXNzPVwiZGlmZi1sZXZlbFwiPicgKyBwcm9wZXJ0aWVzLmpvaW4oJzxzcGFuPiw8L3NwYW4+XFxuJykgKyAnXFxuPC9kaXY+PHNwYW4+JyArIHRoaXMuY2xvc2VDaGFyICsgJzwvc3Bhbj4nO1xuXG4gIH1cblxuICBmb3JtYXRUb0pzb24ob2JqLCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zcGVjdChvYmosIHNoYWxsb3cpO1xuICB9XG5cbiAgZm9ybWF0Q2hhbmdlc1RvSHRtbChjaGFuZ2VzLCBzaGFsbG93Pykge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBbXTtcblxuICAgIGlmIChjaGFuZ2VzLmNoYW5nZWQgPT09ICdlcXVhbCcpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmID0gY2hhbmdlcy52YWx1ZTtcblxuICAgIGZvciAoY29uc3Qga2V5IGluIGRpZmYpIHtcbiAgICAgIGNvbnN0IGNoYW5nZWQgPSBkaWZmW2tleV0uY2hhbmdlZDtcbiAgICAgIGlmIChjaGFuZ2VkICE9PSAnZXF1YWwnKVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2godGhpcy5mb3JtYXRDaGFuZ2Uoa2V5LCBkaWZmW2tleV0sIHNoYWxsb3csIHRydWUpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJzxzcGFuPicgKyB0aGlzLm9wZW5DaGFyICsgJzwvc3Bhbj5cXG48ZGl2IGNsYXNzPVwiZGlmZi1sZXZlbFwiPicgKyBwcm9wZXJ0aWVzLmpvaW4oJzxzcGFuPiw8L3NwYW4+XFxuJykgKyAnXFxuPC9kaXY+PHNwYW4+JyArIHRoaXMuY2xvc2VDaGFyICsgJzwvc3Bhbj4nO1xuXG4gIH1cblxuICBlcXVhbE9iaihvYmopIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhbmdlZDogJ2VxdWFsJyxcbiAgICAgIHZhbHVlOiBvYmpcbiAgICB9O1xuICB9XG5cbiAgaXNWYWxpZEF0dHIoYSwgYikge1xuICAgIGNvbnN0IHR5cGVBID0gdHlwZW9mIGE7XG4gICAgY29uc3QgdHlwZUIgPSB0eXBlb2YgYjtcbiAgICByZXR1cm4gKGEgJiYgYiAmJiAodHlwZUEgPT09ICdvYmplY3QnIHx8IHR5cGVBID09PSAnZnVuY3Rpb24nKSAmJiAodHlwZUIgPT09ICdvYmplY3QnIHx8IHR5cGVCID09PSAnZnVuY3Rpb24nKSk7XG4gIH1cblxuICBmb3JtYXRDaGFuZ2Uoa2V5LCBkaWZmSXRlbSwgc2hhbGxvdywgZGlmZk9ubHk/KSB7XG4gICAgY29uc3QgY2hhbmdlZCA9IGRpZmZJdGVtLmNoYW5nZWQ7XG4gICAgbGV0IHByb3BlcnR5O1xuICAgIHN3aXRjaCAoY2hhbmdlZCkge1xuICAgICAgY2FzZSAnZXF1YWwnOlxuICAgICAgICBwcm9wZXJ0eSA9ICh0aGlzLnN0cmluZ2lmeU9iamVjdEtleSh0aGlzLmVzY2FwZUhUTUwoa2V5KSkgKyAnPHNwYW4+OiA8L3NwYW4+JyArIHRoaXMuaW5zcGVjdChkaWZmSXRlbS52YWx1ZSkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAncmVtb3ZlZCc6XG4gICAgICAgIHByb3BlcnR5ID0gKCc8ZGVsIGNsYXNzPVwiZGlmZlwiPicgKyB0aGlzLnN0cmluZ2lmeU9iamVjdEtleSh0aGlzLmVzY2FwZUhUTUwoa2V5KSkgKyAnPHNwYW4+OiA8L3NwYW4+JyArIHRoaXMuaW5zcGVjdChkaWZmSXRlbS52YWx1ZSkgKyAnPC9kZWw+Jyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdhZGRlZCc6XG4gICAgICAgIHByb3BlcnR5ID0gKCc8aW5zIGNsYXNzPVwiZGlmZlwiPicgKyB0aGlzLnN0cmluZ2lmeU9iamVjdEtleSh0aGlzLmVzY2FwZUhUTUwoa2V5KSkgKyAnPHNwYW4+OiA8L3NwYW4+JyArIHRoaXMuaW5zcGVjdChkaWZmSXRlbS52YWx1ZSkgKyAnPC9pbnM+Jyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdwcmltaXRpdmUgY2hhbmdlJzpcbiAgICAgICAgY29uc3QgcHJlZml4ID0gdGhpcy5zdHJpbmdpZnlPYmplY3RLZXkodGhpcy5lc2NhcGVIVE1MKGtleSkpICsgJzxzcGFuPjogPC9zcGFuPic7XG4gICAgICAgIHByb3BlcnR5ID0gKFxuICAgICAgICAgICc8ZGVsIGNsYXNzPVwiZGlmZiBkaWZmLWtleVwiPicgKyBwcmVmaXggKyB0aGlzLmluc3BlY3QoZGlmZkl0ZW0ucmVtb3ZlZCkgKyAnPC9kZWw+PHNwYW4+LDwvc3Bhbj5cXG4nICtcbiAgICAgICAgICAnPGlucyBjbGFzcz1cImRpZmYgZGlmZi1rZXlcIj4nICsgcHJlZml4ICsgdGhpcy5pbnNwZWN0KGRpZmZJdGVtLmFkZGVkKSArICc8L2lucz4nKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ29iamVjdCBjaGFuZ2UnOlxuICAgICAgICBwcm9wZXJ0eSA9IHNoYWxsb3cgPyAnJyA6ICh0aGlzLnN0cmluZ2lmeU9iamVjdEtleShrZXkpICsgJzxzcGFuPjogPC9zcGFuPicgKyAoZGlmZk9ubHkgPyB0aGlzLmZvcm1hdENoYW5nZXNUb0h0bWwoZGlmZkl0ZW0pIDogdGhpcy5mb3JtYXRUb0pzb25YTUxTdHJpbmcoZGlmZkl0ZW0pKSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wZXJ0eTtcbiAgfVxuXG4gIHN0cmluZ2lmeU9iamVjdEtleShrZXkpIHtcbiAgICByZXR1cm4gL15bYS16MC05XyRdKiQvaS50ZXN0KGtleSkgP1xuICAgICAga2V5IDpcbiAgICAgIEpTT04uc3RyaW5naWZ5KGtleSk7XG4gIH1cblxuXG4gIGVzY2FwZUhUTUwoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7Jyk7XG4gIH1cblxuICBpbnNwZWN0KG9iaiwgc2hhbGxvdz8pIHtcblxuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuXG4gICAgcmV0dXJuIF9pbnNwZWN0KCcnLCBvYmosIHNoYWxsb3cpO1xuXG4gICAgZnVuY3Rpb24gX2luc3BlY3QoYWNjdW11bGF0b3IsIG9iaiwgc2hhbGxvdz8pIHtcbiAgICAgIHN3aXRjaCAodHlwZW9mIG9iaikge1xuICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRvciArPSAnbnVsbCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoYWxsb3cpIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9ICdbb2JqZWN0XSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgICAgY29uc3QgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gJzxzcGFuPicgKyB0aGF0Lm9wZW5DaGFyICsgdGhhdC5jbG9zZUNoYXIgKyAnPC9zcGFuPic7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9ICc8c3Bhbj4nICsgdGhhdC5vcGVuQ2hhciArICc8L3NwYW4+XFxuPGRpdiBjbGFzcz1cImRpZmYtbGV2ZWxcIj4nO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICBhY2N1bXVsYXRvciA9IF9pbnNwZWN0KGFjY3VtdWxhdG9yICsgdGhhdC5zdHJpbmdpZnlPYmplY3RLZXkodGhhdC5lc2NhcGVIVE1MKGtleSkpICsgJzxzcGFuPjogPC9zcGFuPicsIG9ialtrZXldKTtcbiAgICAgICAgICAgICAgaWYgKGkgPCBsZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gJzxzcGFuPiw8L3NwYW4+XFxuJztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gJ1xcbjwvZGl2PjxzcGFuPicgKyB0aGF0LmNsb3NlQ2hhciArICc8L3NwYW4+JztcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICBhY2N1bXVsYXRvciArPSBKU09OLnN0cmluZ2lmeSh0aGF0LmVzY2FwZUhUTUwob2JqKSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICBhY2N1bXVsYXRvciArPSAndW5kZWZpbmVkJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGFjY3VtdWxhdG9yICs9IHRoYXQuZXNjYXBlSFRNTChTdHJpbmcob2JqKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuICB9XG59XG4iXX0=