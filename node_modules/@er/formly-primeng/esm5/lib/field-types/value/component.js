/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component } from '@angular/core';
import { DataFieldUtils } from '@er/core';
import { BehaviorSubject } from 'rxjs';
import { PngFormlyFieldType } from '../../base/field-type';
/**
 * @record
 */
export function ValueProps() { }
if (false) {
    /** @type {?} */
    ValueProps.prototype.render;
}
var PngFormlyFieldValueComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PngFormlyFieldValueComponent, _super);
    function PngFormlyFieldValueComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.value$ = new BehaviorSubject('');
        return _this;
    }
    /**
     * @return {?}
     */
    PngFormlyFieldValueComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        _super.prototype.ngOnInit.call(this);
        if (this.formControl) {
            this.form.valueChanges.subscribe(function (value) {
                if (_this.props['render']) {
                    _this.value$.next(_this.props['render'](_this.formControl.value, _this.model, _this.field['dataField']));
                }
                else {
                    if (_this.field['dataField']) {
                        _this.value$.next(DataFieldUtils.getFieldDisplayContent(_this.formControl.value, _this.field['dataField']));
                    }
                    else {
                        _this.value$.next(_this.formControl.value || '【未填】');
                    }
                }
            });
        }
    };
    PngFormlyFieldValueComponent.decorators = [
        { type: Component, args: [{
                    template: "\n    <span class=\"field-value font-weight-bold\" [innerHTML]=\"value$|async|erText\"></span>\n  "
                }] }
    ];
    return PngFormlyFieldValueComponent;
}(PngFormlyFieldType));
export { PngFormlyFieldValueComponent };
if (false) {
    /** @type {?} */
    PngFormlyFieldValueComponent.prototype.value$;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVyL2Zvcm1seS1wcmltZW5nLyIsInNvdXJjZXMiOlsibGliL2ZpZWxkLXR5cGVzL3ZhbHVlL2NvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQVMsTUFBTSxlQUFlLENBQUM7QUFDaEQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUN4QyxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQ3JDLE9BQU8sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLHVCQUF1QixDQUFDOzs7O0FBRXpELGdDQUVDOzs7SUFEQyw0QkFBaUM7O0FBR25DO0lBS2tELHdEQUFrQjtJQUxwRTtRQUFBLHFFQXlCQztRQWxCQyxZQUFNLEdBQUcsSUFBSSxlQUFlLENBQU0sRUFBRSxDQUFDLENBQUM7O0lBa0J4QyxDQUFDOzs7O0lBaEJDLCtDQUFROzs7SUFBUjtRQUFBLGlCQWVDO1FBZEMsaUJBQU0sUUFBUSxXQUFFLENBQUM7UUFDakIsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxVQUFBLEtBQUs7Z0JBQ3BDLElBQUksS0FBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRTtvQkFDeEIsS0FBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsS0FBSyxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNyRztxQkFBTTtvQkFDTCxJQUFJLEtBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEVBQUU7d0JBQzNCLEtBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztxQkFDMUc7eUJBQU07d0JBQ0wsS0FBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLENBQUM7cUJBQ3BEO2lCQUNGO1lBQ0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7O2dCQXhCRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLG9HQUVUO2lCQUNGOztJQXFCRCxtQ0FBQztDQUFBLEFBekJELENBS2tELGtCQUFrQixHQW9CbkU7U0FwQlksNEJBQTRCOzs7SUFFdkMsOENBQXNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0RhdGFGaWVsZFV0aWxzfSBmcm9tICdAZXIvY29yZSc7XG5pbXBvcnQge0JlaGF2aW9yU3ViamVjdH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1BuZ0Zvcm1seUZpZWxkVHlwZX0gZnJvbSAnLi4vLi4vYmFzZS9maWVsZC10eXBlJztcblxuZXhwb3J0IGludGVyZmFjZSBWYWx1ZVByb3BzIHtcbiAgcmVuZGVyOiAodmFsdWUsIGZpZWxkKSA9PiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICB0ZW1wbGF0ZTogYFxuICAgIDxzcGFuIGNsYXNzPVwiZmllbGQtdmFsdWUgZm9udC13ZWlnaHQtYm9sZFwiIFtpbm5lckhUTUxdPVwidmFsdWUkfGFzeW5jfGVyVGV4dFwiPjwvc3Bhbj5cbiAgYFxufSlcbmV4cG9ydCBjbGFzcyBQbmdGb3JtbHlGaWVsZFZhbHVlQ29tcG9uZW50IGV4dGVuZHMgUG5nRm9ybWx5RmllbGRUeXBlIGltcGxlbWVudHMgT25Jbml0IHtcblxuICB2YWx1ZSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oJycpO1xuXG4gIG5nT25Jbml0KCkge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG4gICAgaWYgKHRoaXMuZm9ybUNvbnRyb2wpIHtcbiAgICAgIHRoaXMuZm9ybS52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKHZhbHVlID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHNbJ3JlbmRlciddKSB7XG4gICAgICAgICAgdGhpcy52YWx1ZSQubmV4dCh0aGlzLnByb3BzWydyZW5kZXInXSh0aGlzLmZvcm1Db250cm9sLnZhbHVlLCB0aGlzLm1vZGVsLCB0aGlzLmZpZWxkWydkYXRhRmllbGQnXSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLmZpZWxkWydkYXRhRmllbGQnXSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSQubmV4dChEYXRhRmllbGRVdGlscy5nZXRGaWVsZERpc3BsYXlDb250ZW50KHRoaXMuZm9ybUNvbnRyb2wudmFsdWUsIHRoaXMuZmllbGRbJ2RhdGFGaWVsZCddKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUkLm5leHQodGhpcy5mb3JtQ29udHJvbC52YWx1ZSB8fCAn44CQ5pyq5aGr44CRJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==