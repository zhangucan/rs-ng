{"version":3,"sources":["ng://@er/utils/lib/utils.ts","node_modules/tslib/tslib.es6.js","ng://@er/utils/lib/cache/index.ts","ng://@er/utils/lib/comm/index.ts","ng://@er/utils/lib/regex/index.ts","ng://@er/utils/lib/browser/index.ts","ng://@er/utils/lib/color/index.ts","ng://@er/utils/lib/data-item/index.ts","ng://@er/utils/lib/chart/index.ts","ng://@er/utils/lib/copier/index.ts","ng://@er/utils/lib/devices/index.ts","ng://@er/utils/lib/states/index.ts","ng://@er/utils/lib/date/index.ts","ng://@er/utils/lib/entity/index.ts","ng://@er/utils/lib/lang/objects.ts","ng://@er/utils/lib/lang/dict.ts","ng://@er/utils/lib/file/index.ts","ng://@er/utils/lib/id-card/index.ts","ng://@er/utils/lib/form/index.ts","ng://@er/utils/lib/context/index.ts","ng://@er/utils/lib/config/index.ts","ng://@er/utils/lib/dialog/index.ts","ng://@er/utils/lib/menu/index.ts","ng://@er/utils/lib/dom/index.ts","ng://@er/utils/lib/encode/index.ts","ng://@er/utils/lib/jwt/index.ts","ng://@er/utils/lib/uuid/index.ts","ng://@er/utils/lib/pinyin/index.ts","ng://@er/utils/lib/image/index.ts","ng://@er/utils/lib/pager/index.ts","ng://@er/utils/lib/tree/index.ts","ng://@er/utils/lib/announce/index.ts","ng://@er/utils/lib/notify/index.ts","ng://@er/utils/lib/rx/index.ts","ng://@er/utils/lib/url/index.ts","ng://@er/utils/lib/tokenizer/index.ts","ng://@er/utils/lib/es/index.ts","ng://@er/utils/lib/n2t/index.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","CacheUtils","getSeq","seq","getModuleId","moduleId","get","type","key","typeCache","getTypeCache","put","data","Map","cache","set","CommonsUtils","lodash","_","getRandomNumber","max","min","Math","floor","random","getObjWhenStr","src","_a","getVarType","object","VarType","UNKNOWN","NULL","undefined","UNDEFINED","BOOLEAN","objectType","STRING","NUMBER","FUNCTION","constructor","ARRAY","JSON","isNullOrUndefined","isString","obj","isBoolean","isEmptyString","trim","isArray","isNumber","isJson","isFunction","isUrl","str","test","isInteger","isEqual","other","_.isEqual","copy","_.cloneDeep","merge","obj1","obj2","_i","_.merge","pickBy","predicate","_.pickBy","pick","keys","_.pick","defaults","_.defaultsDeep","equals","path","_.set","defaultValue","_.get","extend","source","_.extend","compact","collection","_.compact","omit","_.omit","omitBy","_.omitBy","unset","_.unset","find","_.find","findIndex","_.findIndex","remove","_.remove","forOwn","iteratee","_.forOwn","map","_.map","unique","by","_.uniqBy","orderBy","iteratees","orders","_.orderBy","union","_.union","flatten","_.flatten","flattenDeep","_.flattenDeep","format","jsonConcat","o1","o2","escape","__rest","indexOf","getOwnPropertySymbols","filter","_.filter","where","every","capitalize","charAt","toUpperCase","slice","templateStr","vars","_.template","compiled","isTemplateStr","getArray","item","keyName","items","c","removeKeys","pop","v","isEmpty","extract","from","to","target","splice","addItem","srcArray","index","toAdd","removeByIndex","a","replace","element","move","forward","head","mid","tail","restoreFn","toLocaleLowerCase","Function","exclude","k","reduce","acc","replaceObj","_b","src1","src2","restoreJsonFn","json","jsonStr","stringify","parse","replacer","toString","hash","charCodeAt","adaptObject","options","adaptArray","adaptJson","result","forEach","srcValue","tarKey","getAge","dateString","today","Date","birthDate","age","getFullYear","getMonth","getDate","toDate","dateNumber","isNaN","isBefore","tar","date","original","isAfter","a_1","join","convertToBoolean","attributes","l_attributes","flatPath","arr","seperator","joiner","deepFind","predicates","_find","Array","prop","some","found","foundResults","sleep","milliseconds","start","getTime","getArrayValue","split","getText","getValue","exp","context","fn","startsWith","substr","defineHiddenProp","defineProperty","enumerable","writable","configurable","splitBySize","size","results","resolveUrl","url","params","RegUtils","escapeRegexp","regexStr","getRegexps","pattern","exps","patterns","patterns_1","tslib_1.__values","patterns_1_1","getRegexp","regex","RegExp","and","or","not","exec","string","self","res","RegPatterns","letter","digit","character","integer","numeric","bowser","require","BrowserOsUtils","isMobile","Devices","DEVICES","ANDROID","IPHONE","I_POD","BLACKBERRY","FIREFOX_OS","WINDOWS_PHONE","VITA","device_info","device","isTablet","I_PAD","isDesktop","PS4","CHROME_BOOK","getDeviceInfo","window","navigator","ua","userAgent","mappings","const","mapping","previousValue","currentValue","browser_version","browser","BROWSERS","re","BROWSER_VERSIONS_RE","os","os_version","checkBrowser","isBrowserVersionValid","version","features","isBrowserFeaturesValid","getParser","satisfies","windows","internet explorer","macos","safari","chrome","firefox","opera","supported","feature","Modernizr","UI_COLORS_COUNT","ColorUtils","getColorsCount","UI_COLORS","getColor","offset","colorIndex","matched","color","DataItemUtils","transItems","config","_data","groups","transItem","groupKey","group","getItemLabel","label","ITEM_LABEL_KEY","labelKey","ITEM_VALUE_KEY","getItemValue","valueKey","ITEM_DATA_KEY","value_1","val","s_1","lb","getLabel","aLabel","ITEM_GROUP_KEY","ITEM_GROUP_ITEMS_KEY","ChartUtils","buildChartData","rawData","chartOptions","dimensionsIndex","dimension","dataSrcPath","dataItemProps","title","ChartType","BAR","buildBarChart","LINE","buildLineChart","PIE","buildPieChart","AREA","buildAreaChart","RADAR","buildRadarChart","DOUGHNUT","dataItems","labels","datasets","backgroundColor","hoverBackgroundColor","fill","borderColor","pointBackgroundColor","pointHoverBorderColor","pointBorderColor","pointHoverBackgroundColor","CopierUtils","copyText","text","createTextareaAndSelect","copySuccessful","document","execCommand","removeFake","textarea","createElement","style","fontSize","setProperty","yPosition","pageYOffset","documentElement","scrollTop","top","setAttribute","body","appendChild","select","setSelectionRange","removeChild","DevicesUtils","getMediaDevices","mediaDevices","enumerateDevices","console","pipe","devices","devices_1","devices_1_1","deviceI","log","deviceId","id","getVideoDevices","kind","getAudioDevices","playBeepSound","Audio","play","getMediaStream","constrains","observableThrowError","video","facingMode","exact","getUserMedia","stream","catchError","err","stopMedia","mediaStream","getTracks","track","stop","takeImage","videoEle","canvasEle","dimensions","videoWidth","videoHeight","width","height","getContext","drawImage","mimeType","dataUrl","toDataURL","of","APP_STORE","BehaviorSubject","StatesUtils","getStore","create","preserved","storeItem","getStoreItem","state","createWhenAbsent","observe","toggle","inc","newValue","dec","add","final","delete","update","patch","deleteState","complete","createdAt","getMilliseconds","moment","momentNs","DateUtils","getMoment","isMoment","isDate","getFormattedDate","getFormattedDateTime","getFormattedTime","momentData","dateState","StateNames","serverTime","getStamp","getDateByNow","present","due","seconds","message","_due","round","abs","minutes","hours","days","months","years","getUpdateSeconds","hr","getYear","getDay","getYesterday","getTomorrow","getLastMonth","month","getNextMonth","DataEntityUtils","getEntityData","entity","keysData","fields","getDataEntityDefaultFieldName","defaultField","ObjectUtils","hasChanged","createDict","copyDict","dict","hasKey","FileUtils","readFile","file","readAs","reader","FileReader","fileReader$","fromEvent","first","ReadAs","BINARY","readAsArrayBuffer","readAsBinaryString","URL","readAsDataURL","TEXT","readAsText","IdCardUtils","idCardNo","status","msg","year","time","now_time","dates","b","id_array","sum","parseInt","idxSexStart","birthYearSpan","idxSex","gender","day","birthday","d","monthFloor","FormUtils","getFormControl","form","_form","control","controls","FormGroup","setValue","emitEvent","emitModelToViewChange","emitViewToModelChange","ContextUtils","now","lastYear","lastMonth","yesterday","user","resolveVariables","resolveJson","resolveArray","resolveValue","template","resolved","DEFAULT_APP_CONFIG","stomp","enabled","destination","headers","heartbeat_in","heartbeat_out","reconnect_delay","debug","auth","storageKey","headerName","authScheme","userTokenKey","passwordKey","rememberMeKey","requiredUserProps","loginRouter","loginApiOptions","serverType","ApiServerType","App","loginSuccessRouter","logoutSuccessRouter","alert","announce","notify","NotifyType","ALERT","onLoading","enableLogger","dataFieldProps","dataCode","apiEntry","codeKey","nameKey","parentKey","catKey","wechat","self_redirect","scope","href","enableApp","enableRoute","level","LogLevel","DEBUG","httpPost","blackLList","ConfigUtils","getConfig","moduleConfig","appConfig","configApp","customer","configModule","moduleConf","lastUrl","lastConfig","namePath","DialogUtils","confirm","header","content","open","stateValue","accept","popup","maximizable","info","minWidth","closeLabel","visible","MenuUtils","getUserMenuItems","menuItems","roles","permissions","filtered","menuItem","menuRole","menuPermission","subItems","transMenuItems","nodes","children","item2","icon","node","DomUtils","calculatedScrollbarWidth","addClass","className","classList","addClasses","styles","removeClass","hasClass","contains","siblings","parentNode","child","selector","querySelectorAll","findSingle","querySelector","childNodes","num","nodeType","relativePosition","left","elementDimensions","offsetParent","offsetWidth","offsetHeight","getHiddenElementDimensions","targetHeight","targetWidth","targetOffset","getBoundingClientRect","viewport","getWindowScrollTop","getViewport","absolutePosition","elementOuterHeight","elementOuterWidth","targetOuterHeight","targetOuterWidth","windowScrollTop","windowScrollLeft","getWindowScrollLeft","getHiddenElementOuterHeight","visibility","display","elementHeight","getHiddenElementOuterWidth","elementWidth","scrollInView","container","borderTopValue","getComputedStyle","getPropertyValue","borderTop","parseFloat","paddingTopValue","paddingTop","containerRect","scroll","clientHeight","itemHeight","getOuterHeight","fadeIn","duration","opacity","last","tick","requestAnimationFrame","setTimeout","fadeOut","ms","gap","fading","setInterval","intervalCallback","clearInterval","doc","clientTop","pageXOffset","scrollLeft","clientLeft","matches","Element","webkitMatchesSelector","getOuterWidth","el","margin","marginLeft","marginRight","getHorizontalPadding","paddingLeft","paddingRight","getHorizontalMargin","innerWidth","getInnerHeight","paddingBottom","marginTop","marginBottom","getHeight","borderTopWidth","borderBottomWidth","getWidth","borderLeftWidth","borderRightWidth","win","g","getElementsByTagName","clientWidth","innerHeight","getOffset","rect","getUserAgent","resolveUserAgent","toLowerCase","match","tag","classNames","parentElement","removeHost","nativeElement","firstChild","insertBefore","isIE","isElement","Error","invokeElementMethod","methodName","args","clearSelection","getSelection","empty","removeAllRanges","rangeCount","getRangeAt","getClientRects","HTMLElement","nodeName","getBrowser","calculateScrollbarWidth","scrollDiv","scrollbarWidth","zindex","EncodeUtils","base64decode","output","String","bc","bs","buffer","idx","fromCharCode","base64DecodeUnicode","decodeURIComponent","JwtUtils","urlBase64Decode","decodeToken","token","parts","decoded","getTokenExpirationDate","setUTCSeconds","isValid","offsetSeconds","valueOf","IdUtils","getRandom","getUUID","crypto","_random4","buf","Uint16Array","getRandomValues","_pad4","ret","substring","PinyinUtil","getFirstLetter","pinyinlite","py","getPinYin","ImageUtil","getBase64","fileContent$","upload","PagerUtil","getPagerModel","totalItems","currentPage","pageSize","startPage","endPage","totalPages","ceil","startIndex","endIndex","pages","range","TreeUtils","transNodes","keyMap","root","lazy","rootNode","treeKeys","levelIdLength","orderKey","idKey","parentId","dataKey","childrenKey","leafKey","findNode","treeNodes","props","DEFAULT_TREE_NODE_KEYS","list","clone","expandNode","isExpand","toExpandLevel","currentLevel","expanded","initNode","childNode","_inited","iconType","initIcon","selectable","method","DEFAULT_NODE_PROPS","getSelectedTreeState","siblingId","sibling","component","treeId","getSelectedNode","treeState","getSelectedNodeValue","autoExpandLevel","expandedIcon","collapsedIcon","AnnounceUtils","ANNOUNCE","NotifyLevel","ERROR","success","SUCCESS","warn","WARN","NotifyUtils","RxUtils","retry","count","wait","retryWhen","errors","scan","delay","UrlUtils","getQueryParameters","getQueryParametersUsingParameters","location","search","bind","getInitialUrlParameters","questionMarkIndex","initialUrl","getReturnUrl","queryStringObj","returnUrl","getSingleSignIn","ss","TokenizerUtils","ExtractionResult","formatTokens","FormatStringTokenizer","Tokenize","currentToken","previousToken","Type","FormatStringTokenType","ConstantText","Text","isMatch","matchIndex","name","lastToken","DynamicValue","values","FormatStringToken","includeBracketsForDynamicValues","tokens","currentText","inDynamicValue","dynamicValue","EsUtils","parseEsbObject","getFieldAggs","aggMethods","aggs_1","AggMethodsProps","avg","esb.avgAggregation","toJSON","distinct","esb.cardinalityAggregation","esb.maxAggregation","esb.minAggregation","esb.sumAggregation","esb.valueCountAggregation","resolveQuery","query","must","should","but","resolveSearchFields","searchFields","qs","field","withPy","withWildcard","esb.wildcardQuery","queryValue","esb.prefixQuery","withZh","withTerm","esb.termQuery","withPrefix","esb.matchQuery","buildQueryBody","esb.requestBodySearch","boolQuery","esb.boolQuery","queries","minimumShouldMatch","mustNot","returnFields","sort","sorts_1","resolveSort","esSorts_1","esb.sort","Order","ASC","unmappedType","sorts","aggProps","aggs","parseAggProps","agg","aggProp","aggName","AggMethods","CUSTOMER","AVG","missing","MIN","MAX","SUM","DISTINCT","HISTOGRAM","esb.histogramAggregation","interval","minDocCount","minCount","DATE_HISTOGRAM","esb.dateHistogramAggregation","AggInterval","DAY","intervalProp","AggIntervalProps","COUNT","esb.termsAggregation","resolveRequestBody","RequestBodySearch","payload","_body","sorts_2","esSorts_2","order","unmapped_type","page","esQuery_1","queryBody_1","queryResolver","must_not","filterBody_1","bool","getMsearchBody","q","buildQueryRuleSet","ruleSet","DEFAULT_ES_QUERY_CONDITION","DEFAULT_QUERY_CONDITION","rule","clause","_this","get_value","aRule","transform","operator","ES_QUERY_OPERATORS","part","inputs","keyVal","valueMapper","exists","make_query","resolveAggs","resolveBuckets","buckets","bucket","resolveBucket","queryBody","_qs","mapValues","changed","_c","setKey","removeKey","keys_1","keys_1_1","fromKeys","keys_2","keys_2_1","numToText","_num","units","_units","zero2Nine","reverse","unitsLen","numLen","__num","__str","j","currentNum","currentUnit"],"mappings":"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","sourcesContent":["// import {TreeUtils} from './tree';\n// import {CommonsUtils} from './comm';\n// import {ConfigUtils} from './config';\n// import {ContextUtils} from './context';\n// import {ObjectUtils} from './lang';\n// import {RegUtils} from './regex';\n// import {StatesUtils} from './states';\n\nexport interface ErUtils {\n  [key: string]: any;\n // none: 'none'\n // common: typeof CommonsUtils;\n  // context: typeof ContextUtils;\n  // config: typeof ConfigUtils;\n  // object: typeof ObjectUtils;\n  // states: typeof StatesUtils;\n  // reg: typeof RegUtils;\n  // tree: typeof TreeUtils;\n}\n\nexport const Utils: ErUtils =  {\n  // common: CommonsUtils,\n  // context: ContextUtils,\n  // config: ConfigUtils,\n  // object: ObjectUtils,\n  // states: StatesUtils,\n  // reg: RegUtils,\n  // tree: TreeUtils,\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class CacheUtils {\n\n  private static cache: Map<string, Map<any, any>> = new Map();\n\n  private static seq = 0;\n\n  private static moduleId = 0;\n\n  static getSeq() {\n    return ++CacheUtils.seq;\n  }\n\n  static getModuleId() {\n    return ++CacheUtils.moduleId;\n  }\n\n  static get<T = any>(type: string, key: any): T {\n    const typeCache: Map<string, any> = CacheUtils.getTypeCache(type);\n    if (!typeCache) {\n      return null;\n    }\n    return typeCache.get(key);\n  }\n\n  static put<T = any>(type: string, key: any, data: T) {\n    let typeCache = CacheUtils.getTypeCache(type);\n    if (!typeCache) {\n      typeCache = new Map();\n      CacheUtils.cache.set(type, typeCache);\n    }\n    typeCache.set(key, data);\n  }\n\n  private static getTypeCache(type: string): Map<any, any> {\n    return CacheUtils.cache.get(type);\n  }\n}\n","import {VarType} from '@er/types';\nimport * as _ from 'lodash';\nimport {CacheUtils} from '../cache';\n\nexport class CommonsUtils {\n\n  static lodash(): typeof _ {\n    return _;\n  }\n\n  static getSeq(): number {\n    return CacheUtils.getSeq();\n  }\n\n  static getRandomNumber(max: number = 10, min?: number): number {\n    const result = Math.floor(Math.random() * (max + 1) + (min || 0));\n    return result;\n  }\n\n  static getObjWhenStr<T extends { [key: string]: any }>(src: string | T, key: keyof T): T {\n    const result = (typeof src === 'string') ? {[key]: src} as T : src;\n    return result;\n  }\n\n  static getVarType(object): VarType {\n    let type = VarType.UNKNOWN;\n    if (object === null) {\n      type = VarType.NULL;\n    } else if (object === undefined) {\n      type = VarType.UNDEFINED;\n    } else if (object === true || object === false) {\n      type = VarType.BOOLEAN;\n    }\n    if (type !== VarType.UNKNOWN) {\n      return type;\n    }\n    const objectType = typeof object;\n    if (objectType === 'string') {\n      // if (DateUtils.isDate(object)) {\n      //   return VarType.DATE;\n      // }\n      type = VarType.STRING;\n    } else if (objectType === 'number') {\n      type = VarType.NUMBER;\n    } else if (objectType === 'function') {\n      type = VarType.FUNCTION;\n    }\n    if (object.constructor === [].constructor) {\n      type = VarType.ARRAY;\n    } else if (object.constructor === {}.constructor) {\n      type = VarType.JSON;\n    }\n    return type;\n  }\n\n  static isNullOrUndefined(value: any) {\n    return value === undefined || value === null;\n  }\n\n  static isString(obj) {\n    return CommonsUtils.getVarType(obj) === VarType.STRING;\n  }\n\n  static isBoolean(obj) {\n    return CommonsUtils.getVarType(obj) === VarType.BOOLEAN;\n  }\n\n  static isEmptyString(s) {\n    return !s || CommonsUtils.isString(s) && s.trim().length === 0;\n  }\n\n  static isArray(obj) {\n    return CommonsUtils.getVarType(obj) === VarType.ARRAY;\n  }\n\n  static isNumber(obj) {\n    return CommonsUtils.getVarType(obj) === VarType.NUMBER;\n  }\n\n  static isJson(obj) {\n    return CommonsUtils.getVarType(obj) === VarType.JSON;\n  }\n\n  static isFunction(obj) {\n    return CommonsUtils.getVarType(obj) === VarType.FUNCTION;\n  }\n\n  static isUrl(str) {\n    const regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n    return regexp.test(str);\n  }\n\n  static isInteger(str: string) {\n    return !CommonsUtils.isNullOrUndefined(str) && /^\\d+$/.test(str);\n  }\n\n  static isEqual(value, other) {\n    return _.isEqual(value, other);\n  }\n\n  static copy(obj: any) {\n    return _.cloneDeep(obj);\n  }\n\n  static merge(obj1, ...obj2) {\n    return _.merge.apply(null, [obj1, ...obj2]);\n  }\n\n  static pickBy(obj, predicate) {\n    return _.pickBy(obj, predicate);\n  }\n\n  static pick(obj, keys) {\n    return _.pick(obj, keys);\n  }\n\n  static defaults(obj1, ...obj2) {\n    return _.defaultsDeep.apply(undefined, [obj1, ...obj2]);\n  }\n\n  static equals(obj1, obj2) {\n    return _.isEqual(obj1, obj2);\n  }\n\n  static set(obj: { [key: string]: any }, path: string | string[], value: any) {\n    return _.set(obj, path, value);\n  }\n\n  static get(obj, path: string | string[], defaultValue?: any) {\n    return _.get(obj, path, defaultValue);\n  }\n\n  static extend(obj, source) {\n    return _.extend(obj, source);\n  }\n\n  static compact(collection: any[]) {\n    return _.compact(collection);\n  }\n\n  static omit(obj: { [key: string]: any }, path: string) {\n    return _.omit(obj, path);\n  }\n\n  static omitBy(obj: { [key: string]: any }, predicate: ((v) => boolean)) {\n    return _.omitBy(obj, predicate);\n  }\n\n  static unset(obj: { [key: string]: any }, path: string | string[]) {\n    return _.unset(obj, path);\n  }\n\n  static find(collection, predicate) {\n    return _.find(collection, predicate);\n  }\n\n  static findIndex(collection, predicate) {\n    return _.findIndex(collection, predicate);\n  }\n\n  static remove(collection, predicate): any[] {\n    return _.remove(collection, predicate);\n  }\n\n  static forOwn(obj, iteratee: (value, key, o) => any) {\n    return _.forOwn(obj, iteratee);\n  }\n\n  static map(obj: any[], iteratee: (value, index, list) => any) {\n    return _.map(obj, iteratee);\n  }\n\n  static unique(obj: any[], by) {\n    return _.uniqBy(obj, by);\n  }\n\n  static orderBy(obj: any[], iteratees, orders?) {\n    return _.orderBy(obj, iteratees, orders);\n  }\n\n  static union(...obj: any[][]) {\n    return _.union(obj);\n  }\n\n  static flatten(obj) {\n    return _.flatten(obj);\n  }\n\n  static flattenDeep(obj) {\n    return _.flattenDeep(obj);\n  }\n\n  static format(src, format) {\n    return src;\n  }\n\n  static jsonConcat(o1, o2) {\n    for (const key in o2) {\n      o1[key] = o2[key];\n    }\n    return o1;\n  }\n\n  static escape(obj: {}, key: string): {} {\n    const {[key]: deletedItem, ...rest} = obj;\n    return rest;\n  }\n\n  static filter(collection, predicate): any[] {\n    return _.filter(collection, predicate);\n  }\n\n  static where(obj: {}, predicate: {}) {\n    if (Object.keys(predicate).every(key => obj && obj[key] === predicate[key])) {\n      return obj;\n    } else {\n      return null;\n    }\n  }\n\n  static capitalize(s) {\n    if (s) {\n      return s.charAt(0).toUpperCase() + s.slice(1);\n    } else {\n      return s;\n    }\n  }\n\n  static templateStr(s: string, vars: {}) {\n    const compiled = _.template(s);\n    return compiled(vars);\n  }\n\n  static isTemplateStr(s: string) {\n    const isMatch = /.*\\${.*}.*/.test(s) || /.*<%=(.*)%>.*/.test(s);\n    return isMatch;\n  }\n\n  static getArray<T = any>(item: { [key: string]: T } | T[], keyName?: string): T[] {\n    const items = [];\n    if (item) {\n      if (CommonsUtils.isArray(item)) {\n        return item as T[];\n      } else if (CommonsUtils.isJson(item)) {\n        for (const key in  item) {\n          if (key) {\n            let c = item[key];\n            if (keyName) {\n              c = {[keyName]: key, ...c};\n            }\n            items.push(c);\n          }\n        }\n      } else {\n        items.push(item);\n      }\n    }\n    return items;\n  }\n\n  static removeKeys(obj: {}, ...keys: string[]) {\n    let o = obj;\n    while (keys.length > 0) {\n      o = CommonsUtils.set(o, keys, undefined);\n      CommonsUtils.unset(o, keys);\n      keys.pop();\n      const v = CommonsUtils.get(o, keys);\n      if (!CommonsUtils.isEmpty(v)) {\n        break;\n      }\n    }\n    return o;\n  }\n\n  static extract(value: any[], from: number, to: number) {\n    let target: number;\n    if (value && (from !== to)) {\n      if (to >= value.length) {\n        target = to - value.length;\n        while ((target--) + 1) {\n          value.push(undefined);\n        }\n      }\n      value.splice(to, 0, value.splice(from, 1)[0]);\n    }\n  }\n\n  static addItem(srcArray: any[], item: any, index?: number) {\n    let toAdd = item;\n    if (!CommonsUtils.isArray(item)) {\n      toAdd = [item];\n    }\n    if (index) {\n      return [].concat(srcArray.slice(0, index), toAdd, srcArray.slice(index));\n    } else {\n      return [].concat(srcArray, toAdd);\n    }\n  }\n\n  static removeByIndex(a: any[], index: number) {\n    return [].concat(a.slice(0, index), a.slice(index + 1));\n  }\n\n  static replace<T>(a: T[], index: number, element: T): T[] {\n    return [].concat(a.slice(0, index), element, a.slice(index + 1));\n  }\n\n  static move<T>(a: T[], from: number, to: number): T[] {\n    const element = a[from];\n    const forward = from < to;\n    const head = a.slice(0, forward ? from : to);\n    const mid = a.slice(forward ? from + 1 : to, forward ? to + 1 : from);\n    const tail = a.slice(forward ? to + 1 : from + 1);\n    return forward ?\n      [].concat(head, mid, element, tail) :\n      [].concat(head, element, mid, tail);\n  }\n\n  static restoreFn(value) {\n    if ((typeof value === 'string') && value.toLocaleLowerCase().trim().indexOf('function') === 0) {\n      return new Function('return ' + value.replace(/_this/g, 'this')\n        .replace(/__assign/g, 'Object.assign'))();\n    } else {\n      return value;\n    }\n  }\n\n  /**\n   * keykvaluev \n   */\n  static exclude(src: {}, k: string, v: any) {\n    const result = Object.keys(src).reduce((acc, key) => (\n      src[key][k] === v ? acc : {\n        ...acc,\n        [key]: src[key]\n      }), {});\n    return result;\n  }\n\n  /**\n   * src {k,o}   {k,v}\n   */\n  static replaceObj(src: any[], k: string, o: any, v: any) {\n    const index = _.find(src, {[k]: o});\n    return [\n      ...src.slice(0, index),\n      {\n        ...src[index],\n        [k]: v\n      },\n      ...src.slice(index + 1)\n    ];\n  }\n\n  /**\n   *  {}  []\n   */\n  static concat(src1: {}, src2: {}[], k: string) {\n    return {\n      ...src1,\n      ...src2.reduce((acc, item) => ({\n        ...acc,\n        [item[k]]: item\n      }), {})\n    };\n  }\n\n  static restoreJsonFn(json: string | {}) {\n    let jsonStr: string;\n    if (typeof json === 'string') {\n      jsonStr = json;\n    } else {\n      jsonStr = CommonsUtils.stringify(json);\n    }\n    return JSON.parse(jsonStr, (key, value) => CommonsUtils.restoreFn(value));\n  }\n\n  static stringify(json: {}) {\n    function replacer(key, value) {\n      if (typeof value === 'function') {\n        return value.toString();\n      } else {\n        return value;\n      }\n    }\n\n    return JSON.stringify(json, replacer);\n  }\n\n  static hash(str) {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      const character = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + character;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n  }\n\n  /**\n   * optionssrc\n   *  options:{\n   *    src-key: tar-key | {key:tar-key,options:{}} | Function\n   *  }\n   */\n  static adaptObject(src, options: {}) {\n    if (CommonsUtils.isArray(src)) {\n      return CommonsUtils.adaptArray(src, options);\n    } else {\n      return CommonsUtils.adaptJson(src, options);\n    }\n  }\n\n  static adaptJson(src, options) {\n    const result = {};\n    Object.keys(options).forEach((key) => {\n      const srcValue = CommonsUtils.get(src, key);\n      if (srcValue) {\n        if (CommonsUtils.isArray(srcValue)) {\n          let tarKey = null;\n          if (CommonsUtils.isString(options[key])) {\n            tarKey = options[key];\n          } else {\n            tarKey = options[key]['key'];\n          }\n          CommonsUtils.set(result, tarKey, CommonsUtils.adaptArray(srcValue, options[key]['options'] || options));\n        } else if (CommonsUtils.isJson(srcValue)) {\n          CommonsUtils.set(result, options[key], CommonsUtils.adaptJson(srcValue, options[key]['options'] || {}));\n        } else {\n          if (CommonsUtils.isString(options[key])) {\n            CommonsUtils.set(result, options[key], srcValue);\n          } else if (CommonsUtils.isFunction(options[key])) {\n            CommonsUtils.set(result, options[key], options[key].apply(undefined, src, options));\n          }\n        }\n      }\n    });\n    return result;\n  }\n\n  static adaptArray(src, options) {\n    const result = [];\n    src.forEach(item => {\n      result.push(CommonsUtils.adaptObject(item, options));\n    });\n    return result;\n  }\n\n\n  static getAge(dateString) {\n    const today = new Date();\n    const birthDate = new Date(dateString);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  }\n\n  static toDate(target: string | Date): Date {\n    if (target instanceof Date) {\n      return target;\n    }\n    if (CommonsUtils.isString(target)) {\n      const dateNumber = Date.parse(target);\n      return !isNaN(dateNumber) ? new Date(dateNumber) : null;\n    }\n    return null;\n  }\n\n  static isBefore(tar, date: string | Date = new Date()) {\n    const src = CommonsUtils.toDate(date);\n    const original = CommonsUtils.toDate(tar);\n    return !!(original && src && original < src);\n  }\n\n  static isAfter(tar, date: string | Date = new Date()) {\n    const src = CommonsUtils.toDate(date);\n    const original = CommonsUtils.toDate(tar);\n    return !!(original && src && original > src);\n  }\n\n  static toString(obj: any) {\n    switch (CommonsUtils.getVarType(obj)) {\n      case VarType.NULL:\n      case VarType.UNDEFINED:\n        return '';\n      case VarType.ARRAY: {\n        const a = [];\n        obj.forEach(o => a.push(CommonsUtils.toString(o)));\n        return `[${a.join(',')}]`;\n      }\n      case VarType.JSON:\n        return CommonsUtils.stringify(obj);\n      default:\n        return obj.toString();\n    }\n  }\n\n  static isEmpty(obj: any): boolean {\n    switch (CommonsUtils.getVarType(obj)) {\n      case VarType.NULL:\n      case VarType.UNDEFINED:\n        return true;\n      case VarType.STRING:\n        return obj.length === 0;\n      case VarType.ARRAY:\n        return (obj as any[]).length === 0;\n      case VarType.JSON:\n        return Object.keys(obj).length === 0;\n      default:\n        return obj.toString().length === 0;\n    }\n  }\n\n  static convertToBoolean(attributes: {}, keys: string[]) {\n    const l_attributes = {...attributes};\n    if (keys && keys.length > 0) {\n      keys.forEach(key => {\n        if (l_attributes.hasOwnProperty(key) && l_attributes[key] === '') {\n          l_attributes[key] = true;\n        }\n      });\n    }\n    return l_attributes;\n  }\n\n  static flatPath(path: string | string[]) {\n    if (CommonsUtils.isArray(path)) {\n      return (<string[]>path).join('-').replace('.', '-');\n    }\n    return (<string>path).replace('.', '-');\n  }\n\n  static join(arr, seperator?) {\n    const joiner = seperator || ',';\n\n    if (!arr) {\n      return '';\n    }\n\n    if (!CommonsUtils.isArray(arr)) {\n      return arr;\n    }\n\n    switch (arr.length) {\n      case 0:\n        return '';\n      case 1:\n        return arr[0];\n      default:\n        return arr.join(joiner);\n    }\n  }\n\n  static deepFind(obj, ...predicates): any[] {\n\n    const _find = (o) => {\n      if (o instanceof Array) {\n        (<any[]>o).forEach(i => _find(i));\n      } else {\n        for (const prop in o) {\n          if (o[prop] instanceof Array) {\n            _find(o[prop]);\n          }\n        }\n        predicates.some((predicate) => {\n          const found = CommonsUtils.where(o, predicate);\n          if (found !== null) {\n            foundResults.push(o);\n          }\n          return found !== null;\n        });\n      }\n    };\n\n    const foundResults = [];\n\n    _find(obj);\n\n    return foundResults;\n  }\n\n  static sleep(milliseconds) {\n    const start = new Date().getTime();\n    for (let i = 0; i < 1e7; i++) {\n      if ((new Date().getTime() - start) > milliseconds) {\n        break;\n      }\n    }\n  }\n\n  static getArrayValue(data: any): any[] {\n    if (!data) {\n      return data;\n    }\n    if (CommonsUtils.isArray(data)) {\n      return data;\n    } else if (CommonsUtils.isString(data)) {\n      return (<string>data).split(',');\n    } else {\n      return [data];\n    }\n  }\n\n  static getText(data: any) {\n    if (CommonsUtils.isArray(data)) {\n      return (<any[]>data).map(v => CommonsUtils.getText(v)).join(',');\n    } else if (CommonsUtils.isJson(data)) {\n      return JSON.stringify(data);\n    } else if (CommonsUtils.isBoolean(data)) {\n      return data ? '' : '';\n    } else {\n      return data;\n    }\n  }\n\n  static getValue(exp, ...context): any {\n    const fn = exp && (exp['method'] || exp);\n    if (CommonsUtils.isFunction(fn)) {\n      return <Function>fn.apply(undefined, context);\n    }\n    if (CommonsUtils.isString(exp) && exp.startsWith('@')) {\n      return CommonsUtils.get(context && context[0], exp.substr(1));\n    }\n    return exp;\n  }\n\n  static defineHiddenProp(obj, prop, defaultValue) {\n    Object.defineProperty(obj, prop, {enumerable: false, writable: true, configurable: true});\n    obj[prop] = defaultValue;\n  }\n\n  static splitBySize(str, size) {\n    const results = [];\n    let i = size;\n    while (i <= str.length) {\n      results.push(str.substr(0, i));\n      i += size;\n    }\n    return results;\n  }\n\n  static resolveUrl(url: string, params: {\n    [key: string]: string\n  } = {}) {\n    const _url = Object.keys(params)\n      .reduce((acc, key) => acc.replace(`:${key}`, params[key]), url);\n    return _url;\n  }\n}\n","import {RegPatterns} from '@er/types';\nimport {CommonsUtils} from '../comm';\n\nexport class RegUtils {\n\n  static escapeRegexp(regexStr: string): string {\n    const result = regexStr.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n    return result;\n  }\n\n  static getRegexps(pattern: string | string[] | RegExp | RegExp[]): RegExp[] {\n    if (!pattern) {\n      return [];\n    }\n    const exps = [];\n    const patterns = [];\n    if (CommonsUtils.isString(pattern)) {\n      patterns.push(pattern);\n    } else {\n      patterns.concat(pattern);\n    }\n    for (const p of patterns) {\n      if (p) {\n        if (p.indexOf(',') > 0) {\n          exps.concat(RegUtils.getRegexps(p.split(',')));\n        } else {\n          exps.push(RegUtils.getRegexp(p));\n        }\n      }\n    }\n    return exps;\n  }\n\n  static test(src: string, pattern: string | RegExp | string[] | RegExp[] | { adn?: any[], or?: any[], not?: any[] }): any {\n    let regex;\n    if (typeof pattern === 'string') {\n      regex = new RegExp(pattern);\n    } else {\n      regex = pattern;\n    }\n    if (regex instanceof RegExp) {\n      return regex.test(src);\n    } else if (regex && Array.isArray(regex)) {\n      return regex.every((item: any) => {\n        return RegUtils.test(src, item);\n      });\n    } else if (regex && Array.isArray(regex.and)) {\n      return regex.and.every((item: any) => {\n        return RegUtils.test(src, item);\n      });\n    } else if (regex && Array.isArray(regex.or)) {\n      return regex.or.some((item: any) => {\n        return RegUtils.test(src, item);\n      });\n    } else if (regex && regex.not) {\n      return !RegUtils.test(src, regex.not);\n    } else {\n      return false;\n    }\n  }\n\n  static exec(string: string, regex: any): any {\n    const self = this;\n    if (typeof regex === 'string') {\n      regex = new RegExp(regex);\n    }\n\n    if (regex instanceof RegExp) {\n      return regex.exec(string);\n    } else if (regex && Array.isArray(regex)) {\n      return regex.reduce(function (res: any, item: any) {\n        return (!!res) ? res : self.exec(string, item);\n      }, null);\n    } else {\n      return null;\n    }\n  }\n\n  private static getRegexp(pattern: string | RegExp): RegExp {\n    let exp: RegExp = null;\n    if (!pattern) {\n      return null;\n    }\n    if (CommonsUtils.isString(pattern)) {\n      if (pattern === 'letter') {\n        exp = RegPatterns.letter;\n      } else if (pattern === 'digit') {\n        exp = RegPatterns.digit;\n      } else if (pattern === 'character') {\n        exp = RegPatterns.character;\n      } else if (pattern === 'integer') {\n        exp = RegPatterns.integer;\n      } else if (pattern === 'numeric') {\n        exp = RegPatterns.numeric;\n      } else {\n        exp = new RegExp(pattern as string);\n      }\n    } else {\n      exp = pattern as RegExp;\n    }\n    return exp;\n  }\n}\n","import {DeviceInfo, Devices} from '@er/types';\nimport {RegUtils} from '../regex';\n\ndeclare const require;\ndeclare const Modernizr;\nconst bowser = require('bowser');\n\nexport interface BrowserSupport {\n  version?: boolean;\n  features?: boolean;\n}\n\nexport class BrowserOsUtils {\n\n  static ua = '';\n  static userAgent = '';\n  static os = '';\n  static browser = '';\n  static device = '';\n  static os_version = '';\n  static browser_version = '';\n  static device_info: DeviceInfo = undefined;\n\n  static isMobile(): boolean {\n    const result = [\n      Devices.DEVICES.ANDROID,\n      Devices.DEVICES.IPHONE,\n      Devices.DEVICES.I_POD,\n      Devices.DEVICES.BLACKBERRY,\n      Devices.DEVICES.FIREFOX_OS,\n      Devices.DEVICES.WINDOWS_PHONE,\n      Devices.DEVICES.VITA\n    ].some((item) => {\n      return BrowserOsUtils.device_info.device === item;\n    });\n    return result;\n  }\n\n  static isTablet() {\n    const result = [\n      Devices.DEVICES.I_PAD,\n      Devices.DEVICES.FIREFOX_OS\n    ].some((item) => {\n      return BrowserOsUtils.device_info.device === item;\n    });\n    return result;\n  }\n\n  static isDesktop() {\n    const result = [\n      Devices.DEVICES.PS4,\n      Devices.DEVICES.CHROME_BOOK,\n      Devices.DEVICES.UNKNOWN\n    ].some((item) => {\n      return BrowserOsUtils.device_info.device === item;\n    });\n    return result;\n  }\n\n  static getDeviceInfo() {\n\n    if (BrowserOsUtils.device_info) {\n      return BrowserOsUtils.device_info;\n    }\n\n    if (window && window.navigator) {\n      BrowserOsUtils.ua = window.navigator.userAgent;\n    }\n\n    BrowserOsUtils.userAgent = BrowserOsUtils.ua;\n\n    const mappings = [\n      {const: 'OS', prop: 'os'},\n      {const: 'BROWSERS', prop: 'browser'},\n      {const: 'DEVICES', prop: 'device'},\n      {const: 'OS_VERSIONS', prop: 'os_version'}\n    ];\n\n    mappings.forEach((mapping) => {\n      BrowserOsUtils[mapping.prop] = Object.keys(Devices[mapping.const]).reduce((obj: any, item: any) => {\n        obj[Devices[mapping.const][item]] = RegUtils.test(BrowserOsUtils.ua, Devices[`${mapping.const}_RE`][item]);\n        return obj;\n      }, {});\n    });\n\n    mappings.forEach((mapping) => {\n      BrowserOsUtils[mapping.prop] = Object.keys(Devices[mapping.const])\n        .map((key) => {\n          return Devices[mapping.const][key];\n        }).reduce((previousValue, currentValue) => {\n          return (previousValue === Devices[mapping.const].UNKNOWN && BrowserOsUtils[mapping.prop][currentValue])\n            ? currentValue : previousValue;\n        }, Devices[mapping.const].UNKNOWN);\n    });\n\n    BrowserOsUtils.browser_version = '0';\n    if (BrowserOsUtils.browser !== Devices.BROWSERS.UNKNOWN) {\n      const re = Devices.BROWSER_VERSIONS_RE[BrowserOsUtils.browser];\n      const res = RegUtils.exec(BrowserOsUtils.ua, re);\n      if (!!res) {\n        BrowserOsUtils.browser_version = res[1];\n      }\n    }\n\n    BrowserOsUtils.device_info = {\n      userAgent: BrowserOsUtils.userAgent,\n      os: BrowserOsUtils.os,\n      browser: BrowserOsUtils.browser,\n      device: BrowserOsUtils.device,\n      os_version: BrowserOsUtils.os_version,\n      browser_version: BrowserOsUtils.browser_version\n    };\n\n    return BrowserOsUtils.device_info;\n  }\n\n  static checkBrowser(): BrowserSupport {\n    if (BrowserOsUtils.isBrowserVersionValid()) {\n      const features = BrowserOsUtils.isBrowserFeaturesValid();\n      return {\n        version: true,\n        features\n      };\n    }\n    return {\n      version: false\n    };\n  }\n\n  private static isBrowserVersionValid() {\n    const browser = bowser.getParser(window.navigator.userAgent);\n    return browser.satisfies({\n      windows: {\n        'internet explorer': '>10'\n      },\n      macos: {\n        safari: '>10.1'\n      },\n      chrome: '>20.1.1432',\n      firefox: '>31',\n      opera: '>22'\n    });\n  }\n\n  private static isBrowserFeaturesValid() {\n    let supported = true;\n    for (const feature in Modernizr) {\n      if (Modernizr.hasOwnProperty(feature) &&\n        typeof Modernizr[feature] === 'boolean' && Modernizr[feature] === false) {\n        supported = false;\n        break;\n      }\n    }\n    return supported;\n  }\n}\n","import {UI_COLORS} from '@er/types';\nimport {CommonsUtils} from '../comm';\n\nlet UI_COLORS_COUNT = -1;\n\nexport class ColorUtils {\n\n  static getColorsCount() {\n    if (UI_COLORS_COUNT === -1) {\n      UI_COLORS_COUNT = Object.keys(UI_COLORS).length;\n    }\n    return UI_COLORS_COUNT;\n  }\n\n  static getColor(by?: string | number, offset = 0): string {\n    let colorIndex;\n    if (!by) {\n      by = CommonsUtils.getRandomNumber(ColorUtils.getColorsCount());\n    }\n    if (CommonsUtils.isString(by)) {\n      colorIndex = ((by as string).charCodeAt(0) + (by as string).charCodeAt((by as string).length - 1) + (by as string).length + offset) % ColorUtils.getColorsCount();\n    } else {\n      colorIndex = by;\n    }\n    let matched = 'pink';\n    Object.keys(UI_COLORS).some((color, index) => {\n      if (index === colorIndex) {\n        matched = UI_COLORS[color];\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return matched;\n  }\n}\n","import {DataItemProps} from '@er/types';\nimport {CommonsUtils} from '../comm';\n\nexport class DataItemUtils {\n\n  static ITEM_LABEL_KEY = 'label';\n\n  static ITEM_VALUE_KEY = 'value';\n\n  static ITEM_GROUP_KEY = 'group';\n\n  static ITEM_GROUP_ITEMS_KEY = 'items';\n\n  static ITEM_DATA_KEY = 'data';\n\n  static transItems(items, config: DataItemProps) {\n    if (!config) {\n      return items;\n    }\n    let _data: any[] = [];\n    const groups: { [key: string]: {}[] } = {};\n    items.map((item: any) => {\n      _data.push(DataItemUtils.transItem(item, config));\n    });\n    if (config.groupKey) {\n      _data.map(item => {\n        const group = DataItemUtils.getItemLabel(item, config.groupKey || 'group');\n        if (!groups[group]) {\n          groups[group] = [];\n        }\n        groups[group].push(item);\n      });\n      _data = [];\n      Object.keys(groups).forEach(group => {\n        _data.push({\n          label: group,\n          items: groups[group]\n        });\n      });\n    }\n    return _data;\n  }\n\n  static transItem(item, config: DataItemProps) {\n    const _item = {\n      [DataItemUtils.ITEM_LABEL_KEY]: DataItemUtils.getItemLabel(item, config.labelKey || DataItemUtils.ITEM_LABEL_KEY),\n      [DataItemUtils.ITEM_VALUE_KEY]: DataItemUtils.getItemValue(item, config.valueKey),\n      [DataItemUtils.ITEM_DATA_KEY]: item\n    };\n    return _item;\n  }\n\n  static getItemValue(item, valueKey) {\n    if (CommonsUtils.isString(item)) {\n      return item;\n    }\n    if (CommonsUtils.isArray(item)) {\n      return item.map(data => DataItemUtils.getItemValue(data, valueKey));\n    } else {\n      if (typeof valueKey === 'function') {\n        return valueKey(item);\n      } else if (CommonsUtils.isArray(valueKey)) {\n        const value = {};\n        valueKey.forEach(p => {\n          const val = CommonsUtils.get(item, p);\n          if (val) {\n            value[p] = val;\n          }\n        });\n        return value;\n      }\n      return valueKey ? CommonsUtils.get(item, valueKey) : item;\n    }\n  }\n\n  static getItemLabel(item, label) {\n    if (CommonsUtils.isFunction(label)) {\n      return label(item);\n    } else if (item) {\n      if (CommonsUtils.isArray(label)) {\n        const s = [];\n        (<string[]>label).forEach(key => {\n          const lb = DataItemUtils.getLabel(item, key);\n          if (lb) {\n            s.push(lb);\n          }\n        });\n        return s;\n      } else {\n        return DataItemUtils.getLabel(item, label);\n      }\n    }\n  }\n\n  static getLabel(item, labelKey) {\n    const aLabel = CommonsUtils.get(item, labelKey);\n    if (aLabel) {\n      return aLabel;\n    } else if (item[DataItemUtils.ITEM_DATA_KEY]) {\n      return CommonsUtils.get(item[DataItemUtils.ITEM_DATA_KEY], labelKey);\n    } else {\n      return item[Object.keys(item)[0]];\n    }\n  }\n}\n","import {ChartDimension, ChartType, DataItemProps} from '@er/types';\nimport {ColorUtils} from '../color';\nimport {CommonsUtils} from '../comm';\nimport {DataItemUtils} from '../data-item';\n\nexport class ChartUtils {\n\n  static buildChartData(rawData: any, chartOptions: { type: ChartType, dimension?: ChartDimension, dataItemProps?: {} }, dimensionsIndex: number = 0) {\n    const type = chartOptions.type;\n    let data = rawData;\n    const dimension = chartOptions.dimension || {};\n    if (dimension.dataSrcPath) {\n      data = CommonsUtils.get(rawData, dimension.dataSrcPath);\n    }\n    const dataItemProps = dimension.dataItemProps || chartOptions.dataItemProps;\n    const label = dimension.title || '';\n    switch (type || ChartType.BAR) {\n      case ChartType.BAR:\n        data = ChartUtils.buildBarChart(data, dataItemProps, label, dimensionsIndex);\n        break;\n      case ChartType.LINE:\n        data = ChartUtils.buildLineChart(data, dataItemProps, label, dimensionsIndex);\n        break;\n      case ChartType.PIE:\n        data = ChartUtils.buildPieChart(data, dataItemProps, label, dimensionsIndex);\n        break;\n      case ChartType.AREA:\n        data = ChartUtils.buildAreaChart(data, dataItemProps, label, dimensionsIndex);\n        break;\n      case ChartType.RADAR:\n        data = ChartUtils.buildRadarChart(data, dataItemProps, label, dimensionsIndex);\n        break;\n      case ChartType.DOUGHNUT:\n        data = ChartUtils.buildPieChart(data, dataItemProps, label, dimensionsIndex);\n        break;\n    }\n    return data;\n  }\n\n  static buildBarChart(dataItems: {}[], config: DataItemProps, label = '', colorIndex = 0) {\n    const _data = DataItemUtils.transItems(dataItems, config);\n    const labels = [];\n    const datasets = [];\n    const data = [];\n    const backgroundColor = [];\n    const hoverBackgroundColor = [];\n    const items = _data;\n    items.forEach(item => {\n      if (item['group']) {\n        datasets.push({\n          label: items[''].label,\n          data: items[''].items,\n          backgroundColor: ColorUtils.getColor(items[''].label)\n        });\n        labels.push('');\n      } else {\n        const lb = item['key_as_string'] || item['label'];\n        labels.push(lb);\n        data.push(item['value']);\n        backgroundColor.push(ColorUtils.getColor(lb, colorIndex));\n        hoverBackgroundColor.push(ColorUtils.getColor(lb, colorIndex + 10));\n      }\n    });\n    datasets.push({\n      label: label,\n      backgroundColor,\n      hoverBackgroundColor,\n      data\n    });\n    return {\n      labels,\n      datasets\n    };\n  }\n\n  static buildPieChart(dataItems: {}[], config: DataItemProps, label = '', colorIndex = 0) {\n    const _data = DataItemUtils.transItems(dataItems, config);\n    const labels = [];\n    const datasets = [];\n    const data = [];\n    const backgroundColor = [];\n    const hoverBackgroundColor = [];\n    const items = _data;\n    items.forEach(item => {\n      if (item['group']) {\n        datasets.push({\n          label: items[''].label,\n          data: items[''].items,\n          backgroundColor: ColorUtils.getColor(items[''].label)\n        });\n        labels.push('');\n      } else {\n        const lb = item['key_as_string'] || item['label'];\n        labels.push(lb);\n        data.push(item['value']);\n        backgroundColor.push(ColorUtils.getColor(lb, colorIndex));\n        hoverBackgroundColor.push(ColorUtils.getColor(lb, colorIndex + 10));\n      }\n    });\n    datasets.push({\n      label: label || '',\n      backgroundColor,\n      hoverBackgroundColor,\n      data\n    });\n    return {\n      labels,\n      datasets\n    };\n  }\n\n  static buildAreaChart(dataItems: {}[], config: DataItemProps, label = '', colorIndex = 0) {\n    const _data = DataItemUtils.transItems(dataItems, config);\n    const labels = [];\n    const datasets = [];\n    const backgroundColor = [];\n    const data = [];\n    const items = _data;\n    items.forEach(item => {\n      if (item['group']) {\n        datasets.push({\n          label: items[''].label,\n          data: items[''].items,\n          backgroundColor: ColorUtils.getColor(items[''].label)\n        });\n        labels.push('');\n      } else {\n        const lb = item['key_as_string'] || item['label'];\n        labels.push(lb);\n        data.push(item['value']);\n        backgroundColor.push(ColorUtils.getColor(lb, colorIndex));\n      }\n    });\n    datasets.push({\n      label: label || '',\n      data,\n      backgroundColor\n    });\n    return {\n      labels,\n      datasets\n    };\n  }\n\n  static buildLineChart(dataItems: {}[], config: DataItemProps, label = '', colorIndex = 0) {\n    const _data = DataItemUtils.transItems(dataItems, config);\n    const labels = [];\n    const datasets = [];\n    const data = [];\n    const items = _data;\n    items.forEach(item => {\n      if (item['group']) {\n        datasets.push({\n          label: items[''].label,\n          data: items[''].items,\n          backgroundColor: ColorUtils.getColor(items[''].label)\n        });\n        labels.push('');\n      } else {\n        const lb = item['key_as_string'] || item['label'];\n        labels.push(lb);\n        data.push(item['value']);\n      }\n    });\n    datasets.push({\n      label: label || '',\n      data,\n      fill: false,\n      borderColor: ColorUtils.getColor(colorIndex)\n    });\n    return {\n      labels,\n      datasets\n    };\n  }\n\n  static buildRadarChart(dataItems: {}[], config: DataItemProps, label = '', colorIndex = 0) {\n    const _data = DataItemUtils.transItems(dataItems, config);\n    const labels = [];\n    const datasets = [];\n    const backgroundColor = [];\n    const borderColor = [];\n    const pointBackgroundColor = [];\n    const pointHoverBorderColor = [];\n    const data = [];\n    const items = _data;\n    items.forEach(item => {\n      if (item['group']) {\n        datasets.push({\n          label: items[''].label,\n          data: items[''].items,\n          backgroundColor: ColorUtils.getColor(items[''].label)\n        });\n        labels.push('');\n      } else {\n        const lb = item['key_as_string'] || item['label'];\n        labels.push(lb);\n        data.push(item['value']);\n        backgroundColor.push(ColorUtils.getColor(lb, colorIndex));\n        borderColor.push(ColorUtils.getColor(lb, colorIndex + 5));\n        pointBackgroundColor.push(ColorUtils.getColor(lb, colorIndex + 5));\n        pointHoverBorderColor.push(ColorUtils.getColor(lb, colorIndex + 5));\n      }\n    });\n    datasets.push({\n      label: label || '',\n      data,\n      backgroundColor,\n      borderColor,\n      pointBackgroundColor,\n      pointHoverBorderColor,\n      pointBorderColor: '#fff',\n      pointHoverBackgroundColor: '#fff'\n    });\n    return {\n      labels,\n      datasets\n    };\n  }\n}\n","export class CopierUtils {\n\n  private textarea: HTMLTextAreaElement;\n\n  /** Copy the text value to the clipboard. */\n  copyText(text: string): boolean {\n    this.createTextareaAndSelect(text);\n\n    const copySuccessful = document.execCommand('copy');\n    this.removeFake();\n\n    return copySuccessful;\n  }\n\n  /**\n   * Creates a hidden textarea element, sets its value from `text` property,\n   * and makes a selection on it.\n   */\n  private createTextareaAndSelect(text: string) {\n    // Create a fake element to hold the contents to copy\n    this.textarea = document.createElement('textarea');\n\n    // Prevent zooming on iOS\n    this.textarea.style.fontSize = '12pt';\n\n    // Hide the element\n    this.textarea.style.setProperty('display', 'none');\n\n    // Move element to the same position vertically\n    const yPosition = window.pageYOffset || document.documentElement.scrollTop;\n    this.textarea.style.top = yPosition + 'px';\n\n    this.textarea.setAttribute('readonly', '');\n    this.textarea.value = text;\n\n    document.body.appendChild(this.textarea);\n\n    this.textarea.select();\n    this.textarea.setSelectionRange(0, this.textarea.value.length);\n  }\n\n  /** Remove the text area from the DOM. */\n  private removeFake() {\n    if (this.textarea) {\n      document.body.removeChild(this.textarea);\n      this.textarea = null;\n    }\n  }\n}\n","import {from, Observable, of, throwError as observableThrowError} from 'rxjs';\nimport {catchError, map} from 'rxjs/operators';\n\nexport class DevicesUtils {\n\n  static getMediaDevices(): Observable<MediaDeviceInfo[]> {\n\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      console.error('Can\\'t enumerate devices, method not supported.');\n    }\n\n    return from(navigator.mediaDevices.enumerateDevices())\n      .pipe(\n        map((devices: MediaDeviceInfo[]) => {\n          const mediaDevices = [];\n          for (const deviceI of devices) {\n            console.log(deviceI);\n            const device: any = {};\n            for (const key in deviceI) {\n              if (key) {\n                device[key] = deviceI[key];\n              }\n            }\n            if (!device.deviceId) {\n              device.deviceId = (<any>device).id;\n            }\n            if (!device.label) {\n              device.label = 'device (no-permission)';\n            }\n            mediaDevices.push(device);\n          }\n          return mediaDevices;\n        })\n      );\n  }\n\n  static getVideoDevices(): Observable<MediaDeviceInfo[]> {\n    const videos =  DevicesUtils.getMediaDevices().pipe(\n      map(devices => devices.filter(device => device.kind === 'videoinput'))\n    );\n    return videos;\n  }\n\n  static getAudioDevices(): Observable<MediaDeviceInfo[]> {\n    const audios =  DevicesUtils.getMediaDevices().pipe(\n      map(devices => devices.filter(device => device.kind === 'audioinput'))\n    );\n    return audios;\n  }\n\n  static playBeepSound() {\n    const snd = new Audio('data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=');\n    snd.play();\n  }\n\n  static getMediaStream(constrains: MediaStreamConstraints, deviceId: string): Observable<MediaStream> {\n\n    if (!navigator.mediaDevices) {\n      observableThrowError('Can\\'t get user media, this is not supported.');\n    }\n\n    const video = deviceId === undefined\n      ? {facingMode: {exact: 'environment'}}\n      : {deviceId: {exact: deviceId}};\n\n    constrains.video = video;\n\n    return from(navigator.mediaDevices.getUserMedia(constrains))\n      .pipe(\n        map((stream: MediaStream) => stream),\n        catchError(err => observableThrowError(err))\n      );\n  }\n\n  static stopMedia(mediaStream: MediaStream) {\n    if (mediaStream && mediaStream.getTracks) {\n      mediaStream.getTracks()\n        .forEach((track: MediaStreamTrack) => track.stop());\n    }\n  }\n\n  static takeImage(videoEle: HTMLVideoElement, canvasEle: HTMLCanvasElement): Observable<any> {\n\n    const dimensions = {};\n\n    if (videoEle.videoWidth) {\n      dimensions['width'] = videoEle.videoWidth;\n      dimensions['height'] = videoEle.videoHeight;\n    }\n\n    canvasEle.width = dimensions['width'];\n    canvasEle.height = dimensions['height'];\n\n    canvasEle.getContext('2d').drawImage(videoEle, 0, 0);\n\n    const mimeType = 'image/jpeg';\n    const dataUrl = canvasEle.toDataURL(mimeType);\n\n    return of({dataUrl, mimeType});\n  }\n}\n","import {State, Store, StoreItem} from '@er/types';\nimport {BehaviorSubject} from 'rxjs';\nimport {CommonsUtils} from '../comm';\n\nconst APP_STORE: BehaviorSubject<Store> = new BehaviorSubject({});\n\nexport class StatesUtils {\n\n  static getStore(): BehaviorSubject<Store> {\n    return APP_STORE;\n  }\n\n  static create(path: string | string[], value?: {}, preserved?: boolean): State {\n    const storeItem = StatesUtils.getStoreItem(path, true);\n    storeItem.state.next(value);\n    if (preserved) {\n      storeItem.preserved = preserved;\n    }\n    return storeItem.state;\n  }\n\n  static get(path: string | string[], createWhenAbsent?: boolean): BehaviorSubject<any> {\n    const storeItem = StatesUtils.getStoreItem(path, createWhenAbsent);\n    if (storeItem) {\n      return storeItem.state;\n    } else {\n      return undefined;\n    }\n  }\n\n  static observe(...path: string[]): BehaviorSubject<any> {\n    return StatesUtils.get(path, true);\n  }\n\n  static toggle(...path: string[]): State {\n    const state = StatesUtils.get(path);\n    state.next(!!!state.value);\n    return state;\n  }\n\n  static inc(path: string | string[]): State {\n    const state = StatesUtils.get(path, true);\n    let newValue = 0;\n    if (state.value) {\n      newValue = state.value + 1;\n    }\n    state.next(newValue);\n    return state;\n  }\n\n  static dec(path: string | string[]): State {\n    const state = StatesUtils.get(path, true);\n    let newValue = 0;\n    if (state.value) {\n      newValue = state.value - 1;\n    }\n    state.next(newValue);\n    return state;\n  }\n\n  static add(path: string | string[], offset: number): State {\n    const state = StatesUtils.get(path, true);\n    let newValue = 0;\n    if (state.value) {\n      newValue = state.value + offset;\n    }\n    state.next(newValue);\n    return state;\n  }\n\n  /**\n   * used to clear some state properties\n   */\n  static set(path: string | string[], final: { [key: string]: any }): State {\n    const state = StatesUtils.get(path, true);\n    if (!state.value) {\n      return StatesUtils.create(path, final);\n    } else {\n      state.next(final);\n      return state;\n    }\n  }\n\n  static delete(path: string | string[], key: string | string[]) {\n    const state = StatesUtils.get(path);\n    if (state.value) {\n      state.next(CommonsUtils.unset(state.value, key));\n    }\n  }\n\n  /**\n   * used to update state properties when patch has no undefined values\n   */\n  static update(path: string | string[], patch: { [key: string]: any }): State {\n    const state = StatesUtils.get(path, true);\n    if (!state.value) {\n      return StatesUtils.create(path, patch);\n    } else {\n      state.next(CommonsUtils.merge({}, state.value, patch));\n      return state;\n    }\n  }\n\n  static getValue(...path: string[]): any {\n    const state = StatesUtils.get(path);\n    return state ? {...state.value} : undefined;\n  }\n\n  static deleteState(...path: string[]) {\n    const state = StatesUtils.get(path);\n    CommonsUtils.unset(APP_STORE.value, CommonsUtils.flatPath(path));\n    if (state) {\n      state.next(undefined);\n      state.complete();\n    }\n    APP_STORE.next(APP_STORE.value);\n  }\n\n  private static getStoreItem(path: string | string[], createWhenAbsent?: boolean): StoreItem {\n    const key = CommonsUtils.flatPath(path);\n    let storeItem: StoreItem = CommonsUtils.get(APP_STORE.value, key);\n    if (!storeItem && createWhenAbsent) {\n      storeItem = {\n        state: new BehaviorSubject(undefined),\n        createdAt: new Date().getMilliseconds()\n      };\n      const value = CommonsUtils.set(APP_STORE.value, key, storeItem);\n      APP_STORE.next(value);\n    }\n    return storeItem;\n  }\n}\n\n","import {StateNames} from '@er/types';\nimport * as momentNs from 'moment';\nimport {CommonsUtils} from '../comm';\nimport {StatesUtils} from '../states';\n\nconst moment = momentNs;\n\nexport class DateUtils {\n\n  static getMoment(data): momentNs.Moment {\n    if (moment.isMoment(data)) {\n      return data;\n    }\n    const date = DateUtils.toDate(data);\n    if (date) {\n      return moment(data);\n    }\n    return null;\n  }\n\n  static isDate(v) {\n    return !!DateUtils.toDate(v);\n  }\n\n  static toDate(v) {\n    if (CommonsUtils.isString(v)) {\n      const date = Date.parse(v);\n      if (!isNaN(date)) {\n        return new Date(date);\n      }\n    } else {\n      if (v && typeof v.getMonth === 'function') {\n        return v;\n      }\n    }\n    return undefined;\n  }\n\n  static getFormattedDate(date?, format = 'YYYY-MM-DD') {\n    return DateUtils.getFormattedDateTime(format, date);\n  }\n\n  static getFormattedTime(date?, format = 'HH:mm:ss') {\n    return DateUtils.getFormattedDateTime(format, date);\n  }\n\n  static getFormattedDateTime(format = 'YYYY-MM-DD HH:mm:ss', date?) {\n    if (!date) {\n      date = DateUtils.getDate();\n    } else {\n      date = DateUtils.toDate(date);\n    }\n    const momentData = DateUtils.getMoment(date);\n    if (momentData) {\n      return momentData.format(format);\n    }\n    return '';\n  }\n\n  static getDate() {\n    let date;\n    const dateState = StatesUtils.getValue(StateNames.serverTime);\n    if (dateState) {\n      date = dateState.date;\n    } else {\n      date = new Date();\n    }\n    return date;\n  }\n\n  static getStamp() {\n    return DateUtils.getDate().getTime();\n  }\n\n  static getDateByNow(present, due?): { seconds: number, message: string } {\n    if (!present) {\n      return {seconds: 0, message: ''};\n    }\n    if (!DateUtils.isDate(present)) {\n      try {\n        present = new Date(present);\n      } catch (e) {\n        present = null;\n      }\n    }\n    if (!present) {\n      return {seconds: 0, message: ''};\n    }\n    let _due = due;\n    if (!_due) {\n      _due = new Date();\n    }\n    if (!DateUtils.isDate(_due)) {\n      _due = new Date(_due);\n    }\n    const seconds = Math.round(Math.abs((_due.getTime() - present.getTime()) / 1000));\n    const minutes = Math.round(Math.abs(seconds / 60));\n    const hours = Math.round(Math.abs(minutes / 60));\n    const days = Math.round(Math.abs(hours / 24));\n    const months = Math.round(Math.abs(days / 30.416));\n    const years = Math.round(Math.abs(days / 365));\n    let message = '';\n    if (seconds <= 10) {\n      message = (_due > present) ? '' : '';\n    } else if (seconds <= 30) {\n      message = '30';\n    } else if (seconds <= 90) {\n      message = '1';\n    } else if (minutes <= 45) {\n      message = minutes + '';\n    } else if (minutes <= 90) {\n      message = '1';\n    } else if (hours <= 22) {\n      message = hours + '';\n    } else if (hours <= 36) {\n      message = '1';\n    } else if (days <= 25) {\n      message = days + '';\n    } else if (days <= 45) {\n      message = '1';\n    } else if (days <= 345) {\n      message = months + '';\n    } else if (days <= 545) {\n      message = '1';\n    } else { // (days > 545)\n      message = years + '';\n    }\n    if (seconds > 10) {\n      message += (_due > present) ? '' : '';\n    }\n    return {\n      seconds,\n      message\n    };\n  }\n\n  static getUpdateSeconds(seconds: number) {\n    const min = 60;\n    const hr = min * 60;\n    const day = hr * 24;\n    if (seconds < min) { // less than 1 min, update every 2 secs\n      return 2;\n    } else if (seconds < hr) { // less than an hour, update every 30 secs\n      return 30;\n    } else if (seconds < day) { // less then a day, update every 5 mins\n      return 300;\n    } else { // update every hour\n      return 3600;\n    }\n  }\n\n  static getYear(date?: Date) {\n    return (date || DateUtils.getDate()).getFullYear();\n  }\n\n  static getMonth(date?: Date) {\n    return (date || DateUtils.getDate()).getMonth() + 1;\n  }\n\n  static getDay(date?: Date) {\n    return (date || DateUtils.getDate()).getDate();\n  }\n\n  static getYesterday() {\n    return DateUtils.getDay(new Date(DateUtils.getDate().getTime() - 24 * 60 * 60 * 1000));\n  }\n\n  static getTomorrow() {\n    return DateUtils.getDay(new Date(DateUtils.getDate().getTime() + 24 * 60 * 60 * 1000));\n  }\n\n  static getLastMonth() {\n    const month = DateUtils.getMonth() - 1;\n    return month < 1 ? 12 : month;\n  }\n\n  static getNextMonth() {\n    const month = DateUtils.getMonth() + 1;\n    return month > 12 ? 1 : month;\n  }\n}\n","import {DataEntity} from '@er/types';\n\nexport class DataEntityUtils {\n\n  static getEntityData(entity: DataEntity, data: {}, ...keys: string[]) {\n    const keysData = {};\n    if (keys && keys.length > 0) {\n      keys.forEach(key => {\n        keysData[entity.fields[key].label || key] = data[key];\n      });\n    } else {\n      Object.keys(data).filter(key => ['_index', '_type', 'id'].indexOf(key) === -1)\n        .forEach(key => {\n          keysData[entity.fields[key] && entity.fields[key].label || key] = data[key];\n        });\n    }\n    return keysData;\n  }\n\n  static getDataEntityDefaultFieldName(entity: DataEntity) {\n    if (entity.defaultField) {\n      return entity.fields[entity.defaultField] && entity.fields[entity.defaultField].key;\n    }\n  }\n\n\n}\n","export class ObjectUtils {\n\n  static patch<T>(target: T, value: Partial<T>): T {\n    let hasChanged = false;\n\n    for (const key in value) {\n      if (!Object.prototype.hasOwnProperty.call(value, key))\n        continue;\n\n      if (value[key] !== (target as any)[key]) {\n        hasChanged = true;\n        break;\n      }\n    }\n\n    return !hasChanged ? target : Object.assign({}, target, value);\n  }\n}","import {ObjectUtils} from './objects';\n\n\nexport interface Dict<V> {\n  [key: string]: V;\n}\n\nexport function createDict<V>(): Dict<V> {\n  return Object.create(null);\n}\n\nexport function copyDict<V>(dict: Dict<V>): Dict<V> {\n  return Object.assign(createDict<V>(), dict);\n}\n\nexport function hasKey(dict: Dict<any>, key: any): boolean {\n  return Object.prototype.hasOwnProperty.call(dict, key.toString());\n}\n\nexport function mapValues<T, R>(dict: Dict<T>,\n                                map: (value: T) => R): Dict<R> {\n  const ret = createDict<R>();\n\n  let changed = false;\n\n  for (const key of Object.keys(dict)) {\n    ret[key] = map(dict[key]);\n    if (ret[key] as any !== dict[key]) {\n      changed = true;\n    }\n  }\n\n  return changed ? ret : dict as any;\n}\n\n\nexport function union<V>(target: Dict<V>, source: Dict<V>): Dict<V> {\n  return ObjectUtils.patch(target, source);\n}\n\n\nexport function setKey<V>(dict: Dict<V>, key: any, value: V): Dict<V> {\n  if (dict[key] === value) {\n    return dict;\n  }\n\n  const ret = copyDict(dict);\n\n  ret[key] = value;\n\n  return ret;\n}\n\nexport function removeKey<V>(dict: Dict<V>, ...keys: any[]): Dict<V> {\n  const ret = copyDict(dict);\n\n  let changed = false;\n\n  for (const key of keys) {\n    if (hasKey(ret, key.toString())) {\n      changed = true;\n      delete ret[key];\n    }\n  }\n\n  return changed ? ret : dict;\n}\n\nexport function fromKeys<V>(keys: any[],\n                            values: V | ((key: any) => V)): Dict<V> {\n  const ret = createDict<V>();\n\n  const isFunction = typeof values === 'function';\n\n  for (const key of keys) {\n    ret[key] = isFunction ? (values as any)(key) : values;\n  }\n\n  return ret;\n}\n","import {ReadAs} from '@er/types';\nimport {fromEvent} from 'rxjs';\nimport {first, map} from 'rxjs/operators';\n\nexport class FileUtils {\n\n  static readFile(file: any, readAs?: ReadAs) {\n    const reader: FileReader = new FileReader();\n    const fileReader$ = fromEvent(reader, 'load').pipe(\n        map((e: any) => e.target.result),\n        first()\n      );\n    switch (readAs || ReadAs.BINARY) {\n      case ReadAs.ARRAY:\n        reader.readAsArrayBuffer(file);\n        break;\n      case ReadAs.BINARY:\n        reader.readAsBinaryString(file);\n        break;\n      case ReadAs.URL:\n        reader.readAsDataURL(file);\n        break;\n      case ReadAs.TEXT:\n        reader.readAsText(file);\n        break;\n    }\n    return fileReader$;\n  }\n}\n","import {DateUtils} from '../date';\n\nexport class IdCardUtils {\n\n  static test(idCardNo) {\n\n    const format = /^(([1][1-5])|([2][1-3])|([3][1-7])|([4][1-6])|([5][0-4])|([6][1-5])|([7][1])|([8][1-2]))\\d{4}(([1][9]\\d{2})|([2]\\d{3}))(([0][1-9])|([1][0-2]))(([0][1-9])|([1-2][0-9])|([3][0-1]))\\d{3}[0-9xX]$/;\n\n    if (!format.test(idCardNo)) {\n      return {status: false, 'msg': ''};\n    }\n\n    const year = idCardNo.substr(6, 4),\n      month = idCardNo.substr(10, 2),\n      date = idCardNo.substr(12, 2),\n      time = Date.parse(month + '-' + date + '-' + year),\n      now_time = Date.parse(DateUtils.getDate()),\n      dates = (new Date(year, month, 0)).getDate();\n    if (time > now_time || date > dates) {\n      return {status: false, msg: ''};\n    }\n\n    const c = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2);\n    const b = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2');\n    const id_array = idCardNo.split('');\n    let sum = 0;\n    for (let k = 0; k < 17; k++) {\n      sum += parseInt(id_array[k]) * c[k];\n    }\n    if (id_array[17].toUpperCase() !== b[sum % 11].toUpperCase()) {\n      return {status: false, msg: ''};\n    }\n    return {status: true};\n  }\n\n  static parse(idCardNo): { gender?: string, birthday?: string, age?: number } {\n\n    if (!IdCardUtils.test(idCardNo).status) {\n      return {};\n    }\n\n    const res: { gender?: string, birthday?: string, age?: number } = {};\n\n    const idxSexStart = idCardNo.length === 15 ? 14 : 16;\n\n    const birthYearSpan = idCardNo.length === 15 ? 2 : 4;\n\n    const idxSex = 1 - idCardNo.substr(idxSexStart, 1) % 2;\n\n    res.gender = (idxSex === 1 ? '' : '');\n\n    const year = (birthYearSpan === 2 ? '19' : '') + idCardNo.substr(6, birthYearSpan);\n    const month = idCardNo.substr(6 + birthYearSpan, 2);\n    const day = idCardNo.substr(8 + birthYearSpan, 2);\n    res.birthday = year + '-' + month + '-' + day;\n\n    const d = DateUtils.getDate();\n    const monthFloor = ((d.getMonth() + 1) < parseInt(month, 10) || (d.getMonth() + 1) === parseInt(month, 10) && d.getDate() < parseInt(day, 10)) ? 1 : 0;\n    res.age = d.getFullYear() - parseInt(year, 10) - monthFloor;\n\n    return res;\n  };\n\n}\n","import {AbstractControl, FormControl, FormGroup} from '@angular/forms';\n\nexport class FormUtils {\n\n  static getFormControl(form: FormGroup, ...path: string[]): FormControl {\n    let _form = form;\n    let control: AbstractControl = null;\n    if (path.length > 0) {\n      path.forEach(p => {\n        control = _form.controls[p];\n        if (control instanceof FormGroup) {\n          _form = control;\n        }\n      });\n    }\n    return <FormControl>control;\n  }\n\n  static setValue(control: AbstractControl, value: any) {\n    control.setValue(value, {\n      emitEvent: false,\n      emitModelToViewChange: false,\n      emitViewToModelChange: false\n    });\n  }\n}","import {StateNames, User} from '@er/types';\nimport {CommonsUtils} from '../comm';\nimport {DateUtils} from '../date';\nimport {StatesUtils} from '../states';\n\nexport class ContextUtils {\n\n  static context(date?): {} {\n    return {\n      now: DateUtils.getFormattedDateTime(),\n      today: DateUtils.getFormattedDate(),\n      year: DateUtils.getYear(date),\n      lastYear: DateUtils.getYear(date) - 1,\n      month: DateUtils.getMonth(date),\n      lastMonth: DateUtils.getLastMonth(),\n      day: DateUtils.getDay(date),\n      yesterday: DateUtils.getYesterday(),\n      ...<User>StatesUtils.getValue(StateNames.user) || {}\n    };\n  }\n\n  static get(key) {\n    return ContextUtils.context()[key] || '';\n  }\n\n  static resolveVariables(data) {\n    let resolved;\n    if (CommonsUtils.isJson(data)) {\n      resolved = ContextUtils.resolveJson(data);\n    } else if (CommonsUtils.isArray(data)) {\n      resolved = ContextUtils.resolveArray(data);\n    } else if (CommonsUtils.isString(data)) {\n      resolved = ContextUtils.resolveValue(data);\n    } else {\n      resolved = data;\n    }\n    return resolved;\n  }\n\n  private static resolveValue(template: string) {\n    let resolved = template;\n    if (CommonsUtils.isTemplateStr(template)) {\n      resolved = CommonsUtils.templateStr(template, ContextUtils.context());\n    }\n    return resolved;\n  }\n\n  private static resolveJson(data: {}) {\n    const resolved = {};\n    for (const prop in data) {\n      if (data[prop] !== undefined) {\n        if (CommonsUtils.isJson(data[prop])) {\n          resolved[prop] = ContextUtils.resolveJson(data[prop]);\n        } else if (CommonsUtils.isArray(data[prop])) {\n          resolved[prop] = ContextUtils.resolveArray(data[prop]);\n        } else if (CommonsUtils.isString(data[prop])) {\n          resolved[prop] = ContextUtils.resolveValue(data[prop]);\n        } else {\n          resolved[prop] = data[prop];\n        }\n      }\n    }\n    return resolved;\n  }\n\n  private static resolveArray(arr: any[]) {\n    const resolved = [];\n    arr.forEach(a => resolved.push(ContextUtils.resolveVariables(a)));\n    return resolved;\n  }\n}\n","import {ApiServerType, ConfigModel, LogLevel, NotifyType} from '@er/types';\nimport {CommonsUtils} from '../comm';\n\nconst DEFAULT_APP_CONFIG: ConfigModel = {\n  version: '0.0.1',\n  stomp: {\n    enabled: false,\n    destination: '/message/push',\n    headers: {},\n    heartbeat_in: 0, // Typical value 0 - disabled\n    heartbeat_out: 20000, // Typical value 20000 - every 20 seconds\n    reconnect_delay: 5000,\n    debug: false\n  },\n  auth: {\n    storageKey: 'erCurrentUser',\n    headerName: 'Authorization',\n    authScheme: 'Bearer ',\n    userTokenKey: 'userName',\n    passwordKey: 'password',\n    rememberMeKey: 'rememberMe',\n    requiredUserProps: 'org',\n    loginRouter: 'user/login',\n    loginApiOptions: {serverType: ApiServerType.App},\n    loginSuccessRouter: '/',\n    logoutSuccessRouter: 'user/login'\n  },\n  alert: {},\n  announce: {},\n  notify: NotifyType.ALERT,\n  onLoading: 'fa fa-cog fa-spin fa-3x indigo',\n  enableLogger: true,\n  dataFieldProps: {\n    dataCode: {\n      apiEntry: 'data_code',\n      codeKey: 'code',\n      nameKey: 'name',\n      parentKey: 'parent',\n      catKey: 'codeCat'\n    }\n  },\n  wechat: {\n    self_redirect: true,\n    scope: 'snsapi_login',\n    state: '',\n    style: 'black',\n    href: ''\n  },\n  log: {\n    enableApp: true,\n    enableRoute: false,\n    level: LogLevel.DEBUG,\n    httpPost: false,\n    blackLList: ['PropsBindDirective']\n  }\n};\n\nexport class ConfigUtils {\n\n  static lastUrl = undefined;\n\n  static lastConfig = {};\n\n  static appConfig: ConfigModel = {\n    ...DEFAULT_APP_CONFIG\n  };\n\n  static moduleConfig: ConfigModel = undefined;\n\n  static getConfig(): ConfigModel {\n    return ConfigUtils.moduleConfig || ConfigUtils.appConfig;\n  }\n\n  static configApp(customer: ConfigModel | {}): ConfigModel {\n    ConfigUtils.appConfig = CommonsUtils.merge({}, DEFAULT_APP_CONFIG, customer);\n    return ConfigUtils.appConfig;\n  }\n\n  static configModule(moduleConf: ConfigModel | {}, url: string): ConfigModel {\n    let config = moduleConf;\n    if (url && url === ConfigUtils.lastUrl) {\n      config = CommonsUtils.merge(ConfigUtils.lastConfig, moduleConf);\n    } else {\n      ConfigUtils.lastUrl = url;\n      ConfigUtils.lastConfig = moduleConf;\n    }\n    ConfigUtils.moduleConfig = CommonsUtils.merge({}, ConfigUtils.appConfig, config);\n    return ConfigUtils.moduleConfig;\n  }\n\n  static get(namePath: string, defaultValue?) {\n    return CommonsUtils.get(ConfigUtils.getConfig(), namePath, defaultValue);\n  }\n}\n","import {ConfirmDialogProp, DynaContent, PopupDialogProp, StateNames} from '@er/types';\nimport {Observable} from 'rxjs';\nimport {filter, map} from 'rxjs/operators';\nimport {StatesUtils} from '../states';\n\nexport class DialogUtils {\n\n  static confirm(header?: string, content?: string, options?: ConfirmDialogProp): Observable<boolean> {\n    const state = StatesUtils.create(StateNames.confirm, {\n      header,\n      content,\n      ...options,\n      open: true\n    });\n    return state.pipe(\n      filter(stateValue => stateValue && !stateValue.open),\n      map(({accept}) => accept === true)\n    );\n  }\n\n  static error(header, content, options?: PopupDialogProp) {\n    const html = `\n                 <div class=\"d-flex align-items-center\">\n                  <i class=\"fa fa-exclamation-circle fa-2x text-danger mr-2\"></i>\n                  <span style=\"font-size: 1.2em\">${content}</span>\n                </div>                 \n    `;\n    return DialogUtils.popup(header, html, {\n      ...options || {},\n      maximizable: false\n    });\n  }\n\n  static info(header, content, options?: PopupDialogProp) {\n    const html = `\n                 <div class=\"d-flex align-items-center\">\n                  <i class=\"fa fa-info-circle fa-2x text-primary mr-2\"></i>\n                  <span style=\"font-size: 1.2em\">${content}</span>\n                </div>                 \n    `;\n    return DialogUtils.popup(header, html, {\n      ...options || {},\n      maximizable: false,\n      minWidth: 200,\n      closeLabel: ''\n    });\n  }\n\n  private static popup(header?: string, content?: DynaContent, options?: PopupDialogProp): Observable<any> {\n    const state = StatesUtils.create(StateNames.popup, {\n      header,\n      content,\n      ...options,\n      maximizable: false,\n      visible: true\n    });\n    return state;\n  }\n}\n","import {MenuItem} from '@er/types';\nimport {CommonsUtils} from '../comm';\n\nexport class MenuUtils {\n\n  static getUserMenuItems(menuItems: MenuItem[],\n                          roles?: string | string[],\n                          permissions?: string | string[]): MenuItem[] {\n    const filtered = [];\n    permissions = CommonsUtils.getArrayValue(permissions);\n    if (!roles || roles.length === 0) {\n      roles = [];\n    }\n    if (!permissions || permissions.length === 0) {\n      permissions = [];\n    }\n    if (roles.length === 0 && permissions.length === 0) {\n      return menuItems;\n    }\n    if (menuItems && menuItems.length > 0) {\n      menuItems.forEach(menuItem => {\n        const item = menuItem;\n        if (item.roles || item.permissions) {\n          if (item.roles && roles.length > 0) {\n            const menuRoles = CommonsUtils.getArrayValue(item.roles);\n            const matched = menuRoles.filter(menuRole => roles.indexOf(menuRole) >= 0);\n            if (matched.length > 0) {\n              filtered.push(item);\n            }\n          }\n          if (filtered.indexOf(item) === -1 && item.permissions && permissions.length > 0) {\n            const menuPermissions = CommonsUtils.getArrayValue(item.permissions);\n            const matched = menuPermissions.filter(menuPermission => permissions.indexOf(menuPermission) >= 0);\n            if (matched.length > 0) {\n              filtered.push(item);\n            }\n          }\n        } else {\n          filtered.push(item);\n        }\n        if (item.items) {\n          const subItems = MenuUtils.getUserMenuItems(item.items, permissions, roles);\n          if (subItems.length > 0) {\n            item.items = subItems;\n          }\n        }\n      });\n      return filtered;\n    }\n  }\n\n  static transMenuItems(menuItems: {}[]) {\n    let nodes;\n    nodes = CommonsUtils.orderBy(menuItems, ['parent', 'code'], ['asc']);\n    nodes.forEach(item => {\n      const children = nodes.filter(item2 => item2['parent'] && item2['parent'] === item['code']);\n      if (children.length > 0) {\n        item['items'] = children;\n      }\n      if (item.icon && item.icon.startsWith('fa-')) {\n        item.icon = 'fa ' + item.icon;\n      }\n    });\n    return nodes = nodes.filter(node => !node['parent']);\n  }\n}\n","export class DomUtils {\n\n  public static zindex = 1000;\n\n  private calculatedScrollbarWidth: number = null;\n\n  private browser: any;\n\n  public static addClass(element: any, className: string): void {\n    if (element.classList) {\n      element.classList.add(className);\n    } else {\n      element.className += ' ' + className;\n    }\n  }\n\n  public static addClasses(element: any, className: string): void {\n      const styles: string[] = className.split(' ');\n      for (let i = 0; i < styles.length; i++) {\n          DomUtils.addClass(element, styles[i]);\n      }\n  }\n\n  public static removeClass(element: any, className: string): void {\n    if (element.classList) {\n      element.classList.remove(className);\n    } else {\n      element.className = element.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n    }\n  }\n\n  public static hasClass(element: any, className: string): boolean {\n    if (element.classList) {\n      return element.classList.contains(className);\n    } else {\n      return new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className);\n    }\n  }\n\n  public static siblings(element: any) {\n    const children = element.parentNode.children.filter(child => child !== element);\n    return children;\n  }\n\n  public static find(element: any, selector: string): any[] {\n    return element.querySelectorAll(selector);\n  }\n\n  public static findSingle(element: any, selector: string): any {\n    return element.querySelector(selector);\n  }\n\n  public static index(element: any): number {\n    const children = element.parentNode.childNodes;\n    let num = 0;\n    for (let i = 0; i < children.length; i++) {\n      if (children[i] == element) return num;\n      if (children[i].nodeType == 1) num++;\n    }\n    return -1;\n  }\n\n  public static relativePosition(element: any, target: any): void {\n    const elementDimensions = element.offsetParent ? {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    } : this.getHiddenElementDimensions(element);\n    const targetHeight = target.offsetHeight;\n    const targetWidth = target.offsetWidth;\n    const targetOffset = target.getBoundingClientRect();\n    const windowScrollTop = this.getWindowScrollTop();\n    const viewport = this.getViewport();\n    let top, left;\n\n    if ((targetOffset.top + targetHeight + elementDimensions.height) > viewport.height) {\n      top = -1 * (elementDimensions.height);\n      if (targetOffset.top + top < 0) {\n        top = 0;\n      }\n    } else {\n      top = targetHeight;\n    }\n\n\n    if ((targetOffset.left + elementDimensions.width) > viewport.width) {\n      left = targetWidth - elementDimensions.width;\n    } else {\n      left = 0;\n    }\n\n    element.style.top = top + 'px';\n    element.style.left = left + 'px';\n  }\n\n  public static absolutePosition(element: any, target: any): void {\n    const elementDimensions = element.offsetParent ? {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    } : this.getHiddenElementDimensions(element);\n    const elementOuterHeight = elementDimensions.height;\n    const elementOuterWidth = elementDimensions.width;\n    const targetOuterHeight = target.offsetHeight;\n    const targetOuterWidth = target.offsetWidth;\n    const targetOffset = target.getBoundingClientRect();\n    const windowScrollTop = this.getWindowScrollTop();\n    const windowScrollLeft = this.getWindowScrollLeft();\n    const viewport = this.getViewport();\n    let top, left;\n\n    if (targetOffset.top + targetOuterHeight + elementOuterHeight > viewport.height) {\n      top = targetOffset.top + windowScrollTop - elementOuterHeight;\n      if (top < 0) {\n        top = 0 + windowScrollTop;\n      }\n    } else {\n      top = targetOuterHeight + targetOffset.top + windowScrollTop;\n    }\n\n    if (targetOffset.left + targetOuterWidth + elementOuterWidth > viewport.width) {\n      left = targetOffset.left + windowScrollLeft + targetOuterWidth - elementOuterWidth;\n    } else {\n      left = targetOffset.left + windowScrollLeft;\n    }\n\n    element.style.top = top + 'px';\n    element.style.left = left + 'px';\n  }\n\n  public static getHiddenElementOuterHeight(element: any): number {\n    element.style.visibility = 'hidden';\n    element.style.display = 'block';\n    const elementHeight = element.offsetHeight;\n    element.style.display = 'none';\n    element.style.visibility = 'visible';\n\n    return elementHeight;\n  }\n\n  public static getHiddenElementOuterWidth(element: any): number {\n    element.style.visibility = 'hidden';\n    element.style.display = 'block';\n    const elementWidth = element.offsetWidth;\n    element.style.display = 'none';\n    element.style.visibility = 'visible';\n\n    return elementWidth;\n  }\n\n  public static getHiddenElementDimensions(element: any): any {\n    const dimensions: any = {};\n    element.style.visibility = 'hidden';\n    element.style.display = 'block';\n    dimensions.width = element.offsetWidth;\n    dimensions.height = element.offsetHeight;\n    element.style.display = 'none';\n    element.style.visibility = 'visible';\n\n    return dimensions;\n  }\n\n  public static scrollInView(container, item) {\n    const borderTopValue: string = getComputedStyle(container).getPropertyValue('borderTopWidth');\n    const borderTop: number = borderTopValue ? parseFloat(borderTopValue) : 0;\n    const paddingTopValue: string = getComputedStyle(container).getPropertyValue('paddingTop');\n    const paddingTop: number = paddingTopValue ? parseFloat(paddingTopValue) : 0;\n    const containerRect = container.getBoundingClientRect();\n    const itemRect = item.getBoundingClientRect();\n    const offset = (itemRect.top + document.body.scrollTop) - (containerRect.top + document.body.scrollTop) - borderTop - paddingTop;\n    const scroll = container.scrollTop;\n    const elementHeight = container.clientHeight;\n    const itemHeight = this.getOuterHeight(item);\n\n    if (offset < 0) {\n      container.scrollTop = scroll + offset;\n    } else if ((offset + itemHeight) > elementHeight) {\n      container.scrollTop = scroll + offset - elementHeight + itemHeight;\n    }\n  }\n\n  public static fadeIn(element, duration: number): void {\n    element.style.opacity = 0;\n\n    let last = +new Date();\n    let opacity = 0;\n    const tick = function () {\n      opacity = +element.style.opacity.replace(',', '.') + (new Date().getTime() - last) / duration;\n      element.style.opacity = opacity;\n      last = +new Date();\n\n      if (+opacity < 1) {\n        (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);\n      }\n    };\n\n    tick();\n  }\n\n  public static fadeOut(element, ms) {\n    let opacity = 1;\n    const interval = 50,\n      duration = ms,\n      gap = interval / duration;\n\n    function intervalCallback() {\n      opacity = opacity - gap;\n      if (opacity <= 0) {\n        opacity = 0;\n        clearInterval(fading);\n      }\n      element.style.opacity = opacity;\n    }\n\n    const fading = setInterval(intervalCallback, interval);\n  }\n\n  public static getWindowScrollTop(): number {\n    const doc = document.documentElement;\n    return (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n  }\n\n  public static getWindowScrollLeft(): number {\n    const doc = document.documentElement;\n    return (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n  }\n\n  public static matches(element, selector: string): boolean {\n    const p = Element.prototype;\n    const f = p['matches'] || p.webkitMatchesSelector || function (s) {\n      return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n    };\n    return f.call(element, selector);\n  }\n\n  public static getOuterWidth(el, margin?) {\n    let width = el.offsetWidth;\n\n    if (margin) {\n      const style = getComputedStyle(el);\n      width += parseFloat(style.marginLeft) + parseFloat(style.marginRight);\n    }\n\n    return width;\n  }\n\n  public static getHorizontalPadding(el) {\n    const style = getComputedStyle(el);\n    return parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);\n  }\n\n  public static getHorizontalMargin(el) {\n    const style = getComputedStyle(el);\n    return parseFloat(style.marginLeft) + parseFloat(style.marginRight);\n  }\n\n  public static innerWidth(el) {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n\n    width += parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);\n    return width;\n  }\n\n  public static width(el) {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n\n    width -= parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);\n    return width;\n  }\n\n  public static getInnerHeight(el) {\n    let height = el.offsetHeight;\n    const style = getComputedStyle(el);\n\n    height += parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);\n    return height;\n  }\n\n  public static getOuterHeight(el, margin?) {\n    let height = el.offsetHeight;\n\n    if (margin) {\n      const style = getComputedStyle(el);\n      height += parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n    }\n\n    return height;\n  }\n\n  public static getHeight(el): number {\n    let height = el.offsetHeight;\n    const style = getComputedStyle(el);\n\n    height -= parseFloat(style.paddingTop) + parseFloat(style.paddingBottom) + parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\n    return height;\n  }\n\n  public static getWidth(el): number {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n\n    width -= parseFloat(style.paddingLeft) + parseFloat(style.paddingRight) + parseFloat(style.borderLeftWidth) + parseFloat(style.borderRightWidth);\n\n    return width;\n  }\n\n  public static getViewport(): any {\n    const win = window,\n      d = document,\n      e = d.documentElement,\n      g = d.getElementsByTagName('body')[0],\n      w = win.innerWidth || e.clientWidth || g.clientWidth,\n      h = win.innerHeight || e.clientHeight || g.clientHeight;\n\n    return {width: w, height: h};\n  }\n\n  public static getOffset(el) {\n    const rect = el.getBoundingClientRect();\n\n    return {\n      top: rect.top + document.body.scrollTop,\n      left: rect.left + document.body.scrollLeft\n    };\n  }\n\n  public static getUserAgent(): string {\n    return navigator.userAgent;\n  }\n\n  public static resolveUserAgent() {\n    const ua = navigator.userAgent.toLowerCase();\n    const match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n      /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\n      /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\n      /(msie) ([\\w.]+)/.exec(ua) ||\n      ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n      [];\n\n    return {\n      browser: match[1] || '',\n      version: match[2] || '0'\n    };\n  }\n\n  static createElement(tag, classNames?: string): any {\n    const element = document.createElement(tag);\n    if (classNames) {\n      DomUtils.addClasses(element, classNames);\n    }\n    return element;\n  }\n\n  static remove(element) {\n    element.parentElement.removeChild(element);\n  }\n\n  static removeHost(element) {\n    const nativeElement: HTMLElement = element;\n    const parentElement: HTMLElement = nativeElement.parentElement;\n    while (nativeElement.firstChild) {\n      parentElement.insertBefore(nativeElement.firstChild, nativeElement);\n    }\n    parentElement.removeChild(nativeElement);\n  }\n\n  isIE() {\n    const ua = window.navigator.userAgent;\n\n    const msie = ua.indexOf('MSIE ');\n    if (msie > 0) {\n      // IE 10 or older => return version number\n      return true;\n    }\n\n    const trident = ua.indexOf('Trident/');\n    if (trident > 0) {\n      // IE 11 => return version number\n      const rv = ua.indexOf('rv:');\n      return true;\n    }\n\n    const edge = ua.indexOf('Edge/');\n    if (edge > 0) {\n      // Edge (IE 12+) => return version number\n      return true;\n    }\n\n    // other browser\n    return false;\n  }\n\n  appendChild(element: any, target: any) {\n    if (this.isElement(target)) {\n      target.appendChild(element);\n    } else if (target.el && target.el.nativeElement) {\n      target.el.nativeElement.appendChild(element);\n    } else {\n      throw new Error('Cannot append ' + target + ' to ' + element);\n    }\n  }\n\n  removeChild(element: any, target: any) {\n    if (this.isElement(target)) {\n      target.removeChild(element);\n    } else if (target.el && target.el.nativeElement) {\n      target.el.nativeElement.removeChild(element);\n    } else {\n      throw new Error('Cannot remove ' + element + ' from ' + target);\n    }\n  }\n\n  invokeElementMethod(element: any, methodName: string, args?: any[]): void {\n    (element as any)[methodName].apply(element, args);\n  }\n\n  clearSelection(): void {\n    if (window.getSelection) {\n      if (window.getSelection().empty) {\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges && window.getSelection().rangeCount > 0 && window.getSelection().getRangeAt(0).getClientRects().length > 0) {\n        window.getSelection().removeAllRanges();\n      }\n    } else if (document['selection'] && document['selection'].empty) {\n      try {\n        document['selection'].empty();\n      } catch (error) {\n        //ignore IE bug\n      }\n    }\n  }\n\n  isElement(obj: any) {\n    return (typeof HTMLElement === 'object' ? obj instanceof HTMLElement :\n        obj && typeof obj === 'object' && obj !== null && obj.nodeType === 1 && typeof obj.nodeName === 'string'\n    );\n  }\n\n  getBrowser() {\n    if (!this.browser) {\n      const matched = DomUtils.resolveUserAgent();\n      this.browser = {};\n\n      if (matched.browser) {\n        this.browser[matched.browser] = true;\n        this.browser['version'] = matched.version;\n      }\n\n      if (this.browser['chrome']) {\n        this.browser['webkit'] = true;\n      } else if (this.browser['webkit']) {\n        this.browser['safari'] = true;\n      }\n    }\n\n    return this.browser;\n  }\n\n  calculateScrollbarWidth(): number {\n    if (this.calculatedScrollbarWidth !== null) {\n      return this.calculatedScrollbarWidth;\n    }\n\n    const scrollDiv = document.createElement('div');\n    scrollDiv.className = 'ui-scrollbar-measure';\n    document.body.appendChild(scrollDiv);\n\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    document.body.removeChild(scrollDiv);\n\n    this.calculatedScrollbarWidth = scrollbarWidth;\n\n    return scrollbarWidth;\n  }\n}\n","export class EncodeUtils {\n  // credits for decoder goes to https://github.com/atk\n  static base64decode(str: string): string {\n    const chars =\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let output = '';\n\n    str = String(str).replace(/=+$/, '');\n\n    if (str.length % 4 === 1) {\n      throw new Error(\n        '\\'atob\\' failed: The string to be decoded is not correctly encoded.'\n      );\n    }\n\n    for (\n      // initialize result and counters\n      let bc = 0, bs: any, buffer: any, idx = 0;\n      // get next character\n      (buffer = str.charAt(idx++));\n      // character found in table? initialize bit storage and add its ascii value;\n      ~buffer &&\n      (\n        (bs = bc % 4 ? bs * 64 + buffer : buffer),\n          // and if not first of each 4 characters,\n          // convert the first 8 bits to one ascii character\n        bc++ % 4\n      )\n        ? (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6))))\n        : 0\n    ) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  }\n\n  static base64DecodeUnicode(str: any) {\n    const decoded = decodeURIComponent(\n      Array.prototype.map\n        .call(EncodeUtils.base64decode(str), (c: any) => {\n          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        })\n        .join('')\n    );\n    return decoded;\n  }\n}\n","import {EncodeUtils} from '../encode';\n\n\nexport class JwtUtils {\n\n  static urlBase64Decode(str: string): string {\n    let output = str.replace(/-/g, '+').replace(/_/g, '/');\n    switch (output.length % 4) {\n      case 0: {\n        break;\n      }\n      case 2: {\n        output += '==';\n        break;\n      }\n      case 3: {\n        output += '=';\n        break;\n      }\n      default: {\n        throw new Error('Illegal base64url string!');\n      }\n    }\n    return EncodeUtils.base64decode(output);\n  }\n\n  static decodeToken(token: string): any {\n    if (token === null) {\n      return null;\n    }\n\n    const parts = token.split('.');\n\n    if (parts.length !== 3) {\n      throw new Error('The inspected token doesn\\'t appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.');\n    }\n\n    const decoded = JwtUtils.urlBase64Decode(parts[1]);\n    if (!decoded) {\n      throw new Error('Cannot decode the token.');\n    }\n\n    return JSON.parse(decoded);\n  }\n\n  static getTokenExpirationDate(token: string): Date {\n    let decoded: any;\n    decoded = this.decodeToken(token);\n\n    if (!decoded.hasOwnProperty('exp')) {\n      return null;\n    }\n\n    const date = new Date(0);\n    date.setUTCSeconds(decoded.exp);\n\n    return date;\n  }\n\n  static isValid(token: string, offsetSeconds?: number): boolean {\n    if (token === null || token === '') return false;\n    const date = JwtUtils.getTokenExpirationDate(token);\n    offsetSeconds = offsetSeconds || 0;\n\n    if (date === null) {\n      return false;\n    }\n\n    return date.valueOf() > (new Date().valueOf() + offsetSeconds * 1000);\n  }\n}\n","export class IdUtils {\n\n  static getRandom(): string {\n    return Math.floor(Math.random() * 10000000000) + '';\n  }\n\n  static getUUID(): string {\n    if (typeof (window) !== 'undefined' &&\n      typeof (window.crypto) !== 'undefined' &&\n      typeof (window.crypto.getRandomValues) !== 'undefined') {\n      const buf: Uint16Array = new Uint16Array(8);\n      window.crypto.getRandomValues(buf);\n      return (IdUtils._pad4(buf[0]) + IdUtils._pad4(buf[1])\n        + '-' + IdUtils._pad4(buf[2])\n        + '-' + IdUtils._pad4(buf[3])\n        + '-' + IdUtils._pad4(buf[4])\n        + '-' + IdUtils._pad4(buf[5]) + IdUtils._pad4(buf[6]) + IdUtils._pad4(buf[7]));\n    } else {\n      return IdUtils._random4() + IdUtils._random4()\n        + '-' + IdUtils._random4()\n        + '-' + IdUtils._random4()\n        + '-' + IdUtils._random4()\n        + '-' + IdUtils._random4() + IdUtils._random4() + IdUtils._random4();\n    }\n  }\n\n  private static _pad4(num: number): string {\n    let ret: string = num.toString(16);\n    while (ret.length < 4) {\n      ret = '0' + ret;\n    }\n    return ret;\n  }\n\n  private static _random4(): string {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n\n}\n","import pinyinlite from 'pinyinlite/index_full';\n\nexport class PinyinUtil {\n  /**\n   * \n   * @param str \n   */\n  static getFirstLetter(str): string {\n    const pys: string[] = pinyinlite(str);\n    const fpy = pys.map(py => py[0] && py[0].substr(0, 1));\n    return fpy.join('').toLowerCase();\n  }\n\n  static getPinYin(str): string {\n    const pys: string[] = pinyinlite(str);\n    const fpy = pys.map(py => py[0] ? py[0] : '');\n    return fpy.join('').toLowerCase();\n  }\n}\n","import {fromEvent, Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nexport class ImageUtil {\n\n  static getBase64(file: File | string): Observable<string> {\n    if (typeof file === 'string' && file.startsWith('data:')) {\n      return of(file);\n    } else {\n      const reader = new FileReader();\n      const fileContent$ = fromEvent(reader, 'load')\n        .pipe(\n          map((e: Event) => {\n            console.log(e.target['result']);\n            return e.target['result'];\n          })\n        );\n      // (<File>file).type\n      reader.readAsDataURL(file as File);\n      return fileContent$;\n    }\n  }\n\n  static upload(file) {\n\n  }\n}\n","import {PagerModel} from '@er/types';\nimport {range} from 'lodash';\n\nexport class PagerUtil {\n\n  static getPagerModel(totalItems: number, currentPage: number = 1, pageSize: number = 10): PagerModel {\n\n    const totalPages = Math.ceil(totalItems / pageSize);\n\n    let startPage: number, endPage: number;\n    if (totalPages <= 10) {\n      startPage = 1;\n      endPage = totalPages;\n    } else {\n      if (currentPage <= 6) {\n        startPage = 1;\n        endPage = 10;\n      } else if (currentPage + 4 >= totalPages) {\n        startPage = totalPages - 9;\n        endPage = totalPages;\n      } else {\n        startPage = currentPage - 5;\n        endPage = currentPage + 4;\n      }\n    }\n\n    const startIndex = (currentPage - 1) * pageSize;\n    const endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n\n    const pages = range(startPage, endPage + 1);\n\n    return {\n      totalItems: totalItems,\n      currentPage: currentPage,\n      pageSize: pageSize,\n      totalPages: totalPages,\n      startPage: startPage,\n      endPage: endPage,\n      startIndex: startIndex,\n      endIndex: endIndex,\n      pages: pages\n    };\n  }\n\n}\n","import {DataItemProps, DEFAULT_TREE_NODE_KEYS, TreeNodeKeys} from '@er/types';\nimport {TreeNode} from 'primeng/api';\nimport {CommonsUtils} from '../comm';\nimport {DataItemUtils} from '../data-item';\nimport {StatesUtils} from '../states';\n\nexport class TreeUtils {\n\n  static DEFAULT_NODE_PROPS = {\n    lazy: false,\n    autoExpandLevel: 0,\n    expandedIcon: 'fa fa-folder-open',\n    collapsedIcon: 'fa fa-folder',\n    icon: 'fa fa-leaf'\n  };\n\n  static transNodes(dataItems: {}[], keyMap: {\n    src: DataItemProps,\n    node: TreeNodeKeys\n  }, root?: string | TreeNode, lazy?: boolean): {}[] {\n    const treeKeys = Object.keys(keyMap.node).map(key => keyMap.node[key]);\n    let nodes;\n    let rootNode;\n    if (keyMap.src.levelIdLength) {\n      nodes = CommonsUtils.orderBy(dataItems, [keyMap.src.orderKey || keyMap.src.idKey], ['asc']);\n      nodes = nodes.map(item => {\n        if (item[keyMap.src.idKey]) {\n          const parentId = item[keyMap.src.idKey].substr(0, item[keyMap.src.idKey].length - keyMap.src.levelIdLength);\n          if (parentId && parentId !== item[keyMap.src.idKey]) {\n            item[keyMap.src.parentKey] = parentId;\n          }\n          if (!item[keyMap.node.dataKey]) {\n            item[keyMap.node.dataKey] = {...item};\n          }\n          item[keyMap.node.idKey] = item[keyMap.src.idKey];\n          item = CommonsUtils.pick(item, treeKeys);\n          return item;\n        }\n      });\n    } else if (keyMap.src.parentKey) {\n      nodes = CommonsUtils.orderBy(dataItems, [keyMap.src.parentKey, keyMap.src.idKey], ['asc']);\n      nodes = nodes.map(item => {\n        if (!item[keyMap.node.dataKey]) {\n          item[keyMap.node.dataKey] = {...item};\n        }\n        item[keyMap.node.idKey] = item[keyMap.src.idKey];\n        item = CommonsUtils.pick(item, treeKeys);\n        return item;\n      });\n    }\n    nodes.forEach(item => {\n      item[keyMap.node.dataKey] = item[keyMap.node.dataKey] || {...item};\n      const children = nodes.filter(item2 =>\n        item2 && item2[keyMap.src.parentKey] && item2[keyMap.src.parentKey] === item['data'][keyMap.src.idKey]\n      );\n      if (children.length > 0) {\n        item[keyMap.node.childrenKey] = children;\n      }\n      item[keyMap.node.labelKey] = DataItemUtils.getItemLabel(item, keyMap.src.labelKey);\n      if (item[keyMap.src.parentKey]) {\n        item[keyMap.node.parentKey] = item[keyMap.src.parentKey];\n      }\n      if (lazy) {\n        item[keyMap.node.leafKey] = false;\n      }\n      if (root && CommonsUtils.isString(root) && root === item[keyMap.src.idKey]) {\n        rootNode = [item];\n      }\n    });\n    if (root && CommonsUtils.isJson(root)) {\n      root['children'] = nodes;\n      return [root];\n    } else {\n      return nodes = rootNode ? rootNode : nodes.filter(node => !node[keyMap.node.parentKey]);\n    }\n  }\n\n  static findNode(treeNodes: TreeNode[], value, props): TreeNode {\n    let found;\n    if (treeNodes) {\n      for (let i = 0; i < treeNodes.length; i++) {\n        if (value[props.dataItemProps.idKey] === treeNodes[i][DEFAULT_TREE_NODE_KEYS.dataKey][props.dataItemProps.idKey]) {\n          found = treeNodes[i];\n          break;\n        }\n        if (treeNodes[i].hasOwnProperty(DEFAULT_TREE_NODE_KEYS.childrenKey)) {\n          const children = treeNodes[i][DEFAULT_TREE_NODE_KEYS.childrenKey];\n          found = TreeUtils.findNode(children, value, props);\n          if (found) {\n            break;\n          }\n        }\n      }\n    }\n    return found;\n  }\n\n  static filter(nodes, predicate) {\n    const result = !nodes ? null : nodes.reduce((list, node) => {\n      let clone = null;\n      if (predicate(node)) {\n        // if the object matches the filter, clone it as it is\n        clone = CommonsUtils.copy({\n          ...node,\n          matched: true\n        });\n      } else if (node.children != null) {\n        // if the object has childrens, filter the list of children\n        const children = TreeUtils.filter(node.children, predicate);\n        if (children.length > 0) {\n          // if any of the children matches, clone the parent object, overwrite\n          // the children list with the filtered list\n          clone = Object.assign({}, node, {children: children});\n        }\n      }\n      if (clone) {\n        list.push(clone);\n      }\n      return list;\n    }, []);\n    return result;\n  }\n\n  static expandNode(node: TreeNode, isExpand: boolean, props = {}, toExpandLevel: number = 100, currentLevel: number = 1, id?: any) {\n    if (!node) {\n      return;\n    }\n    if (toExpandLevel >= currentLevel) {\n      if (id && (currentLevel === toExpandLevel)) {\n        node.expanded = node['id'] === id;\n      } else if (!id || (id && currentLevel < toExpandLevel)) {\n        node.expanded = isExpand;\n      }\n      TreeUtils.initNode(node, props);\n      currentLevel++;\n      if (node.children) {\n        node.children.forEach(childNode => {\n          TreeUtils.initNode(childNode, props);\n          if (toExpandLevel >= currentLevel) {\n            TreeUtils.expandNode(childNode, isExpand, props, toExpandLevel, currentLevel, id);\n          }\n        });\n      }\n    }\n  }\n\n  static initNode(node, props = {}) {\n    if (!node._inited) {\n      ['expandedIcon', 'collapsedIcon'].forEach(iconType => TreeUtils.initIcon(node, iconType, props));\n      if (props['selectable']) {\n        node.selectable = CommonsUtils.getValue(props['selectable'], node);\n      }\n      node = {\n        ...node,\n        '_inited': true\n      };\n    }\n  }\n\n  static initIcon(node, iconType, props) {\n    if (!props) {\n      node[iconType] = TreeUtils.DEFAULT_NODE_PROPS[iconType];\n    } else if (props[iconType] && props[iconType].method) {\n      node[iconType] = (<Function>props[iconType].method)(node);\n    } else {\n      node[iconType] = props[iconType] || TreeUtils.DEFAULT_NODE_PROPS[iconType];\n    }\n  }\n\n  static getSelectedTreeState(siblingId) {\n    if (!siblingId) {\n      return null;\n    }\n    const sibling = siblingId && StatesUtils.getValue(siblingId);\n    if (sibling && sibling.component) {\n      const treeId = CommonsUtils.get(sibling.component, '$props.$ext.$container.tree.$id');\n      const treeState = StatesUtils.getValue(treeId);\n      return treeState;\n    }\n  }\n\n  static getSelectedNode(siblingId): TreeNode {\n    const treeState = TreeUtils.getSelectedTreeState(siblingId);\n    return treeState && treeState['selectedNode'];\n  }\n\n  static getSelectedNodeValue(siblingId): {}[] {\n    const treeState = TreeUtils.getSelectedTreeState(siblingId);\n    return treeState && treeState['selectedNodeValue'];\n  }\n\n}\n","import {NotifyLevel, NotifyProp, NotifyType, StateNames} from '@er/types';\nimport {CommonsUtils} from '../comm';\nimport {StatesUtils} from '../states';\n\nexport class AnnounceUtils {\n\n  static info(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, {\n      ...notify,\n      type: NotifyType.ANNOUNCE\n    });\n  }\n\n  static error(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, <NotifyProp>{\n      ...notify,\n      level: NotifyLevel.ERROR,\n      type: NotifyType.ANNOUNCE\n    });\n  }\n\n  static success(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, <NotifyProp>{\n      ...notify,\n      level: NotifyLevel.SUCCESS,\n      type: NotifyType.ANNOUNCE\n    });\n  }\n\n  static warn(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, <NotifyProp>{\n      ...notify,\n      level: NotifyLevel.WARN,\n      type: NotifyType.ANNOUNCE\n    });\n  }\n\n}\n","import {NotifyLevel, NotifyProp, StateNames} from '@er/types';\nimport {CommonsUtils} from '../comm';\nimport {StatesUtils} from '../states';\n\nexport class NotifyUtils {\n\n  static info(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, notify);\n  }\n\n  static error(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, <NotifyProp>{\n      ...notify,\n      level: NotifyLevel.ERROR\n    });\n  }\n\n  static success(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, <NotifyProp>{\n      ...notify,\n      level: NotifyLevel.SUCCESS\n    });\n  }\n\n  static warn(options: string | NotifyProp) {\n    const notify = CommonsUtils.getObjWhenStr<NotifyProp>(options, 'message');\n    StatesUtils.create(StateNames.notify, <NotifyProp>{\n      ...notify,\n      level: NotifyLevel.WARN\n    });\n  }\n\n}\n","import {Observable} from 'rxjs';\nimport {delay, retryWhen, scan} from 'rxjs/operators';\n\nexport class RxUtils {\n\n  public static retry<T>(count: number, wait: number): (source: Observable<T>) => Observable<T> {\n    const tap: (source: Observable<T>) => Observable<T> = retryWhen(errors => errors.pipe(\n      scan((acc, error) => {\n        if (acc >= count || -1) {\n          throw error;\n        }\n        return acc + 1;\n      }, 0),\n      delay(wait)\n    ));\n    return tap;\n  }\n\n}\n","export class UrlUtils {\n  /**\n   * The URL requested, before initial routing.\n   */\n  static readonly initialUrl = location.href;\n\n  static getQueryParameters(): any {\n    return UrlUtils.getQueryParametersUsingParameters(document.location.search);\n  }\n\n  static getQueryParametersUsingParameters(search: string): any {\n    const r = search.replace(/(^\\?)/, '').split('&').map(function (n) { return n = n.split('='), this[n[0]] = n[1], this; }.bind({}))[0];\n    return r;\n  }\n\n  static getInitialUrlParameters(): any {\n    const questionMarkIndex = UrlUtils.initialUrl.indexOf('?');\n    if (questionMarkIndex >= 0) {\n      return UrlUtils.initialUrl.substr(questionMarkIndex, UrlUtils.initialUrl.length - questionMarkIndex);\n    }\n\n    return '';\n  }\n\n  static getReturnUrl(): string {\n    const queryStringObj = UrlUtils.getQueryParametersUsingParameters(UrlUtils.getInitialUrlParameters());\n    if (queryStringObj.returnUrl) {\n      return decodeURIComponent(queryStringObj.returnUrl);\n    }\n\n    return null;\n  }\n\n  static getSingleSignIn(): boolean {\n    const queryStringObj = UrlUtils.getQueryParametersUsingParameters(UrlUtils.getInitialUrlParameters());\n    if (queryStringObj.ss) {\n      return queryStringObj.ss;\n    }\n\n    return false;\n  }\n}\n","export class TokenizerUtils {\n\n   static extract(str: string, format: string): ExtractionResult {\n        if (str === format) {\n            return new ExtractionResult(true);\n        }\n\n        const formatTokens = new FormatStringTokenizer().Tokenize(format);\n        if (!formatTokens) {\n            return new ExtractionResult(str === '');\n        }\n\n        const result = new ExtractionResult(true);\n\n        for (let i = 0; i < formatTokens.length; i++) {\n            const currentToken = formatTokens[i];\n            const previousToken = i > 0 ? formatTokens[i - 1] : null;\n\n            if (currentToken.Type === FormatStringTokenType.ConstantText) {\n                if (i === 0) {\n                    if (str.indexOf(currentToken.Text) !== 0) {\n                        result.isMatch = false;\n                        return result;\n                    }\n\n                    str = str.substr(currentToken.Text.length, str.length - currentToken.Text.length);\n                } else {\n                    const matchIndex = str.indexOf(currentToken.Text);\n                    if (matchIndex < 0) {\n                        result.isMatch = false;\n                        return result;\n                    }\n\n\n                    result.matches.push({ name: previousToken.Text, value: str.substr(0, matchIndex) });\n                    str = str.substring(0, matchIndex + currentToken.Text.length);\n                }\n            }\n        }\n\n        const lastToken = formatTokens[formatTokens.length - 1];\n        if (lastToken.Type === FormatStringTokenType.DynamicValue) {\n            result.matches.push({ name: lastToken.Text, value: str });\n        }\n\n        return result;\n    }\n\n    static matches(str: string, format: string): string[] {\n        const result = TokenizerUtils.extract(str, format);\n        if (!result.isMatch) {\n            return [];\n        }\n\n        const values = [];\n        for (let i = 0; i < result.matches.length; i++) {\n            values.push(result.matches[i].value);\n        }\n\n        return values;\n    }\n}\n\nexport class ExtractionResult {\n\n    public isMatch: boolean;\n    public matches: any[];\n\n\n    constructor(isMatch: boolean) {\n        this.isMatch = isMatch;\n        this.matches = [];\n    }\n}\n\nexport enum FormatStringTokenType {\n    ConstantText,\n    DynamicValue\n}\n\nexport class FormatStringToken {\n\n    public Text: string;\n\n    public Type: FormatStringTokenType;\n\n    constructor(text: string, type: FormatStringTokenType) {\n        this.Text = text;\n        this.Type = type;\n    }\n\n}\n\nexport class FormatStringTokenizer {\n\n    Tokenize(format: string, includeBracketsForDynamicValues: boolean = false): FormatStringToken[] {\n        const tokens: FormatStringToken[] = [];\n\n        let currentText = '';\n        let inDynamicValue = false;\n\n        for (let i = 0; i < format.length; i++) {\n            const c = format[i];\n            switch (c) {\n                case '{':\n                    if (inDynamicValue) {\n                      throw new Error('Incorrect syntax at char ' + i + '! format string can not contain agg dynamic value expression!');\n                    }\n\n                    inDynamicValue = true;\n\n                    if (currentText.length > 0) {\n                        tokens.push(new FormatStringToken(currentText, FormatStringTokenType.ConstantText));\n                        currentText = '';\n                    }\n\n                    break;\n                case '}':\n                    if (!inDynamicValue) {\n                        throw new Error(('Incorrect syntax at char ' + i + '! These is no opening brackets for the closing bracket }.'));\n                    }\n\n                    inDynamicValue = false;\n\n                    if (currentText.length <= 0) {\n                        throw new Error(('Incorrect syntax at char ' + i + '! Brackets does not containt any chars.'));\n                    }\n\n                    let dynamicValue = currentText;\n                    if (includeBracketsForDynamicValues) {\n                        dynamicValue = '{' + dynamicValue + '}';\n                    }\n\n                    tokens.push(new FormatStringToken(dynamicValue, FormatStringTokenType.DynamicValue));\n                    currentText = '';\n\n                    break;\n                default:\n                    currentText += c;\n                    break;\n            }\n        }\n\n        if (inDynamicValue) {\n            throw new Error(('There is no closing } char for an opened { char.'));\n        }\n\n        if (currentText.length > 0) {\n            tokens.push(new FormatStringToken(currentText, FormatStringTokenType.ConstantText));\n        }\n\n        return tokens;\n    }\n\n}\n","import {\n  AggInterval,\n  AggIntervalProps,\n  AggMethods,\n  AggMethodsProps,\n  AggProps,\n  ApiDataProps,\n  ApiPayload,\n  DEFAULT_ES_QUERY_CONDITION,\n  DEFAULT_QUERY_CONDITION,\n  ES_QUERY_OPERATORS,\n  Order,\n  QueryOperator,\n  QueryRule,\n  QueryRuleSet\n} from '@er/types';\nimport * as esb from 'elastic-builder';\nimport {Aggregation, DateHistogramAggregation, HistogramAggregation, Query, RequestBodySearch, Sort} from 'elastic-builder';\nimport {CommonsUtils} from '../comm';\nimport {DialogUtils} from '../dialog';\n\nexport class EsUtils {\n\n  static parseEsbObject(obj) {\n    if (!obj) {\n      return obj;\n    }\n    if (CommonsUtils.isArray(obj)) {\n      return obj.forEach(o => EsUtils.parseEsbObject(o));\n    } else {\n      if (CommonsUtils.isFunction(obj['toJSON'])) {\n        return obj['toJSON']();\n      } else {\n        return obj;\n      }\n    }\n  }\n\n  static getFieldAggs(key, aggMethods) {\n    if (aggMethods) {\n      let aggs = {};\n      aggMethods.forEach(method => {\n        switch (method) {\n          case AggMethodsProps.avg.key:\n            aggs = CommonsUtils.merge(aggs, esb.avgAggregation(`${key}-${method}`, key).toJSON());\n            break;\n          case AggMethodsProps.distinct.key:\n            aggs = CommonsUtils.merge(aggs, esb.cardinalityAggregation(`${key}-${method}`, key).toJSON());\n            break;\n          case AggMethodsProps.max.key:\n            aggs = CommonsUtils.merge(aggs, esb.maxAggregation(`${key}-${method}`, key).toJSON());\n            break;\n          case AggMethodsProps.min.key:\n            aggs = CommonsUtils.merge(aggs, esb.minAggregation(`${key}-${method}`, key).toJSON());\n            break;\n          case AggMethodsProps.sum.key:\n            aggs = CommonsUtils.merge(aggs, esb.sumAggregation(`${key}-${method}`, key).toJSON());\n            break;\n          case AggMethodsProps.count.key:\n            aggs = CommonsUtils.merge(aggs, esb.valueCountAggregation(`${key}-${method}`, key).toJSON());\n            break;\n          default:\n            aggs = CommonsUtils.merge(aggs, esb.valueCountAggregation(`${key}-${method}`, key).toJSON());\n        }\n      });\n      return aggs;\n    } else {\n      return undefined;\n    }\n  }\n\n  static resolveQuery(query): {\n    must: Query[],\n    should: Query[],\n    not: Query[]\n  } {\n    let must = [];\n    let should = [];\n    let not = [];\n    if (query) {\n      if (CommonsUtils.isArray(query)) {\n        must = must.concat(query);\n      } else if (CommonsUtils.isJson(query)) {\n        if (query.hasOwnProperty('$and')) {\n          const and = query['$and'];\n          if (CommonsUtils.isArray(and)) {\n            must = must.concat(and);\n          } else {\n            must.push(and);\n          }\n        }\n        if (query.hasOwnProperty('$or')) {\n          const or = query['$or'];\n          if (CommonsUtils.isArray(or)) {\n            should = should.concat(or);\n          } else {\n            should.push(or);\n          }\n        }\n        if (query.hasOwnProperty('$not')) {\n          const but = query['$not'];\n          if (CommonsUtils.isArray(but)) {\n            not = not.concat(but);\n          } else {\n            not.push(but);\n          }\n        }\n      } else {\n        must.push(query);\n      }\n    }\n    return {\n      must: CommonsUtils.compact(must),\n      should: CommonsUtils.compact(should),\n      not: CommonsUtils.compact(not)\n    };\n  }\n\n  static resolveSearchFields(options) {\n    const searchFields = CommonsUtils.getArrayValue(options.searchFields);\n\n    if (CommonsUtils.isEmpty(searchFields)) {\n      DialogUtils.error('', '');\n      throw new Error('not found search fields');\n    }\n    const qs = [];\n    searchFields.filter(field => !!field).forEach(field => {\n      if (options.withPy) {\n        if (options.withWildcard) {\n          qs.push(esb.wildcardQuery(`${field}.py`, `*${options.queryValue}*`));\n        } else {\n          qs.push(esb.prefixQuery(`${field}.py`, options.queryValue));\n        }\n      }\n      if (options.withZh) {\n        qs.push(esb.wildcardQuery(`${field}.zh`, `*${options.queryValue}*`));\n      }\n      if (options.withTerm) {\n        qs.push(esb.termQuery(field, options.queryValue));\n      }\n      if (options.withPrefix) {\n        qs.push(esb.prefixQuery(field, options.queryValue));\n      }\n      if (options.withWildcard) {\n        qs.push(esb.wildcardQuery(field, `*${options.queryValue}*`));\n      }\n      if (qs.length === 0) {\n        qs.push(esb.matchQuery(field, options.queryValue));\n      }\n    });\n    return qs;\n  }\n\n  static buildQueryBody(options: ApiDataProps): RequestBodySearch {\n\n    const query: RequestBodySearch = esb.requestBodySearch();\n\n    const boolQuery = esb.boolQuery();\n\n    const queries = EsUtils.resolveQuery(options.query);\n\n    if (options.queryValue) {\n      const qs = EsUtils.resolveSearchFields(options);\n      if (qs.length === 1) {\n        queries.must.push(qs[0]);\n      } else {\n        queries.should = queries.should.concat(qs);\n      }\n    }\n\n    if (queries.must.length > 0) {\n      boolQuery.must(queries.must);\n    }\n\n    if (queries.should.length > 0) {\n      boolQuery.should(queries.should).minimumShouldMatch(1);\n    }\n\n    if (queries.not.length > 0) {\n      boolQuery.mustNot(queries.not);\n    }\n\n    query.query(boolQuery);\n\n    if (!CommonsUtils.isEmpty(options.filter)) {\n      boolQuery.filter(options.filter);\n    }\n\n    if (!(options.returnFields && options.returnFields.length === 0)) {\n      const returnFields = options.returnFields || options.searchFields;\n      query.source(returnFields);\n    }\n\n    if (options.sort) {\n      const sorts = EsUtils.resolveSort(options.sort);\n      const esSorts: Sort[] = [];\n      Object.keys(sorts).forEach(key => {\n        esSorts.push(esb.sort(key, sorts[key] || Order.ASC).unmappedType('string'));\n      });\n      query.sorts(esSorts);\n    }\n\n    if (options.aggProps) {\n      const aggs = EsUtils.parseAggProps(options.aggProps);\n      if (aggs.length > 0) {\n        (<RequestBodySearch>query).aggs(aggs);\n        (<RequestBodySearch>query).size(options.size || 0);\n      }\n    }\n\n    if (options.from) {\n      query.from(options.from);\n    }\n\n    if (options.size) {\n      query.size(options.size);\n    }\n\n    return query;\n  }\n\n  static parseAggProps(aggProps) {\n    const props = CommonsUtils.getArrayValue(aggProps);\n    const aggs = [];\n    let agg: Aggregation;\n    props.forEach(item => {\n      let aggProp: AggProps = item;\n      if (CommonsUtils.isString(aggProp)) {\n        aggProp = {field: item};\n      }\n      const aggName = aggProp.name || `${aggProp.field}-${aggProp.method || 'terms'}`;\n      if (aggProp.aggs) {\n        aggProp.method = AggMethods.CUSTOMER;\n      }\n      switch (aggProp.method) {\n        case AggMethods.AVG:\n          agg = esb.avgAggregation(aggName, aggProp.field).missing('0');\n          break;\n        case AggMethods.MIN:\n          agg = esb.minAggregation(aggName, aggProp.field);\n          break;\n        case AggMethods.MAX:\n          agg = esb.maxAggregation(aggName, aggProp.field);\n          break;\n        case AggMethods.SUM:\n          agg = esb.sumAggregation(aggName, aggProp.field).missing('0');\n          break;\n        case AggMethods.DISTINCT:\n          agg = esb.cardinalityAggregation(aggName, aggProp.field);\n          break;\n        case AggMethods.HISTOGRAM:\n          agg = esb.histogramAggregation(aggName, aggProp.field);\n          if (aggProp.format) {\n            (<HistogramAggregation>agg).interval(aggProp.interval);\n          }\n          (<HistogramAggregation>agg).minDocCount(aggProp.minCount || 1);\n          if (aggProp.format) {\n            (<HistogramAggregation>agg).format(aggProp.format);\n          }\n          if (aggProp.missing) {\n            (<HistogramAggregation>agg).missing(aggProp.missing);\n          }\n          break;\n        case AggMethods.DATE_HISTOGRAM:\n          agg = esb.dateHistogramAggregation(aggName, aggProp.field);\n          if (aggProp.interval) {\n            (<DateHistogramAggregation>agg).interval(aggProp.interval);\n          }\n          const interval = aggProp.interval || AggInterval.DAY;\n          const intervalProp = AggIntervalProps[interval];\n          (<HistogramAggregation>agg).interval(interval);\n          (<HistogramAggregation>agg).minDocCount(aggProp.minCount || 1);\n          const format = aggProp.format || (intervalProp && intervalProp.format);\n          if (format) {\n            (<HistogramAggregation>agg).format(format);\n          }\n          if (aggProp.missing) {\n            (<HistogramAggregation>agg).missing(aggProp.missing);\n          }\n          break;\n        case AggMethods.CUSTOMER:\n          agg = CommonsUtils.getValue(aggProp.aggs, aggProp);\n          break;\n        case AggMethods.COUNT:\n          agg = esb.valueCountAggregation(aggName, aggProp.field);\n          break;\n        default:\n          agg = esb.termsAggregation(aggName, aggProp.field).size(aggProp.size || 10);\n          break;\n      }\n      aggs.push(agg);\n    });\n    return aggs;\n  }\n\n  static resolveRequestBody(body: ApiPayload | string | RequestBodySearch, options?): {} {\n\n    if (!body || typeof body === 'string') {\n      return body || {};\n    }\n\n    if (body instanceof RequestBodySearch) {\n      return CommonsUtils.merge({}, body.toJSON() || {}, options.payload || {}, options.body || options.params || {});\n    }\n\n    const _body = {...body};\n    if (!CommonsUtils.isEmpty(_body.sort)) {\n      const sorts = EsUtils.resolveSort(_body.sort);\n      const esSorts = [];\n      Object.keys(sorts).forEach(key => {\n        esSorts.push({[key]: {order: sorts[key] || Order.ASC, 'unmapped_type': 'string'}});\n      });\n      _body.sort = esSorts;\n    }\n\n    if (_body.size && _body.page) {\n      _body.from = _body.page * _body.size;\n    }\n\n    if (_body.from && _body.to) {\n      _body.size = _body.to - _body.from;\n    }\n\n    delete _body.to;\n    delete _body.page;\n\n    if (!CommonsUtils.isEmpty(_body.query) ||\n      !CommonsUtils.isEmpty(_body.filter)) {\n\n      let esQuery = {};\n\n      if (!CommonsUtils.isEmpty(_body.query)) {\n        if (CommonsUtils.isArray(_body.query)) {\n          _body.query['$and'] = _body.query;\n        } else {\n          _body.query = EsUtils.parseEsbObject(_body.query);\n        }\n        const queryBody = _body.query;\n        if (Object.keys(queryBody).length > 0) {\n          Object.keys(queryBody).forEach(key => {\n            if (key === '$and') {\n              const must = EsUtils.queryResolver(queryBody, '$and');\n              if (must) {\n                esQuery['must'] = must;\n              }\n            } else if (key === '$or') {\n              const should = EsUtils.queryResolver(queryBody, '$or');\n              if (should) {\n                esQuery['should'] = should;\n              }\n            } else if (key === '$not') {\n              const must_not = EsUtils.queryResolver(queryBody, '$not');\n              if (must_not) {\n                esQuery['must_not'] = must_not;\n              }\n            } else if (queryBody[key]) {\n              if (esQuery['must']) {\n                esQuery['must'].push({[key]: queryBody[key]});\n              } else {\n                esQuery['must'] = [{[key]: queryBody[key]}];\n              }\n            }\n          });\n          esQuery = {...esQuery};\n        }\n        if (esQuery['should'] && !esQuery['minimum_should_match']) {\n          esQuery['minimum_should_match'] = 1;\n        }\n      }\n\n      if (!CommonsUtils.isEmpty(_body.filter)) {\n        const filterBody = {..._body.filter};\n        esQuery['filter'] = [];\n        if (Object.keys(filterBody).length > 0) {\n          Object.keys(filterBody).forEach(key => {\n            if (filterBody[key]) {\n              esQuery['filter'].push({[key]: filterBody[key]});\n            }\n          });\n        }\n        if (esQuery['filter'].length === 0) {\n          delete esQuery['filter'];\n        }\n      }\n\n      if (Object.keys(esQuery).length > 0) {\n        _body.query = {bool: esQuery};\n      }\n    }\n\n    if (!CommonsUtils.isEmpty(_body.aggs)) {\n      const aggs = EsUtils.parseAggProps(_body.aggs);\n      if (aggs.length > 0) {\n        _body.aggs = esb.requestBodySearch().aggs(aggs).toJSON()['aggs'];\n      }\n    }\n\n    Object.keys(_body).forEach(k => {\n      if (CommonsUtils.isEmpty(_body[k])) {\n        delete _body[k];\n      }\n    });\n    return _body;\n  }\n\n  static resolveSort(sort): {} {\n    let sorts = {};\n    if (CommonsUtils.isString(sort)) {\n      sorts[<string>sort] = Order.ASC;\n    } else if (CommonsUtils.isArray(sort)) {\n      (<any[]>sort).forEach(s => {\n        if (CommonsUtils.isString(s)) {\n          if (!sorts[s]) {\n            sorts[s] = Order.ASC;\n          }\n        } else {\n          sorts = {\n            ...sorts,\n            ...<{}>s\n          };\n        }\n      });\n    } else {\n      sorts = <{}>sort;\n    }\n    return sorts;\n  }\n\n  static getMsearchBody(qs: {}[]): string {\n    const body = qs.map(q => JSON.stringify(q));\n    return body.join('\\n') + '\\n';\n  }\n\n  static buildQueryRuleSet(ruleSet: QueryRuleSet) {\n    ruleSet = (!ruleSet) ? {} : ruleSet;\n\n    return (function parse(data: QueryRule | QueryRuleSet) {\n      if (!data['condition']) {\n        data['condition'] = DEFAULT_ES_QUERY_CONDITION || DEFAULT_QUERY_CONDITION;\n      }\n\n      if (['AND', 'OR'].indexOf(data['condition'].toUpperCase()) === -1) {\n        throw new Error(\n          'ElasticSearch bool query (AND,OR) \"{0}\"'\n            .replace('{0}', data['condition'])\n        );\n      }\n\n      if (!data['rules']) {\n        return {};\n      }\n\n      const parts = {};\n      parts['add'] = function (k, v) {\n        if (this.hasOwnProperty(k)) {\n          this[k].push(v);\n        } else {\n          this[k] = [v];\n        }\n      };\n\n      data['rules'].forEach(function (rule: QueryRule | QueryRuleSet) {\n\n        const get_value = (aRule) => {\n          if (aRule.data && aRule.data.transform) {\n            return aRule.data.transform.call(this, aRule.value);\n          } else {\n            return aRule.value;\n          }\n        };\n\n        const make_query = (aRule) => {\n\n          const operator: QueryOperator = ES_QUERY_OPERATORS[aRule.operator];\n\n          if (operator === undefined) {\n            throw new Error(\n              ' \"{0}\"'\n                .replace('{0}', aRule.operator)\n            );\n          }\n\n          let part = {};\n\n          if (operator.inputs !== 0) {\n            const keyVal = {};\n            const valueMapper = operator.getValue;\n            if (valueMapper) {\n              keyVal[aRule.field] = valueMapper(get_value(aRule));\n            } else {\n              keyVal[aRule.field] = get_value(aRule);\n            }\n            part[operator.operator] = keyVal;\n          }\n\n          if (aRule.operator === 'is_null') {\n            part = {exists: {field: aRule.field}};\n          }\n\n          if (data['condition'] === 'NOT') {\n            return {'bool': {'must_not': [part]}};\n          } else {\n            return part;\n          }\n        };\n\n        let clause;\n\n        if (data['condition'] === 'AND') {\n          clause = 'must';\n        }\n        if (data['condition'] === 'NOT') {\n          clause = 'must_not';\n        }\n        if (data['condition'] === 'OR') {\n          clause = 'should';\n        }\n\n        if (rule['rules'] && rule['rules'].length > 0) {\n          parts['add'](clause, parse(rule));\n        } else {\n          parts['add'](clause, make_query(rule));\n        }\n      });\n\n      delete parts['add'];\n      return {'bool': parts};\n    }(ruleSet));\n  }\n\n  static resolveAggs(aggs) {\n    const resolved = {};\n    Object.keys(aggs).forEach(key => {\n      const agg = aggs[key];\n      resolved[key] = {};\n      Object.keys(agg).forEach(k => {\n        if (k === 'buckets') {\n          resolved[key] = EsUtils.resolveBuckets(agg[k]);\n        } else if (k === 'value') {\n          resolved[key] = agg[k];\n        } else {\n          // console.debug('esUtils', 'discard agg key:' + k);\n          // resolved[key][k] = agg[key];\n        }\n      });\n    });\n    return resolved;\n  }\n\n  static resolveBuckets(buckets) {\n    const resolved = buckets.map(bucket => EsUtils.resolveBucket(bucket));\n    return resolved;\n  }\n\n  static resolveBucket(bucket) {\n    let resolved = {};\n    Object.keys(bucket).forEach(key => {\n      if (key === 'key') {\n        resolved['label'] = bucket['key'];\n      } else if (key === 'doc_count') {\n        resolved['value'] = bucket['doc_count'];\n      } else {\n        if (CommonsUtils.isJson(bucket[key])) {\n          resolved = {\n            ...resolved,\n            ...EsUtils.resolveAggs({[key]: bucket[key]})\n          };\n        } else {\n          resolved[key] = bucket[key];\n        }\n      }\n    });\n    return resolved;\n  }\n\n  private static queryResolver(queryBody, key) {\n    if (queryBody[key]) {\n      let _qs = queryBody[key].filter(q => !CommonsUtils.isEmpty(q));\n      if (_qs.length > 0) {\n        _qs = _qs.map(q => EsUtils.parseEsbObject(q));\n      }\n      return (_qs.length > 0) ? _qs : undefined;\n    }\n  }\n}\n\n\n","export function numToText(_num: number) {\n  const units = ['', '', ''];\n  const _units = ['', '', '', ''];\n  const zero2Nine = ['', '', '', '', '', '', '', '', '', ''];\n  const num = _num.toString().split('').reverse().join('');\n  const unitsLen = units.length;\n  const numLen = num.length;\n  if (numLen > unitsLen * 4) {\n    return '';\n  }\n  let str = '';\n  for (let i = 0; i < numLen / 4; i++) {\n    const __num = num.slice(i * 4, i * 4 + 4).split('').reverse().join('');\n    if (__num === '0000') {\n      continue;\n    }\n    let __str = '';\n    for (let j = 0; j < __num.length; j++) {\n      const currentNum = zero2Nine[parseInt(__num[j], 10)];\n      const currentUnit = _units[j + 4 - __num.length];\n      if (currentNum === '' && currentUnit === '') {\n        continue;\n      } else {\n        __str += currentNum + currentUnit;\n      }\n    }\n    str = __str + units[i] + str;\n  }\n  return str.replace(/[\\D]/g, '@').replace(/[@]+/g, '@').replace(/@$/, '').replace(/@([]+)/, '$1').replace(/@/g, '');\n}\n"]}