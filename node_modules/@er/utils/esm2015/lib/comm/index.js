/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { VarType } from '@er/types';
import * as _ from 'lodash';
import { CacheUtils } from '../cache';
export class CommonsUtils {
    /**
     * @return {?}
     */
    static lodash() {
        return _;
    }
    /**
     * @return {?}
     */
    static getSeq() {
        return CacheUtils.getSeq();
    }
    /**
     * @param {?=} max
     * @param {?=} min
     * @return {?}
     */
    static getRandomNumber(max = 10, min) {
        /** @type {?} */
        const result = Math.floor(Math.random() * (max + 1) + (min || 0));
        return result;
    }
    /**
     * @template T
     * @param {?} src
     * @param {?} key
     * @return {?}
     */
    static getObjWhenStr(src, key) {
        /** @type {?} */
        const result = (typeof src === 'string') ? (/** @type {?} */ ({ [key]: src })) : src;
        return result;
    }
    /**
     * @param {?} object
     * @return {?}
     */
    static getVarType(object) {
        /** @type {?} */
        let type = VarType.UNKNOWN;
        if (object === null) {
            type = VarType.NULL;
        }
        else if (object === undefined) {
            type = VarType.UNDEFINED;
        }
        else if (object === true || object === false) {
            type = VarType.BOOLEAN;
        }
        if (type !== VarType.UNKNOWN) {
            return type;
        }
        /** @type {?} */
        const objectType = typeof object;
        if (objectType === 'string') {
            // if (DateUtils.isDate(object)) {
            //   return VarType.DATE;
            // }
            type = VarType.STRING;
        }
        else if (objectType === 'number') {
            type = VarType.NUMBER;
        }
        else if (objectType === 'function') {
            type = VarType.FUNCTION;
        }
        if (object.constructor === [].constructor) {
            type = VarType.ARRAY;
        }
        else if (object.constructor === {}.constructor) {
            type = VarType.JSON;
        }
        return type;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    static isNullOrUndefined(value) {
        return value === undefined || value === null;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isString(obj) {
        return CommonsUtils.getVarType(obj) === VarType.STRING;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isBoolean(obj) {
        return CommonsUtils.getVarType(obj) === VarType.BOOLEAN;
    }
    /**
     * @param {?} s
     * @return {?}
     */
    static isEmptyString(s) {
        return !s || CommonsUtils.isString(s) && s.trim().length === 0;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isArray(obj) {
        return CommonsUtils.getVarType(obj) === VarType.ARRAY;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isNumber(obj) {
        return CommonsUtils.getVarType(obj) === VarType.NUMBER;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isJson(obj) {
        return CommonsUtils.getVarType(obj) === VarType.JSON;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isFunction(obj) {
        return CommonsUtils.getVarType(obj) === VarType.FUNCTION;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static isUrl(str) {
        /** @type {?} */
        const regexp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
        return regexp.test(str);
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static isInteger(str) {
        return !CommonsUtils.isNullOrUndefined(str) && /^\d+$/.test(str);
    }
    /**
     * @param {?} value
     * @param {?} other
     * @return {?}
     */
    static isEqual(value, other) {
        return _.isEqual(value, other);
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static copy(obj) {
        return _.cloneDeep(obj);
    }
    /**
     * @param {?} obj1
     * @param {...?} obj2
     * @return {?}
     */
    static merge(obj1, ...obj2) {
        return _.merge.apply(null, [obj1, ...obj2]);
    }
    /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    static pickBy(obj, predicate) {
        return _.pickBy(obj, predicate);
    }
    /**
     * @param {?} obj
     * @param {?} keys
     * @return {?}
     */
    static pick(obj, keys) {
        return _.pick(obj, keys);
    }
    /**
     * @param {?} obj1
     * @param {...?} obj2
     * @return {?}
     */
    static defaults(obj1, ...obj2) {
        return _.defaultsDeep.apply(undefined, [obj1, ...obj2]);
    }
    /**
     * @param {?} obj1
     * @param {?} obj2
     * @return {?}
     */
    static equals(obj1, obj2) {
        return _.isEqual(obj1, obj2);
    }
    /**
     * @param {?} obj
     * @param {?} path
     * @param {?} value
     * @return {?}
     */
    static set(obj, path, value) {
        return _.set(obj, path, value);
    }
    /**
     * @param {?} obj
     * @param {?} path
     * @param {?=} defaultValue
     * @return {?}
     */
    static get(obj, path, defaultValue) {
        return _.get(obj, path, defaultValue);
    }
    /**
     * @param {?} obj
     * @param {?} source
     * @return {?}
     */
    static extend(obj, source) {
        return _.extend(obj, source);
    }
    /**
     * @param {?} collection
     * @return {?}
     */
    static compact(collection) {
        return _.compact(collection);
    }
    /**
     * @param {?} obj
     * @param {?} path
     * @return {?}
     */
    static omit(obj, path) {
        return _.omit(obj, path);
    }
    /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    static omitBy(obj, predicate) {
        return _.omitBy(obj, predicate);
    }
    /**
     * @param {?} obj
     * @param {?} path
     * @return {?}
     */
    static unset(obj, path) {
        return _.unset(obj, path);
    }
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    static find(collection, predicate) {
        return _.find(collection, predicate);
    }
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    static findIndex(collection, predicate) {
        return _.findIndex(collection, predicate);
    }
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    static remove(collection, predicate) {
        return _.remove(collection, predicate);
    }
    /**
     * @param {?} obj
     * @param {?} iteratee
     * @return {?}
     */
    static forOwn(obj, iteratee) {
        return _.forOwn(obj, iteratee);
    }
    /**
     * @param {?} obj
     * @param {?} iteratee
     * @return {?}
     */
    static map(obj, iteratee) {
        return _.map(obj, iteratee);
    }
    /**
     * @param {?} obj
     * @param {?} by
     * @return {?}
     */
    static unique(obj, by) {
        return _.uniqBy(obj, by);
    }
    /**
     * @param {?} obj
     * @param {?} iteratees
     * @param {?=} orders
     * @return {?}
     */
    static orderBy(obj, iteratees, orders) {
        return _.orderBy(obj, iteratees, orders);
    }
    /**
     * @param {...?} obj
     * @return {?}
     */
    static union(...obj) {
        return _.union(obj);
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static flatten(obj) {
        return _.flatten(obj);
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static flattenDeep(obj) {
        return _.flattenDeep(obj);
    }
    /**
     * @param {?} src
     * @param {?} format
     * @return {?}
     */
    static format(src, format) {
        return src;
    }
    /**
     * @param {?} o1
     * @param {?} o2
     * @return {?}
     */
    static jsonConcat(o1, o2) {
        for (const key in o2) {
            o1[key] = o2[key];
        }
        return o1;
    }
    /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    static escape(obj, key) {
        const _a = key, deletedItem = obj[_a], rest = tslib_1.__rest(obj, [typeof _a === "symbol" ? _a : _a + ""]);
        return rest;
    }
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    static filter(collection, predicate) {
        return _.filter(collection, predicate);
    }
    /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    static where(obj, predicate) {
        if (Object.keys(predicate).every(key => obj && obj[key] === predicate[key])) {
            return obj;
        }
        else {
            return null;
        }
    }
    /**
     * @param {?} s
     * @return {?}
     */
    static capitalize(s) {
        if (s) {
            return s.charAt(0).toUpperCase() + s.slice(1);
        }
        else {
            return s;
        }
    }
    /**
     * @param {?} s
     * @param {?} vars
     * @return {?}
     */
    static templateStr(s, vars) {
        /** @type {?} */
        const compiled = _.template(s);
        return compiled(vars);
    }
    /**
     * @param {?} s
     * @return {?}
     */
    static isTemplateStr(s) {
        /** @type {?} */
        const isMatch = /.*\${.*}.*/.test(s) || /.*<%=(.*)%>.*/.test(s);
        return isMatch;
    }
    /**
     * @template T
     * @param {?} item
     * @param {?=} keyName
     * @return {?}
     */
    static getArray(item, keyName) {
        /** @type {?} */
        const items = [];
        if (item) {
            if (CommonsUtils.isArray(item)) {
                return (/** @type {?} */ (item));
            }
            else if (CommonsUtils.isJson(item)) {
                for (const key in item) {
                    if (key) {
                        /** @type {?} */
                        let c = item[key];
                        if (keyName) {
                            c = Object.assign({ [keyName]: key }, c);
                        }
                        items.push(c);
                    }
                }
            }
            else {
                items.push(item);
            }
        }
        return items;
    }
    /**
     * @param {?} obj
     * @param {...?} keys
     * @return {?}
     */
    static removeKeys(obj, ...keys) {
        /** @type {?} */
        let o = obj;
        while (keys.length > 0) {
            o = CommonsUtils.set(o, keys, undefined);
            CommonsUtils.unset(o, keys);
            keys.pop();
            /** @type {?} */
            const v = CommonsUtils.get(o, keys);
            if (!CommonsUtils.isEmpty(v)) {
                break;
            }
        }
        return o;
    }
    /**
     * @param {?} value
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    static extract(value, from, to) {
        /** @type {?} */
        let target;
        if (value && (from !== to)) {
            if (to >= value.length) {
                target = to - value.length;
                while ((target--) + 1) {
                    value.push(undefined);
                }
            }
            value.splice(to, 0, value.splice(from, 1)[0]);
        }
    }
    /**
     * @param {?} srcArray
     * @param {?} item
     * @param {?=} index
     * @return {?}
     */
    static addItem(srcArray, item, index) {
        /** @type {?} */
        let toAdd = item;
        if (!CommonsUtils.isArray(item)) {
            toAdd = [item];
        }
        if (index) {
            return [].concat(srcArray.slice(0, index), toAdd, srcArray.slice(index));
        }
        else {
            return [].concat(srcArray, toAdd);
        }
    }
    /**
     * @param {?} a
     * @param {?} index
     * @return {?}
     */
    static removeByIndex(a, index) {
        return [].concat(a.slice(0, index), a.slice(index + 1));
    }
    /**
     * @template T
     * @param {?} a
     * @param {?} index
     * @param {?} element
     * @return {?}
     */
    static replace(a, index, element) {
        return [].concat(a.slice(0, index), element, a.slice(index + 1));
    }
    /**
     * @template T
     * @param {?} a
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    static move(a, from, to) {
        /** @type {?} */
        const element = a[from];
        /** @type {?} */
        const forward = from < to;
        /** @type {?} */
        const head = a.slice(0, forward ? from : to);
        /** @type {?} */
        const mid = a.slice(forward ? from + 1 : to, forward ? to + 1 : from);
        /** @type {?} */
        const tail = a.slice(forward ? to + 1 : from + 1);
        return forward ?
            [].concat(head, mid, element, tail) :
            [].concat(head, element, mid, tail);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    static restoreFn(value) {
        if ((typeof value === 'string') && value.toLocaleLowerCase().trim().indexOf('function') === 0) {
            return new Function('return ' + value.replace(/_this/g, 'this')
                .replace(/__assign/g, 'Object.assign'))();
        }
        else {
            return value;
        }
    }
    /**
     * 排除key为k，value为v 的数据项
     * @param {?} src
     * @param {?} k
     * @param {?} v
     * @return {?}
     */
    static exclude(src, k, v) {
        /** @type {?} */
        const result = Object.keys(src).reduce((acc, key) => (src[key][k] === v ? acc : Object.assign({}, acc, { [key]: src[key] })), {});
        return result;
    }
    /**
     * 替换src中的 {k,o} 元素 为 {k,v}
     * @param {?} src
     * @param {?} k
     * @param {?} o
     * @param {?} v
     * @return {?}
     */
    static replaceObj(src, k, o, v) {
        /** @type {?} */
        const index = _.find(src, { [k]: o });
        return [
            ...src.slice(0, index),
            Object.assign({}, src[index], { [k]: v }),
            ...src.slice(index + 1)
        ];
    }
    /**
     * 合并 {} 和 []
     * @param {?} src1
     * @param {?} src2
     * @param {?} k
     * @return {?}
     */
    static concat(src1, src2, k) {
        return Object.assign({}, src1, src2.reduce((acc, item) => (Object.assign({}, acc, { [item[k]]: item })), {}));
    }
    /**
     * @param {?} json
     * @return {?}
     */
    static restoreJsonFn(json) {
        /** @type {?} */
        let jsonStr;
        if (typeof json === 'string') {
            jsonStr = json;
        }
        else {
            jsonStr = CommonsUtils.stringify(json);
        }
        return JSON.parse(jsonStr, (key, value) => CommonsUtils.restoreFn(value));
    }
    /**
     * @param {?} json
     * @return {?}
     */
    static stringify(json) {
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        function replacer(key, value) {
            if (typeof value === 'function') {
                return value.toString();
            }
            else {
                return value;
            }
        }
        return JSON.stringify(json, replacer);
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static hash(str) {
        /** @type {?} */
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
            /** @type {?} */
            const character = str.charCodeAt(i);
            hash = ((hash << 5) - hash) + character;
            hash = hash & hash; // Convert to 32bit integer
        }
        return hash;
    }
    /**
     * 根据options定义，转换src
     *  options:{
     *    src-key: tar-key | {key:tar-key,options:{}} | Function
     *  }
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    static adaptObject(src, options) {
        if (CommonsUtils.isArray(src)) {
            return CommonsUtils.adaptArray(src, options);
        }
        else {
            return CommonsUtils.adaptJson(src, options);
        }
    }
    /**
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    static adaptJson(src, options) {
        /** @type {?} */
        const result = {};
        Object.keys(options).forEach((key) => {
            /** @type {?} */
            const srcValue = CommonsUtils.get(src, key);
            if (srcValue) {
                if (CommonsUtils.isArray(srcValue)) {
                    /** @type {?} */
                    let tarKey = null;
                    if (CommonsUtils.isString(options[key])) {
                        tarKey = options[key];
                    }
                    else {
                        tarKey = options[key]['key'];
                    }
                    CommonsUtils.set(result, tarKey, CommonsUtils.adaptArray(srcValue, options[key]['options'] || options));
                }
                else if (CommonsUtils.isJson(srcValue)) {
                    CommonsUtils.set(result, options[key], CommonsUtils.adaptJson(srcValue, options[key]['options'] || {}));
                }
                else {
                    if (CommonsUtils.isString(options[key])) {
                        CommonsUtils.set(result, options[key], srcValue);
                    }
                    else if (CommonsUtils.isFunction(options[key])) {
                        CommonsUtils.set(result, options[key], options[key].apply(undefined, src, options));
                    }
                }
            }
        });
        return result;
    }
    /**
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    static adaptArray(src, options) {
        /** @type {?} */
        const result = [];
        src.forEach(item => {
            result.push(CommonsUtils.adaptObject(item, options));
        });
        return result;
    }
    /**
     * @param {?} dateString
     * @return {?}
     */
    static getAge(dateString) {
        /** @type {?} */
        const today = new Date();
        /** @type {?} */
        const birthDate = new Date(dateString);
        /** @type {?} */
        let age = today.getFullYear() - birthDate.getFullYear();
        /** @type {?} */
        const m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }
    /**
     * @param {?} target
     * @return {?}
     */
    static toDate(target) {
        if (target instanceof Date) {
            return target;
        }
        if (CommonsUtils.isString(target)) {
            /** @type {?} */
            const dateNumber = Date.parse(target);
            return !isNaN(dateNumber) ? new Date(dateNumber) : null;
        }
        return null;
    }
    /**
     * @param {?} tar
     * @param {?=} date
     * @return {?}
     */
    static isBefore(tar, date = new Date()) {
        /** @type {?} */
        const src = CommonsUtils.toDate(date);
        /** @type {?} */
        const original = CommonsUtils.toDate(tar);
        return !!(original && src && original < src);
    }
    /**
     * @param {?} tar
     * @param {?=} date
     * @return {?}
     */
    static isAfter(tar, date = new Date()) {
        /** @type {?} */
        const src = CommonsUtils.toDate(date);
        /** @type {?} */
        const original = CommonsUtils.toDate(tar);
        return !!(original && src && original > src);
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static toString(obj) {
        switch (CommonsUtils.getVarType(obj)) {
            case VarType.NULL:
            case VarType.UNDEFINED:
                return '';
            case VarType.ARRAY: {
                /** @type {?} */
                const a = [];
                obj.forEach(o => a.push(CommonsUtils.toString(o)));
                return `[${a.join(',')}]`;
            }
            case VarType.JSON:
                return CommonsUtils.stringify(obj);
            default:
                return obj.toString();
        }
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    static isEmpty(obj) {
        switch (CommonsUtils.getVarType(obj)) {
            case VarType.NULL:
            case VarType.UNDEFINED:
                return true;
            case VarType.STRING:
                return obj.length === 0;
            case VarType.ARRAY:
                return ((/** @type {?} */ (obj))).length === 0;
            case VarType.JSON:
                return Object.keys(obj).length === 0;
            default:
                return obj.toString().length === 0;
        }
    }
    /**
     * @param {?} attributes
     * @param {?} keys
     * @return {?}
     */
    static convertToBoolean(attributes, keys) {
        /** @type {?} */
        const l_attributes = Object.assign({}, attributes);
        if (keys && keys.length > 0) {
            keys.forEach(key => {
                if (l_attributes.hasOwnProperty(key) && l_attributes[key] === '') {
                    l_attributes[key] = true;
                }
            });
        }
        return l_attributes;
    }
    /**
     * @param {?} path
     * @return {?}
     */
    static flatPath(path) {
        if (CommonsUtils.isArray(path)) {
            return ((/** @type {?} */ (path))).join('-').replace('.', '-');
        }
        return ((/** @type {?} */ (path))).replace('.', '-');
    }
    /**
     * @param {?} arr
     * @param {?=} seperator
     * @return {?}
     */
    static join(arr, seperator) {
        /** @type {?} */
        const joiner = seperator || ',';
        if (!arr) {
            return '';
        }
        if (!CommonsUtils.isArray(arr)) {
            return arr;
        }
        switch (arr.length) {
            case 0:
                return '';
            case 1:
                return arr[0];
            default:
                return arr.join(joiner);
        }
    }
    /**
     * @param {?} obj
     * @param {...?} predicates
     * @return {?}
     */
    static deepFind(obj, ...predicates) {
        /** @type {?} */
        const _find = (o) => {
            if (o instanceof Array) {
                ((/** @type {?} */ (o))).forEach(i => _find(i));
            }
            else {
                for (const prop in o) {
                    if (o[prop] instanceof Array) {
                        _find(o[prop]);
                    }
                }
                predicates.some((predicate) => {
                    /** @type {?} */
                    const found = CommonsUtils.where(o, predicate);
                    if (found !== null) {
                        foundResults.push(o);
                    }
                    return found !== null;
                });
            }
        };
        /** @type {?} */
        const foundResults = [];
        _find(obj);
        return foundResults;
    }
    /**
     * @param {?} milliseconds
     * @return {?}
     */
    static sleep(milliseconds) {
        /** @type {?} */
        const start = new Date().getTime();
        for (let i = 0; i < 1e7; i++) {
            if ((new Date().getTime() - start) > milliseconds) {
                break;
            }
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    static getArrayValue(data) {
        if (!data) {
            return data;
        }
        if (CommonsUtils.isArray(data)) {
            return data;
        }
        else if (CommonsUtils.isString(data)) {
            return ((/** @type {?} */ (data))).split(',');
        }
        else {
            return [data];
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    static getText(data) {
        if (CommonsUtils.isArray(data)) {
            return ((/** @type {?} */ (data))).map(v => CommonsUtils.getText(v)).join(',');
        }
        else if (CommonsUtils.isJson(data)) {
            return JSON.stringify(data);
        }
        else if (CommonsUtils.isBoolean(data)) {
            return data ? '是' : '否';
        }
        else {
            return data;
        }
    }
    /**
     * @param {?} exp
     * @param {...?} context
     * @return {?}
     */
    static getValue(exp, ...context) {
        /** @type {?} */
        const fn = exp && (exp['method'] || exp);
        if (CommonsUtils.isFunction(fn)) {
            return (/** @type {?} */ (fn.apply(undefined, context)));
        }
        if (CommonsUtils.isString(exp) && exp.startsWith('@')) {
            return CommonsUtils.get(context && context[0], exp.substr(1));
        }
        return exp;
    }
    /**
     * @param {?} obj
     * @param {?} prop
     * @param {?} defaultValue
     * @return {?}
     */
    static defineHiddenProp(obj, prop, defaultValue) {
        Object.defineProperty(obj, prop, { enumerable: false, writable: true, configurable: true });
        obj[prop] = defaultValue;
    }
    /**
     * @param {?} str
     * @param {?} size
     * @return {?}
     */
    static splitBySize(str, size) {
        /** @type {?} */
        const results = [];
        /** @type {?} */
        let i = size;
        while (i <= str.length) {
            results.push(str.substr(0, i));
            i += size;
        }
        return results;
    }
    /**
     * @param {?} url
     * @param {?=} params
     * @return {?}
     */
    static resolveUrl(url, params = {}) {
        /** @type {?} */
        const _url = Object.keys(params)
            .reduce((acc, key) => acc.replace(`:${key}`, params[key]), url);
        return _url;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZXIvdXRpbHMvIiwic291cmNlcyI6WyJsaWIvY29tbS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbEMsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUVwQyxNQUFNLE9BQU8sWUFBWTs7OztJQUV2QixNQUFNLENBQUMsTUFBTTtRQUNYLE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQzs7OztJQUVELE1BQU0sQ0FBQyxNQUFNO1FBQ1gsT0FBTyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDN0IsQ0FBQzs7Ozs7O0lBRUQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxNQUFjLEVBQUUsRUFBRSxHQUFZOztjQUM3QyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDakUsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7Ozs7OztJQUVELE1BQU0sQ0FBQyxhQUFhLENBQW1DLEdBQWUsRUFBRSxHQUFZOztjQUM1RSxNQUFNLEdBQUcsQ0FBQyxPQUFPLEdBQUcsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQUEsRUFBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBQyxFQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUc7UUFDbEUsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQzs7Ozs7SUFFRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU07O1lBQ2xCLElBQUksR0FBRyxPQUFPLENBQUMsT0FBTztRQUMxQixJQUFJLE1BQU0sS0FBSyxJQUFJLEVBQUU7WUFDbkIsSUFB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O1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7Ozs7O0lBRUQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsWUFBWTtRQUM3QyxNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7UUFDMUYsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLFlBQVksQ0FBQztJQUMzQixDQUFDOzs7Ozs7SUFFRCxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxJQUFJOztjQUNwQixPQUFPLEdBQUcsRUFBRTs7WUFDZCxDQUFDLEdBQUcsSUFBSTtRQUNaLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLENBQUMsSUFBSSxJQUFJLENBQUM7U0FDWDtRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Ozs7OztJQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBVyxFQUFFLFNBRTNCLEVBQUU7O2NBQ0UsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQzdCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLEVBQUUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUM7UUFDakUsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1ZhclR5cGV9IGZyb20gJ0Blci90eXBlcyc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQge0NhY2hlVXRpbHN9IGZyb20gJy4uL2NhY2hlJztcblxuZXhwb3J0IGNsYXNzIENvbW1vbnNVdGlscyB7XG5cbiAgc3RhdGljIGxvZGFzaCgpOiB0eXBlb2YgXyB7XG4gICAgcmV0dXJuIF87XG4gIH1cblxuICBzdGF0aWMgZ2V0U2VxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIENhY2hlVXRpbHMuZ2V0U2VxKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0UmFuZG9tTnVtYmVyKG1heDogbnVtYmVyID0gMTAsIG1pbj86IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCArIDEpICsgKG1pbiB8fCAwKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmpXaGVuU3RyPFQgZXh0ZW5kcyB7IFtrZXk6IHN0cmluZ106IGFueSB9PihzcmM6IHN0cmluZyB8IFQsIGtleToga2V5b2YgVCk6IFQge1xuICAgIGNvbnN0IHJlc3VsdCA9ICh0eXBlb2Ygc3JjID09PSAnc3RyaW5nJykgPyB7W2tleV06IHNyY30gYXMgVCA6IHNyYztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgc3RhdGljIGdldFZhclR5cGUob2JqZWN0KTogVmFyVHlwZSB7XG4gICAgbGV0IHR5cGUgPSBWYXJUeXBlLlVOS05PV047XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkge1xuICAgICAgdHlwZSA9IFZhclR5cGUuTlVMTDtcbiAgICB9IGVsc2UgaWYgKG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0eXBlID0gVmFyVHlwZS5VTkRFRklORUQ7XG4gICAgfSBlbHNlIGlmIChvYmplY3QgPT09IHRydWUgfHwgb2JqZWN0ID09PSBmYWxzZSkge1xuICAgICAgdHlwZSA9IFZhclR5cGUuQk9PTEVBTjtcbiAgICB9XG4gICAgaWYgKHR5cGUgIT09IFZhclR5cGUuVU5LTk9XTikge1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICAgIGNvbnN0IG9iamVjdFR5cGUgPSB0eXBlb2Ygb2JqZWN0O1xuICAgIGlmIChvYmplY3RUeXBlID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gaWYgKERhdGVVdGlscy5pc0RhdGUob2JqZWN0KSkge1xuICAgICAgLy8gICByZXR1cm4gVmFyVHlwZS5EQVRFO1xuICAgICAgLy8gfVxuICAgICAgdHlwZSA9IFZhclR5cGUuU1RSSU5HO1xuICAgIH0gZWxzZSBpZiAob2JqZWN0VHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHR5cGUgPSBWYXJUeXBlLk5VTUJFUjtcbiAgICB9IGVsc2UgaWYgKG9iamVjdFR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHR5cGUgPSBWYXJUeXBlLkZVTkNUSU9OO1xuICAgIH1cbiAgICBpZiAob2JqZWN0LmNvbnN0cnVjdG9yID09PSBbXS5jb25zdHJ1Y3Rvcikge1xuICAgICAgdHlwZSA9IFZhclR5cGUuQVJSQVk7XG4gICAgfSBlbHNlIGlmIChvYmplY3QuY29uc3RydWN0b3IgPT09IHt9LmNvbnN0cnVjdG9yKSB7XG4gICAgICB0eXBlID0gVmFyVHlwZS5KU09OO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIHN0YXRpYyBpc051bGxPclVuZGVmaW5lZCh2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGw7XG4gIH1cblxuICBzdGF0aWMgaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuU1RSSU5HO1xuICB9XG5cbiAgc3RhdGljIGlzQm9vbGVhbihvYmopIHtcbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFZhclR5cGUob2JqKSA9PT0gVmFyVHlwZS5CT09MRUFOO1xuICB9XG5cbiAgc3RhdGljIGlzRW1wdHlTdHJpbmcocykge1xuICAgIHJldHVybiAhcyB8fCBDb21tb25zVXRpbHMuaXNTdHJpbmcocykgJiYgcy50cmltKCkubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgc3RhdGljIGlzQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuQVJSQVk7XG4gIH1cblxuICBzdGF0aWMgaXNOdW1iZXIob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuTlVNQkVSO1xuICB9XG5cbiAgc3RhdGljIGlzSnNvbihvYmopIHtcbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFZhclR5cGUob2JqKSA9PT0gVmFyVHlwZS5KU09OO1xuICB9XG5cbiAgc3RhdGljIGlzRnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuRlVOQ1RJT047XG4gIH1cblxuICBzdGF0aWMgaXNVcmwoc3RyKSB7XG4gICAgY29uc3QgcmVnZXhwID0gLyhmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8vO1xuICAgIHJldHVybiByZWdleHAudGVzdChzdHIpO1xuICB9XG5cbiAgc3RhdGljIGlzSW50ZWdlcihzdHI6IHN0cmluZykge1xuICAgIHJldHVybiAhQ29tbW9uc1V0aWxzLmlzTnVsbE9yVW5kZWZpbmVkKHN0cikgJiYgL15cXGQrJC8udGVzdChzdHIpO1xuICB9XG5cbiAgc3RhdGljIGlzRXF1YWwodmFsdWUsIG90aGVyKSB7XG4gICAgcmV0dXJuIF8uaXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xuICB9XG5cbiAgc3RhdGljIGNvcHkob2JqOiBhbnkpIHtcbiAgICByZXR1cm4gXy5jbG9uZURlZXAob2JqKTtcbiAgfVxuXG4gIHN0YXRpYyBtZXJnZShvYmoxLCAuLi5vYmoyKSB7XG4gICAgcmV0dXJuIF8ubWVyZ2UuYXBwbHkobnVsbCwgW29iajEsIC4uLm9iajJdKTtcbiAgfVxuXG4gIHN0YXRpYyBwaWNrQnkob2JqLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gXy5waWNrQnkob2JqLCBwcmVkaWNhdGUpO1xuICB9XG5cbiAgc3RhdGljIHBpY2sob2JqLCBrZXlzKSB7XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGtleXMpO1xuICB9XG5cbiAgc3RhdGljIGRlZmF1bHRzKG9iajEsIC4uLm9iajIpIHtcbiAgICByZXR1cm4gXy5kZWZhdWx0c0RlZXAuYXBwbHkodW5kZWZpbmVkLCBbb2JqMSwgLi4ub2JqMl0pO1xuICB9XG5cbiAgc3RhdGljIGVxdWFscyhvYmoxLCBvYmoyKSB7XG4gICAgcmV0dXJuIF8uaXNFcXVhbChvYmoxLCBvYmoyKTtcbiAgfVxuXG4gIHN0YXRpYyBzZXQob2JqOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSwgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiBfLnNldChvYmosIHBhdGgsIHZhbHVlKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQob2JqLCBwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSwgZGVmYXVsdFZhbHVlPzogYW55KSB7XG4gICAgcmV0dXJuIF8uZ2V0KG9iaiwgcGF0aCwgZGVmYXVsdFZhbHVlKTtcbiAgfVxuXG4gIHN0YXRpYyBleHRlbmQob2JqLCBzb3VyY2UpIHtcbiAgICByZXR1cm4gXy5leHRlbmQob2JqLCBzb3VyY2UpO1xuICB9XG5cbiAgc3RhdGljIGNvbXBhY3QoY29sbGVjdGlvbjogYW55W10pIHtcbiAgICByZXR1cm4gXy5jb21wYWN0KGNvbGxlY3Rpb24pO1xuICB9XG5cbiAgc3RhdGljIG9taXQob2JqOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwYXRoOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gXy5vbWl0KG9iaiwgcGF0aCk7XG4gIH1cblxuICBzdGF0aWMgb21pdEJ5KG9iajogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgcHJlZGljYXRlOiAoKHYpID0+IGJvb2xlYW4pKSB7XG4gICAgcmV0dXJuIF8ub21pdEJ5KG9iaiwgcHJlZGljYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyB1bnNldChvYmo6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHBhdGg6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIF8udW5zZXQob2JqLCBwYXRoKTtcbiAgfVxuXG4gIHN0YXRpYyBmaW5kKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBfLmZpbmQoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBmaW5kSW5kZXgoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIF8uZmluZEluZGV4KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk6IGFueVtdIHtcbiAgICByZXR1cm4gXy5yZW1vdmUoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBmb3JPd24ob2JqLCBpdGVyYXRlZTogKHZhbHVlLCBrZXksIG8pID0+IGFueSkge1xuICAgIHJldHVybiBfLmZvck93bihvYmosIGl0ZXJhdGVlKTtcbiAgfVxuXG4gIHN0YXRpYyBtYXAob2JqOiBhbnlbXSwgaXRlcmF0ZWU6ICh2YWx1ZSwgaW5kZXgsIGxpc3QpID0+IGFueSkge1xuICAgIHJldHVybiBfLm1hcChvYmosIGl0ZXJhdGVlKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmlxdWUob2JqOiBhbnlbXSwgYnkpIHtcbiAgICByZXR1cm4gXy51bmlxQnkob2JqLCBieSk7XG4gIH1cblxuICBzdGF0aWMgb3JkZXJCeShvYmo6IGFueVtdLCBpdGVyYXRlZXMsIG9yZGVycz8pIHtcbiAgICByZXR1cm4gXy5vcmRlckJ5KG9iaiwgaXRlcmF0ZWVzLCBvcmRlcnMpO1xuICB9XG5cbiAgc3RhdGljIHVuaW9uKC4uLm9iajogYW55W11bXSkge1xuICAgIHJldHVybiBfLnVuaW9uKG9iaik7XG4gIH1cblxuICBzdGF0aWMgZmxhdHRlbihvYmopIHtcbiAgICByZXR1cm4gXy5mbGF0dGVuKG9iaik7XG4gIH1cblxuICBzdGF0aWMgZmxhdHRlbkRlZXAob2JqKSB7XG4gICAgcmV0dXJuIF8uZmxhdHRlbkRlZXAob2JqKTtcbiAgfVxuXG4gIHN0YXRpYyBmb3JtYXQoc3JjLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gc3JjO1xuICB9XG5cbiAgc3RhdGljIGpzb25Db25jYXQobzEsIG8yKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbzIpIHtcbiAgICAgIG8xW2tleV0gPSBvMltrZXldO1xuICAgIH1cbiAgICByZXR1cm4gbzE7XG4gIH1cblxuICBzdGF0aWMgZXNjYXBlKG9iajoge30sIGtleTogc3RyaW5nKToge30ge1xuICAgIGNvbnN0IHtba2V5XTogZGVsZXRlZEl0ZW0sIC4uLnJlc3R9ID0gb2JqO1xuICAgIHJldHVybiByZXN0O1xuICB9XG5cbiAgc3RhdGljIGZpbHRlcihjb2xsZWN0aW9uLCBwcmVkaWNhdGUpOiBhbnlbXSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gIH1cblxuICBzdGF0aWMgd2hlcmUob2JqOiB7fSwgcHJlZGljYXRlOiB7fSkge1xuICAgIGlmIChPYmplY3Qua2V5cyhwcmVkaWNhdGUpLmV2ZXJ5KGtleSA9PiBvYmogJiYgb2JqW2tleV0gPT09IHByZWRpY2F0ZVtrZXldKSkge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNhcGl0YWxpemUocykge1xuICAgIGlmIChzKSB7XG4gICAgICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0ZW1wbGF0ZVN0cihzOiBzdHJpbmcsIHZhcnM6IHt9KSB7XG4gICAgY29uc3QgY29tcGlsZWQgPSBfLnRlbXBsYXRlKHMpO1xuICAgIHJldHVybiBjb21waWxlZCh2YXJzKTtcbiAgfVxuXG4gIHN0YXRpYyBpc1RlbXBsYXRlU3RyKHM6IHN0cmluZykge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSAvLipcXCR7Lip9LiovLnRlc3QocykgfHwgLy4qPCU9KC4qKSU+LiovLnRlc3Qocyk7XG4gICAgcmV0dXJuIGlzTWF0Y2g7XG4gIH1cblxuICBzdGF0aWMgZ2V0QXJyYXk8VCA9IGFueT4oaXRlbTogeyBba2V5OiBzdHJpbmddOiBUIH0gfCBUW10sIGtleU5hbWU/OiBzdHJpbmcpOiBUW10ge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShpdGVtKSkge1xuICAgICAgICByZXR1cm4gaXRlbSBhcyBUW107XG4gICAgICB9IGVsc2UgaWYgKENvbW1vbnNVdGlscy5pc0pzb24oaXRlbSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gIGl0ZW0pIHtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBsZXQgYyA9IGl0ZW1ba2V5XTtcbiAgICAgICAgICAgIGlmIChrZXlOYW1lKSB7XG4gICAgICAgICAgICAgIGMgPSB7W2tleU5hbWVdOiBrZXksIC4uLmN9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIHN0YXRpYyByZW1vdmVLZXlzKG9iajoge30sIC4uLmtleXM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IG8gPSBvYmo7XG4gICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgbyA9IENvbW1vbnNVdGlscy5zZXQobywga2V5cywgdW5kZWZpbmVkKTtcbiAgICAgIENvbW1vbnNVdGlscy51bnNldChvLCBrZXlzKTtcbiAgICAgIGtleXMucG9wKCk7XG4gICAgICBjb25zdCB2ID0gQ29tbW9uc1V0aWxzLmdldChvLCBrZXlzKTtcbiAgICAgIGlmICghQ29tbW9uc1V0aWxzLmlzRW1wdHkodikpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvO1xuICB9XG5cbiAgc3RhdGljIGV4dHJhY3QodmFsdWU6IGFueVtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpIHtcbiAgICBsZXQgdGFyZ2V0OiBudW1iZXI7XG4gICAgaWYgKHZhbHVlICYmIChmcm9tICE9PSB0bykpIHtcbiAgICAgIGlmICh0byA+PSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgdGFyZ2V0ID0gdG8gLSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIHdoaWxlICgodGFyZ2V0LS0pICsgMSkge1xuICAgICAgICAgIHZhbHVlLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsdWUuc3BsaWNlKHRvLCAwLCB2YWx1ZS5zcGxpY2UoZnJvbSwgMSlbMF0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhZGRJdGVtKHNyY0FycmF5OiBhbnlbXSwgaXRlbTogYW55LCBpbmRleD86IG51bWJlcikge1xuICAgIGxldCB0b0FkZCA9IGl0ZW07XG4gICAgaWYgKCFDb21tb25zVXRpbHMuaXNBcnJheShpdGVtKSkge1xuICAgICAgdG9BZGQgPSBbaXRlbV07XG4gICAgfVxuICAgIGlmIChpbmRleCkge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdChzcmNBcnJheS5zbGljZSgwLCBpbmRleCksIHRvQWRkLCBzcmNBcnJheS5zbGljZShpbmRleCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KHNyY0FycmF5LCB0b0FkZCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlbW92ZUJ5SW5kZXgoYTogYW55W10sIGluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gW10uY29uY2F0KGEuc2xpY2UoMCwgaW5kZXgpLCBhLnNsaWNlKGluZGV4ICsgMSkpO1xuICB9XG5cbiAgc3RhdGljIHJlcGxhY2U8VD4oYTogVFtdLCBpbmRleDogbnVtYmVyLCBlbGVtZW50OiBUKTogVFtdIHtcbiAgICByZXR1cm4gW10uY29uY2F0KGEuc2xpY2UoMCwgaW5kZXgpLCBlbGVtZW50LCBhLnNsaWNlKGluZGV4ICsgMSkpO1xuICB9XG5cbiAgc3RhdGljIG1vdmU8VD4oYTogVFtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiBUW10ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBhW2Zyb21dO1xuICAgIGNvbnN0IGZvcndhcmQgPSBmcm9tIDwgdG87XG4gICAgY29uc3QgaGVhZCA9IGEuc2xpY2UoMCwgZm9yd2FyZCA/IGZyb20gOiB0byk7XG4gICAgY29uc3QgbWlkID0gYS5zbGljZShmb3J3YXJkID8gZnJvbSArIDEgOiB0bywgZm9yd2FyZCA/IHRvICsgMSA6IGZyb20pO1xuICAgIGNvbnN0IHRhaWwgPSBhLnNsaWNlKGZvcndhcmQgPyB0byArIDEgOiBmcm9tICsgMSk7XG4gICAgcmV0dXJuIGZvcndhcmQgP1xuICAgICAgW10uY29uY2F0KGhlYWQsIG1pZCwgZWxlbWVudCwgdGFpbCkgOlxuICAgICAgW10uY29uY2F0KGhlYWQsIGVsZW1lbnQsIG1pZCwgdGFpbCk7XG4gIH1cblxuICBzdGF0aWMgcmVzdG9yZUZuKHZhbHVlKSB7XG4gICAgaWYgKCh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSAmJiB2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnRyaW0oKS5pbmRleE9mKCdmdW5jdGlvbicpID09PSAwKSB7XG4gICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gJyArIHZhbHVlLnJlcGxhY2UoL190aGlzL2csICd0aGlzJylcbiAgICAgICAgLnJlcGxhY2UoL19fYXNzaWduL2csICdPYmplY3QuYXNzaWduJykpKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5o6S6Zmka2V55Li6a++8jHZhbHVl5Li6diDnmoTmlbDmja7poblcbiAgICovXG4gIHN0YXRpYyBleGNsdWRlKHNyYzoge30sIGs6IHN0cmluZywgdjogYW55KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmtleXMoc3JjKS5yZWR1Y2UoKGFjYywga2V5KSA9PiAoXG4gICAgICBzcmNba2V5XVtrXSA9PT0gdiA/IGFjYyA6IHtcbiAgICAgICAgLi4uYWNjLFxuICAgICAgICBba2V5XTogc3JjW2tleV1cbiAgICAgIH0pLCB7fSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7/mjaJzcmPkuK3nmoQge2ssb30g5YWD57SgIOS4uiB7ayx2fVxuICAgKi9cbiAgc3RhdGljIHJlcGxhY2VPYmooc3JjOiBhbnlbXSwgazogc3RyaW5nLCBvOiBhbnksIHY6IGFueSkge1xuICAgIGNvbnN0IGluZGV4ID0gXy5maW5kKHNyYywge1trXTogb30pO1xuICAgIHJldHVybiBbXG4gICAgICAuLi5zcmMuc2xpY2UoMCwgaW5kZXgpLFxuICAgICAge1xuICAgICAgICAuLi5zcmNbaW5kZXhdLFxuICAgICAgICBba106IHZcbiAgICAgIH0sXG4gICAgICAuLi5zcmMuc2xpY2UoaW5kZXggKyAxKVxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICog5ZCI5bm2IHt9IOWSjCBbXVxuICAgKi9cbiAgc3RhdGljIGNvbmNhdChzcmMxOiB7fSwgc3JjMjoge31bXSwgazogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNyYzEsXG4gICAgICAuLi5zcmMyLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiAoe1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtpdGVtW2tdXTogaXRlbVxuICAgICAgfSksIHt9KVxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgcmVzdG9yZUpzb25Gbihqc29uOiBzdHJpbmcgfCB7fSkge1xuICAgIGxldCBqc29uU3RyOiBzdHJpbmc7XG4gICAgaWYgKHR5cGVvZiBqc29uID09PSAnc3RyaW5nJykge1xuICAgICAganNvblN0ciA9IGpzb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGpzb25TdHIgPSBDb21tb25zVXRpbHMuc3RyaW5naWZ5KGpzb24pO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uU3RyLCAoa2V5LCB2YWx1ZSkgPT4gQ29tbW9uc1V0aWxzLnJlc3RvcmVGbih2YWx1ZSkpO1xuICB9XG5cbiAgc3RhdGljIHN0cmluZ2lmeShqc29uOiB7fSkge1xuICAgIGZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGpzb24sIHJlcGxhY2VyKTtcbiAgfVxuXG4gIHN0YXRpYyBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhcmFjdGVyID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyYWN0ZXI7XG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICByZXR1cm4gaGFzaDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmoLnmja5vcHRpb25z5a6a5LmJ77yM6L2s5o2ic3JjXG4gICAqICBvcHRpb25zOntcbiAgICogICAgc3JjLWtleTogdGFyLWtleSB8IHtrZXk6dGFyLWtleSxvcHRpb25zOnt9fSB8IEZ1bmN0aW9uXG4gICAqICB9XG4gICAqL1xuICBzdGF0aWMgYWRhcHRPYmplY3Qoc3JjLCBvcHRpb25zOiB7fSkge1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShzcmMpKSB7XG4gICAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmFkYXB0QXJyYXkoc3JjLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENvbW1vbnNVdGlscy5hZGFwdEpzb24oc3JjLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYWRhcHRKc29uKHNyYywgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3Qgc3JjVmFsdWUgPSBDb21tb25zVXRpbHMuZ2V0KHNyYywga2V5KTtcbiAgICAgIGlmIChzcmNWYWx1ZSkge1xuICAgICAgICBpZiAoQ29tbW9uc1V0aWxzLmlzQXJyYXkoc3JjVmFsdWUpKSB7XG4gICAgICAgICAgbGV0IHRhcktleSA9IG51bGw7XG4gICAgICAgICAgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhvcHRpb25zW2tleV0pKSB7XG4gICAgICAgICAgICB0YXJLZXkgPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcktleSA9IG9wdGlvbnNba2V5XVsna2V5J107XG4gICAgICAgICAgfVxuICAgICAgICAgIENvbW1vbnNVdGlscy5zZXQocmVzdWx0LCB0YXJLZXksIENvbW1vbnNVdGlscy5hZGFwdEFycmF5KHNyY1ZhbHVlLCBvcHRpb25zW2tleV1bJ29wdGlvbnMnXSB8fCBvcHRpb25zKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzSnNvbihzcmNWYWx1ZSkpIHtcbiAgICAgICAgICBDb21tb25zVXRpbHMuc2V0KHJlc3VsdCwgb3B0aW9uc1trZXldLCBDb21tb25zVXRpbHMuYWRhcHRKc29uKHNyY1ZhbHVlLCBvcHRpb25zW2tleV1bJ29wdGlvbnMnXSB8fCB7fSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChDb21tb25zVXRpbHMuaXNTdHJpbmcob3B0aW9uc1trZXldKSkge1xuICAgICAgICAgICAgQ29tbW9uc1V0aWxzLnNldChyZXN1bHQsIG9wdGlvbnNba2V5XSwgc3JjVmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzRnVuY3Rpb24ob3B0aW9uc1trZXldKSkge1xuICAgICAgICAgICAgQ29tbW9uc1V0aWxzLnNldChyZXN1bHQsIG9wdGlvbnNba2V5XSwgb3B0aW9uc1trZXldLmFwcGx5KHVuZGVmaW5lZCwgc3JjLCBvcHRpb25zKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHN0YXRpYyBhZGFwdEFycmF5KHNyYywgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIHNyYy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgcmVzdWx0LnB1c2goQ29tbW9uc1V0aWxzLmFkYXB0T2JqZWN0KGl0ZW0sIG9wdGlvbnMpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cblxuICBzdGF0aWMgZ2V0QWdlKGRhdGVTdHJpbmcpIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgYmlydGhEYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgbGV0IGFnZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBiaXJ0aERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoRGF0ZS5nZXRNb250aCgpO1xuICAgIGlmIChtIDwgMCB8fCAobSA9PT0gMCAmJiB0b2RheS5nZXREYXRlKCkgPCBiaXJ0aERhdGUuZ2V0RGF0ZSgpKSkge1xuICAgICAgYWdlLS07XG4gICAgfVxuICAgIHJldHVybiBhZ2U7XG4gIH1cblxuICBzdGF0aWMgdG9EYXRlKHRhcmdldDogc3RyaW5nIHwgRGF0ZSk6IERhdGUge1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICBpZiAoQ29tbW9uc1V0aWxzLmlzU3RyaW5nKHRhcmdldCkpIHtcbiAgICAgIGNvbnN0IGRhdGVOdW1iZXIgPSBEYXRlLnBhcnNlKHRhcmdldCk7XG4gICAgICByZXR1cm4gIWlzTmFOKGRhdGVOdW1iZXIpID8gbmV3IERhdGUoZGF0ZU51bWJlcikgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBpc0JlZm9yZSh0YXIsIGRhdGU6IHN0cmluZyB8IERhdGUgPSBuZXcgRGF0ZSgpKSB7XG4gICAgY29uc3Qgc3JjID0gQ29tbW9uc1V0aWxzLnRvRGF0ZShkYXRlKTtcbiAgICBjb25zdCBvcmlnaW5hbCA9IENvbW1vbnNVdGlscy50b0RhdGUodGFyKTtcbiAgICByZXR1cm4gISEob3JpZ2luYWwgJiYgc3JjICYmIG9yaWdpbmFsIDwgc3JjKTtcbiAgfVxuXG4gIHN0YXRpYyBpc0FmdGVyKHRhciwgZGF0ZTogc3RyaW5nIHwgRGF0ZSA9IG5ldyBEYXRlKCkpIHtcbiAgICBjb25zdCBzcmMgPSBDb21tb25zVXRpbHMudG9EYXRlKGRhdGUpO1xuICAgIGNvbnN0IG9yaWdpbmFsID0gQ29tbW9uc1V0aWxzLnRvRGF0ZSh0YXIpO1xuICAgIHJldHVybiAhIShvcmlnaW5hbCAmJiBzcmMgJiYgb3JpZ2luYWwgPiBzcmMpO1xuICB9XG5cbiAgc3RhdGljIHRvU3RyaW5nKG9iajogYW55KSB7XG4gICAgc3dpdGNoIChDb21tb25zVXRpbHMuZ2V0VmFyVHlwZShvYmopKSB7XG4gICAgICBjYXNlIFZhclR5cGUuTlVMTDpcbiAgICAgIGNhc2UgVmFyVHlwZS5VTkRFRklORUQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIGNhc2UgVmFyVHlwZS5BUlJBWToge1xuICAgICAgICBjb25zdCBhID0gW107XG4gICAgICAgIG9iai5mb3JFYWNoKG8gPT4gYS5wdXNoKENvbW1vbnNVdGlscy50b1N0cmluZyhvKSkpO1xuICAgICAgICByZXR1cm4gYFske2Euam9pbignLCcpfV1gO1xuICAgICAgfVxuICAgICAgY2FzZSBWYXJUeXBlLkpTT046XG4gICAgICAgIHJldHVybiBDb21tb25zVXRpbHMuc3RyaW5naWZ5KG9iaik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGlzRW1wdHkob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgICBzd2l0Y2ggKENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikpIHtcbiAgICAgIGNhc2UgVmFyVHlwZS5OVUxMOlxuICAgICAgY2FzZSBWYXJUeXBlLlVOREVGSU5FRDpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBjYXNlIFZhclR5cGUuU1RSSU5HOlxuICAgICAgICByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICAgIGNhc2UgVmFyVHlwZS5BUlJBWTpcbiAgICAgICAgcmV0dXJuIChvYmogYXMgYW55W10pLmxlbmd0aCA9PT0gMDtcbiAgICAgIGNhc2UgVmFyVHlwZS5KU09OOlxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCkubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0VG9Cb29sZWFuKGF0dHJpYnV0ZXM6IHt9LCBrZXlzOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGxfYXR0cmlidXRlcyA9IHsuLi5hdHRyaWJ1dGVzfTtcbiAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAobF9hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkgJiYgbF9hdHRyaWJ1dGVzW2tleV0gPT09ICcnKSB7XG4gICAgICAgICAgbF9hdHRyaWJ1dGVzW2tleV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGxfYXR0cmlidXRlcztcbiAgfVxuXG4gIHN0YXRpYyBmbGF0UGF0aChwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShwYXRoKSkge1xuICAgICAgcmV0dXJuICg8c3RyaW5nW10+cGF0aCkuam9pbignLScpLnJlcGxhY2UoJy4nLCAnLScpO1xuICAgIH1cbiAgICByZXR1cm4gKDxzdHJpbmc+cGF0aCkucmVwbGFjZSgnLicsICctJyk7XG4gIH1cblxuICBzdGF0aWMgam9pbihhcnIsIHNlcGVyYXRvcj8pIHtcbiAgICBjb25zdCBqb2luZXIgPSBzZXBlcmF0b3IgfHwgJywnO1xuXG4gICAgaWYgKCFhcnIpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAoIUNvbW1vbnNVdGlscy5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfVxuXG4gICAgc3dpdGNoIChhcnIubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGFyclswXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBhcnIuam9pbihqb2luZXIpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkZWVwRmluZChvYmosIC4uLnByZWRpY2F0ZXMpOiBhbnlbXSB7XG5cbiAgICBjb25zdCBfZmluZCA9IChvKSA9PiB7XG4gICAgICBpZiAobyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICg8YW55W10+bykuZm9yRWFjaChpID0+IF9maW5kKGkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBvKSB7XG4gICAgICAgICAgaWYgKG9bcHJvcF0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgX2ZpbmQob1twcm9wXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByZWRpY2F0ZXMuc29tZSgocHJlZGljYXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZm91bmQgPSBDb21tb25zVXRpbHMud2hlcmUobywgcHJlZGljYXRlKTtcbiAgICAgICAgICBpZiAoZm91bmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvdW5kUmVzdWx0cy5wdXNoKG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZm91bmQgIT09IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBmb3VuZFJlc3VsdHMgPSBbXTtcblxuICAgIF9maW5kKG9iaik7XG5cbiAgICByZXR1cm4gZm91bmRSZXN1bHRzO1xuICB9XG5cbiAgc3RhdGljIHNsZWVwKG1pbGxpc2Vjb25kcykge1xuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxZTc7IGkrKykge1xuICAgICAgaWYgKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0KSA+IG1pbGxpc2Vjb25kcykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QXJyYXlWYWx1ZShkYXRhOiBhbnkpOiBhbnlbXSB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc0FycmF5KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGVsc2UgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhkYXRhKSkge1xuICAgICAgcmV0dXJuICg8c3RyaW5nPmRhdGEpLnNwbGl0KCcsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbZGF0YV07XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFRleHQoZGF0YTogYW55KSB7XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc0FycmF5KGRhdGEpKSB7XG4gICAgICByZXR1cm4gKDxhbnlbXT5kYXRhKS5tYXAodiA9PiBDb21tb25zVXRpbHMuZ2V0VGV4dCh2KSkuam9pbignLCcpO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzSnNvbihkYXRhKSkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzQm9vbGVhbihkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEgPyAn5pivJyA6ICflkKYnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VmFsdWUoZXhwLCAuLi5jb250ZXh0KTogYW55IHtcbiAgICBjb25zdCBmbiA9IGV4cCAmJiAoZXhwWydtZXRob2QnXSB8fCBleHApO1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNGdW5jdGlvbihmbikpIHtcbiAgICAgIHJldHVybiA8RnVuY3Rpb24+Zm4uYXBwbHkodW5kZWZpbmVkLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhleHApICYmIGV4cC5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgIHJldHVybiBDb21tb25zVXRpbHMuZ2V0KGNvbnRleHQgJiYgY29udGV4dFswXSwgZXhwLnN1YnN0cigxKSk7XG4gICAgfVxuICAgIHJldHVybiBleHA7XG4gIH1cblxuICBzdGF0aWMgZGVmaW5lSGlkZGVuUHJvcChvYmosIHByb3AsIGRlZmF1bHRWYWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHtlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZX0pO1xuICAgIG9ialtwcm9wXSA9IGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIHN0YXRpYyBzcGxpdEJ5U2l6ZShzdHIsIHNpemUpIHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgbGV0IGkgPSBzaXplO1xuICAgIHdoaWxlIChpIDw9IHN0ci5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdHMucHVzaChzdHIuc3Vic3RyKDAsIGkpKTtcbiAgICAgIGkgKz0gc2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBzdGF0aWMgcmVzb2x2ZVVybCh1cmw6IHN0cmluZywgcGFyYW1zOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IF91cmwgPSBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgICAucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjLnJlcGxhY2UoYDoke2tleX1gLCBwYXJhbXNba2V5XSksIHVybCk7XG4gICAgcmV0dXJuIF91cmw7XG4gIH1cbn1cbiJdfQ==