/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { VarType } from '@er/types';
import * as _ from 'lodash';
import { CacheUtils } from '../cache';
var CommonsUtils = /** @class */ (function () {
    function CommonsUtils() {
    }
    /**
     * @return {?}
     */
    CommonsUtils.lodash = /**
     * @return {?}
     */
    function () {
        return _;
    };
    /**
     * @return {?}
     */
    CommonsUtils.getSeq = /**
     * @return {?}
     */
    function () {
        return CacheUtils.getSeq();
    };
    /**
     * @param {?=} max
     * @param {?=} min
     * @return {?}
     */
    CommonsUtils.getRandomNumber = /**
     * @param {?=} max
     * @param {?=} min
     * @return {?}
     */
    function (max, min) {
        if (max === void 0) { max = 10; }
        /** @type {?} */
        var result = Math.floor(Math.random() * (max + 1) + (min || 0));
        return result;
    };
    /**
     * @template T
     * @param {?} src
     * @param {?} key
     * @return {?}
     */
    CommonsUtils.getObjWhenStr = /**
     * @template T
     * @param {?} src
     * @param {?} key
     * @return {?}
     */
    function (src, key) {
        var _a;
        /** @type {?} */
        var result = (typeof src === 'string') ? (/** @type {?} */ (_a = {}, _a[key] = src, _a)) : src;
        return result;
    };
    /**
     * @param {?} object
     * @return {?}
     */
    CommonsUtils.getVarType = /**
     * @param {?} object
     * @return {?}
     */
    function (object) {
        /** @type {?} */
        var type = VarType.UNKNOWN;
        if (object === null) {
            type = VarType.NULL;
        }
        else if (object === undefined) {
            type = VarType.UNDEFINED;
        }
        else if (object === true || object === false) {
            type = VarType.BOOLEAN;
        }
        if (type !== VarType.UNKNOWN) {
            return type;
        }
        /** @type {?} */
        var objectType = typeof object;
        if (objectType === 'string') {
            // if (DateUtils.isDate(object)) {
            //   return VarType.DATE;
            // }
            type = VarType.STRING;
        }
        else if (objectType === 'number') {
            type = VarType.NUMBER;
        }
        else if (objectType === 'function') {
            type = VarType.FUNCTION;
        }
        if (object.constructor === [].constructor) {
            type = VarType.ARRAY;
        }
        else if (object.constructor === {}.constructor) {
            type = VarType.JSON;
        }
        return type;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    CommonsUtils.isNullOrUndefined = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value === undefined || value === null;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isString = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return CommonsUtils.getVarType(obj) === VarType.STRING;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isBoolean = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return CommonsUtils.getVarType(obj) === VarType.BOOLEAN;
    };
    /**
     * @param {?} s
     * @return {?}
     */
    CommonsUtils.isEmptyString = /**
     * @param {?} s
     * @return {?}
     */
    function (s) {
        return !s || CommonsUtils.isString(s) && s.trim().length === 0;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isArray = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return CommonsUtils.getVarType(obj) === VarType.ARRAY;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isNumber = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return CommonsUtils.getVarType(obj) === VarType.NUMBER;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isJson = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return CommonsUtils.getVarType(obj) === VarType.JSON;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isFunction = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return CommonsUtils.getVarType(obj) === VarType.FUNCTION;
    };
    /**
     * @param {?} str
     * @return {?}
     */
    CommonsUtils.isUrl = /**
     * @param {?} str
     * @return {?}
     */
    function (str) {
        /** @type {?} */
        var regexp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
        return regexp.test(str);
    };
    /**
     * @param {?} str
     * @return {?}
     */
    CommonsUtils.isInteger = /**
     * @param {?} str
     * @return {?}
     */
    function (str) {
        return !CommonsUtils.isNullOrUndefined(str) && /^\d+$/.test(str);
    };
    /**
     * @param {?} value
     * @param {?} other
     * @return {?}
     */
    CommonsUtils.isEqual = /**
     * @param {?} value
     * @param {?} other
     * @return {?}
     */
    function (value, other) {
        return _.isEqual(value, other);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.copy = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return _.cloneDeep(obj);
    };
    /**
     * @param {?} obj1
     * @param {...?} obj2
     * @return {?}
     */
    CommonsUtils.merge = /**
     * @param {?} obj1
     * @param {...?} obj2
     * @return {?}
     */
    function (obj1) {
        var obj2 = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            obj2[_i - 1] = arguments[_i];
        }
        return _.merge.apply(null, tslib_1.__spread([obj1], obj2));
    };
    /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.pickBy = /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    function (obj, predicate) {
        return _.pickBy(obj, predicate);
    };
    /**
     * @param {?} obj
     * @param {?} keys
     * @return {?}
     */
    CommonsUtils.pick = /**
     * @param {?} obj
     * @param {?} keys
     * @return {?}
     */
    function (obj, keys) {
        return _.pick(obj, keys);
    };
    /**
     * @param {?} obj1
     * @param {...?} obj2
     * @return {?}
     */
    CommonsUtils.defaults = /**
     * @param {?} obj1
     * @param {...?} obj2
     * @return {?}
     */
    function (obj1) {
        var obj2 = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            obj2[_i - 1] = arguments[_i];
        }
        return _.defaultsDeep.apply(undefined, tslib_1.__spread([obj1], obj2));
    };
    /**
     * @param {?} obj1
     * @param {?} obj2
     * @return {?}
     */
    CommonsUtils.equals = /**
     * @param {?} obj1
     * @param {?} obj2
     * @return {?}
     */
    function (obj1, obj2) {
        return _.isEqual(obj1, obj2);
    };
    /**
     * @param {?} obj
     * @param {?} path
     * @param {?} value
     * @return {?}
     */
    CommonsUtils.set = /**
     * @param {?} obj
     * @param {?} path
     * @param {?} value
     * @return {?}
     */
    function (obj, path, value) {
        return _.set(obj, path, value);
    };
    /**
     * @param {?} obj
     * @param {?} path
     * @param {?=} defaultValue
     * @return {?}
     */
    CommonsUtils.get = /**
     * @param {?} obj
     * @param {?} path
     * @param {?=} defaultValue
     * @return {?}
     */
    function (obj, path, defaultValue) {
        return _.get(obj, path, defaultValue);
    };
    /**
     * @param {?} obj
     * @param {?} source
     * @return {?}
     */
    CommonsUtils.extend = /**
     * @param {?} obj
     * @param {?} source
     * @return {?}
     */
    function (obj, source) {
        return _.extend(obj, source);
    };
    /**
     * @param {?} collection
     * @return {?}
     */
    CommonsUtils.compact = /**
     * @param {?} collection
     * @return {?}
     */
    function (collection) {
        return _.compact(collection);
    };
    /**
     * @param {?} obj
     * @param {?} path
     * @return {?}
     */
    CommonsUtils.omit = /**
     * @param {?} obj
     * @param {?} path
     * @return {?}
     */
    function (obj, path) {
        return _.omit(obj, path);
    };
    /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.omitBy = /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    function (obj, predicate) {
        return _.omitBy(obj, predicate);
    };
    /**
     * @param {?} obj
     * @param {?} path
     * @return {?}
     */
    CommonsUtils.unset = /**
     * @param {?} obj
     * @param {?} path
     * @return {?}
     */
    function (obj, path) {
        return _.unset(obj, path);
    };
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.find = /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    function (collection, predicate) {
        return _.find(collection, predicate);
    };
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.findIndex = /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    function (collection, predicate) {
        return _.findIndex(collection, predicate);
    };
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.remove = /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    function (collection, predicate) {
        return _.remove(collection, predicate);
    };
    /**
     * @param {?} obj
     * @param {?} iteratee
     * @return {?}
     */
    CommonsUtils.forOwn = /**
     * @param {?} obj
     * @param {?} iteratee
     * @return {?}
     */
    function (obj, iteratee) {
        return _.forOwn(obj, iteratee);
    };
    /**
     * @param {?} obj
     * @param {?} iteratee
     * @return {?}
     */
    CommonsUtils.map = /**
     * @param {?} obj
     * @param {?} iteratee
     * @return {?}
     */
    function (obj, iteratee) {
        return _.map(obj, iteratee);
    };
    /**
     * @param {?} obj
     * @param {?} by
     * @return {?}
     */
    CommonsUtils.unique = /**
     * @param {?} obj
     * @param {?} by
     * @return {?}
     */
    function (obj, by) {
        return _.uniqBy(obj, by);
    };
    /**
     * @param {?} obj
     * @param {?} iteratees
     * @param {?=} orders
     * @return {?}
     */
    CommonsUtils.orderBy = /**
     * @param {?} obj
     * @param {?} iteratees
     * @param {?=} orders
     * @return {?}
     */
    function (obj, iteratees, orders) {
        return _.orderBy(obj, iteratees, orders);
    };
    /**
     * @param {...?} obj
     * @return {?}
     */
    CommonsUtils.union = /**
     * @param {...?} obj
     * @return {?}
     */
    function () {
        var obj = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            obj[_i] = arguments[_i];
        }
        return _.union(obj);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.flatten = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return _.flatten(obj);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.flattenDeep = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return _.flattenDeep(obj);
    };
    /**
     * @param {?} src
     * @param {?} format
     * @return {?}
     */
    CommonsUtils.format = /**
     * @param {?} src
     * @param {?} format
     * @return {?}
     */
    function (src, format) {
        return src;
    };
    /**
     * @param {?} o1
     * @param {?} o2
     * @return {?}
     */
    CommonsUtils.jsonConcat = /**
     * @param {?} o1
     * @param {?} o2
     * @return {?}
     */
    function (o1, o2) {
        for (var key in o2) {
            o1[key] = o2[key];
        }
        return o1;
    };
    /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    CommonsUtils.escape = /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    function (obj, key) {
        var _a = key, deletedItem = obj[_a], rest = tslib_1.__rest(obj, [typeof _a === "symbol" ? _a : _a + ""]);
        return rest;
    };
    /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.filter = /**
     * @param {?} collection
     * @param {?} predicate
     * @return {?}
     */
    function (collection, predicate) {
        return _.filter(collection, predicate);
    };
    /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    CommonsUtils.where = /**
     * @param {?} obj
     * @param {?} predicate
     * @return {?}
     */
    function (obj, predicate) {
        if (Object.keys(predicate).every(function (key) { return obj && obj[key] === predicate[key]; })) {
            return obj;
        }
        else {
            return null;
        }
    };
    /**
     * @param {?} s
     * @return {?}
     */
    CommonsUtils.capitalize = /**
     * @param {?} s
     * @return {?}
     */
    function (s) {
        if (s) {
            return s.charAt(0).toUpperCase() + s.slice(1);
        }
        else {
            return s;
        }
    };
    /**
     * @param {?} s
     * @param {?} vars
     * @return {?}
     */
    CommonsUtils.templateStr = /**
     * @param {?} s
     * @param {?} vars
     * @return {?}
     */
    function (s, vars) {
        /** @type {?} */
        var compiled = _.template(s);
        return compiled(vars);
    };
    /**
     * @param {?} s
     * @return {?}
     */
    CommonsUtils.isTemplateStr = /**
     * @param {?} s
     * @return {?}
     */
    function (s) {
        /** @type {?} */
        var isMatch = /.*\${.*}.*/.test(s) || /.*<%=(.*)%>.*/.test(s);
        return isMatch;
    };
    /**
     * @template T
     * @param {?} item
     * @param {?=} keyName
     * @return {?}
     */
    CommonsUtils.getArray = /**
     * @template T
     * @param {?} item
     * @param {?=} keyName
     * @return {?}
     */
    function (item, keyName) {
        var _a;
        /** @type {?} */
        var items = [];
        if (item) {
            if (CommonsUtils.isArray(item)) {
                return (/** @type {?} */ (item));
            }
            else if (CommonsUtils.isJson(item)) {
                for (var key in item) {
                    if (key) {
                        /** @type {?} */
                        var c = item[key];
                        if (keyName) {
                            c = tslib_1.__assign((_a = {}, _a[keyName] = key, _a), c);
                        }
                        items.push(c);
                    }
                }
            }
            else {
                items.push(item);
            }
        }
        return items;
    };
    /**
     * @param {?} obj
     * @param {...?} keys
     * @return {?}
     */
    CommonsUtils.removeKeys = /**
     * @param {?} obj
     * @param {...?} keys
     * @return {?}
     */
    function (obj) {
        var keys = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            keys[_i - 1] = arguments[_i];
        }
        /** @type {?} */
        var o = obj;
        while (keys.length > 0) {
            o = CommonsUtils.set(o, keys, undefined);
            CommonsUtils.unset(o, keys);
            keys.pop();
            /** @type {?} */
            var v = CommonsUtils.get(o, keys);
            if (!CommonsUtils.isEmpty(v)) {
                break;
            }
        }
        return o;
    };
    /**
     * @param {?} value
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    CommonsUtils.extract = /**
     * @param {?} value
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    function (value, from, to) {
        /** @type {?} */
        var target;
        if (value && (from !== to)) {
            if (to >= value.length) {
                target = to - value.length;
                while ((target--) + 1) {
                    value.push(undefined);
                }
            }
            value.splice(to, 0, value.splice(from, 1)[0]);
        }
    };
    /**
     * @param {?} srcArray
     * @param {?} item
     * @param {?=} index
     * @return {?}
     */
    CommonsUtils.addItem = /**
     * @param {?} srcArray
     * @param {?} item
     * @param {?=} index
     * @return {?}
     */
    function (srcArray, item, index) {
        /** @type {?} */
        var toAdd = item;
        if (!CommonsUtils.isArray(item)) {
            toAdd = [item];
        }
        if (index) {
            return [].concat(srcArray.slice(0, index), toAdd, srcArray.slice(index));
        }
        else {
            return [].concat(srcArray, toAdd);
        }
    };
    /**
     * @param {?} a
     * @param {?} index
     * @return {?}
     */
    CommonsUtils.removeByIndex = /**
     * @param {?} a
     * @param {?} index
     * @return {?}
     */
    function (a, index) {
        return [].concat(a.slice(0, index), a.slice(index + 1));
    };
    /**
     * @template T
     * @param {?} a
     * @param {?} index
     * @param {?} element
     * @return {?}
     */
    CommonsUtils.replace = /**
     * @template T
     * @param {?} a
     * @param {?} index
     * @param {?} element
     * @return {?}
     */
    function (a, index, element) {
        return [].concat(a.slice(0, index), element, a.slice(index + 1));
    };
    /**
     * @template T
     * @param {?} a
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    CommonsUtils.move = /**
     * @template T
     * @param {?} a
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    function (a, from, to) {
        /** @type {?} */
        var element = a[from];
        /** @type {?} */
        var forward = from < to;
        /** @type {?} */
        var head = a.slice(0, forward ? from : to);
        /** @type {?} */
        var mid = a.slice(forward ? from + 1 : to, forward ? to + 1 : from);
        /** @type {?} */
        var tail = a.slice(forward ? to + 1 : from + 1);
        return forward ?
            [].concat(head, mid, element, tail) :
            [].concat(head, element, mid, tail);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    CommonsUtils.restoreFn = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if ((typeof value === 'string') && value.toLocaleLowerCase().trim().indexOf('function') === 0) {
            return new Function('return ' + value.replace(/_this/g, 'this')
                .replace(/__assign/g, 'Object.assign'))();
        }
        else {
            return value;
        }
    };
    /**
     * 排除key为k，value为v 的数据项
     */
    /**
     * 排除key为k，value为v 的数据项
     * @param {?} src
     * @param {?} k
     * @param {?} v
     * @return {?}
     */
    CommonsUtils.exclude = /**
     * 排除key为k，value为v 的数据项
     * @param {?} src
     * @param {?} k
     * @param {?} v
     * @return {?}
     */
    function (src, k, v) {
        /** @type {?} */
        var result = Object.keys(src).reduce(function (acc, key) {
            var _a;
            return (src[key][k] === v ? acc : tslib_1.__assign({}, acc, (_a = {}, _a[key] = src[key], _a)));
        }, {});
        return result;
    };
    /**
     * 替换src中的 {k,o} 元素 为 {k,v}
     */
    /**
     * 替换src中的 {k,o} 元素 为 {k,v}
     * @param {?} src
     * @param {?} k
     * @param {?} o
     * @param {?} v
     * @return {?}
     */
    CommonsUtils.replaceObj = /**
     * 替换src中的 {k,o} 元素 为 {k,v}
     * @param {?} src
     * @param {?} k
     * @param {?} o
     * @param {?} v
     * @return {?}
     */
    function (src, k, o, v) {
        var _a, _b;
        /** @type {?} */
        var index = _.find(src, (_a = {}, _a[k] = o, _a));
        return tslib_1.__spread(src.slice(0, index), [
            tslib_1.__assign({}, src[index], (_b = {}, _b[k] = v, _b))
        ], src.slice(index + 1));
    };
    /**
     * 合并 {} 和 []
     */
    /**
     * 合并 {} 和 []
     * @param {?} src1
     * @param {?} src2
     * @param {?} k
     * @return {?}
     */
    CommonsUtils.concat = /**
     * 合并 {} 和 []
     * @param {?} src1
     * @param {?} src2
     * @param {?} k
     * @return {?}
     */
    function (src1, src2, k) {
        return tslib_1.__assign({}, src1, src2.reduce(function (acc, item) {
            var _a;
            return (tslib_1.__assign({}, acc, (_a = {}, _a[item[k]] = item, _a)));
        }, {}));
    };
    /**
     * @param {?} json
     * @return {?}
     */
    CommonsUtils.restoreJsonFn = /**
     * @param {?} json
     * @return {?}
     */
    function (json) {
        /** @type {?} */
        var jsonStr;
        if (typeof json === 'string') {
            jsonStr = json;
        }
        else {
            jsonStr = CommonsUtils.stringify(json);
        }
        return JSON.parse(jsonStr, function (key, value) { return CommonsUtils.restoreFn(value); });
    };
    /**
     * @param {?} json
     * @return {?}
     */
    CommonsUtils.stringify = /**
     * @param {?} json
     * @return {?}
     */
    function (json) {
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        function replacer(key, value) {
            if (typeof value === 'function') {
                return value.toString();
            }
            else {
                return value;
            }
        }
        return JSON.stringify(json, replacer);
    };
    /**
     * @param {?} str
     * @return {?}
     */
    CommonsUtils.hash = /**
     * @param {?} str
     * @return {?}
     */
    function (str) {
        /** @type {?} */
        var hash = 0;
        for (var i = 0; i < str.length; i++) {
            /** @type {?} */
            var character = str.charCodeAt(i);
            hash = ((hash << 5) - hash) + character;
            hash = hash & hash; // Convert to 32bit integer
        }
        return hash;
    };
    /**
     * 根据options定义，转换src
     *  options:{
     *    src-key: tar-key | {key:tar-key,options:{}} | Function
     *  }
     */
    /**
     * 根据options定义，转换src
     *  options:{
     *    src-key: tar-key | {key:tar-key,options:{}} | Function
     *  }
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    CommonsUtils.adaptObject = /**
     * 根据options定义，转换src
     *  options:{
     *    src-key: tar-key | {key:tar-key,options:{}} | Function
     *  }
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    function (src, options) {
        if (CommonsUtils.isArray(src)) {
            return CommonsUtils.adaptArray(src, options);
        }
        else {
            return CommonsUtils.adaptJson(src, options);
        }
    };
    /**
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    CommonsUtils.adaptJson = /**
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    function (src, options) {
        /** @type {?} */
        var result = {};
        Object.keys(options).forEach(function (key) {
            /** @type {?} */
            var srcValue = CommonsUtils.get(src, key);
            if (srcValue) {
                if (CommonsUtils.isArray(srcValue)) {
                    /** @type {?} */
                    var tarKey = null;
                    if (CommonsUtils.isString(options[key])) {
                        tarKey = options[key];
                    }
                    else {
                        tarKey = options[key]['key'];
                    }
                    CommonsUtils.set(result, tarKey, CommonsUtils.adaptArray(srcValue, options[key]['options'] || options));
                }
                else if (CommonsUtils.isJson(srcValue)) {
                    CommonsUtils.set(result, options[key], CommonsUtils.adaptJson(srcValue, options[key]['options'] || {}));
                }
                else {
                    if (CommonsUtils.isString(options[key])) {
                        CommonsUtils.set(result, options[key], srcValue);
                    }
                    else if (CommonsUtils.isFunction(options[key])) {
                        CommonsUtils.set(result, options[key], options[key].apply(undefined, src, options));
                    }
                }
            }
        });
        return result;
    };
    /**
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    CommonsUtils.adaptArray = /**
     * @param {?} src
     * @param {?} options
     * @return {?}
     */
    function (src, options) {
        /** @type {?} */
        var result = [];
        src.forEach(function (item) {
            result.push(CommonsUtils.adaptObject(item, options));
        });
        return result;
    };
    /**
     * @param {?} dateString
     * @return {?}
     */
    CommonsUtils.getAge = /**
     * @param {?} dateString
     * @return {?}
     */
    function (dateString) {
        /** @type {?} */
        var today = new Date();
        /** @type {?} */
        var birthDate = new Date(dateString);
        /** @type {?} */
        var age = today.getFullYear() - birthDate.getFullYear();
        /** @type {?} */
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    };
    /**
     * @param {?} target
     * @return {?}
     */
    CommonsUtils.toDate = /**
     * @param {?} target
     * @return {?}
     */
    function (target) {
        if (target instanceof Date) {
            return target;
        }
        if (CommonsUtils.isString(target)) {
            /** @type {?} */
            var dateNumber = Date.parse(target);
            return !isNaN(dateNumber) ? new Date(dateNumber) : null;
        }
        return null;
    };
    /**
     * @param {?} tar
     * @param {?=} date
     * @return {?}
     */
    CommonsUtils.isBefore = /**
     * @param {?} tar
     * @param {?=} date
     * @return {?}
     */
    function (tar, date) {
        if (date === void 0) { date = new Date(); }
        /** @type {?} */
        var src = CommonsUtils.toDate(date);
        /** @type {?} */
        var original = CommonsUtils.toDate(tar);
        return !!(original && src && original < src);
    };
    /**
     * @param {?} tar
     * @param {?=} date
     * @return {?}
     */
    CommonsUtils.isAfter = /**
     * @param {?} tar
     * @param {?=} date
     * @return {?}
     */
    function (tar, date) {
        if (date === void 0) { date = new Date(); }
        /** @type {?} */
        var src = CommonsUtils.toDate(date);
        /** @type {?} */
        var original = CommonsUtils.toDate(tar);
        return !!(original && src && original > src);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.toString = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        switch (CommonsUtils.getVarType(obj)) {
            case VarType.NULL:
            case VarType.UNDEFINED:
                return '';
            case VarType.ARRAY: {
                /** @type {?} */
                var a_1 = [];
                obj.forEach(function (o) { return a_1.push(CommonsUtils.toString(o)); });
                return "[" + a_1.join(',') + "]";
            }
            case VarType.JSON:
                return CommonsUtils.stringify(obj);
            default:
                return obj.toString();
        }
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    CommonsUtils.isEmpty = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        switch (CommonsUtils.getVarType(obj)) {
            case VarType.NULL:
            case VarType.UNDEFINED:
                return true;
            case VarType.STRING:
                return obj.length === 0;
            case VarType.ARRAY:
                return ((/** @type {?} */ (obj))).length === 0;
            case VarType.JSON:
                return Object.keys(obj).length === 0;
            default:
                return obj.toString().length === 0;
        }
    };
    /**
     * @param {?} attributes
     * @param {?} keys
     * @return {?}
     */
    CommonsUtils.convertToBoolean = /**
     * @param {?} attributes
     * @param {?} keys
     * @return {?}
     */
    function (attributes, keys) {
        /** @type {?} */
        var l_attributes = tslib_1.__assign({}, attributes);
        if (keys && keys.length > 0) {
            keys.forEach(function (key) {
                if (l_attributes.hasOwnProperty(key) && l_attributes[key] === '') {
                    l_attributes[key] = true;
                }
            });
        }
        return l_attributes;
    };
    /**
     * @param {?} path
     * @return {?}
     */
    CommonsUtils.flatPath = /**
     * @param {?} path
     * @return {?}
     */
    function (path) {
        if (CommonsUtils.isArray(path)) {
            return ((/** @type {?} */ (path))).join('-').replace('.', '-');
        }
        return ((/** @type {?} */ (path))).replace('.', '-');
    };
    /**
     * @param {?} arr
     * @param {?=} seperator
     * @return {?}
     */
    CommonsUtils.join = /**
     * @param {?} arr
     * @param {?=} seperator
     * @return {?}
     */
    function (arr, seperator) {
        /** @type {?} */
        var joiner = seperator || ',';
        if (!arr) {
            return '';
        }
        if (!CommonsUtils.isArray(arr)) {
            return arr;
        }
        switch (arr.length) {
            case 0:
                return '';
            case 1:
                return arr[0];
            default:
                return arr.join(joiner);
        }
    };
    /**
     * @param {?} obj
     * @param {...?} predicates
     * @return {?}
     */
    CommonsUtils.deepFind = /**
     * @param {?} obj
     * @param {...?} predicates
     * @return {?}
     */
    function (obj) {
        var predicates = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            predicates[_i - 1] = arguments[_i];
        }
        /** @type {?} */
        var _find = function (o) {
            if (o instanceof Array) {
                ((/** @type {?} */ (o))).forEach(function (i) { return _find(i); });
            }
            else {
                for (var prop in o) {
                    if (o[prop] instanceof Array) {
                        _find(o[prop]);
                    }
                }
                predicates.some(function (predicate) {
                    /** @type {?} */
                    var found = CommonsUtils.where(o, predicate);
                    if (found !== null) {
                        foundResults.push(o);
                    }
                    return found !== null;
                });
            }
        };
        /** @type {?} */
        var foundResults = [];
        _find(obj);
        return foundResults;
    };
    /**
     * @param {?} milliseconds
     * @return {?}
     */
    CommonsUtils.sleep = /**
     * @param {?} milliseconds
     * @return {?}
     */
    function (milliseconds) {
        /** @type {?} */
        var start = new Date().getTime();
        for (var i = 0; i < 1e7; i++) {
            if ((new Date().getTime() - start) > milliseconds) {
                break;
            }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    CommonsUtils.getArrayValue = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (!data) {
            return data;
        }
        if (CommonsUtils.isArray(data)) {
            return data;
        }
        else if (CommonsUtils.isString(data)) {
            return ((/** @type {?} */ (data))).split(',');
        }
        else {
            return [data];
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    CommonsUtils.getText = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (CommonsUtils.isArray(data)) {
            return ((/** @type {?} */ (data))).map(function (v) { return CommonsUtils.getText(v); }).join(',');
        }
        else if (CommonsUtils.isJson(data)) {
            return JSON.stringify(data);
        }
        else if (CommonsUtils.isBoolean(data)) {
            return data ? '是' : '否';
        }
        else {
            return data;
        }
    };
    /**
     * @param {?} exp
     * @param {...?} context
     * @return {?}
     */
    CommonsUtils.getValue = /**
     * @param {?} exp
     * @param {...?} context
     * @return {?}
     */
    function (exp) {
        var context = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            context[_i - 1] = arguments[_i];
        }
        /** @type {?} */
        var fn = exp && (exp['method'] || exp);
        if (CommonsUtils.isFunction(fn)) {
            return (/** @type {?} */ (fn.apply(undefined, context)));
        }
        if (CommonsUtils.isString(exp) && exp.startsWith('@')) {
            return CommonsUtils.get(context && context[0], exp.substr(1));
        }
        return exp;
    };
    /**
     * @param {?} obj
     * @param {?} prop
     * @param {?} defaultValue
     * @return {?}
     */
    CommonsUtils.defineHiddenProp = /**
     * @param {?} obj
     * @param {?} prop
     * @param {?} defaultValue
     * @return {?}
     */
    function (obj, prop, defaultValue) {
        Object.defineProperty(obj, prop, { enumerable: false, writable: true, configurable: true });
        obj[prop] = defaultValue;
    };
    /**
     * @param {?} str
     * @param {?} size
     * @return {?}
     */
    CommonsUtils.splitBySize = /**
     * @param {?} str
     * @param {?} size
     * @return {?}
     */
    function (str, size) {
        /** @type {?} */
        var results = [];
        /** @type {?} */
        var i = size;
        while (i <= str.length) {
            results.push(str.substr(0, i));
            i += size;
        }
        return results;
    };
    /**
     * @param {?} url
     * @param {?=} params
     * @return {?}
     */
    CommonsUtils.resolveUrl = /**
     * @param {?} url
     * @param {?=} params
     * @return {?}
     */
    function (url, params) {
        if (params === void 0) { params = {}; }
        /** @type {?} */
        var _url = Object.keys(params)
            .reduce(function (acc, key) { return acc.replace(":" + key, params[key]); }, url);
        return _url;
    };
    return CommonsUtils;
}());
export { CommonsUtils };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZXIvdXRpbHMvIiwic291cmNlcyI6WyJsaWIvY29tbS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbEMsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUVwQztJQUFBO0lBdW9CQSxDQUFDOzs7O0lBcm9CUSxtQkFBTTs7O0lBQWI7UUFDRSxPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7Ozs7SUFFTSxtQkFBTTs7O0lBQWI7UUFDRSxPQUFPLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM3QixDQUFDOzs7Ozs7SUFFTSw0QkFBZTs7Ozs7SUFBdEIsVUFBdUIsR0FBZ0IsRUFBRSxHQUFZO1FBQTlCLG9CQUFBLEVBQUEsUUFBZ0I7O1lBQy9CLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNqRSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzs7Ozs7O0lBRU0sMEJBQWE7Ozs7OztJQUFwQixVQUF1RCxHQUFlLEVBQUUsR0FBWTs7O1lBQzVFLE1BQU0sR0FBRyxDQUFDLE9BQU8sR0FBRyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyw0QkFBQyxHQUFDLEdBQUcsSUFBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRztRQUNsRSxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzs7OztJQUVNLHVCQUFVOzs7O0lBQWpCLFVBQWtCLE1BQU07O1lBQ2xCLElBQUksR0FBRyxPQUFPLENBQUMsT0FBTztRQUMxQixJQUFJLE1BQU0sS0FBSyxJQUFJLEVBQUU7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RXpCOztZQUNFLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUM3QixNQUFNLENBQUMsVUFBQyxHQUFHLEVBQUUsR0FBRyxJQUFLLE9BQUEsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFJLEdBQUssRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBbkMsQ0FBbUMsRUFBRSxHQUFHLENBQUM7UUFDakUsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBQ0gsbUJBQUM7QUFBRCxDQUFDLEFBdm9CRCxJQXVvQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1ZhclR5cGV9IGZyb20gJ0Blci90eXBlcyc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQge0NhY2hlVXRpbHN9IGZyb20gJy4uL2NhY2hlJztcblxuZXhwb3J0IGNsYXNzIENvbW1vbnNVdGlscyB7XG5cbiAgc3RhdGljIGxvZGFzaCgpOiB0eXBlb2YgXyB7XG4gICAgcmV0dXJuIF87XG4gIH1cblxuICBzdGF0aWMgZ2V0U2VxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIENhY2hlVXRpbHMuZ2V0U2VxKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0UmFuZG9tTnVtYmVyKG1heDogbnVtYmVyID0gMTAsIG1pbj86IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCArIDEpICsgKG1pbiB8fCAwKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmpXaGVuU3RyPFQgZXh0ZW5kcyB7IFtrZXk6IHN0cmluZ106IGFueSB9PihzcmM6IHN0cmluZyB8IFQsIGtleToga2V5b2YgVCk6IFQge1xuICAgIGNvbnN0IHJlc3VsdCA9ICh0eXBlb2Ygc3JjID09PSAnc3RyaW5nJykgPyB7W2tleV06IHNyY30gYXMgVCA6IHNyYztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgc3RhdGljIGdldFZhclR5cGUob2JqZWN0KTogVmFyVHlwZSB7XG4gICAgbGV0IHR5cGUgPSBWYXJUeXBlLlVOS05PV047XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkge1xuICAgICAgdHlwZSA9IFZhclR5cGUuTlVMTDtcbiAgICB9IGVsc2UgaWYgKG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0eXBlID0gVmFyVHlwZS5VTkRFRklORUQ7XG4gICAgfSBlbHNlIGlmIChvYmplY3QgPT09IHRydWUgfHwgb2JqZWN0ID09PSBmYWxzZSkge1xuICAgICAgdHlwZSA9IFZhclR5cGUuQk9PTEVBTjtcbiAgICB9XG4gICAgaWYgKHR5cGUgIT09IFZhclR5cGUuVU5LTk9XTikge1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICAgIGNvbnN0IG9iamVjdFR5cGUgPSB0eXBlb2Ygb2JqZWN0O1xuICAgIGlmIChvYmplY3RUeXBlID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gaWYgKERhdGVVdGlscy5pc0RhdGUob2JqZWN0KSkge1xuICAgICAgLy8gICByZXR1cm4gVmFyVHlwZS5EQVRFO1xuICAgICAgLy8gfVxuICAgICAgdHlwZSA9IFZhclR5cGUuU1RSSU5HO1xuICAgIH0gZWxzZSBpZiAob2JqZWN0VHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHR5cGUgPSBWYXJUeXBlLk5VTUJFUjtcbiAgICB9IGVsc2UgaWYgKG9iamVjdFR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHR5cGUgPSBWYXJUeXBlLkZVTkNUSU9OO1xuICAgIH1cbiAgICBpZiAob2JqZWN0LmNvbnN0cnVjdG9yID09PSBbXS5jb25zdHJ1Y3Rvcikge1xuICAgICAgdHlwZSA9IFZhclR5cGUuQVJSQVk7XG4gICAgfSBlbHNlIGlmIChvYmplY3QuY29uc3RydWN0b3IgPT09IHt9LmNvbnN0cnVjdG9yKSB7XG4gICAgICB0eXBlID0gVmFyVHlwZS5KU09OO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIHN0YXRpYyBpc051bGxPclVuZGVmaW5lZCh2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGw7XG4gIH1cblxuICBzdGF0aWMgaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuU1RSSU5HO1xuICB9XG5cbiAgc3RhdGljIGlzQm9vbGVhbihvYmopIHtcbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFZhclR5cGUob2JqKSA9PT0gVmFyVHlwZS5CT09MRUFOO1xuICB9XG5cbiAgc3RhdGljIGlzRW1wdHlTdHJpbmcocykge1xuICAgIHJldHVybiAhcyB8fCBDb21tb25zVXRpbHMuaXNTdHJpbmcocykgJiYgcy50cmltKCkubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgc3RhdGljIGlzQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuQVJSQVk7XG4gIH1cblxuICBzdGF0aWMgaXNOdW1iZXIob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuTlVNQkVSO1xuICB9XG5cbiAgc3RhdGljIGlzSnNvbihvYmopIHtcbiAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmdldFZhclR5cGUob2JqKSA9PT0gVmFyVHlwZS5KU09OO1xuICB9XG5cbiAgc3RhdGljIGlzRnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikgPT09IFZhclR5cGUuRlVOQ1RJT047XG4gIH1cblxuICBzdGF0aWMgaXNVcmwoc3RyKSB7XG4gICAgY29uc3QgcmVnZXhwID0gLyhmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8vO1xuICAgIHJldHVybiByZWdleHAudGVzdChzdHIpO1xuICB9XG5cbiAgc3RhdGljIGlzSW50ZWdlcihzdHI6IHN0cmluZykge1xuICAgIHJldHVybiAhQ29tbW9uc1V0aWxzLmlzTnVsbE9yVW5kZWZpbmVkKHN0cikgJiYgL15cXGQrJC8udGVzdChzdHIpO1xuICB9XG5cbiAgc3RhdGljIGlzRXF1YWwodmFsdWUsIG90aGVyKSB7XG4gICAgcmV0dXJuIF8uaXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xuICB9XG5cbiAgc3RhdGljIGNvcHkob2JqOiBhbnkpIHtcbiAgICByZXR1cm4gXy5jbG9uZURlZXAob2JqKTtcbiAgfVxuXG4gIHN0YXRpYyBtZXJnZShvYmoxLCAuLi5vYmoyKSB7XG4gICAgcmV0dXJuIF8ubWVyZ2UuYXBwbHkobnVsbCwgW29iajEsIC4uLm9iajJdKTtcbiAgfVxuXG4gIHN0YXRpYyBwaWNrQnkob2JqLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gXy5waWNrQnkob2JqLCBwcmVkaWNhdGUpO1xuICB9XG5cbiAgc3RhdGljIHBpY2sob2JqLCBrZXlzKSB7XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGtleXMpO1xuICB9XG5cbiAgc3RhdGljIGRlZmF1bHRzKG9iajEsIC4uLm9iajIpIHtcbiAgICByZXR1cm4gXy5kZWZhdWx0c0RlZXAuYXBwbHkodW5kZWZpbmVkLCBbb2JqMSwgLi4ub2JqMl0pO1xuICB9XG5cbiAgc3RhdGljIGVxdWFscyhvYmoxLCBvYmoyKSB7XG4gICAgcmV0dXJuIF8uaXNFcXVhbChvYmoxLCBvYmoyKTtcbiAgfVxuXG4gIHN0YXRpYyBzZXQob2JqOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSwgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiBfLnNldChvYmosIHBhdGgsIHZhbHVlKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQob2JqLCBwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSwgZGVmYXVsdFZhbHVlPzogYW55KSB7XG4gICAgcmV0dXJuIF8uZ2V0KG9iaiwgcGF0aCwgZGVmYXVsdFZhbHVlKTtcbiAgfVxuXG4gIHN0YXRpYyBleHRlbmQob2JqLCBzb3VyY2UpIHtcbiAgICByZXR1cm4gXy5leHRlbmQob2JqLCBzb3VyY2UpO1xuICB9XG5cbiAgc3RhdGljIGNvbXBhY3QoY29sbGVjdGlvbjogYW55W10pIHtcbiAgICByZXR1cm4gXy5jb21wYWN0KGNvbGxlY3Rpb24pO1xuICB9XG5cbiAgc3RhdGljIG9taXQob2JqOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBwYXRoOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gXy5vbWl0KG9iaiwgcGF0aCk7XG4gIH1cblxuICBzdGF0aWMgb21pdEJ5KG9iajogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgcHJlZGljYXRlOiAoKHYpID0+IGJvb2xlYW4pKSB7XG4gICAgcmV0dXJuIF8ub21pdEJ5KG9iaiwgcHJlZGljYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyB1bnNldChvYmo6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHBhdGg6IHN0cmluZyB8IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIF8udW5zZXQob2JqLCBwYXRoKTtcbiAgfVxuXG4gIHN0YXRpYyBmaW5kKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBfLmZpbmQoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBmaW5kSW5kZXgoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIF8uZmluZEluZGV4KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk6IGFueVtdIHtcbiAgICByZXR1cm4gXy5yZW1vdmUoY29sbGVjdGlvbiwgcHJlZGljYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBmb3JPd24ob2JqLCBpdGVyYXRlZTogKHZhbHVlLCBrZXksIG8pID0+IGFueSkge1xuICAgIHJldHVybiBfLmZvck93bihvYmosIGl0ZXJhdGVlKTtcbiAgfVxuXG4gIHN0YXRpYyBtYXAob2JqOiBhbnlbXSwgaXRlcmF0ZWU6ICh2YWx1ZSwgaW5kZXgsIGxpc3QpID0+IGFueSkge1xuICAgIHJldHVybiBfLm1hcChvYmosIGl0ZXJhdGVlKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmlxdWUob2JqOiBhbnlbXSwgYnkpIHtcbiAgICByZXR1cm4gXy51bmlxQnkob2JqLCBieSk7XG4gIH1cblxuICBzdGF0aWMgb3JkZXJCeShvYmo6IGFueVtdLCBpdGVyYXRlZXMsIG9yZGVycz8pIHtcbiAgICByZXR1cm4gXy5vcmRlckJ5KG9iaiwgaXRlcmF0ZWVzLCBvcmRlcnMpO1xuICB9XG5cbiAgc3RhdGljIHVuaW9uKC4uLm9iajogYW55W11bXSkge1xuICAgIHJldHVybiBfLnVuaW9uKG9iaik7XG4gIH1cblxuICBzdGF0aWMgZmxhdHRlbihvYmopIHtcbiAgICByZXR1cm4gXy5mbGF0dGVuKG9iaik7XG4gIH1cblxuICBzdGF0aWMgZmxhdHRlbkRlZXAob2JqKSB7XG4gICAgcmV0dXJuIF8uZmxhdHRlbkRlZXAob2JqKTtcbiAgfVxuXG4gIHN0YXRpYyBmb3JtYXQoc3JjLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gc3JjO1xuICB9XG5cbiAgc3RhdGljIGpzb25Db25jYXQobzEsIG8yKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbzIpIHtcbiAgICAgIG8xW2tleV0gPSBvMltrZXldO1xuICAgIH1cbiAgICByZXR1cm4gbzE7XG4gIH1cblxuICBzdGF0aWMgZXNjYXBlKG9iajoge30sIGtleTogc3RyaW5nKToge30ge1xuICAgIGNvbnN0IHtba2V5XTogZGVsZXRlZEl0ZW0sIC4uLnJlc3R9ID0gb2JqO1xuICAgIHJldHVybiByZXN0O1xuICB9XG5cbiAgc3RhdGljIGZpbHRlcihjb2xsZWN0aW9uLCBwcmVkaWNhdGUpOiBhbnlbXSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG4gIH1cblxuICBzdGF0aWMgd2hlcmUob2JqOiB7fSwgcHJlZGljYXRlOiB7fSkge1xuICAgIGlmIChPYmplY3Qua2V5cyhwcmVkaWNhdGUpLmV2ZXJ5KGtleSA9PiBvYmogJiYgb2JqW2tleV0gPT09IHByZWRpY2F0ZVtrZXldKSkge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNhcGl0YWxpemUocykge1xuICAgIGlmIChzKSB7XG4gICAgICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0ZW1wbGF0ZVN0cihzOiBzdHJpbmcsIHZhcnM6IHt9KSB7XG4gICAgY29uc3QgY29tcGlsZWQgPSBfLnRlbXBsYXRlKHMpO1xuICAgIHJldHVybiBjb21waWxlZCh2YXJzKTtcbiAgfVxuXG4gIHN0YXRpYyBpc1RlbXBsYXRlU3RyKHM6IHN0cmluZykge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSAvLipcXCR7Lip9LiovLnRlc3QocykgfHwgLy4qPCU9KC4qKSU+LiovLnRlc3Qocyk7XG4gICAgcmV0dXJuIGlzTWF0Y2g7XG4gIH1cblxuICBzdGF0aWMgZ2V0QXJyYXk8VCA9IGFueT4oaXRlbTogeyBba2V5OiBzdHJpbmddOiBUIH0gfCBUW10sIGtleU5hbWU/OiBzdHJpbmcpOiBUW10ge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShpdGVtKSkge1xuICAgICAgICByZXR1cm4gaXRlbSBhcyBUW107XG4gICAgICB9IGVsc2UgaWYgKENvbW1vbnNVdGlscy5pc0pzb24oaXRlbSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gIGl0ZW0pIHtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBsZXQgYyA9IGl0ZW1ba2V5XTtcbiAgICAgICAgICAgIGlmIChrZXlOYW1lKSB7XG4gICAgICAgICAgICAgIGMgPSB7W2tleU5hbWVdOiBrZXksIC4uLmN9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIHN0YXRpYyByZW1vdmVLZXlzKG9iajoge30sIC4uLmtleXM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IG8gPSBvYmo7XG4gICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgbyA9IENvbW1vbnNVdGlscy5zZXQobywga2V5cywgdW5kZWZpbmVkKTtcbiAgICAgIENvbW1vbnNVdGlscy51bnNldChvLCBrZXlzKTtcbiAgICAgIGtleXMucG9wKCk7XG4gICAgICBjb25zdCB2ID0gQ29tbW9uc1V0aWxzLmdldChvLCBrZXlzKTtcbiAgICAgIGlmICghQ29tbW9uc1V0aWxzLmlzRW1wdHkodikpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvO1xuICB9XG5cbiAgc3RhdGljIGV4dHJhY3QodmFsdWU6IGFueVtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpIHtcbiAgICBsZXQgdGFyZ2V0OiBudW1iZXI7XG4gICAgaWYgKHZhbHVlICYmIChmcm9tICE9PSB0bykpIHtcbiAgICAgIGlmICh0byA+PSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgdGFyZ2V0ID0gdG8gLSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIHdoaWxlICgodGFyZ2V0LS0pICsgMSkge1xuICAgICAgICAgIHZhbHVlLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsdWUuc3BsaWNlKHRvLCAwLCB2YWx1ZS5zcGxpY2UoZnJvbSwgMSlbMF0pO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhZGRJdGVtKHNyY0FycmF5OiBhbnlbXSwgaXRlbTogYW55LCBpbmRleD86IG51bWJlcikge1xuICAgIGxldCB0b0FkZCA9IGl0ZW07XG4gICAgaWYgKCFDb21tb25zVXRpbHMuaXNBcnJheShpdGVtKSkge1xuICAgICAgdG9BZGQgPSBbaXRlbV07XG4gICAgfVxuICAgIGlmIChpbmRleCkge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdChzcmNBcnJheS5zbGljZSgwLCBpbmRleCksIHRvQWRkLCBzcmNBcnJheS5zbGljZShpbmRleCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KHNyY0FycmF5LCB0b0FkZCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlbW92ZUJ5SW5kZXgoYTogYW55W10sIGluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gW10uY29uY2F0KGEuc2xpY2UoMCwgaW5kZXgpLCBhLnNsaWNlKGluZGV4ICsgMSkpO1xuICB9XG5cbiAgc3RhdGljIHJlcGxhY2U8VD4oYTogVFtdLCBpbmRleDogbnVtYmVyLCBlbGVtZW50OiBUKTogVFtdIHtcbiAgICByZXR1cm4gW10uY29uY2F0KGEuc2xpY2UoMCwgaW5kZXgpLCBlbGVtZW50LCBhLnNsaWNlKGluZGV4ICsgMSkpO1xuICB9XG5cbiAgc3RhdGljIG1vdmU8VD4oYTogVFtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiBUW10ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBhW2Zyb21dO1xuICAgIGNvbnN0IGZvcndhcmQgPSBmcm9tIDwgdG87XG4gICAgY29uc3QgaGVhZCA9IGEuc2xpY2UoMCwgZm9yd2FyZCA/IGZyb20gOiB0byk7XG4gICAgY29uc3QgbWlkID0gYS5zbGljZShmb3J3YXJkID8gZnJvbSArIDEgOiB0bywgZm9yd2FyZCA/IHRvICsgMSA6IGZyb20pO1xuICAgIGNvbnN0IHRhaWwgPSBhLnNsaWNlKGZvcndhcmQgPyB0byArIDEgOiBmcm9tICsgMSk7XG4gICAgcmV0dXJuIGZvcndhcmQgP1xuICAgICAgW10uY29uY2F0KGhlYWQsIG1pZCwgZWxlbWVudCwgdGFpbCkgOlxuICAgICAgW10uY29uY2F0KGhlYWQsIGVsZW1lbnQsIG1pZCwgdGFpbCk7XG4gIH1cblxuICBzdGF0aWMgcmVzdG9yZUZuKHZhbHVlKSB7XG4gICAgaWYgKCh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSAmJiB2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnRyaW0oKS5pbmRleE9mKCdmdW5jdGlvbicpID09PSAwKSB7XG4gICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gJyArIHZhbHVlLnJlcGxhY2UoL190aGlzL2csICd0aGlzJylcbiAgICAgICAgLnJlcGxhY2UoL19fYXNzaWduL2csICdPYmplY3QuYXNzaWduJykpKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5o6S6Zmka2V55Li6a++8jHZhbHVl5Li6diDnmoTmlbDmja7poblcbiAgICovXG4gIHN0YXRpYyBleGNsdWRlKHNyYzoge30sIGs6IHN0cmluZywgdjogYW55KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmtleXMoc3JjKS5yZWR1Y2UoKGFjYywga2V5KSA9PiAoXG4gICAgICBzcmNba2V5XVtrXSA9PT0gdiA/IGFjYyA6IHtcbiAgICAgICAgLi4uYWNjLFxuICAgICAgICBba2V5XTogc3JjW2tleV1cbiAgICAgIH0pLCB7fSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7/mjaJzcmPkuK3nmoQge2ssb30g5YWD57SgIOS4uiB7ayx2fVxuICAgKi9cbiAgc3RhdGljIHJlcGxhY2VPYmooc3JjOiBhbnlbXSwgazogc3RyaW5nLCBvOiBhbnksIHY6IGFueSkge1xuICAgIGNvbnN0IGluZGV4ID0gXy5maW5kKHNyYywge1trXTogb30pO1xuICAgIHJldHVybiBbXG4gICAgICAuLi5zcmMuc2xpY2UoMCwgaW5kZXgpLFxuICAgICAge1xuICAgICAgICAuLi5zcmNbaW5kZXhdLFxuICAgICAgICBba106IHZcbiAgICAgIH0sXG4gICAgICAuLi5zcmMuc2xpY2UoaW5kZXggKyAxKVxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICog5ZCI5bm2IHt9IOWSjCBbXVxuICAgKi9cbiAgc3RhdGljIGNvbmNhdChzcmMxOiB7fSwgc3JjMjoge31bXSwgazogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNyYzEsXG4gICAgICAuLi5zcmMyLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiAoe1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtpdGVtW2tdXTogaXRlbVxuICAgICAgfSksIHt9KVxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgcmVzdG9yZUpzb25Gbihqc29uOiBzdHJpbmcgfCB7fSkge1xuICAgIGxldCBqc29uU3RyOiBzdHJpbmc7XG4gICAgaWYgKHR5cGVvZiBqc29uID09PSAnc3RyaW5nJykge1xuICAgICAganNvblN0ciA9IGpzb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGpzb25TdHIgPSBDb21tb25zVXRpbHMuc3RyaW5naWZ5KGpzb24pO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uU3RyLCAoa2V5LCB2YWx1ZSkgPT4gQ29tbW9uc1V0aWxzLnJlc3RvcmVGbih2YWx1ZSkpO1xuICB9XG5cbiAgc3RhdGljIHN0cmluZ2lmeShqc29uOiB7fSkge1xuICAgIGZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGpzb24sIHJlcGxhY2VyKTtcbiAgfVxuXG4gIHN0YXRpYyBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhcmFjdGVyID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyYWN0ZXI7XG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cbiAgICByZXR1cm4gaGFzaDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmoLnmja5vcHRpb25z5a6a5LmJ77yM6L2s5o2ic3JjXG4gICAqICBvcHRpb25zOntcbiAgICogICAgc3JjLWtleTogdGFyLWtleSB8IHtrZXk6dGFyLWtleSxvcHRpb25zOnt9fSB8IEZ1bmN0aW9uXG4gICAqICB9XG4gICAqL1xuICBzdGF0aWMgYWRhcHRPYmplY3Qoc3JjLCBvcHRpb25zOiB7fSkge1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShzcmMpKSB7XG4gICAgICByZXR1cm4gQ29tbW9uc1V0aWxzLmFkYXB0QXJyYXkoc3JjLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENvbW1vbnNVdGlscy5hZGFwdEpzb24oc3JjLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYWRhcHRKc29uKHNyYywgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3Qgc3JjVmFsdWUgPSBDb21tb25zVXRpbHMuZ2V0KHNyYywga2V5KTtcbiAgICAgIGlmIChzcmNWYWx1ZSkge1xuICAgICAgICBpZiAoQ29tbW9uc1V0aWxzLmlzQXJyYXkoc3JjVmFsdWUpKSB7XG4gICAgICAgICAgbGV0IHRhcktleSA9IG51bGw7XG4gICAgICAgICAgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhvcHRpb25zW2tleV0pKSB7XG4gICAgICAgICAgICB0YXJLZXkgPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcktleSA9IG9wdGlvbnNba2V5XVsna2V5J107XG4gICAgICAgICAgfVxuICAgICAgICAgIENvbW1vbnNVdGlscy5zZXQocmVzdWx0LCB0YXJLZXksIENvbW1vbnNVdGlscy5hZGFwdEFycmF5KHNyY1ZhbHVlLCBvcHRpb25zW2tleV1bJ29wdGlvbnMnXSB8fCBvcHRpb25zKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzSnNvbihzcmNWYWx1ZSkpIHtcbiAgICAgICAgICBDb21tb25zVXRpbHMuc2V0KHJlc3VsdCwgb3B0aW9uc1trZXldLCBDb21tb25zVXRpbHMuYWRhcHRKc29uKHNyY1ZhbHVlLCBvcHRpb25zW2tleV1bJ29wdGlvbnMnXSB8fCB7fSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChDb21tb25zVXRpbHMuaXNTdHJpbmcob3B0aW9uc1trZXldKSkge1xuICAgICAgICAgICAgQ29tbW9uc1V0aWxzLnNldChyZXN1bHQsIG9wdGlvbnNba2V5XSwgc3JjVmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzRnVuY3Rpb24ob3B0aW9uc1trZXldKSkge1xuICAgICAgICAgICAgQ29tbW9uc1V0aWxzLnNldChyZXN1bHQsIG9wdGlvbnNba2V5XSwgb3B0aW9uc1trZXldLmFwcGx5KHVuZGVmaW5lZCwgc3JjLCBvcHRpb25zKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHN0YXRpYyBhZGFwdEFycmF5KHNyYywgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIHNyYy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgcmVzdWx0LnB1c2goQ29tbW9uc1V0aWxzLmFkYXB0T2JqZWN0KGl0ZW0sIG9wdGlvbnMpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cblxuICBzdGF0aWMgZ2V0QWdlKGRhdGVTdHJpbmcpIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgYmlydGhEYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgbGV0IGFnZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgLSBiaXJ0aERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoRGF0ZS5nZXRNb250aCgpO1xuICAgIGlmIChtIDwgMCB8fCAobSA9PT0gMCAmJiB0b2RheS5nZXREYXRlKCkgPCBiaXJ0aERhdGUuZ2V0RGF0ZSgpKSkge1xuICAgICAgYWdlLS07XG4gICAgfVxuICAgIHJldHVybiBhZ2U7XG4gIH1cblxuICBzdGF0aWMgdG9EYXRlKHRhcmdldDogc3RyaW5nIHwgRGF0ZSk6IERhdGUge1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICBpZiAoQ29tbW9uc1V0aWxzLmlzU3RyaW5nKHRhcmdldCkpIHtcbiAgICAgIGNvbnN0IGRhdGVOdW1iZXIgPSBEYXRlLnBhcnNlKHRhcmdldCk7XG4gICAgICByZXR1cm4gIWlzTmFOKGRhdGVOdW1iZXIpID8gbmV3IERhdGUoZGF0ZU51bWJlcikgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBpc0JlZm9yZSh0YXIsIGRhdGU6IHN0cmluZyB8IERhdGUgPSBuZXcgRGF0ZSgpKSB7XG4gICAgY29uc3Qgc3JjID0gQ29tbW9uc1V0aWxzLnRvRGF0ZShkYXRlKTtcbiAgICBjb25zdCBvcmlnaW5hbCA9IENvbW1vbnNVdGlscy50b0RhdGUodGFyKTtcbiAgICByZXR1cm4gISEob3JpZ2luYWwgJiYgc3JjICYmIG9yaWdpbmFsIDwgc3JjKTtcbiAgfVxuXG4gIHN0YXRpYyBpc0FmdGVyKHRhciwgZGF0ZTogc3RyaW5nIHwgRGF0ZSA9IG5ldyBEYXRlKCkpIHtcbiAgICBjb25zdCBzcmMgPSBDb21tb25zVXRpbHMudG9EYXRlKGRhdGUpO1xuICAgIGNvbnN0IG9yaWdpbmFsID0gQ29tbW9uc1V0aWxzLnRvRGF0ZSh0YXIpO1xuICAgIHJldHVybiAhIShvcmlnaW5hbCAmJiBzcmMgJiYgb3JpZ2luYWwgPiBzcmMpO1xuICB9XG5cbiAgc3RhdGljIHRvU3RyaW5nKG9iajogYW55KSB7XG4gICAgc3dpdGNoIChDb21tb25zVXRpbHMuZ2V0VmFyVHlwZShvYmopKSB7XG4gICAgICBjYXNlIFZhclR5cGUuTlVMTDpcbiAgICAgIGNhc2UgVmFyVHlwZS5VTkRFRklORUQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIGNhc2UgVmFyVHlwZS5BUlJBWToge1xuICAgICAgICBjb25zdCBhID0gW107XG4gICAgICAgIG9iai5mb3JFYWNoKG8gPT4gYS5wdXNoKENvbW1vbnNVdGlscy50b1N0cmluZyhvKSkpO1xuICAgICAgICByZXR1cm4gYFske2Euam9pbignLCcpfV1gO1xuICAgICAgfVxuICAgICAgY2FzZSBWYXJUeXBlLkpTT046XG4gICAgICAgIHJldHVybiBDb21tb25zVXRpbHMuc3RyaW5naWZ5KG9iaik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGlzRW1wdHkob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgICBzd2l0Y2ggKENvbW1vbnNVdGlscy5nZXRWYXJUeXBlKG9iaikpIHtcbiAgICAgIGNhc2UgVmFyVHlwZS5OVUxMOlxuICAgICAgY2FzZSBWYXJUeXBlLlVOREVGSU5FRDpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBjYXNlIFZhclR5cGUuU1RSSU5HOlxuICAgICAgICByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICAgIGNhc2UgVmFyVHlwZS5BUlJBWTpcbiAgICAgICAgcmV0dXJuIChvYmogYXMgYW55W10pLmxlbmd0aCA9PT0gMDtcbiAgICAgIGNhc2UgVmFyVHlwZS5KU09OOlxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCkubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0VG9Cb29sZWFuKGF0dHJpYnV0ZXM6IHt9LCBrZXlzOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGxfYXR0cmlidXRlcyA9IHsuLi5hdHRyaWJ1dGVzfTtcbiAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAobF9hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkgJiYgbF9hdHRyaWJ1dGVzW2tleV0gPT09ICcnKSB7XG4gICAgICAgICAgbF9hdHRyaWJ1dGVzW2tleV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGxfYXR0cmlidXRlcztcbiAgfVxuXG4gIHN0YXRpYyBmbGF0UGF0aChwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNBcnJheShwYXRoKSkge1xuICAgICAgcmV0dXJuICg8c3RyaW5nW10+cGF0aCkuam9pbignLScpLnJlcGxhY2UoJy4nLCAnLScpO1xuICAgIH1cbiAgICByZXR1cm4gKDxzdHJpbmc+cGF0aCkucmVwbGFjZSgnLicsICctJyk7XG4gIH1cblxuICBzdGF0aWMgam9pbihhcnIsIHNlcGVyYXRvcj8pIHtcbiAgICBjb25zdCBqb2luZXIgPSBzZXBlcmF0b3IgfHwgJywnO1xuXG4gICAgaWYgKCFhcnIpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAoIUNvbW1vbnNVdGlscy5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfVxuXG4gICAgc3dpdGNoIChhcnIubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGFyclswXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBhcnIuam9pbihqb2luZXIpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkZWVwRmluZChvYmosIC4uLnByZWRpY2F0ZXMpOiBhbnlbXSB7XG5cbiAgICBjb25zdCBfZmluZCA9IChvKSA9PiB7XG4gICAgICBpZiAobyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICg8YW55W10+bykuZm9yRWFjaChpID0+IF9maW5kKGkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBvKSB7XG4gICAgICAgICAgaWYgKG9bcHJvcF0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgX2ZpbmQob1twcm9wXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByZWRpY2F0ZXMuc29tZSgocHJlZGljYXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZm91bmQgPSBDb21tb25zVXRpbHMud2hlcmUobywgcHJlZGljYXRlKTtcbiAgICAgICAgICBpZiAoZm91bmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvdW5kUmVzdWx0cy5wdXNoKG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZm91bmQgIT09IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBmb3VuZFJlc3VsdHMgPSBbXTtcblxuICAgIF9maW5kKG9iaik7XG5cbiAgICByZXR1cm4gZm91bmRSZXN1bHRzO1xuICB9XG5cbiAgc3RhdGljIHNsZWVwKG1pbGxpc2Vjb25kcykge1xuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxZTc7IGkrKykge1xuICAgICAgaWYgKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0KSA+IG1pbGxpc2Vjb25kcykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QXJyYXlWYWx1ZShkYXRhOiBhbnkpOiBhbnlbXSB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc0FycmF5KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGVsc2UgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhkYXRhKSkge1xuICAgICAgcmV0dXJuICg8c3RyaW5nPmRhdGEpLnNwbGl0KCcsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbZGF0YV07XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFRleHQoZGF0YTogYW55KSB7XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc0FycmF5KGRhdGEpKSB7XG4gICAgICByZXR1cm4gKDxhbnlbXT5kYXRhKS5tYXAodiA9PiBDb21tb25zVXRpbHMuZ2V0VGV4dCh2KSkuam9pbignLCcpO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzSnNvbihkYXRhKSkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH0gZWxzZSBpZiAoQ29tbW9uc1V0aWxzLmlzQm9vbGVhbihkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEgPyAn5pivJyA6ICflkKYnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VmFsdWUoZXhwLCAuLi5jb250ZXh0KTogYW55IHtcbiAgICBjb25zdCBmbiA9IGV4cCAmJiAoZXhwWydtZXRob2QnXSB8fCBleHApO1xuICAgIGlmIChDb21tb25zVXRpbHMuaXNGdW5jdGlvbihmbikpIHtcbiAgICAgIHJldHVybiA8RnVuY3Rpb24+Zm4uYXBwbHkodW5kZWZpbmVkLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKENvbW1vbnNVdGlscy5pc1N0cmluZyhleHApICYmIGV4cC5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgIHJldHVybiBDb21tb25zVXRpbHMuZ2V0KGNvbnRleHQgJiYgY29udGV4dFswXSwgZXhwLnN1YnN0cigxKSk7XG4gICAgfVxuICAgIHJldHVybiBleHA7XG4gIH1cblxuICBzdGF0aWMgZGVmaW5lSGlkZGVuUHJvcChvYmosIHByb3AsIGRlZmF1bHRWYWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHtlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZX0pO1xuICAgIG9ialtwcm9wXSA9IGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIHN0YXRpYyBzcGxpdEJ5U2l6ZShzdHIsIHNpemUpIHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgbGV0IGkgPSBzaXplO1xuICAgIHdoaWxlIChpIDw9IHN0ci5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdHMucHVzaChzdHIuc3Vic3RyKDAsIGkpKTtcbiAgICAgIGkgKz0gc2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBzdGF0aWMgcmVzb2x2ZVVybCh1cmw6IHN0cmluZywgcGFyYW1zOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IF91cmwgPSBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgICAucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjLnJlcGxhY2UoYDoke2tleX1gLCBwYXJhbXNba2V5XSksIHVybCk7XG4gICAgcmV0dXJuIF91cmw7XG4gIH1cbn1cbiJdfQ==